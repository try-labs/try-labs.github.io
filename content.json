{"meta":{"title":"Samçš„ä¸ªäººåšå®¢","subtitle":"ä¸€ä¸ªç¨‹åºå‘˜çš„æˆé•¿è®°å½•","description":"ä¸€ä¸ªç¨‹åºå‘˜çš„æˆé•¿è®°å½•","author":"Sam","url":"https://ydstudios.gitee.io","root":"/"},"pages":[{"title":"å‹æƒ…é“¾æ¥","date":"2020-01-11T17:54:54.000Z","updated":"2020-01-11T10:25:22.000Z","comments":true,"path":"links/index.html","permalink":"https://ydstudios.gitee.io/links/index.html","excerpt":"","text":"heyangli.com æ’åä¸åˆ†å…ˆåï¼Œæ¬¢è¿è®¿é—®(ï½ï¿£â–½ï¿£)ï½ å‹é“¾ç”³è¯·è¦æ±‚ï¼š åšå®¢å¯ä»¥è¢«ç¨³å®šè®¿é—®ï¼ŒåŸåˆ™ä¸Šåªä¸åŸåˆ›æŠ€æœ¯ç±»åšå®¢è¿›è¡Œå‹é“¾äº’æ¢ é¡µé¢æ— ç¹æ‚å¹¿å‘Šæ¨å¹¿"},{"title":"","date":"2019-12-16T07:19:54.000Z","updated":"2021-01-10T06:30:12.000Z","comments":true,"path":"about/index.html","permalink":"https://ydstudios.gitee.io/about/index.html","excerpt":"","text":"æˆ‘çš„ä¸ªäººä¿¡æ¯ å­¦å†ä¸“ä¸šï¼šæœ¬ç§‘ / è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯ä¸“ä¸š è‹±è¯­æ°´å¹³ï¼šCET-4 å…¶ä»–è¯ä¹¦ï¼šå…¨å›½è®¡ç®—æœºç­‰çº§è€ƒè¯•å››çº§ç½‘ç»œå·¥ç¨‹å¸ˆ å¾®ä¿¡ï¼šLY123456520 (åŠ å¾®ä¿¡æ—¶è¯·æ³¨æ˜æ¥æ„) ä¸ªäººçˆ±å¥½ çˆ±çœ‹ç”µå½±å’Œç¾é£Ÿã€‚ å–œæ¬¢é˜…è¯»æŠ€æœ¯å’Œå†å²æ–¹é¢çš„ä¹¦ç±ã€‚ æŠ€æœ¯è§†é‡å¼€é˜”å–œæ¬¢é’»ç ”ï¼Œå­¦ä¹ èƒ½åŠ›ä¸é”™ã€‚ è‰¯å¥½çš„è®¾è®¡å’Œç¼–ç å“å‘³ï¼Œå¯¹ä¼˜é›…çš„ä»£ç æœ‰ä¸€å®šçš„è¿½æ±‚ã€‚ å…·æœ‰ä¸€å®šçš„æ²Ÿé€šèƒ½åŠ›å’Œé«˜åº¦çš„å›¢é˜Ÿåˆä½œæ„è¯†ï¼Œèƒ½å¿«é€Ÿçš„èå…¥å›¢é˜Ÿã€‚ æŠ˜è…¾&#8195;ä»å¤§ä¸‰å¼€å§‹æŠ˜è…¾ä¸€äº›å…è´¹çš„ç©ºé—´ï¼Œæ­å»ºä¸€ä¸ªä¸ªäººä¸»é¡µå°±å¼€å¿ƒçš„ä¸å¾—äº†ã€‚åæ¥æ¯•ä¸šäº†ï¼Œå¸‚é¢ä¸Šæœ‰å¾ˆå¤šå¼€æºçš„åšå®¢æ¡†æ¶æˆ‘æ²¡æœ‰ç”¨ï¼Œè‡ªå·±ç”¨PHPä»å¤´åšäº†ä¸€ä¸ªåšå®¢ç¨‹åºï¼Œåœ¨goddayä¸Šä¹°åŸŸåã€åœ¨Bandwagonã€ConoHaç­‰ä¸Šä¹°æœåŠ¡å™¨ï¼Œåšå®¢æäº†ä¸€å¹´å¤šï¼Œæœ€åç”±äºå·¥ä½œå¤ªå¿™äº†å°±æ”¾å¼ƒäº†ã€‚&#8195;å†åæ¥å¤§æ¦‚17å¹´çš„æ—¶å€™ï¼Œçœ‹åˆ°åŒäº‹çš„å°ç½‘ç«™æçš„é£ç”Ÿæ°´èµ·çš„ï¼Œæˆ‘åˆå¼€å§‹æŠ˜è…¾äº†ï¼é‚£æ®µæ—¶é—´æˆ‘ä¸€è¿æäº†ä¸€ä¸ªç”µå½±ç½‘ç«™ã€ä¸€ä¸ªå›¾ç‰‡ç½‘ç«™è¿˜æœ‰ä¸€ä¸ªç£åŠ›é“¾æœç´¢ç½‘ç«™ï¼Œå¯¹åº”çš„ä¹Ÿä¹°äº†å¥½å‡ ä¸ªåŸŸåï¼ï¼ˆç°åœ¨éƒ½è¿‡æœŸå•¦ï¼‰é‚£ä¸ªæ—¶å€™å¾ˆé•¿ä¸€æ®µæ—¶é—´éƒ½æ˜¯åœ¨ä¹°æœåŠ¡å™¨ã€çˆ¬æ•°æ®æˆ–è€…å°±æ˜¯åœ¨é…ç½®ç¯å¢ƒï¼Œå› ä¸ºä¹°çš„éƒ½æ˜¯å›½å¤–çš„vpsï¼Œå¾ˆå®¹æ˜“è¢«å¢™ï¼å°±è¿™æ ·æäº†ä¸€å¹´å¤šï¼Œç½‘ç«™ä¹Ÿè¢«ç™¾åº¦æœå½•äº†ä¸å°‘ï¼Œå¯é‚£ä¸ªæ—¶å€™ç‰ˆæƒæ„è¯†ä¹Ÿè¶Šæ¥è¶Šå¼ºï¼Œåˆç”±äºå·¥ä½œä¸Šçš„å˜åŠ¨ï¼Œè¿™äº›å°±åˆå°±æ”¾å¼ƒäº†ï¼&#8195;å¯æ˜¯17å¹´çš„åŒåä¸€ï¼Œæˆ‘åœ¨é˜¿é‡Œäº‘ä¸Šè¶ç€æ´»åŠ¨ä¹°äº†ä¸€ä¸ªæœåŠ¡å™¨ï¼Œè¿™æ ·åˆæèµ·äº†æˆ‘çš„åšå®¢ã€‚è¿™å›å¯æ˜¯ç”¨äº†å¿ƒğŸ’•äº†ï¼Œé‡æ–°ä¹°äº†ä¸€ä¸ªydstudio.netçš„åŸŸåï¼Œè‡ªå·±åˆæŠŠä¹‹å‰çš„æš‚ä½è¯æ‰¾å›æ¥äº†ï¼Œå—äº¬è¿™è¾¹ç½‘ç«™å¤‡æ¡ˆå¤–åœ°æˆ·å£å¿…é¡»è¦æš‚ä½è¯ï¼Œå»æ‹¿æš‚ä½è¯åˆæ˜¯è¯·äº†å‡ å¤©å‡ï¼Œåœ¨æ­¤ä¸å¾—ä¸åæ§½ä¸€ä¸‹æœ‰äº›ç¤¾åŒºåŠäº‹çœŸæ··ä¹±ğŸ˜„ğŸ˜„ï¼Œåšå®¢ç”¨äº†PHPå†™çš„typechoæ¡†æ¶ï¼Œåœ¨centosä¸Šè£…å¥½Nginxã€MySQLã€PHPã€gitç­‰å¿…å¤‡è½¯ä»¶ï¼ŒæŠŠæ²¡æœ‰ä¸¢çš„æ–‡ç« å‘å¸ƒä¸Šå»ï¼Œè¿™ä¹ˆä¸€å¼„åšå®¢è¿˜æŒºä¸é”™ï¼ğŸ˜ğŸ˜„ğŸ˜„é˜¿é‡Œäº‘ç»­è´¹çœŸæ˜¯è´µå‘€ï¼Œåé¢å°±åªç»­è´¹äº†ä¸€å¹´ã€‚å…œå…œè½¬è½¬è¿›å…¥2019å¹´ï¼Œæ¯æ—¥å·¥ä½œä¹Ÿæ˜¯ç¹çï¼Œçªç„¶è§‰å¾—ä¸€ä¸ªä½œä¸ºç¨‹åºå‘˜ï¼Œæ²¡æœ‰ä¸€ä¸ªå±äºè‡ªå·±çš„åšå®¢è¿˜æ˜¯å·®ç‚¹æ„æ€ï¼è‡ªå·±ä¹°åŸŸåæœåŠ¡å™¨æå¤ªè´¹äº‹äº†ï¼Œæ²¡æœ‰ä»¥å‰é‚£ç§æŠ˜è…¾åŠ²äº†ï¼Œç„¶åå°±å‘ç‚¹æ—¶é—´æ‰¾åˆ°äº†git pageï¼Œæœ€ååˆåœ¨giteeä¸Šä¹Ÿæäº†ä¸€ä»½ï¼Œæˆ‘æƒ³è¿™ä¸ªåˆä¸ç”¨è‡ªå·±å‘æ—¶é—´ç²¾åŠ›å»ç»´æŠ¤ï¼Œæƒ³èµ·æ¥çš„è¯å°±ç”¨markdownå†™å†™æ–‡ç« ï¼Œä¸¤æ¡å‘½ä»¤å°±éƒ¨ç½²ä¸Šå»äº†ï¼Œå¾ˆeasyå‘€ï¼ï¼ï¼ &#8195;ä»å¼€å§‹è‡ªå·±å†™ï¼Œåˆ°ç°åœ¨ç”¨git page,ä¹Ÿæ€»ç®—æ˜¯å®‰å®šä¸‹æ¥äº†ï¼Œå¸Œæœ›èƒ½ä¸€ç›´åšæŒå§ğŸ˜„"},{"title":"æ–‡ç« æ ‡ç­¾","date":"2020-10-11T12:18:00.000Z","updated":"2020-10-11T04:27:26.000Z","comments":true,"path":"tags/index.html","permalink":"https://ydstudios.gitee.io/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"è§£è€¦ç¥å™¨ä¹‹è§‚å¯Ÿè€…æ¨¡å¼","slug":"è§£è€¦ç¥å™¨ä¹‹è§‚å¯Ÿè€…æ¨¡å¼","date":"2021-02-04T23:49:32.000Z","updated":"2021-02-06T08:01:46.000Z","comments":true,"path":"post/5b3d1989.html","link":"","permalink":"https://ydstudios.gitee.io/post/5b3d1989.html","excerpt":"å¤§å®¶æ˜¯ä¸æ˜¯ä¼šç»å¸¸å¬åˆ°æœ‰äººè¯´å†™ä»£ç è¦â€œé«˜å†…èšã€ä½è€¦åˆâ€ï¼Œä½†æ˜¯ä½ è¦æ˜¯é—®ä»–ä»€ä¹ˆæ˜¯é«˜å†…èšä½è€¦åˆï¼ˆwahtï¼‰ï¼Ÿä¸ºä»€ä¹ˆè¦é«˜å†…èšã€ä½è€¦åˆ(why)ï¼Ÿæ€ä¹ˆåšæ‰èƒ½é«˜å†…èšã€ä½è€¦åˆ(how)? è¿™äº›é—®é¢˜å°±ä¸ä¸€å®šéƒ½èƒ½å›ç­”çš„äº†ï¼","text":"å¤§å®¶æ˜¯ä¸æ˜¯ä¼šç»å¸¸å¬åˆ°æœ‰äººè¯´å†™ä»£ç è¦â€œé«˜å†…èšã€ä½è€¦åˆâ€ï¼Œä½†æ˜¯ä½ è¦æ˜¯é—®ä»–ä»€ä¹ˆæ˜¯é«˜å†…èšä½è€¦åˆï¼ˆwahtï¼‰ï¼Ÿä¸ºä»€ä¹ˆè¦é«˜å†…èšã€ä½è€¦åˆ(why)ï¼Ÿæ€ä¹ˆåšæ‰èƒ½é«˜å†…èšã€ä½è€¦åˆ(how)? è¿™äº›é—®é¢˜å°±ä¸ä¸€å®šéƒ½èƒ½å›ç­”çš„äº†ï¼ ç™¾åº¦ç™¾ç§‘ï¼šåœ¨è½¯ä»¶è®¾è®¡ä¸­é€šå¸¸ç”¨è€¦åˆåº¦å’Œå†…èšåº¦ä½œä¸ºè¡¡é‡æ¨¡å—ç‹¬ç«‹ç¨‹åº¦çš„æ ‡å‡†ã€‚åˆ’åˆ†æ¨¡å—çš„ä¸€ä¸ªå‡†åˆ™æ˜¯é«˜å†…èšä½è€¦åˆã€‚ä»æ¨¡å—ç²’åº¦æ¥çœ‹ï¼Œé«˜å†…èšï¼šå°½å¯èƒ½ç±»çš„æ¯ä¸ªæˆå‘˜æ–¹æ³•åªå®Œæˆä¸€ä»¶äº‹ï¼ˆæœ€å¤§é™åº¦çš„èšåˆï¼‰ï¼› ä½è€¦åˆï¼šå‡å°‘ç±»å†…éƒ¨ï¼Œä¸€ä¸ªæˆå‘˜æ–¹æ³•è°ƒç”¨å¦ä¸€ä¸ªæˆå‘˜æ–¹æ³•ã€‚ä»ç±»è§’åº¦æ¥çœ‹ï¼Œ é«˜å†…èšä½è€¦åˆï¼šå‡å°‘ç±»å†…éƒ¨ï¼Œå¯¹å…¶ä»–ç±»çš„è°ƒç”¨ï¼›ä»åŠŸèƒ½å—æ¥çœ‹ï¼Œé«˜å†…èšä½è€¦åˆï¼šå‡å°‘æ¨¡å—ä¹‹é—´çš„äº¤äº’å¤æ‚åº¦ï¼ˆæ¥å£æ•°é‡ï¼Œå‚æ•°æ•°æ®ï¼‰å³æ¨ªå‘ï¼šç±»ä¸ç±»ä¹‹é—´ã€æ¨¡å—ä¸æ¨¡å—ä¹‹é—´ï¼›çºµå‘ï¼šå±‚æ¬¡ä¹‹é—´ï¼›å°½å¯èƒ½ï¼Œå†…å®¹å†…èšï¼Œæ•°æ®è€¦åˆã€‚ æˆ‘æœ¬äººç‰¹åˆ«å–œæ¬¢æè¿æ°æ¼”çš„è¿™ä¸€ç‰ˆéœå…ƒç”²ï¼Œä»–å¹´å°‘è½»ç‹‚ï¼Œå¥½å‹‡æ–—ç‹ ï¼Œå¼±è¿‡ï¼Œå¼ºè¿‡ï¼Œç—›è‹¦è¿‡ï¼ŒæŒ£æ‰è¿‡ï¼Œä¸–äº‹ä¸€åœºå¤§æ¢¦ï¼Œæ´—å‡€é“…åï¼Œæ‚Ÿå‡ºä¾ çš„çœŸè°›ï¼Œç ´èŒ§é‡ç”Ÿï¼Œæˆä¸ºçœŸæ­£çš„ä¾ å£«ã€‚å½“ç„¶æˆ‘ä¸å¤ªå¸Œæœ›æˆ‘çš„ä¸€ç”Ÿè¿™ä¹ˆæ³¢è¡èµ·ä¼ï¼Œå› ä¸ºæˆ‘æ²¡æœ‰ä»–é‚£ä¹ˆå‰å®³ã€‚æˆ‘ç‰¹åˆ«å–œæ¬¢å‰§ä¸­çš„ä¸€å¥è¯å°±æ˜¯â€œåŠŸå¤«æ˜¯éœ€è¦æ—¶é—´å»ç£¨ç»ƒå‡ºæ¥çš„ï¼Œä¸¤ä¸‰å¹´çš„çŒ«è„šåŠŸå¤«ï¼Œè¿™ä¸€æ‹³20å¹´çš„åŠŸå¤«ï¼Œä½ ä»¬æŒ¡å¾—ä½ä¹ˆï¼Ÿâ€ï¼Œä½œä¸ºä¸€ä½ç¨‹åºå‘˜ï¼Œæˆ‘ä»¬å¯¹ä¸šåŠ¡çš„ç†è§£ã€ç³»ç»Ÿçš„è®¾è®¡ã€ä»£ç å®ç°è¿™äº›èƒ½åŠ›ä¹Ÿæ˜¯éœ€è¦ç£¨ç»ƒçš„ï¼Œè€Œä¸”ä¹Ÿè¦æ—¥å¤ä¸€æ—¥çš„ç»ƒä¹ ï¼Œä¸ç„¶ä½ æ€ä¹ˆæŒ¡å¾—ä½é¢è¯•å®˜20å¹´çš„åŠŸå¤«ã€‚ğŸ˜„ğŸ˜„ æœ¬æ–‡å¯¹äºä»€ä¹ˆæ˜¯é«˜å†…èšä½è€¦åˆï¼ˆwahtï¼‰ï¼Ÿä¸ºä»€ä¹ˆè¦é«˜å†…èšã€ä½è€¦åˆ(why)ï¼ŸæŒ‰ä¸‹ä¸è¡¨ï¼Œå°±å…ˆè¯´è¯´ä¸€ç§èƒ½å¤Ÿè®©ä½ çš„ä»£ç é«˜å†…èšä½è€¦åˆçš„æ–¹æ³•ï¼š è§‚å¯Ÿè€…æ¨¡å¼,è¿™ç§è®¾è®¡æ¨¡å¼æˆ‘è®¤ä¸ºå°±å’Œç­–ç•¥æ¨¡å¼ä¸€æ ·çš„å¸¸ç”¨ï¼Œè¿™ä¸¤ç§è®¾è®¡æ¨¡å¼ä¸ä»…å®ç°èµ·æ¥ç®€å•ï¼Œè€Œä¸”æ•ˆæœè¿˜å¥½ï¼å…¶ä¸­çš„è§‚å¯Ÿè€…æ¨¡å¼ç®€ç›´æ˜¯é™ä½æ¨¡å—è€¦åˆæ€§æé«˜æˆ‘ä»¬ä»£ç é€¼æ ¼çš„ç¥å¥‡å•Šï¼ é‚£æ¥ä¸‹æ¥å°±å…ˆè¯´è¯´è§‚å¯Ÿè€…æ¨¡å¼ç»„æˆè§’è‰²ï¼š æŠ½è±¡ä¸»é¢˜(Subject)å®ƒæŠŠæ‰€æœ‰è§‚å¯Ÿè€…å¯¹è±¡çš„å¼•ç”¨ä¿å­˜åˆ°ä¸€ä¸ªå®¹å™¨é‡Œï¼Œæ¯ä¸ªä¸»é¢˜éƒ½å¯ä»¥æœ‰ä»»ä½•æ•°é‡çš„è§‚å¯Ÿè€…ã€‚æŠ½è±¡ä¸»é¢˜æä¾›ä¸€ä¸ªæ¥å£ï¼Œå¯ä»¥å¢åŠ å’Œåˆ é™¤è§‚å¯Ÿè€…å¯¹è±¡ã€‚ å…·ä½“ä¸»é¢˜(ConcreteSubject)å°†æœ‰å…³çŠ¶æ€å­˜å…¥å…·ä½“è§‚å¯Ÿè€…å¯¹è±¡ï¼›åœ¨å…·ä½“ä¸»é¢˜å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶ï¼Œç»™æ‰€æœ‰ç™»è®°è¿‡çš„è§‚å¯Ÿè€…å‘å‡ºé€šçŸ¥ã€‚ æŠ½è±¡æŠ½è±¡è§‚å¯Ÿè€…(Observer)ä¸ºæ‰€æœ‰çš„å…·ä½“è§‚å¯Ÿè€…å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œåœ¨å¾—åˆ°ä¸»é¢˜é€šçŸ¥æ—¶æ›´æ–°è‡ªå·±ã€‚ å…·ä½“è§‚å¯Ÿè€…(ConcreteObserver)å®ç°æŠ½è±¡è§‚å¯Ÿè€…è§’è‰²æ‰€è¦æ±‚çš„æ›´æ–°æ¥å£ï¼Œä»¥ä¾¿ä½¿æœ¬èº«çš„çŠ¶æ€ä¸ä¸»é¢˜çŠ¶æ€åè°ƒã€‚ JavaåŸç”Ÿå®ç°Javaä»JDK1.0å¼€å§‹å°±è‡ªå¸¦äº† java.util.Observer å’Œ java.util.Observable ,ç›¸å…³æ¥å£ã€ç±»æ¥å®ç°è§‚å¯Ÿè€…æ¨¡å¼ï¼Œç”±æ­¤å¯è§Javaå¯¹äºè§‚å¯Ÿè€…æ¨¡å¼çš„é‡è§†ï¼Œä¹Ÿä»å¦ä¸€æ–¹é¢è¯´æ˜è§‚å¯Ÿè€…æ¨¡å¼æ˜¯å¤šä¹ˆé‡è¦ã€‚é‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬å¼€å§‹ç”¨Javaè‡ªå¸¦çš„æ¥å®ç°è§‚å¯Ÿè€…æ¨¡å¼çš„ç¼–ç ã€‚ åœ¨è¿™é‡Œæˆ‘ä»¬ä»¥ä¸€ä¸ªä¸‹å•çš„åœºæ™¯æ¥ä¸¾ä¾‹æè¿°ï¼Œç”¨æˆ·åˆ›å»ºå®Œè®¢å•ï¼Œè¦å‘é€ä¸€ä¸ªæ¶ˆæ¯é€šçŸ¥ç”¨æˆ·è®¢å•åˆ›å»ºæˆåŠŸï¼Œè¿˜è¦å‘é€ä¸€ä¸ªæ¶ˆæ¯ç»™ä»“åº“ï¼Œæ£€æŸ¥å¯¹åº”çš„è®¢å•å•†å“ã€‚å…·ä½“ä»£ç å¦‚ä¸‹ã€‚ 1. ç»§æ‰¿java.util.Observableå®šä¹‰ä¸»é¢˜12345678910111213141516171819public class OrderSubject extends Observable &#123; /** * è®¢å•çŠ¶æ€å‘ç”Ÿå˜åŒ–é€šçŸ¥å…¶ä»–ï¼Œ */ private String status; public String getStatus() &#123; return status; &#125; public void setStatus(String status) &#123; this.status = status; // é€šçŸ¥å…¶ä»– this.setChanged(); // è¿™é‡Œæ˜¯å¯ä»¥æºå¸¦ä¸€äº›é¢å¤–çš„å‚æ•° this.notifyObservers(); &#125;&#125; 2. å®ç°java.util.Observeræ¥å£å®šä¹‰è§‚å¯Ÿè€…java.util.Observer æ˜¯ä¸€ä¸ªæ¥å£ï¼Œæ¥å£ä¸­åªæœ‰ä¸€ä¸ª update æ–¹æ³•ã€‚æ¯å½“æ›´æ”¹è¢«è§‚å¯Ÿå¯¹è±¡æ—¶ï¼Œéƒ½ä¼šè°ƒç”¨æ­¤æ–¹æ³•ã€‚ åº”ç”¨ç¨‹åºè°ƒç”¨Observableå¯¹è±¡çš„ notifyObserversæ–¹æ³•ï¼Œä»¥å°†æ›´æ”¹é€šçŸ¥ç»™æ‰€æœ‰å¯¹è±¡çš„è§‚å¯Ÿè€…ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­é€šçŸ¥æ¨¡å—ã€ä»“åº“æ¨¡å—å°±æ˜¯æ‰®æ¼”è§‚å¯Ÿè€…çš„è§’è‰²ï¼Œå…·ä½“çš„ä»£ç å®ç°å¦‚ä¸‹ï¼š é€šçŸ¥æ¨¡å—å®ç°java.util.Observeræ¥å£ 12345678@Slf4jpublic class NoticeObserver implements Observer &#123; @Override public void update(Observable o, Object arg) &#123; OrderSubject orderSubject = (OrderSubject) o; log.info(\"é€šçŸ¥ä¸­å¿ƒæ”¶åˆ°äº†è®¢å•çš„å˜åŒ–[&#123;&#125;],arg = [&#123;&#125;]\", orderSubject.getStatus(),arg); &#125;&#125; ä»“åº“æ¨¡å—å®ç°java.util.Observeræ¥å£ 123456789@Slf4jpublic class WareHouseObserver implements Observer &#123; @Override public void update(Observable observable, Object arg) &#123; OrderSubject orderSubject = (OrderSubject) observable; log.info(\"ä»“åº“è§‚å¯Ÿè€…æ”¶åˆ°äº†è®¢å•çš„å˜åŒ–[&#123;&#125;],arg = [&#123;&#125;]\", orderSubject.getStatus(), arg); &#125;&#125; 3. ä»£ç ç¼–å†™å®Œæˆï¼Œæµ‹è¯•ä¸€æŠŠå…·ä½“æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920public class ObserverTest &#123; @Test public void test()&#123; OrderSubject orderSubject = new OrderSubject(); // é€šçŸ¥ç³»ç»Ÿç›‘å¬è€… NoticeObserver noticeObserver = new NoticeObserver(); orderSubject.addObserver(noticeObserver); // ä»“åº“ç›‘å¬è€… WareHouseObserver wareHouseObserver = new WareHouseObserver(); orderSubject.addObserver(wareHouseObserver); // è®¢å•åˆ›å»º orderSubject.setStatus(\"è®¢å•åˆ›å»ºå•¦\"); // è®¢å•ä»˜æ¬¾ orderSubject.setStatus(\"è®¢å•ä»˜æ¬¾å•¦\"); &#125;&#125; è®¢å•çš„çŠ¶æ€å‘ç”Ÿäº†å˜åŒ–ï¼Œå¯¹åº”çš„è§‚å¯Ÿè€…å°±æ¥å—åˆ°äº†é€šçŸ¥ã€‚JDKæä¾›çš„å®ç°å¾ˆç®€å•ï¼Œä½†æ˜¯ç¼ºé™·ä¹Ÿæ˜¯å¾ˆæ˜æ˜¾ã€‚ Observable æ˜¯ä¸€ä¸ªç±»ï¼Œä¸æ˜¯ä¸€ä¸ªæ¥å£ï¼Œä¹Ÿä¸æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œä¸ç»§æ‰¿è¯¥ç±»æ— æ³•ä½¿ç”¨æƒé™ç±»å‹ä¸º protected çš„setChanged()å’Œ clearChanged()æ–¹æ³•ã€‚ ç”¨Vector&lt;Observer&gt;ä¿å­˜è§‚å¯Ÿè€…ã€‚Vectoræ•ˆç‡ä½ä¸‹ï¼ŒJDKå·²ç»ä¸å»ºè®®ä½¿ç”¨äº†ã€‚ ä¸»é¢˜å˜åŒ–é€šçŸ¥è§‚å¯Ÿè€…çš„é¡ºåºæ— æ³•è‡ªå®šä¹‰ã€‚é€šçŸ¥çš„é¡ºåºæ˜¯å›ºå®šä¸ºæŒ‰ç…§è®¾ç½®è§‚å¯Ÿè€…çš„æ—¶é—´å€’å™é€šçŸ¥ï¼Œæ— æ³•è‡ªå®šä¹‰ã€‚ æ•´ä½“ä»£ç æ‰§è¡Œæ˜¯åŒæ­¥çš„ï¼Œä¸èƒ½è®¾ç½®ä¸ºå¼‚æ­¥ã€‚ä¸”è§‚å¯Ÿè€…çš„æ‰§è¡Œå‡ºç°å¼‚å¸¸ï¼Œç¨‹åºå¤„ç†ä¸åˆ°ä½ä¼šå¯¼è‡´äº‹åŠ¡å›æ»šã€‚ æ—¢ç„¶JDKä¸­å®ç°ä¸å¤Ÿå®Œç¾ï¼Œæˆ‘ä»¬å°±çœ‹çœ‹æœ‰æ²¡æœ‰å…¶ä»–çš„å®ç°æ–¹å¼ã€‚Googleçš„Guavaå·¥å…·åŒ…æä¾›äº†EventBuså¯ä»¥å®ç°ã€Springæ¡†æ¶ä¸­ä¹Ÿæä¾›äº†ç›¸åº”çš„æ”¯æŒï¼Œç”±äºæˆ‘ä»¬ä½¿ç”¨Springæ¡†æ¶æ¯”è¾ƒå¤šï¼Œä»Šå¤©æˆ‘ä»¬å°±å…ˆæ¥è¯´è¯´Springæ¡†æ¶ä¸­æ˜¯å¦‚ä½•å®ç°å¯¹è§‚å¯Ÿè€…æ¨¡å¼çš„æ”¯æŒå§ï¼ Springä¸­çš„å®ç°Springæ¡†æ¶ä¸­æä¾›äº†ç›¸å½“å¤šçš„ç»„ä»¶å¯ä»¥å®ç°è§‚å¯Ÿè€…æ¨¡å¼ï¼Œæ–‡ç« åé¢ä¼šä¸€ä¸€å‘å¤§å®¶ä»‹ç»ã€‚è¿™é‡Œæˆ‘å¼•å…¥ä¸€ä¸ªæ–°çš„ä¸šåŠ¡åœºæ™¯ï¼Œç”¨æˆ·æ³¨å†Œä¹‹åå‘é€çŸ­ä¿¡é€šçŸ¥ã€ç§¯åˆ†è¿˜æœ‰ä¼˜æƒ åˆ¸ã€‚è¿™ç§ä¸šåŠ¡åœºæ™¯éå¸¸çš„å¸¸è§ï¼Œæˆ‘å±•ç¤ºä¸€ä¸‹å°ä¼™ä¼´ä»¬ä¸€èˆ¬æ˜¯æ€ä¹ˆæ ·å®ç°è¿™æ ·çš„åŠŸèƒ½çš„ã€‚å› ä¸ºç¯‡å¹…æœ‰é™ï¼Œè¿™é‡Œå°±å±•ç¤ºä¸€ä¸‹ä¼ªä»£ç å§ï¼ 123456789101112131415161718192021222324252627282930public class MemberService&#123; @Autowired private MemberDao memberDao; @Autowired private CouponService couponService; @Autowired private SmsService smsService; /** * å®Œæˆç”¨æˆ·æ³¨å†Œï¼ŒæˆåŠŸä¹‹åå‘é€ä¼˜æƒ åˆ¸ã€çŸ­ä¿¡é€šçŸ¥ * @param memberName æŸ¥è¯¢æ¡ä»¶ * @param phone åˆ†é¡µä¿¡æ¯ * @return */ public Result normalRegister(String memberName,String phone)&#123; // 1ã€æ‰§è¡Œæ³¨å†Œé€»è¾‘ log.info(\"[register][æ‰§è¡Œç”¨æˆ·(&#123;&#125;) çš„æ³¨å†Œé€»è¾‘]\", phone); // ä¿å­˜ç”¨æˆ· Long memberId = memberDao.saveMember(); // 2ã€å‘é€ä¼˜æƒ åˆ¸ couponService.sendCoupon(memberId); // 3ã€å‘é€çŸ­ä¿¡ smsService.sendSms(phone); return new Result(); &#125;&#125; å¤§å®¶å¯¹è¿™éƒ¨åˆ†ä»£ç æ€ä¹ˆçœ‹ï¼Ÿ å¯¹äºç”¨æˆ·æ³¨å†ŒåŠŸèƒ½æ¥è¯´ï¼Œä¿éšœç”¨æˆ·æˆåŠŸæ³¨å†Œï¼Œè¿™æ˜¯ä¸ªä¸šåŠ¡çš„æ ¸å¿ƒè¯‰æ±‚ï¼Œå…¶ä»–çš„éƒ½æ˜¯é”¦ä¸Šæ·»èŠ±ï¼Œæ‰€ä»¥è¿™ä¸ªåœ°æ–¹ä¸åº”è¯¥æºæ‚å…¶ä»–çš„ä¸šåŠ¡ã€‚ç”¨æˆ·æ³¨å†Œä¸å‘é€çŸ­ä¿¡ã€ä¼˜æƒ åˆ¸åŠŸèƒ½åº”è¯¥åˆ†éš”å¼€ï¼Œè¿™æ ·ä¹Ÿç¬¦åˆè§£è€¦çš„è®¾è®¡è§„åˆ™ã€‚ä¸ç„¶åç»­ä¸šåŠ¡å¢åŠ éœ€æ±‚ï¼Œéœ€è¦ç”¨æˆ·æ³¨å†Œå®Œæˆä¹‹åç»™ç”¨æˆ·å‘é€ç§¯åˆ†ï¼Œä½ æ˜¯ä¸æ˜¯è¿˜è¦åœ¨è¿™ä¸ª normalRegisteræ–¹æ³•ä¸­å¢åŠ å‘é€ç§¯åˆ†çš„é€»è¾‘ï¼Œé‚£è¿™ä¸ªå²‚ä¸æ˜¯åˆè¿èƒŒäº†å¼€é—­åŸåˆ™ã€‚ ä¸€ä»¶äº‹åšå®¹æ˜“ï¼Œæƒ³åšå¥½ä¸å®¹æ˜“ã€‚å†™ç¨‹åºä¹Ÿæ˜¯å¦‚æ­¤ï¼Œèƒ½å¤ŸæŠŠåŠŸèƒ½ç¼–ç å®ç°bugåˆå°‘ï¼Œå…¶å®æ˜¯å¾ˆè€—è´¹æ—¶é—´å’Œç²¾åŠ›çš„ã€‚æˆ‘å¸¸è·ŸåŒäº‹ä»¬å¼€ç©ç¬‘è¯´â€œå†™ä»£ç ä¸è¦ç³Šå¼„ï¼Œè¯¥å†™çš„ä»£ç ä¸€å®šè¦å†™ï¼Œä¸ç„¶ä½ æœ€åè‚¯å®šä¼šè¢«ä»£ç ç³Šå¼„â€ã€‚ æ¥ä¸‹æ¥æˆ‘æ¥ä»‹ç»ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨Springçš„äº‹ä»¶å‘å¸ƒæœºåˆ¶æ¥å®ç°ä¸šåŠ¡è§£è€¦çš„ ç”±äºåé¢çš„å®ç°æ–¹æ³•ä¸­ç”¨æˆ·æ³¨å†Œäº‹ä»¶ç±»çš„ä»£ç éƒ½æ˜¯ç±»ä¼¼çš„åªæ˜¯ç±»åä¸åŒï¼Œé‚£æˆ‘å°±æŠŠç”¨æˆ·æ³¨å†Œäº‹ä»¶ç±»çš„ä»£ç å†™åœ¨å‰é¢ã€‚ 1234567891011121314151617181920212223242526import org.springframework.context.ApplicationEvent;@Slf4j@Datapublic class UserRegisterEvent extends ApplicationEvent &#123; /** * å¯ä»¥è‡ªå®šä¹‰äº›è‡ªå·±éœ€è¦çš„å±æ€§ * ç”¨æˆ·çš„id */ private Long memberId; /** * ç”¨æˆ·æ‰‹æœºå· */ private String memberPhone; public UserRegisterEvent(Object source) &#123; super(source); &#125; public UserRegisterEvent(Object source, Long memberId, String memberPhone) &#123; super(source); this.memberId = memberId; this.memberPhone = memberPhone; &#125;&#125; åˆ©ç”¨ç»§æ‰¿ApplicationEventç±»ã€å®ç°ApplicationListeneræ¥å£æˆ–è€… @EventListeneræ³¨è§£æ¥å®ç°org.springframework.context.ApplicationListeneræ˜¯Springæä¾›çš„ä¸€ä¸ªæ³›å‹æ¥å£ã€‚ç”±åº”ç”¨ç¨‹åºäº‹ä»¶ä¾¦å¬å™¨å®ç°çš„æ¥å£,ä»Spring 3.0å¼€å§‹ï¼ŒApplicationListenerå¯ä»¥ä¸€èˆ¬æ€§åœ°å£°æ˜å…¶æ„Ÿå…´è¶£çš„äº‹ä»¶ç±»å‹ã€‚åœ¨Spring ApplicationContextä¸­æ³¨å†Œåï¼Œå°†ç›¸åº”åœ°è¿‡æ»¤äº‹ä»¶ï¼Œå¹¶ä¸”ä»…é’ˆå¯¹åŒ¹é…äº‹ä»¶å¯¹è±¡è°ƒç”¨ä¾¦å¬å™¨ã€‚è§‚å¯Ÿè€…å¯ä»¥å®ç°ApplicationListeneræ¥å£æˆ–è€…ä½¿ç”¨@EventListeneræ³¨è§£ï¼Œè¿™ä¸ªæ³¨è§£å’ŒApplicationListeneræ¥å£æœ‰ç€ç›¸åŒçš„åŠŸèƒ½ï¼Œç›¸æ¯”ä¹‹ä¸‹ä½¿ç”¨æ³¨è§£æ¯”ä½¿ç”¨æ¥å£æ›´æ–¹ä¾¿ä¸€ç‚¹ã€‚ çŸ­ä¿¡Serviceå®ç°ApplicationListeneræ¥å£123456789@Slf4j@Servicepublic class SmsService &#123; @EventListener public void sendSms(UserRegisterEvent event) &#123; log.info(\"[EventListener][ç»™ç”¨æˆ·(&#123;&#125;) å‘é€çŸ­ä¿¡]\", event); &#125;&#125; ä¼˜æƒ åˆ¸Serviceç›´æ¥åœ¨addCoupon æ–¹æ³•ä¸Šæ·»åŠ æ³¨è§£ @EventListeneræ³¨æ„addCoupon æ–¹æ³•çš„å…¥å‚ä¸º UserRegisterEvent 123456789@Slf4j@Servicepublic class CouponService implements ApplicationListener&lt;UserRegisterEvent&gt; &#123; @Override public void onApplicationEvent(UserRegisterEvent event) &#123; log.info(\"[addCoupon][ç»™ç”¨æˆ·(&#123;&#125;) å‘æ”¾ä¼˜æƒ åŠµ]\", event); &#125;&#125; ç§¯åˆ†Serviceä¸­çš„ä»£ç ä¸ä¸Šé¢çš„ç±»ä¼¼å°±ä¸è´´å‡ºæ¥äº† æ³¨å†Œä¸šåŠ¡å®Œæˆå‘å¸ƒUserRegisterEventäº‹ä»¶è¿™ä¸ªåœ°æ–¹MemberServiceè¦å®ç°org.springframework.beans.factory.Aware.ApplicationEventPublisherAwareæ¥å£ï¼Œæ‰æœ‰èƒ½åŠ›ä½¿ç”¨ ApplicationEventPublisher å‘å¸ƒäº‹ä»¶ã€‚ 1234567891011121314151617181920212223242526272829@Slf4j@Servicepublic class MemberService implements ApplicationEventPublisherAware &#123; private ApplicationEventPublisher applicationEventPublisher; @Override public void setApplicationEventPublisher(ApplicationEventPublisher applicationEventPublisher) &#123; this.applicationEventPublisher = applicationEventPublisher; &#125; /** * æœ€ç®€å•çš„è§‚å¯Ÿè€…å®ç° * @param phone ç”¨æˆ·æ‰‹æœºå· * @return */ public Result register(String memberPhone) &#123; // 1ã€ ... æ‰§è¡Œæ³¨å†Œé€»è¾‘ log.info(\"[register][æ‰§è¡Œç”¨æˆ·(&#123;&#125;) çš„æ³¨å†Œé€»è¾‘]\", memberPhone); // 2ã€ç”¨æˆ·æ•°æ®ä¿å­˜åˆ°æ•°æ®åº“ Long memberId = 1000L; // 3ã€å‘å¸ƒäº‹ä»¶é€šçŸ¥ applicationEventPublisher.publishEvent(new UserRegisterEvent(this, memberId, memberPhone)); return new Result(); &#125;&#125; å•å…ƒæµ‹è¯•123456789101112@ContextConfiguration(locations = &#123;\"classpath:spring/spring-dao.xml\", \"classpath:spring/spring-service.xml\"&#125;)@RunWith(value = SpringJUnit4ClassRunner.class)public class ObserverTest &#123; @Autowired private MemberService memberService; @Test public void register() &#123; memberService.register(\"13911111111\"); &#125;&#125; æ‰§è¡Œç»“æœ ä»£ç æ‰§è¡ŒæˆåŠŸï¼Œæ‰“å°å‡ºäº†ç»™ç”¨æˆ·å‘é€çŸ­ä¿¡ã€ä¼˜æƒ åˆ¸æ—¥å¿—ï¼ŒåŠŸèƒ½å®Œç¾å®ç°ã€‚ä½†æ˜¯ç¨å¾®æœ‰ç‚¹é—®é¢˜ï¼Œæˆ‘æƒ³è°ƒæ¢ä¸€ä¸‹ä¸¤è€…çš„é¡ºåºï¼Œå…ˆæ‰§è¡Œå‘é€ä¼˜æƒ åˆ¸ï¼Œå†å‘é€çŸ­ä¿¡ã€‚è¿™ä¸ªè¦æ±‚è¿˜æ˜¯è›®å¸¸è§ï¼Œé‚£æ€ä¹ˆå®ç°å‘¢ï¼Ÿ ä½¿ç”¨SmartApplicationListeneræˆ–è€…GenericApplicationListeneræ¥å£å®ç°æŒ‡å®šè§‚å¯Ÿè€…è‡ªå®šä¹‰é¡ºåºæ‰§è¡Œorg.springframework.context.event.SmartApplicationListeneræ˜¯Spring3.0ç‰ˆæœ¬æä¾›çš„æ¥å£ï¼Œorg.springframework.context.event.GenericApplicationListeneråˆ™æ˜¯Spring4.2ç‰ˆæœ¬æä¾›çš„æ¥å£ï¼Œå¦‚æœåœ¨ä½ çš„é¡¹ç›®ä¸­ä½¿ç”¨ä¸äº†ï¼Œé‚£å°±æ˜¯è¯´æ˜ä½ é¡¹ç›®ä¸­ä½¿ç”¨çš„Springç‰ˆæœ¬è¿‡ä½ï¼Œè¿™ä¸ªé—®é¢˜è‡ªå·±è‡ªè¡Œå¤„ç†ã€‚åœ¨æŸ¥SmartApplicationListeneræºç æ—¶å‘ç°æœ‰ä»¥ä¸‹æ³¨é‡Šï¼š 123456Extended variant of the standard &#123;@link ApplicationListener&#125; interface,exposing further metadata such as the supported event type.&lt;p&gt;Users are &lt;bold&gt;strongly advised&lt;/bold&gt; to use the &#123;@link GenericApplicationListener&#125;interface instead as it provides an improved detection of generics-basedevent types. ç¿»è¯‘ä¹‹åå¤§æ¦‚çš„æ„æ€å°±æ˜¯ï¼ŒSmartApplicationListeneræ˜¯æ ‡å‡†ApplicationListeneræ¥å£çš„æ‰©å±•å˜ä½“ï¼Œå…¬å¼€äº†è¿›ä¸€æ­¥çš„å…ƒæ•°æ®ï¼Œä¾‹å¦‚å—æ”¯æŒçš„äº‹ä»¶ç±»å‹ã€‚ä½†å¼ºçƒˆå»ºè®®æ”¹ç”¨GenericApplicationListeneræ¥å£ï¼Œå› ä¸ºå®ƒæä¾›äº†å¯¹åŸºäºæ³›å‹çš„äº‹ä»¶ç±»å‹çš„æ”¹è¿›æ£€æµ‹ï¼Œé‚£æˆ‘æ­¤å¤„å°±åªä»¥GenericApplicationListenerä¸ºä¾‹äº†ã€‚ ä¼˜æƒ åˆ¸æœåŠ¡ServiceåŒæ ·å®ç°æ¥å£ GenericApplicationListener 123456789101112131415161718192021222324252627282930313233343536373839404142434445@Slf4j@Servicepublic class SecondVersionCouponService implements GenericApplicationListener &#123; /** * ç¡®å®šæ­¤ä¾¦å¬å™¨æ˜¯å¦å®é™…ä¸Šæ”¯æŒç»™å®šçš„äº‹ä»¶ç±»å‹ã€‚ * @param eventType * @return */ @Override public boolean supportsEventType(ResolvableType eventType) &#123; return SecondVersionUserRegisterEvent.class.equals(eventType.getRawClass()); &#125; /** * ç¡®å®šæ­¤ä¾¦å¬å™¨æ˜¯å¦å®é™…ä¸Šæ”¯æŒç»™å®šçš„æºç±»å‹ * @param sourceType * @return */ @Override public boolean supportsSourceType(Class&lt;?&gt; sourceType) &#123; return MemberService.class == sourceType; &#125; /** * å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ * @param event */ @Override public void onApplicationEvent(ApplicationEvent event) &#123; SecondVersionUserRegisterEvent userRegisterEvent = (SecondVersionUserRegisterEvent) event; Long memberId = userRegisterEvent.getMemberId(); log.info(\"[Second addCoupon][ç»™ç”¨æˆ·(&#123;&#125;) å‘æ”¾ä¼˜æƒ åŠµ]\", memberId); &#125; /** * è®¾å®šæ‰§è¡Œçš„é¡ºåºï¼Œæ•°å­—è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜å°±è¶Šå…ˆè¢«æ‰§è¡Œ * @return */ @Override public int getOrder() &#123; return 0; &#125;&#125; çŸ­ä¿¡æœåŠ¡ServiceåŒæ ·å®ç°æ¥å£ GenericApplicationListener 12345678910111213141516171819202122232425262728@Slf4j@Servicepublic class SecondVersionSmsService implements GenericApplicationListener &#123; @Override public boolean supportsEventType(ResolvableType eventType) &#123; return SecondVersionUserRegisterEvent.class == eventType.getRawClass(); &#125; @Override public boolean supportsSourceType(Class&lt;?&gt; sourceType) &#123; return MemberService.class == sourceType; &#125; @Override public void onApplicationEvent(ApplicationEvent event) &#123; SecondVersionUserRegisterEvent userRegisterEvent = (SecondVersionUserRegisterEvent) event; String memberPhone = userRegisterEvent.getMemberPhone(); log.info(\"[Second onApplicationEvent][ç»™ç”¨æˆ·(&#123;&#125;) å‘é€çŸ­ä¿¡]\", memberPhone); &#125; @Override public int getOrder() &#123; return 10; &#125;&#125; å…¶å®ä½¿ç”¨org.springframework.context.ApplicationListener + org.springframework.core.annotation.Orderæ³¨è§£ä¹Ÿå¯ä»¥å®ç°æ§åˆ¶è§‚å¯Ÿè€…çš„æ‰§è¡Œé¡ºåºï¼Œè€Œä¸”æ›´ç®€æ´ï¼ æ³¨å†Œä¸šåŠ¡å®Œæˆå‘å¸ƒUserRegisterEventäº‹ä»¶è¿™ä¸ªåœ°æ–¹MemberServiceè¦å®ç°org.springframework.beans.factory.Aware.ApplicationEventPublisherAwareæ¥å£ï¼Œæ‰æœ‰èƒ½åŠ›ä½¿ç”¨ ApplicationEventPublisher å‘å¸ƒäº‹ä»¶ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041@Slf4j@Servicepublic class MemberService implements ApplicationEventPublisherAware &#123; private ApplicationEventPublisher applicationEventPublisher; @Override public void setApplicationEventPublisher(ApplicationEventPublisher applicationEventPublisher) &#123; this.applicationEventPublisher = applicationEventPublisher; &#125; /** * æœ€ç®€å•çš„è§‚å¯Ÿè€…å®ç° * @param phone ç”¨æˆ·æ‰‹æœºå· * @return */ @Transactional(rollbackFor = Exception.class) public Result register(String phone) &#123; // 1ã€ ... æ‰§è¡Œæ³¨å†Œé€»è¾‘ log.info(\"[Second register][æ‰§è¡Œç”¨æˆ·(&#123;&#125;) çš„æ³¨å†Œé€»è¾‘]\", phone); // 2ã€ ä¿å­˜ç”¨æˆ·åˆ°æ•°æ®åº“ï¼ˆå‡è®¾è¿™ä¸ªæ˜¯ï¼‰ BizLocalMessageEntity entity = new BizLocalMessageEntity(); ThreadLocalRandom random = ThreadLocalRandom.current(); entity.setBizModule((byte) 0); entity.setBizNo(\"\" + random.nextInt(100000)); entity.setBizType((byte) 0); entity.setSendStatus((byte) 0); entity.setCreateTime(new Date()); entity.setUpdateTime(new Date()); int affectRow = bizLocalMessageMapper.insert(entity); Long memberId = entity.getId(); log.info(\"æ’å…¥çš„affectRow= [&#123;&#125;],ä¸»é”®[&#123;&#125;]\", affectRow, memberId); // 3ã€å‘å¸ƒäº‹ä»¶é€šçŸ¥ applicationEventPublisher.publishEvent(new SecondVersionUserRegisterEvent(this, memberId, phone)); return new Result(); &#125;&#125; å•å…ƒæµ‹è¯•123456789101112@ContextConfiguration(locations = &#123;\"classpath:spring/spring-dao.xml\", \"classpath:spring/spring-service.xml\"&#125;)@RunWith(value = SpringJUnit4ClassRunner.class)public class ObserverTest &#123; @Autowired private MemberService memberService; @Test public void register() &#123; memberService.register(\"13911111111\"); &#125;&#125; æ‰§è¡Œç»“æœ ä¿®æ”¹ä¸¤ä¸ªServiceä¸­orderçš„æ•°å€¼å¯ä»¥è½»æ¾ä¸¤ä¸ªè§‚å¯Ÿè€…çš„æ‰§è¡Œé¡ºåºï¼Œå®Œç¾çš„è§£å†³äº†è‡ªå®šä¹‰è§‚å¯Ÿè€…æ‰§è¡Œé¡ºåºçš„è¦æ±‚ã€‚ç»†å¿ƒçš„å°ä¼™ä¼´ä¼šå‘ç°ï¼Œå‡è®¾åœ¨ç”¨æˆ·æ³¨å†Œçš„æ–¹æ³•ä¸­å­˜åœ¨äº‹åŠ¡ï¼Œè§‚å¯Ÿè€…çš„æ‰§è¡Œå‡ºç°å¼‚å¸¸ï¼Œä¼šå¯¼è‡´æ•´ä¸ªäº‹åŠ¡å›æ»šï¼Œæ˜æ˜ç”¨æˆ·çš„æ•°æ®å·²ç»ä¿å­˜åˆ°æ•°æ®åº“ï¼Œç°åœ¨å´æ²¡æœ‰äº†ï¼è¿˜æ˜¯å‰é¢é‚£å¥è¯ï¼Œåœ¨è¿™ä¸ªä¸šåŠ¡åœºæ™¯ï¼Œç”¨æˆ·æ³¨å†ŒæˆåŠŸæ˜¯æ ¸å¿ƒè¯‰æ±‚ï¼Œå‘é€çŸ­ä¿¡ã€ä¼˜æƒ åˆ¸é‡è¦æ€§éƒ½æ˜¯æ¯”ä¸ä¸Šçš„ã€‚é‚£è¦è§£å†³è¿™ç§æƒ…å†µï¼Œå°±éœ€è¦ç”¨æˆ·æ³¨å†ŒæˆåŠŸçš„äº‹åŠ¡æäº¤ä¹‹åï¼Œå†å‘å¸ƒæ³¨å†ŒæˆåŠŸäº‹ä»¶ï¼Œé¿å…è§‚å¯Ÿè€…æ‰§è¡Œç»“æœçš„å½±å“ã€‚ çŸ­ä¿¡æœåŠ¡Serviceæœ‰æœ‰å¼‚å¸¸æŠ›å‡ºå¯¼è‡´äº‹åŠ¡å›æ»š 12345678910@Override public void onApplicationEvent(ApplicationEvent event) &#123; SecondVersionUserRegisterEvent userRegisterEvent = (SecondVersionUserRegisterEvent) event; String memberPhone = userRegisterEvent.getMemberPhone(); if (StringUtils.isNotBlank(memberPhone)) &#123; throw new RuntimeException(\"æµ‹è¯•äº‹ä»¶ä¸­å‘ç”Ÿå¼‚å¸¸å¯¹åŸæœ‰ä¸šåŠ¡çš„å½±å“,çŸ­ä¿¡å‘é€å¤±è´¥ï¼ï¼ï¼ï¼\"); &#125; log.info(\"[Second onApplicationEvent][ç»™ç”¨æˆ·(&#123;&#125;) å‘é€çŸ­ä¿¡]\", memberPhone); &#125; å¯èƒ½æœ‰çš„å°ä¼™ä¼´æƒ³ï¼Œè§‚å¯Ÿè€…æ‰§è¡Œå¼‚å¸¸å¯¼è‡´äº‹åŠ¡å›æ»šï¼Œæœ¬è´¨ä¸Šæ¥è¯´è¿™ç§æ–¹å¼å®ç°çš„è§‚å¯Ÿè€…æ¨¡å¼ï¼Œå…¶å®è¿˜æ˜¯åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­åŒæ­¥æ‰§è¡Œçš„ã€‚é‚£æˆ‘å°±åœ¨è§‚å¯Ÿè€…ä¸­æ•è·æ‰€æœ‰çš„å¼‚å¸¸æˆ–è€…ç”¨æˆ·æ³¨å†ŒæˆåŠŸä¹‹åå¼‚æ­¥å‘å¸ƒäº‹ä»¶ã€‚ æ•è·æ‰€æœ‰å¼‚å¸¸ 123456789101112131415public void onApplicationEvent(ApplicationEvent event) &#123; try &#123; SecondVersionUserRegisterEvent userRegisterEvent = (SecondVersionUserRegisterEvent) event; Long memberId = userRegisterEvent.getMemberId(); if (memberId != null) &#123; throw new RuntimeException(\"æµ‹è¯•äº‹ä»¶ä¸­å‘ç”Ÿå¼‚å¸¸å¯¹åŸæœ‰ä¸šåŠ¡çš„å½±å“,çŸ­ä¿¡å‘é€å¤±è´¥ï¼ï¼ï¼ï¼\"); &#125; log.info(\"[Second addCoupon][ç»™ç”¨æˆ·(&#123;&#125;) å‘æ”¾ä¼˜æƒ åŠµ]\", memberId); &#125; catch (Exception e) &#123; log.error(\"å‘æ”¾ä¼˜æƒ åŠµå‘ç”Ÿå¼‚å¸¸\", e); &#125; &#125; å¼‚æ­¥å‘å¸ƒäº‹ä»¶ 123456789// 3ã€å¼‚æ­¥å‘å¸ƒäº‹ä»¶é€šçŸ¥,è¿™æ ·çš„æœ‰å¯èƒ½äº‹åŠ¡è¿˜æ²¡æœ‰æäº¤ï¼Œåˆ™å¼‚æ­¥çº¿ç¨‹è¯»å–ä¸åˆ°æ•°æ®åº“ä¸­çš„æ•°æ®CompletableFuture&lt;Void&gt; voidCompletableFuture = CompletableFuture.runAsync(() -&gt; &#123; applicationEventPublisher.publishEvent(new UserRegisterEvent(this, memberId, phone));&#125;);voidCompletableFuture.exceptionally(exception -&gt; &#123; log.error(\"å‘ç”Ÿäº†å¼‚å¸¸\", exception); return null;&#125;); ç¬¬ä¸€ç§æ–¹å¼å¯ä»¥è§£å†³äº‹åŠ¡å›æ»šçš„é—®é¢˜ï¼Œä½†æ˜¯å‘¢æ„Ÿè§‰ä¼šæœ‰ç‚¹lowï¼ ç¬¬äºŒç§æ–¹å¼å‡å¦‚è§‚å¯Ÿè€…ä¸­æŸ¥è¯¢ä¼šå‘˜çš„ä¿¡æ¯ï¼Œå¯èƒ½å‡ºç°æŸ¥ä¸åˆ°ï¼Œå› ä¸ºå¯èƒ½äº‹åŠ¡è¿˜æ²¡æœ‰æäº¤ã€‚ ä½¿ç”¨ @TransactionalEventListener å®ç°äº‹åŠ¡æäº¤ä¹‹åæ‰æ‰§è¡Œè§‚å¯Ÿè€…ä½¿ç”¨èµ·æ¥å¾ˆç®€å•ï¼Œç›´æ¥åœ¨å¯¹åº”çš„è§‚å¯Ÿè€…æ–¹æ³•ä¸Šæ·»åŠ è¯¥æ³¨è§£å³å¯ã€‚@TransactionalEventListener(phase = TransactionPhase.AFTER_COMMIT) 12345678910111213public class ThreeCouponService &#123; @TransactionalEventListener(phase = TransactionPhase.AFTER_COMMIT) public void addCoupon(ThreeUserRegisterEvent event) &#123; log.info(\"æµ‹è¯•äº‹ä»¶ä¸­å‘ç”Ÿå¼‚å¸¸å¯¹åŸæœ‰ä¸šåŠ¡çš„å½±å“\"); Long memberId = event.getMemberId(); if (memberId != null) &#123; throw new RuntimeException(\"æµ‹è¯•äº‹ä»¶ä¸­å‘ç”Ÿå¼‚å¸¸å¯¹åŸæœ‰ä¸šåŠ¡çš„å½±å“,ä¼˜æƒ åˆ¸å‘é€å¤±è´¥ï¼ï¼ï¼ï¼\"); &#125; log.info(\" Version=3 [addCoupon][ç»™ç”¨æˆ·(&#123;&#125;) å‘æ”¾ä¼˜æƒ åŠµ]\", memberId); &#125;&#125; æ³¨æ„ä¸€å®šè¦åœ¨ register() æ–¹æ³•ä¸Šæ·»åŠ  @Transactional æ³¨è§£ï¼Œä¸ç„¶ register() æ–¹æ³•ä¸­æœ‰æŠ›å‡ºå¼‚å¸¸ä¹‹åï¼Œä¼šæœ‰ä¸‹é¢çš„é”™è¯¯æç¤ºï¼š 12ä¿¡æ¯: Closing org.springframework.context.support.GenericApplicationContext@a67c67e: startup date [Thu Feb 04 18:06:53 CST 2021]; root of context hierarchy @Transactionalä¸€å®šè¦åŠ ä¸Šä¸ç„¶æ–¹æ³•ä½“å†…æœ‰ä¸€æ¬¡æŠ›å‡ºä¼šæœ‰ä¸Šçš„é”™è¯¯ã€‚ 123456789101112131415@Transactional(rollbackFor = Exception.class)public Result register(String phone) &#123; // 1ã€ ... æ‰§è¡Œæ³¨å†Œé€»è¾‘ log.info(\"[Second register][æ‰§è¡Œç”¨æˆ·(&#123;&#125;) çš„æ³¨å†Œé€»è¾‘]\", phone); // 2ã€ ä¿å­˜ç”¨æˆ·(å‡è®¾è¿™æ˜¯) int affectRow = bizLocalMessageMapper.insert(entity); Long memberId = entity.getId(); log.info(\"æ’å…¥çš„affectRow= [&#123;&#125;],ä¸»é”®[&#123;&#125;]\", affectRow, memberId); if (memberId != null) &#123; throw new RuntimeException(\"æ•…æ„æŠ›å‡ºå¼‚å¸¸\"); &#125; applicationEventPublisher.publishEvent(new ThreeUserRegisterEvent(this, memberId, phone)); return new Result();&#125; å…¶å®ï¼Œå®ç° register() äº‹åŠ¡æäº¤ä¹‹åï¼Œå†å‘å¸ƒäº‹ä»¶è¿˜æœ‰ä¸¤ç§æ–¹å¼ï¼š ä½¿ç”¨äº‹åŠ¡æ¨¡æ¿TransactionTemplate ä½¿ç”¨ä¹‹å‰éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®äº‹åŠ¡æ¨¡æ¿ 123456&lt;!-- é…ç½® transactionTemplate --&gt; &lt;bean id=\"transactionTemplate\" class=\"org.springframework.transaction.support.TransactionTemplate\"&gt; &lt;property name=\"transactionManager\"&gt; &lt;ref bean=\"transactionManager\"/&gt; &lt;/property&gt; &lt;/bean&gt; åœ¨ä»£ç ä¸­ä½¿ç”¨äº‹åŠ¡æ¨¡æ¿æäº¤äº‹åŠ¡ 12345678910111213141516171819202122232425262728293031323334353637383940414243@Autowiredprivate TransactionTemplate transactionTemplate; public Result register(String phone) &#123; // 1ã€ ... æ‰§è¡Œæ³¨å†Œé€»è¾‘ log.info(\"[çº¿ç¨‹name=&#123;&#125;,register][æ‰§è¡Œç”¨æˆ·(&#123;&#125;) çš„æ³¨å†Œé€»è¾‘]\", Thread.currentThread().getName(), phone); // 2ã€ ä¿å­˜ç”¨æˆ·(å‡è®¾è¿™æ˜¯) Long memberId = transactionTemplate.execute(status -&gt; &#123; Long result = null; try &#123; BizLocalMessageEntity entity = new BizLocalMessageEntity(); ThreadLocalRandom random = ThreadLocalRandom.current(); entity.setBizModule((byte) 0); entity.setBizNo(\"\" + random.nextInt(200000)); entity.setBizType((byte) 0); entity.setMsg(\"æ¶ˆæ¯å†…å®¹\"); entity.setMsgDesc(\"æ¶ˆæ¯å¤‡æ³¨\"); entity.setCreateTime(new Date()); entity.setUpdateTime(new Date()); int affectRow = bizLocalMessageMapper.insert(entity); result = entity.getId(); log.info(\"Version5 æ’å…¥çš„affectRow= [&#123;&#125;],ä¸»é”®[&#123;&#125;]\", affectRow, result); if (affectRow &gt; 0) &#123; //throw new RuntimeException(\"æµ‹è¯•ä¸»è¦ä¸šåŠ¡å¤±è´¥ï¼Œäº‹ä»¶æ˜¯å¦ä¼šå‘å¸ƒæ‰§è¡Œ\"); &#125; &#125; catch (Exception e) &#123; log.error(\"ä¸šåŠ¡å¤±è´¥å‘ç”Ÿå¼‚å¸¸\", e); // æ ‡è®°äº‹åŠ¡å›æ»š status.setRollbackOnly(); &#125; return result; &#125;); log.info(\"äº‹åŠ¡æ‰§è¡Œæƒ…å†µ ç”¨æˆ·çš„id= [&#123;&#125;]\", memberId); if (memberId != null) &#123; // 3ã€å¼‚æ­¥å‘å¸ƒäº‹ä»¶é€šçŸ¥ log.info(\"å‘å¸ƒæ³¨å†ŒæˆåŠŸäº‹ä»¶\"); applicationEventPublisher.publishEvent(new UserRegisterEvent(this, memberId, phone)); &#125; return new Result(); &#125; ä½¿ç”¨TransactionSynchronizationManager è¿™ä¸ªå¯ä»¥ç›´æ¥ä½¿ç”¨æ— éœ€é…ç½®ï¼Œé‡å†™TransactionSynchronizationAdapterçš„afterCommit()æ–¹æ³• 123456789101112131415161718192021222324252627282930313233@Transactional(rollbackFor = Exception.class)public Result register(String phone) &#123; // 1ã€ ... æ‰§è¡Œæ³¨å†Œé€»è¾‘ log.info(\"[Version4 register][æ‰§è¡Œç”¨æˆ·(&#123;&#125;) çš„æ³¨å†Œé€»è¾‘]\", phone); // 2ã€ ä¿å­˜ç”¨æˆ·(å‡è®¾è¿™æ˜¯) BizLocalMessageEntity entity = new BizLocalMessageEntity(); ThreadLocalRandom random = ThreadLocalRandom.current(); entity.setBizModule((byte) 0); entity.setBizNo(\"\" + random.nextInt(100000)); entity.setBizType((byte) 0); entity.setMsg(\"\"); entity.setMsgDesc(\"\"); entity.setCreateTime(new Date()); entity.setUpdateTime(new Date()); Long memberId = entity.getId(); int affectRow = bizLocalMessageMapper.insert(entity); log.info(\"Version4 æ’å…¥çš„affectRow= [&#123;&#125;],ä¸»é”®[&#123;&#125;]\", affectRow, memberId); if (affectRow &gt; 0) &#123; //throw new RuntimeException(\"Version4 æµ‹è¯•ä¸»è¦ä¸šåŠ¡å¤±è´¥ï¼Œäº‹ä»¶æ˜¯å¦ä¼šå‘å¸ƒæ‰§è¡Œ\"); &#125; TransactionSynchronizationManager.registerSynchronization(new TransactionSynchronizationAdapter() &#123; @Override public void afterCommit() &#123; super.afterCommit(); // 3ã€äº‹åŠ¡æäº¤ä¹‹åå‘å¸ƒäº‹ä»¶é€šçŸ¥ applicationEventPublisher.publishEvent(new UserRegisterEvent(this, memberId, phone)); &#125; &#125;); return new Result();&#125; æˆ‘ä»¬æŠŠç›®å‰çš„ä»£ç æ‰§è¡Œä¸€ä¸‹çœ‹çœ‹æƒ…å†µæ€ä¹ˆæ · ä»æˆªå›¾ä¸Šçœ‹ï¼Œæˆ‘ä»¬ç›®å‰å·²ç»é€šè¿‡å¥½å‡ ç§æ–¹å¼è§£å†³äº†è§‚å¯Ÿè€…æ‰§è¡Œå¼‚å¸¸å¯¼è‡´äº‹åŠ¡å›æ»šçš„é—®é¢˜ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥ä»æˆªå›¾ä¸­çœ‹å‡ºç”¨æˆ·æ³¨å†Œé€»è¾‘å’Œå¯¹åº”çš„è§‚å¯Ÿè€…éƒ½æ˜¯åœ¨mainçº¿ç¨‹ä¸­æ‰§è¡Œçš„ï¼Œé‚£æˆ‘ä»¬å¯ä»¥è®©è§‚å¯Ÿè€…å¼‚æ­¥æ‰§è¡Œå—ï¼Ÿè¿™æ ·ä¹Ÿå¯ä»¥åŠ å¿«ä»£ç çš„æ‰§è¡Œé€Ÿåº¦ã€‚è¿™ä¸ªé—®é¢˜å½“ç„¶ä¹Ÿæ˜¯å¯ä»¥è§£å†³çš„ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š ç›´æ¥ä½¿ç”¨@Asyncæ³¨è§£ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨è¿™ä¸ªæ³¨è§£ä¸€å®šè¦è‡ªå®šä¹‰çº¿ç¨‹æ± ï¼Œä¸æ˜¯å®ƒé»˜è®¤ä½¿ç”¨çš„æ˜¯ org.springframework.core.task.SimpleAsyncTaskExecutor ã€‚ä½†è¿™ä¸ª SimpleAsyncTaskExecutor ä¸æ˜¯çœŸçš„çº¿ç¨‹æ± ï¼Œè¿™ä¸ªç±»ä¸é‡ç”¨çº¿ç¨‹ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹ã€‚ 12345678910111213public class SixCouponService &#123; @Async @Order(20) @EventListener public void addCoupon(SixUserRegisterEvent event) &#123; log.info(\"æµ‹è¯•äº‹ä»¶ä¸­å‘ç”Ÿå¼‚å¸¸å¯¹åŸæœ‰ä¸šåŠ¡çš„å½±å“\", \"\"); Long memberId = event.getMemberId(); log.info(\"çº¿ç¨‹name=&#123;&#125;,[addCoupon][ç»™ç”¨æˆ·(&#123;&#125;) å‘æ”¾ä¼˜æƒ åŠµ]\", Thread.currentThread().getName(), memberId); &#125;&#125; å¯åŠ¨å¼‚æ­¥çº¿ç¨‹æ¥å‘å¸ƒäº‹ä»¶ æ„æ€å°±æ˜¯äº‹åŠ¡æäº¤ä¹‹åï¼Œåˆ¤æ–­äº‹åŠ¡æäº¤æˆåŠŸåˆ™æ–°å»ºä¸€ä¸ªçº¿ç¨‹ç„¶åå‘å¸ƒæ³¨å†ŒæˆåŠŸäº‹ä»¶ã€‚äº‹åŠ¡æäº¤æˆåŠŸå¯ä»¥å‰é¢æåˆ°çš„äº‹åŠ¡æ¨¡æ¿transactionTemplateå’Œäº‹åŠ¡ç®¡ç†å™¨TransactionSynchronizationManagerã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940public Result register(String phone) &#123; // 1ã€ ... æ‰§è¡Œæ³¨å†Œé€»è¾‘ log.info(\"[çº¿ç¨‹name=&#123;&#125;,register][æ‰§è¡Œç”¨æˆ·(&#123;&#125;) çš„æ³¨å†Œé€»è¾‘]\", Thread.currentThread().getName(), phone); // 2ã€ ä¿å­˜ç”¨æˆ·(å‡è®¾è¿™æ˜¯) Long memberId = transactionTemplate.execute(status -&gt; &#123; Long result = null; try &#123; BizLocalMessageEntity entity = new BizLocalMessageEntity(); ThreadLocalRandom random = ThreadLocalRandom.current(); entity.setBizModule((byte) 0); entity.setBizNo(\"\" + random.nextInt(200000)); entity.setBizType((byte) 0); entity.setMsg(\"æ¶ˆæ¯å†…å®¹\"); entity.setMsgDesc(\"æ¶ˆæ¯å¤‡æ³¨\"); entity.setCreateTime(new Date()); entity.setUpdateTime(new Date()); int affectRow = bizLocalMessageMapper.insert(entity); result = entity.getId(); log.info(\"Version5 æ’å…¥çš„affectRow= [&#123;&#125;],ä¸»é”®[&#123;&#125;]\", affectRow, result); &#125; catch (Exception e) &#123; log.error(\"ä¸šåŠ¡å¤±è´¥å‘ç”Ÿå¼‚å¸¸\", e); // æ ‡è®°äº‹åŠ¡å›æ»š status.setRollbackOnly(); &#125; return result; &#125;); log.info(\"äº‹åŠ¡æ‰§è¡Œæƒ…å†µ ç”¨æˆ·çš„id= [&#123;&#125;]\", memberId); if (memberId != null) &#123; // 3ã€å¼‚æ­¥å‘å¸ƒäº‹ä»¶é€šçŸ¥ log.info(\"å‘å¸ƒæ³¨å†ŒæˆåŠŸäº‹ä»¶\"); CompletableFuture.runAsync(()-&gt;&#123; applicationEventPublisher.publishEvent(new SixUserRegisterEvent(this, memberId, phone)); &#125;); &#125; return new Result(); &#125; ä»£ç ä¿®æ”¹ä¹‹åæ‰§è¡Œï¼Œè¿è¡Œæˆªå›¾å¦‚ä¸‹ï¼š æˆ‘ä»¬å¯ä»¥å‘ç°ä»£ç åˆ†åˆ«mainã€taskExecutor-1å’ŒtaskExecutor-2 ä¸‰ä¸ªçº¿ç¨‹æ‰§è¡Œçš„ï¼Œå®Œç¾çš„è§£å†³äº†ä¸Šé¢æåˆ°çš„é—®é¢˜ã€‚ ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ä¹‹å‰çš„ç”¨æˆ·æ³¨å†Œæµç¨‹ï¼š ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ä¹‹åçš„ç”¨æˆ·æ³¨å†Œæµç¨‹ï¼š æ€»ç»“ç”¨æˆ·æ•°æ®å†™å…¥æ•°æ®è¡¨æˆåŠŸï¼Œå‘å¸ƒæ³¨å†ŒæˆåŠŸäº‹ä»¶ï¼Œé€šçŸ¥ç›¸å…³çš„çŸ­ä¿¡ã€ä¼˜æƒ åˆ¸ã€ç§¯åˆ†æ¨¡å—ã€‚ç”¨è§‚å¯Ÿè€…æ¨¡å¼å®ç°ä¹‹åï¼Œæ³¨å†Œé€»è¾‘å’Œå…¶ä»–çš„é€»è¾‘åˆ†ç¦»å¼€ï¼Œå³ä½¿åç»­æ–°åŠ ä¸€ä¸ªé‚®ä»¶é€šçŸ¥æˆ–è€…å»æ‰ä¸€ä¸ªå‘é€ç§¯åˆ†çš„æ“ä½œ,åªæ˜¯ä¿®æ”¹äº†å¯¹åº”çš„ä»£ç é€»è¾‘ï¼Œä¸ç”¨å›æ»šæµ‹è¯•æ‰€æœ‰åœºæ™¯ã€‚è¿™ç¬¦åˆå¯¹ä¿®æ”¹å…³é—­å¯¹æ‰©å±•å¼€æ”¾çš„è§„åˆ™ï¼Œæœ‰æ•ˆçš„é™ä½äº†å„ä¸ªæ¨¡å—ä¹‹é—´è€¦åˆåº¦ï¼Œä½¿å¾—ä»£ç çš„å¯ç»´æŠ¤æ€§å¤§å¤§æé«˜ã€‚æœ‰äº›åŒå­¦å¯èƒ½ä¼šæŠ±æ€¨ï¼Œè‡ªå·±çš„é¡¹ç›®ç®€å•ç”¨ä¸åˆ°è¿™äº›çœ‹ä¼¼é«˜å¤§ä¸Šçš„è®¾è®¡æ¨¡å¼ï¼Œå…¶å®ä¸ç„¶ï¼Œä½ åªæ˜¯æ²¡æœ‰è®¤çœŸç ”ç©¶è‡ªå·±çš„é¡¹ç›®ï¼Œè¿˜æœ‰å°±æ˜¯å¯¹è‡ªå·±çš„å†™çš„ä»£ç æ²¡æœ‰å¤ªé«˜çš„è¦æ±‚ã€‚å¦‚æœä½ çœ‹åˆ°äº†æœ¬æ–‡ï¼Œè€Œä¸”çœ‹åˆ°æ­¤å¤„ï¼Œä½ å›æƒ³ä¸€ä¸‹ä½ æ‰€åšçš„é¡¹ç›®ï¼Œéš¾é“æ²¡æœ‰ä¸€ä¸ªä¸šåŠ¡åœºæ™¯æ»¡è¶³è§‚å¯Ÿè€…æ¨¡å¼æ¡ä»¶ä¹ˆï¼Ÿä½ æƒ³æƒ³æ˜¯ä¸æ˜¯ï¼","categories":[],"tags":[{"name":"spring","slug":"spring","permalink":"https://ydstudios.gitee.io/tags/spring/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://ydstudios.gitee.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è§‚å¯Ÿè€…æ¨¡å¼","slug":"è§‚å¯Ÿè€…æ¨¡å¼","permalink":"https://ydstudios.gitee.io/tags/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/"}]},{"title":"èˆ¹æ–°ç‰ˆæœ¬çš„ç­–ç•¥æ¨¡å¼ï¼Œä½ ä¸€å®šæ²¡æœ‰è§è¿‡","slug":"èˆ¹æ–°ç‰ˆæœ¬çš„ç­–ç•¥æ¨¡å¼ï¼Œä½ ä¸€å®šæ²¡æœ‰è§è¿‡","date":"2021-01-30T15:06:49.000Z","updated":"2021-01-30T08:57:31.000Z","comments":true,"path":"post/cd1b2f51.html","link":"","permalink":"https://ydstudios.gitee.io/post/cd1b2f51.html","excerpt":"æˆ‘åœ¨ä¹‹å‰çš„æ–‡ç« è®¾è®¡æ¨¡å¼å­¦ä¹ ä¹‹ç­–ç•¥æ¨¡å¼ ä¸€æ–‡ä¸­ä»‹ç»äº†ç­–ç•¥æ¨¡å¼çš„ä¼˜ç‚¹ã€ç¼ºç‚¹ã€å®ç°æ–¹æ³•å’Œå…·ä½“çš„ä½¿ç”¨åœºæ™¯ã€‚ç­–ç•¥ç±»æœ‰ç­–ç•¥ç±»ä¼šå¢å¤š,é€ æˆç±»è†¨èƒ€çš„ç¼ºç‚¹ï¼Œè¿™ä¸ªç¼ºç‚¹æˆ‘è¿˜æ˜¯æ¯”è¾ƒåœ¨æ„çš„ã€‚å› ä¸ºåœ¨å®é™…å¼€å‘ä¸­å‘ç°ï¼Œæœ‰æ—¶ç­–ç•¥çš„å®ç°æ²¡æœ‰å¤šå°‘ä»£ç ï¼Œè¿™æ ·çš„å®šä¹‰æˆä¸€ä¸ªç­–ç•¥ç±»åè€ŒçœŸçš„æœ‰ç‚¹æµªè´¹ï¼Œç¡®å®é€ æˆäº†ç±»è†¨èƒ€ã€‚è‡ªä»å‘ç°äº†è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä¸€ç›´åœ¨æ€è€ƒå¦‚ä½•è§£å†³è¿™ç§é—®é¢˜ï¼Œç»è¿‡æ€è€ƒè§£å†³é—®é¢˜çš„æ–¹æ³•å·²ç»æƒ³å‡ºæ¥äº†ï¼Œä½†æ˜¯ä¸€ç›´æ²¡æœ‰å»å°è¯•åšå‡ºæ¥çœ‹çœ‹æ˜¯å¦çœŸçš„èƒ½è§£å†³ç­–ç•¥æ¨¡å¼ ç±»è†¨èƒ€çš„é—®é¢˜,ç»ˆäºåœ¨è¿™å‘¨æˆ‘å¿™é‡Œå·é—²ç”¨ä»£ç å®ç°äº†æˆ‘çš„æƒ³æ³•ï¼Œæˆ‘è‡ªè®¤ä¸ºåˆ©ç”¨ Lambdaè¡¨è¾¾å¼ + åå°„ + æ³¨è§£ ç»„åˆè§£å†³äº†ç±»è†¨èƒ€çš„é—®é¢˜ï¼Œè¿™ç§èˆ¹æ–°ç‰ˆæœ¬å®ç°æ–¹æ¡ˆï¼Œå®¹æˆ‘ç»†ç»†é“æ¥ï¼","text":"æˆ‘åœ¨ä¹‹å‰çš„æ–‡ç« è®¾è®¡æ¨¡å¼å­¦ä¹ ä¹‹ç­–ç•¥æ¨¡å¼ ä¸€æ–‡ä¸­ä»‹ç»äº†ç­–ç•¥æ¨¡å¼çš„ä¼˜ç‚¹ã€ç¼ºç‚¹ã€å®ç°æ–¹æ³•å’Œå…·ä½“çš„ä½¿ç”¨åœºæ™¯ã€‚ç­–ç•¥ç±»æœ‰ç­–ç•¥ç±»ä¼šå¢å¤š,é€ æˆç±»è†¨èƒ€çš„ç¼ºç‚¹ï¼Œè¿™ä¸ªç¼ºç‚¹æˆ‘è¿˜æ˜¯æ¯”è¾ƒåœ¨æ„çš„ã€‚å› ä¸ºåœ¨å®é™…å¼€å‘ä¸­å‘ç°ï¼Œæœ‰æ—¶ç­–ç•¥çš„å®ç°æ²¡æœ‰å¤šå°‘ä»£ç ï¼Œè¿™æ ·çš„å®šä¹‰æˆä¸€ä¸ªç­–ç•¥ç±»åè€ŒçœŸçš„æœ‰ç‚¹æµªè´¹ï¼Œç¡®å®é€ æˆäº†ç±»è†¨èƒ€ã€‚è‡ªä»å‘ç°äº†è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä¸€ç›´åœ¨æ€è€ƒå¦‚ä½•è§£å†³è¿™ç§é—®é¢˜ï¼Œç»è¿‡æ€è€ƒè§£å†³é—®é¢˜çš„æ–¹æ³•å·²ç»æƒ³å‡ºæ¥äº†ï¼Œä½†æ˜¯ä¸€ç›´æ²¡æœ‰å»å°è¯•åšå‡ºæ¥çœ‹çœ‹æ˜¯å¦çœŸçš„èƒ½è§£å†³ç­–ç•¥æ¨¡å¼ ç±»è†¨èƒ€çš„é—®é¢˜,ç»ˆäºåœ¨è¿™å‘¨æˆ‘å¿™é‡Œå·é—²ç”¨ä»£ç å®ç°äº†æˆ‘çš„æƒ³æ³•ï¼Œæˆ‘è‡ªè®¤ä¸ºåˆ©ç”¨ Lambdaè¡¨è¾¾å¼ + åå°„ + æ³¨è§£ ç»„åˆè§£å†³äº†ç±»è†¨èƒ€çš„é—®é¢˜ï¼Œè¿™ç§èˆ¹æ–°ç‰ˆæœ¬å®ç°æ–¹æ¡ˆï¼Œå®¹æˆ‘ç»†ç»†é“æ¥ï¼ å¤§æ‰å¥½ï¼Œæˆ‘ç³»æ¸£æ¸£è¾‰ï¼Œæ¢æŒ½æ‡’æœˆï¼Œä»‹å››é‡Œæ²¡æœ‰æŒ½è¿‡çš„èˆ¹æ–°ç‰ˆæœ¬ï¼ŒæŒ¤éœ€ä½“éªŒä¸‰ç•ªé’Ÿï¼Œé‡Œé€ ä¼šå¹²æˆ‘ä¸€æ ·ï¼Œçˆ±è±¡èŠ‚æ¬¾æ¸¸æˆã€‚ â€”å¼€å¿ƒä¸€å“ˆ ğŸ˜„ğŸ˜„ ä»£ç ç»“æ„å›¾è¿™ç§å®ç°æ–¹æ³•ï¼ŒUMLå›¾æ²¡æ³•å±•ç°å…¶ä¸­å…³ç³»ï¼Œæ‰€ä»¥å°±ä¸è´´UMLå›¾äº†ï¼Œç›´æ¥ä¸Šä»£ç çš„ç»“æ„å›¾ã€‚ ä¸»è¦æ€æƒ³ ä¸ºä½•ä¼šå‡ºç°ç±»è†¨èƒ€ ç­–ç•¥æ¨¡å¼ç±»è†¨èƒ€çš„ç¼ºç‚¹ï¼Œå°±æ˜¯ç­–ç•¥ç±»å¤ªå¤šçš„ç¼˜æ•…ã€‚å¦‚æœç­–ç•¥ç±»çš„å®ç°ä»£ç ä¸æ˜¯å¾ˆå¤šï¼Œæ˜¯å¦å¯ä»¥å°†ç­–ç•¥ä¸åœ¨ç±»çš„çº§åˆ«ä¸Šå®ç°ï¼Ÿäºæ˜¯æƒ³åˆ°äº†åˆ©ç”¨Lambdaè¡¨è¾¾å¼çš„åŒ¿åç±»æ¥å®ç°ç­–ç•¥æ¥å£ï¼Œè¿™æ ·ä¸å°±æŠŠå®ç°ä»ç±»é™çº§åˆ°äº†æ–¹æ³•çº§åˆ«äº†ä¹ˆï¼Œå“ˆå“ˆğŸ˜„ğŸ˜„ï¼ï¼ å¦‚ä½•å°†è¿™äº›ç­–ç•¥æ–¹æ³•ç»Ÿä¸€èµ·æ¥ï¼Œæ–¹ä¾¿å¤–éƒ¨è°ƒç”¨ç­–ç•¥æ–¹æ³•éƒ½åœ¨ä¸€ä¸ªç±»ä¸­ï¼Œè¿™æ ·é¦–å…ˆè¦æ ‡æ³¨ä¸€ä¸‹æ–¹æ³•ï¼Œå“ªä¸ªæ˜¯ç­–ç•¥æ–¹æ³•ï¼Œå“ªä¸ªæ˜¯æ™®é€šæ–¹æ³•ã€‚è¿™ä¸ªé—®é¢˜æˆ‘ä»¬ç”¨æ³¨è§£æ¥å®ç°ï¼Œå› ä¸ºåœ¨Java è¯­è¨€ä¸­çš„ç±»ã€æ–¹æ³•ã€å˜é‡ã€å‚æ•°å’ŒåŒ…ç­‰éƒ½å¯ä»¥ç”¨æ³¨è§£æ¥æ ‡æ³¨ã€‚ æˆ‘æƒ³æŠŠç­–ç•¥æ–¹æ³•å­˜æ”¾åœ¨Mapä¸­ï¼Œç”¨ç­–ç•¥çš„åå­—ä½œä¸ºMapçš„keyï¼Œç­–ç•¥æ–¹æ³•ä½œä¸ºMapçš„valueã€‚æˆ‘ä»¬åœ¨è¿™é‡Œç”¨åå°„æ¥å°†Lambdaå®ç°çš„åŒ¿åç±»å­˜æ”¾åˆ°Mapä¸­ã€‚ ä»£ç å®ç° å®šä¹‰ä¸€ä¸ªç­–ç•¥æ³¨è§£ Strategyï¼Œç”¨æ¥æ ‡æ³¨ç­–ç•¥æ–¹æ³• 1234567891011121314151617181920212223242526/** * * Strategy æ³¨è§£ * * @author Sam * @date 2021/1/26 * @since 1.7.7 */@Inherited@Documented@Retention(RetentionPolicy.RUNTIME)@Target(&#123;ElementType.METHOD,ElementType.TYPE&#125;)public @interface Strategy &#123; /** * æ ‡è¯†ä¸åŒçš„æ¨¡å— productã€orderæ¨¡å— * @return */ String module() default \"\"; /** * å…·ä½“çš„ç­–ç•¥ç±»å‹ * @return */ String value() default \"\";&#125; ç­–ç•¥æ¥å£,è¿™é‡Œçš„ç­–ç•¥æ¥å£å¦‚æœä¸æ˜¯å¾ˆå¤æ‚çš„è¯å¯ä»¥ç”¨jdkè‡ªå¸¦çš„java.util.function.Function&lt;T, R&gt;æ›¿ä»£ 1234567891011121314151617181920/** * * @param &lt;T&gt; ç­–ç•¥çš„å…¥å‚ç±»å‹ * @param &lt;R&gt; ç­–ç•¥çš„è¿”å›å€¼ç±»å‹ * * @author Sam * @date 2021/1/26 * @since 1.7.7 */@FunctionalInterfacepublic interface IStrategyHandler&lt;T, R&gt; &#123; /** * ç­–ç•¥ * @param param å‚æ•° * @return */ R apply(T param);&#125; AbstractStrategyå®ç°ä½¿ç”¨Springæä¾›çš„æ‰©å±•ç‚¹ApplicationContextAwareï¼Œåœ¨ç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™å°†å¯¹åº”ç­–ç•¥æ–¹æ³•çš„å­˜æ”¾åœ¨Mapä¸­ï¼ŒåŒæ—¶å¯¹å¤–æä¾›æ‰§è¡Œå…¥å£ execute 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283@Slf4jpublic abstract class AbstractStrategy&lt;T, R&gt; implements ApplicationContextAware &#123; private Map&lt;String, IStrategyHandler&lt;T, R&gt;&gt; implMap = new ConcurrentHashMap&lt;&gt;(); private final String DELIMITER = \"####\"; /** * è·å¾—bean çš„class * * @param &lt;K&gt; ç±»å‹ * @return */ abstract &lt;K&gt; Class&lt;K&gt; getClazz(); /** * è¿”å›springä¸­çš„beanName * * @return */ abstract String getBeanName(); /** * æ‰§è¡Œå‡½æ•° * * @param strategy ç­–ç•¥ç±»å‹ * @param module æ¨¡å— * @param param å‚æ•° * @return */ public R execute(String strategy, String module, T param) &#123; String key = StringUtils.join(module, DELIMITER, strategy); IStrategyHandler&lt;T, R&gt; handler = implMap.get(key); log.debug(\"ç­–ç•¥å®ç°é›†åˆ&#123;&#125;\", implMap); if (handler == null) &#123; throw new RuntimeException(\"æ²¡æœ‰ç›¸åº”çš„ç­–ç•¥å®ç°\"); &#125; R apply = handler.apply(param); return apply; &#125; @Override @SuppressWarnings(\"unchecked\") public void setApplicationContext(ApplicationContext applicationContext) throws BeansException &#123; log.error(\"AbstractStrategy æ‰§è¡Œ\"); Class&lt;Object&gt; clazz = getClazz(); Object bean = applicationContext.getBean(getBeanName(), clazz); if (bean == null) &#123; return; &#125; Strategy strategyAnnotation = bean.getClass().getAnnotation(Strategy.class); if (strategyAnnotation == null) &#123; log.error(\"ç±»[&#123;&#125;]æ²¡æœ‰æ·»åŠ Strategyæ³¨è§£\", clazz); return; &#125; // æ¨¡å—çš„åç§° String module = strategyAnnotation.module(); Method[] declaredMethods = clazz.getDeclaredMethods(); if (ArrayUtils.isEmpty(declaredMethods)) &#123; throw new RuntimeException(clazz + \"æ²¡æœ‰ç›¸å…³ç­–ç•¥æ–¹æ³•\"); &#125; for (Method declaredMethod : declaredMethods) &#123; Strategy annotation = declaredMethod.getAnnotation(Strategy.class); if (annotation == null) &#123; continue; &#125; try &#123; // ç”¨moduleå’Œ å››ä¸ª #### åŠ ä¸Š value ç»„æˆmapçš„key String key = StringUtils.join(module, DELIMITER, annotation.value()); IStrategyHandler&lt;T, R&gt; handler = (IStrategyHandler&lt;T, R&gt;) declaredMethod.invoke(bean); implMap.put(key, handler); &#125; catch (IllegalAccessException | InvocationTargetException e) &#123; log.error(\"æ¨¡å—[&#123;&#125;]ç­–ç•¥å¤„ç†å‘ç”Ÿäº†é”™è¯¯\", module, e); &#125; &#125; &#125;&#125; è®¢å•ã€äº§å“æ¨¡å—æœ‰è¿™ç§ç­–ç•¥æ¨¡å¼åœºæ™¯ è®¢å•æ¨¡å—çš„ç­–ç•¥æ¨¡å¼åœºæ™¯,IStrategyHandlerçš„ç­–ç•¥æ–¹æ³•éƒ½åœ¨OrderStrategyImplä¸­å®ç°ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667@Slf4j@Service@Strategy(module = \"Order\")public class OrderStrategyImpl &#123; @Autowired private BizLocalMessageService bizLocalMessageService; @Strategy(value = \"strategy1\") public IStrategyHandler&lt;BInDto, BOutDto&gt; strategy1() &#123; return bInDto -&gt; &#123; log.error(\"è®¢å•æ¨¡å—ç›¸å…³ç­–ç•¥ strategy1 executeStart\"); String join = StringUtils.join(\"strategy1:\", bInDto.getParam1(), bInDto.getParam2()); BOutDto bOutDto = new BOutDto(); bOutDto.setOrderNo(join); bOutDto.setPrice(111); SaveBizLocalMessageDto dto = new SaveBizLocalMessageDto(); dto.setBizModule((byte)0); ThreadLocalRandom localRandom = ThreadLocalRandom.current(); dto.setBizNo(localRandom.nextInt(16000,115000)+\"\"); dto.setBizType((byte)0); dto.setMsg(\"\"); dto.setMsgDesc(\"\"); dto.setHandledCount((byte)0); dto.setMaxHandleCount((byte)0); bizLocalMessageService.saveBizLocalMessage(dto); log.error(\"è®¢å•æ¨¡å—ç›¸å…³ç­–ç•¥ strategy1 executeEnd\"); return bOutDto; &#125;; &#125; @Strategy(value = \"strategy2\") public IStrategyHandler&lt;BInDto, BOutDto&gt; strategy2() &#123; return param -&gt; &#123; log.error(\"è®¢å•æ¨¡å—ç›¸å…³ç­–ç•¥ strategy2 executeStart\"); String join = StringUtils.join(\"strategy2:\", param.getParam1(), param.getParam2()); BOutDto bOutDto = new BOutDto(); bOutDto.setOrderNo(join); bOutDto.setPrice(11121); SaveBizLocalMessageDto dto = new SaveBizLocalMessageDto(); dto.setBizModule((byte)0); ThreadLocalRandom localRandom = ThreadLocalRandom.current(); dto.setBizNo(localRandom.nextInt(6000,15000)+\"\"); dto.setBizType((byte)0); dto.setMsg(\"\"); dto.setMsgDesc(\"\"); dto.setHandledCount((byte)0); dto.setMaxHandleCount((byte)0); bizLocalMessageService.saveBizLocalMessage(dto); log.error(\"è®¢å•æ¨¡å—ç›¸å…³ç­–ç•¥ strategy2 executeEnd\"); return bOutDto; &#125;; &#125;&#125; äº§å“æ¨¡å—çš„ç­–ç•¥æ¨¡å¼åœºæ™¯ï¼ŒIStrategyHandlerçš„ç­–ç•¥æ–¹æ³•éƒ½åœ¨ProductStrategyImplä¸­å®ç° 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768@Slf4j@Service@Strategy(module = \"Product\")public class ProductStrategyImpl &#123; @Autowired private BizLocalMessageService bizLocalMessageService; @Strategy(value = \"strategyA\") public IStrategyHandler&lt;BInDto, BOutDto&gt; strategy1() &#123; return bInDto -&gt; &#123; log.error(\"äº§å“æ¨¡å—ç›¸å…³ç­–ç•¥ strategy1 executeStart\"); String join = StringUtils.join(\"strategyA:\", bInDto.getParam1(), bInDto.getParam2()); BOutDto bOutDto = new BOutDto(); bOutDto.setOrderNo(join); bOutDto.setPrice(111); SaveBizLocalMessageDto dto = new SaveBizLocalMessageDto(); dto.setBizModule((byte)0); ThreadLocalRandom localRandom = ThreadLocalRandom.current(); dto.setBizNo(localRandom.nextInt(1000,5000)+\"\"); dto.setBizType((byte)0); dto.setMsg(\"\"); dto.setMsgDesc(\"\"); dto.setHandledCount((byte)0); dto.setMaxHandleCount((byte)0); bizLocalMessageService.saveBizLocalMessage(dto); log.error(\"äº§å“æ¨¡å—ç›¸å…³ç­–ç•¥ strategy1 executeEnd\"); return bOutDto; &#125;; &#125; @Strategy(value = \"strategyB\") public IStrategyHandler&lt;BInDto, BOutDto&gt; strategy2() &#123; return param -&gt; &#123; log.error(\"äº§å“æ¨¡å—ç›¸å…³ç­–ç•¥ strategy2 executeStart\"); String join = StringUtils.join(\"strategyB:\", param.getParam1(), param.getParam2()); BOutDto bOutDto = new BOutDto(); bOutDto.setOrderNo(join); bOutDto.setPrice(11121); SaveBizLocalMessageDto dto = new SaveBizLocalMessageDto(); dto.setBizModule((byte)0); ThreadLocalRandom localRandom = ThreadLocalRandom.current(); dto.setBizNo(localRandom.nextInt(5000,8000)+\"\"); dto.setBizType((byte)0); dto.setMsg(\"\"); dto.setMsgDesc(\"\"); dto.setHandledCount((byte)0); dto.setMaxHandleCount((byte)0); bizLocalMessageService.saveBizLocalMessage(dto); log.error(\"äº§å“æ¨¡å—ç›¸å…³ç­–ç•¥ strategy2 executeEnd\"); return bOutDto; &#125;; &#125;&#125; å°†å­˜æ”¾ç­–ç•¥æ–¹æ³•çš„ç±»å’Œç­–ç•¥ä¸Šä¸‹æ–‡å…³è”èµ·æ¥ è®¢å•æ¨¡å—ç›¸å…³ 1234567891011121314@Slf4j@Componentpublic class OrderStrategyContext extends AbstractStrategy &#123; @Override Class&lt;OrderStrategyImpl&gt; getClazz() &#123; return OrderStrategyImpl.class; &#125; @Override String getBeanName() &#123; return \"orderStrategyImpl\"; &#125;&#125; äº§å“æ¨¡å—ç›¸å…³ 1234567891011121314@Slf4j@Componentpublic class ProductStrategyContext extends AbstractStrategy &#123; @Override Class&lt;ProductStrategyImpl&gt; getClazz() &#123; return ProductStrategyImpl.class; &#125; @Override String getBeanName() &#123; return \"productStrategyImpl\"; &#125;&#125; ä»£ç å®ç°å®Œæ¯•ï¼Œæˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ 12345678910111213141516171819202122232425262728293031@ContextConfiguration(locations = &#123;\"classpath:spring/spring-dao.xml\",\"classpath:spring/spring-service.xml\"&#125;)@RunWith(value = SpringJUnit4ClassRunner.class)public class StrategyTest &#123; @Autowired private AbstractStrategy&lt;BInDto, BOutDto&gt; orderStrategyContext; @Autowired private AbstractStrategy&lt;BInDto, BOutDto&gt; productStrategyContext; @Test public void productTest()&#123; BInDto bInDto = new BInDto(); bInDto.setParam1(\"äº§å“é‡‘é¢\"); bInDto.setParam2(222); productStrategyContext.execute(\"strategyA\", \"Product\", bInDto); productStrategyContext.execute(\"strategyB\", \"Product\", bInDto); &#125; @Test public void orderTest()&#123; BInDto bInDto = new BInDto(); bInDto.setParam1(\"ä¼˜æƒ åˆ¸é‡‘é¢\"); bInDto.setParam2(180); orderStrategyContext.execute(\"strategy1\", \"Order\", bInDto); orderStrategyContext.execute(\"strategy2\", \"Order\", bInDto); &#125;&#125; äº§å“æ¨¡å—çš„æµ‹è¯• è®¢å•æ¨¡å—çš„æµ‹è¯• æ€»ç»“ç­–ç•¥æ¥å£ä¸æ˜¯å¾ˆå¤æ‚çš„æƒ…å†µä¸‹ IStrategyHandler æ¥å£å¯ä»¥å¤ç”¨ï¼Œè‡ªå·±å®ç° StrategyContext æŠ½è±¡ç±»ï¼Œç„¶åå†å®ç°è‡ªå·±çš„ç­–ç•¥æ–¹æ³•å°±å¯ä»¥äº†ï¼Œä¸çŸ¥å¤§å®¶å¯¹äºè¿™ç§èˆ¹æ–°ç‰ˆæœ¬æœ‰ä»€ä¹ˆçœ‹æ³•ï¼","categories":[],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://ydstudios.gitee.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"ç­–ç•¥æ¨¡å¼","slug":"ç­–ç•¥æ¨¡å¼","permalink":"https://ydstudios.gitee.io/tags/%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/"},{"name":"åå°„","slug":"åå°„","permalink":"https://ydstudios.gitee.io/tags/%E5%8F%8D%E5%B0%84/"},{"name":"lambdaè¡¨è¾¾å¼","slug":"lambdaè¡¨è¾¾å¼","permalink":"https://ydstudios.gitee.io/tags/lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/"},{"name":"æ³¨è§£","slug":"æ³¨è§£","permalink":"https://ydstudios.gitee.io/tags/%E6%B3%A8%E8%A7%A3/"}]},{"title":"UMLç±»å›¾","slug":"UMLç±»å›¾","date":"2021-01-23T14:17:36.000Z","updated":"2021-01-23T07:26:07.000Z","comments":true,"path":"post/122fc4b2.html","link":"","permalink":"https://ydstudios.gitee.io/post/122fc4b2.html","excerpt":"UMLUML(Unified Modeling Languageï¼Œç»Ÿä¸€å»ºæ¨¡è¯­è¨€)æ˜¯ä¸€ç§ä¸ºé¢å‘å¯¹è±¡ç³»ç»Ÿçš„äº§å“è¿›è¡Œè¯´æ˜ã€å¯è§†åŒ–å’Œç¼–åˆ¶æ–‡æ¡£çš„ä¸€ç§æ ‡å‡†è¯­è¨€ï¼Œæ˜¯éä¸“åˆ©çš„ç¬¬ä¸‰ä»£å»ºæ¨¡å’Œè§„çº¦è¯­è¨€ã€‚UMLæ˜¯é¢å‘å¯¹è±¡è®¾è®¡çš„å»ºæ¨¡å·¥å…·ï¼Œç‹¬ç«‹äºä»»ä½•å…·ä½“ç¨‹åºè®¾è®¡è¯­è¨€ã€‚","text":"UMLUML(Unified Modeling Languageï¼Œç»Ÿä¸€å»ºæ¨¡è¯­è¨€)æ˜¯ä¸€ç§ä¸ºé¢å‘å¯¹è±¡ç³»ç»Ÿçš„äº§å“è¿›è¡Œè¯´æ˜ã€å¯è§†åŒ–å’Œç¼–åˆ¶æ–‡æ¡£çš„ä¸€ç§æ ‡å‡†è¯­è¨€ï¼Œæ˜¯éä¸“åˆ©çš„ç¬¬ä¸‰ä»£å»ºæ¨¡å’Œè§„çº¦è¯­è¨€ã€‚UMLæ˜¯é¢å‘å¯¹è±¡è®¾è®¡çš„å»ºæ¨¡å·¥å…·ï¼Œç‹¬ç«‹äºä»»ä½•å…·ä½“ç¨‹åºè®¾è®¡è¯­è¨€ã€‚ UMLå’Œè®¾è®¡æ¨¡å¼è®¾è®¡æ¨¡å¼ï¼ˆDesign patternï¼‰æ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨ã€å¤šæ•°äººçŸ¥æ™“çš„ã€ç»è¿‡åˆ†ç±»ç¼–ç›®çš„ã€ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ã€‚ä¸ªäººè§‰å¾—è®¾è®¡æ¨¡å¼æ˜¯å‰äººå¤§ä½¬æ€»ç»“çš„ä¸€ç§æ€æƒ³ï¼Œæ˜¯ä¸€ç§è„±ç¦»è¯­è¨€å¹¶ä¸”èƒ½å¤ŸæŒ‡å¯¼ç¨‹åºå‘˜æ›´å®¹æ˜“å†™å‡ºå¥½çš„ä»£ç çš„ç¼–ç¨‹ä¹ æƒ¯ã€‚å¯¹äºä¸€ä¸ªæ²¡æœ‰å¤ªå¤šç»éªŒçš„ç¨‹åºå‘˜ï¼Œå¦‚ä½•å†™å‡º ç®€æ´ä¼˜é›…ï¼Œå¯å¤ç”¨æ€§é«˜ï¼Œå¯æ‰©å±•æ€§å¼ºï¼Œé«˜å†…èšä½è€¦åˆ çš„ä»£ç è‡³å…³é‡è¦ã€‚å­¦ä¹ åˆ«äººçš„è®¾è®¡æ¨¡å¼å°±æ˜¯ä¸ºäº†åœ¨æ²¡æœ‰ç»éªŒçš„æƒ…å†µä¸‹å†™å‡ºä¸€æ‰‹ä¸é”™çš„ä»£ç ï¼Œåªçœ‹ä¸å†™å¹¶ä¸èƒ½æ·±åˆ»ä½“éªŒåˆ°è®¾è®¡æ¨¡å¼çš„å·§å¦™ä¹‹å¤„ï¼Œè€Œå­¦ä¼šä½¿ç”¨UMLè¿›è¡Œéœ€æ±‚åˆ†æï¼Œæ˜¯ä½¿ç”¨è®¾è®¡æ¨¡å¼å†™å¥½ä»£ç çš„å‰æã€‚ UMLå›¾åˆ†ç±» ç”¨ä¾‹å›¾(Use Case Diagram)ï¼Œæè¿°ç³»ç»ŸåŠŸèƒ½ï¼› ç±»å›¾(Class Diagram)ï¼Œæè¿°ç³»ç»Ÿçš„é™æ€ç»“æ„ï¼› å¯¹è±¡å›¾(Object Diagram)ï¼Œæè¿°ç³»ç»Ÿåœ¨æŸä¸ªæ—¶åˆ»çš„é™æ€ç»“æ„ï¼› ç»„ä»¶å›¾(Component Diagram)ï¼Œæè¿°äº†å®ç°ç³»ç»Ÿçš„å…ƒç´ çš„ç»„ç»‡ï¼› é…ç½®å›¾(Deployment Diagram)ï¼Œæè¿°äº†ç¯å¢ƒå…ƒç´ çš„é…ç½®ï¼Œå¹¶æŠŠå®ç°ç³»ç»Ÿçš„å…ƒç´ æ˜ å°„åˆ°é…ç½®ä¸Šï¼› çŠ¶æ€å›¾(State Diagram)ï¼Œæè¿°äº†ç³»ç»Ÿå…ƒç´ çš„çŠ¶æ€æ¡ä»¶å’Œå“åº”ï¼› æ—¶åºå›¾(Sequence Diagram)ï¼ŒæŒ‰æ—¶é—´é¡ºåºæè¿°ç³»ç»Ÿå…ƒç´ é—´çš„äº¤äº’ï¼› åä½œå›¾(Collaboration Diagram)ï¼ŒæŒ‰ç…§æ—¶é—´å’Œç©ºé—´é¡ºåºæè¿°ç³»ç»Ÿå…ƒç´ é—´çš„äº¤äº’å’Œå®ƒä»¬ä¹‹é—´çš„å…³ç³»ï¼› æ´»åŠ¨å›¾(Activity Diagram)ï¼Œæè¿°äº†ç³»ç»Ÿå…ƒç´ çš„æ´»åŠ¨ï¼› å…¶ä¸­ç±»å›¾æ˜¯æè¿°ç±»ä¸ç±»ä¹‹é—´çš„å…³ç³»çš„ï¼Œæ˜¯UMLå›¾ä¸­æœ€æ ¸å¿ƒçš„ã€‚ UMLä½œç”¨ ä¸ºè½¯ä»¶ç³»ç»Ÿå»ºç«‹å¯è§†åŒ–æ¨¡å‹ï¼› èƒ½å¤Ÿäº†è§£ç³»ç»Ÿçš„ç»“æ„å’Œèƒ½åŠ›ï¼› ä¸ºè½¯ä»¶ç³»ç»Ÿå»ºç«‹æ„ä»¶ï¼› ä¸ºè½¯ä»¶ç³»ç»Ÿå»ºç«‹æ–‡æ¡£ï¼› ä»€ä¹ˆæ˜¯æ¨¡å‹ï¼Ÿæ¨¡å‹æ˜¯å¯¹ç°å®ä¸–ç•Œçš„å½¢çŠ¶æˆ–çŠ¶æ€çš„æŠ½è±¡æ¨¡æ‹Ÿå’Œç®€åŒ–ã€‚ä¸ºä»€ä¹ˆè¦å»ºæ¨¡ï¼Ÿæœ€ç®€å•çš„ç†ç”±ï¼šä¸ºäº†èƒ½å¤Ÿæ›´å¥½åœ°ç†è§£æ­£åœ¨å¼€å‘çš„ç³»ç»Ÿã€‚ UML ç±»å›¾å­¦ä¹ è®¾è®¡æ¨¡å¼å¿…å®šéœ€è¦å…ˆè¯»æ‡‚ UML ç±»å›¾ï¼Œä¸‹é¢å°±è°ˆè°ˆå…·ä½“ UML ç±»å›¾ä¸­çš„æ¦‚å¿µã€‚ç±»å›¾æ˜¯ç”¨äºæè¿°ä¸€ç»„ç±»ã€æ¥å£ã€åä½œä»¥åŠå®ƒä»¬ä¹‹é—´çš„é™æ€å…³ç³»ã€‚åœ¨é¢å‘å¯¹è±¡ç³»ç»Ÿçš„å»ºæ¨¡ä¸­ï¼Œç±»å›¾æ˜¯æœ€ä¸ºå¸¸ç”¨çš„å›¾ï¼Œå®ƒç”¨æ¥é˜æ˜ç³»ç»Ÿçš„é™æ€ç»“æ„ã€‚äº‹å®ä¸Šç±»æ˜¯å¯¹ä¸€ç»„å…·æœ‰ç›¸åŒå±æ€§ã€æ“ä½œã€å…³ç³»å’Œè¯­ä¹‰çš„å¯¹è±¡çš„æè¿°ï¼Œå…¶ä¸­å¯¹ç±»çš„å±æ€§å’Œæ“ä½œè¿›è¡Œæè¿°æ—¶çš„ä¸€ä¸ªæœ€é‡è¦çš„ç»†èŠ‚å°±æ˜¯å®ƒçš„å¯è§æ€§ã€‚ ç±»å›¾çš„åŸºæœ¬ç¬¦å·ä¸å«ä¹‰1ã€ ç±»(Class)ï¼šä¸€èˆ¬æ˜¯ç”¨ä¸‰å±‚çŸ©å½¢æ¡†è¡¨ç¤ºï¼Œç¬¬ä¸€å±‚è¡¨ç¤ºç±»çš„åç§°ï¼Œç¬¬äºŒå±‚è¡¨ç¤ºçš„æ˜¯å­—æ®µå’Œå±æ€§ï¼Œç¬¬ä¸‰å±‚åˆ™æ˜¯ç±»çš„æ–¹æ³•ã€‚ç¬¬ä¸€å±‚ä¸­ï¼Œå¦‚æœæ˜¯æŠ½è±¡ç±»ï¼Œéœ€ç”¨æ–œä½“æ˜¾ç¤ºã€‚ ç±»çš„å±æ€§è¡¨è¾¾æ–¹å¼ 1æƒé™ å±æ€§åï¼šç±»å‹ [ = é»˜è®¤å€¼ ] ç±»çš„æ–¹æ³•è¡¨è¾¾æ–¹å¼ 1æƒé™ æ–¹æ³•åç§°(å‚æ•°åˆ—è¡¨) [ : è¿”å›ç±»å‹] æ³¨æ„ï¼špublic ç”¨ + è¡¨ç¤º ï¼Œprotected ç”¨ # è¡¨ç¤º ï¼Œprivate ç”¨ - è¡¨ç¤º ï¼Œdefault ç”¨ ~ è¡¨ç¤º 2ã€æ¥å£(interface)ï¼šæ¥å£ä¸ç±»å›¾ç±»ä¼¼ï¼Œä¸ç±»å›¾çš„ä¸»è¦åŒºåˆ«å°±æ˜¯é¡¶ç«¯æœ‰&lt;&lt;interface&gt;&gt;æ˜¾ç¤ºã€‚ 3ã€ç±»ä¹‹é—´çš„å…³ç³»ç±»ä¸ç±»ä¸€å…±æœ‰å¦‚ä¸‹6ç§å…³ç³»ï¼šæ³›åŒ–ï¼ˆGeneralizationï¼‰ã€å®ç°ï¼ˆRealizationï¼‰ã€ç»„åˆï¼ˆCompositionï¼‰ã€èšåˆï¼ˆAggregationï¼‰ã€å…³è”ï¼ˆAssociationï¼‰ã€ä¾èµ– ï¼ˆDependenceï¼‰ã€‚ä¸Šè¿°6ç§å…³ç³»çš„å¼ºå¼±å¦‚ä¸‹ï¼š 1æ³›åŒ– = å®ç° &gt; ç»„åˆ &gt; èšåˆ &gt; å…³è” &gt; ä¾èµ– ç±»å…³ç³»å›¾ç¤º æ³›åŒ–ï¼ˆGeneralizationï¼‰ï¼šè¡¨ç¤ºçš„æ˜¯ç±»ä¹‹é—´çš„ç»§æ‰¿å…³ç³»ï¼Œæ³¨æ„æ˜¯å­ç±»æŒ‡å‘çˆ¶ç±»ã€‚UMLä¸­ç”¨å¸¦ç©ºå¿ƒä¸‰è§’ç®­å¤´çš„å®çº¿è¡¨ç¤ºæ³›åŒ–å…³ç³»ï¼Œç®­å¤´æŒ‡å‘çš„æ˜¯çˆ¶ç±»ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839public class People &#123; private String name; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125;&#125;public class Student extends People &#123; private Long id; private Double grade; public void study(String course) &#123; System.out.println(\"å­¦ä¹ \" + course); &#125; public Long getId() &#123; return id; &#125; public void setId(Long id) &#123; this.id = id; &#125; public Double getGrade() &#123; return grade; &#125; public void setGrade(Double grade) &#123; this.grade = grade; &#125;&#125; å®ç°(Realization)ï¼šå®ç°å…³ç³»ç”¨ä¸€æ¡å¸¦ç©ºå¿ƒç®­å¤´çš„è™šçº¿è¡¨ç¤ºã€‚UMLä¸­ç”¨å¸¦ç©ºå¿ƒä¸‰è§’ç®­å¤´çš„è™šçº¿è¡¨ç¤ºå®ç°å…³ç³»ï¼Œç®­å¤´æŒ‡å‘çš„æ˜¯æ¥å£ã€‚ 12345678910111213141516171819202122public interface IWork &#123; void doWork();&#125;public class People implements IWork&#123; private String name; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; @Override public void doWork() &#123; System.out.println(\"å·¥ä½œ\"); &#125;&#125; ç»„åˆ(Composition)ï¼šæ˜¯èšåˆçš„ä¸€ç§ç‰¹æ®Šå½¢å¼ï¼Œè¡¨ç¤ºçš„æ˜¯ç±»ä¹‹é—´æ›´å¼ºçš„ç»„åˆå…³ç³»ã€‚ä»–ä½“ç°çš„æ˜¯ä¸€ç§contains-açš„å…³ç³»ï¼Œè¿™ç§å…³ç³»æ¯”èšåˆæ›´å¼ºï¼Œä¹Ÿç§°ä¸ºå¼ºèšåˆï¼›ä»–åŒæ ·ä½“ç°æ•´ä½“ä¸éƒ¨åˆ†é—´çš„å…³ç³»ï¼Œä½†æ­¤æ—¶æ•´ä½“ä¸éƒ¨åˆ†æ˜¯ä¸å¯åˆ†çš„ï¼Œæ•´ä½“çš„ç”Ÿå‘½å‘¨æœŸç»“æŸä¹Ÿå°±æ„å‘³ç€éƒ¨åˆ†çš„ç”Ÿå‘½å‘¨æœŸç»“æŸã€‚UMLä¸­ç”¨å®å¿ƒè±å½¢å¤´çš„å®çº¿æ¥è¡¨ç¤ºç»„åˆï¼Œè±å½¢å¤´æŒ‡å‘æ•´ä½“ã€‚ ä¾‹å¦‚å…¬å¸ç”±å¤šä¸ªéƒ¨é—¨ç»„æˆï¼›å…¬å¸ä¸å­˜åœ¨äº†ï¼Œéƒ¨é—¨ä¹Ÿå°†ä¸å­˜åœ¨äº†ã€‚ èšåˆï¼ˆAggregationï¼‰ï¼šç”¨äºè¡¨ç¤ºå®ä½“å¯¹è±¡ä¹‹é—´çš„å…³ç³»ï¼Œè¡¨ç¤ºæ•´ä½“ç”±éƒ¨åˆ†æ„æˆçš„è¯­ä¹‰ã€‚ä¸ç»„åˆå…³ç³»ä¸åŒçš„æ˜¯ï¼Œæ•´ä½“å’Œéƒ¨åˆ†ä¸æ˜¯å¼ºä¾èµ–çš„ï¼Œå³ä½¿æ•´ä½“ä¸å­˜åœ¨äº†ï¼Œéƒ¨åˆ†ä»ç„¶å­˜åœ¨ï¼›èšåˆå…³ç³»æ˜¯å…³è”å…³ç³»çš„ä¸€ç§ï¼Œè€¦åˆåº¦å¼ºäºå…³è”ï¼Œä»–ä»¬çš„ä»£ç è¡¨ç°æ˜¯ç›¸åŒçš„ï¼Œä»…ä»…æ˜¯åœ¨è¯­ä¹‰ä¸Šæœ‰æ‰€åŒºåˆ«ï¼šå…³è”å…³ç³»çš„å¯¹è±¡é—´æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œè€Œèšåˆå…³ç³»çš„å¯¹è±¡ä¹‹é—´å­˜åœ¨ç€åŒ…å®¹å…³ç³»ï¼Œä»–ä»¬ä¹‹é—´æ˜¯â€œæ•´ä½“-ä¸ªä½“â€çš„ç›¸äº’å…³ç³»ã€‚UMLä¸­ç”¨ç©ºå¿ƒè±å½¢å¤´çš„å®çº¿è¡¨ç¤ºèšåˆå…³ç³»ï¼Œè±å½¢å¤´æŒ‡å‘æ•´ä½“ã€‚ ä¾‹å¦‚ä¸€ä¸ªéƒ¨é—¨ç”±å¤šä¸ªå‘˜å·¥ç»„æˆï¼Œéƒ¨é—¨æ’¤é”€äº†ï¼Œäººå‘˜ä¸ä¼šæ¶ˆå¤±ï¼Œä»–ä»¬ä¾ç„¶å­˜åœ¨ã€‚ å…³è”(Association)ï¼šè¡¨ç¤ºçš„æ˜¯ç±»ä¸ç±»ä¹‹é—´å­˜åœ¨æŸç§ç‰¹å®šçš„å¯¹åº”å…³ç³»ã€‚å®ƒæ˜¯ä¸€ç§é™æ€å…³ç³»ï¼Œé€šå¸¸ä¸è¿è¡ŒçŠ¶æ€æ— å…³ï¼Œä¸€èˆ¬ç”±å¸¸è¯†ç­‰å› ç´ å†³å®šçš„ï¼›å…³è”å…³ç³»é»˜è®¤ä¸å¼ºè°ƒæ–¹å‘ï¼Œè¡¨ç¤ºå¯¹è±¡é—´ç›¸äº’çŸ¥é“ã€‚UMLä¸­ç”¨åŒå‘ã€å•å‘å¸¦ç®­å¤´çš„è™šçº¿è¡¨ç¤ºå…³è”å…³ç³»ï¼Œç®­å¤´ä¸¤ç«¯ä¸ºç›¸äº’å…³è”çš„ä¸¤ä¸ªç±»ã€‚ æ³¨ï¼šåœ¨æœ€ç»ˆä»£ç ä¸­ï¼Œå…³è”å¯¹è±¡é€šå¸¸æ˜¯ä»¥æˆå‘˜å˜é‡çš„å½¢å¼å®ç°çš„; ä¾‹å¦‚ä¹˜è½¦äººå’Œè½¦ç¥¨ä¹‹é—´å°±æ˜¯ä¸€ç§å…³è”å…³ç³»ã€‚ ä¾èµ–(Dependency)ï¼šè¡¨ç¤ºçš„æ˜¯ç±»ä¹‹é—´çš„è°ƒç”¨å…³ç³»ã€‚ä¸å…³è”å…³ç³»ä¸åŒçš„æ˜¯ï¼Œå®ƒæ˜¯ä¸€ç§ä¸´æ—¶æ€§çš„å…³ç³»ï¼Œé€šå¸¸åœ¨è¿è¡ŒæœŸé—´äº§ç”Ÿï¼Œå¹¶ä¸”éšç€è¿è¡Œæ—¶çš„å˜åŒ–ï¼›ä¾èµ–å…³ç³»ä¹Ÿå¯èƒ½å‘ç”Ÿå˜åŒ–ï¼›æ˜¾ç„¶ï¼Œä¾èµ–ä¹Ÿæœ‰æ–¹å‘ï¼ŒåŒå‘ä¾èµ–æ˜¯ä¸€ç§éå¸¸ç³Ÿç³•çš„ç»“æ„ï¼Œæˆ‘ä»¬æ€»æ˜¯åº”è¯¥ä¿æŒå•å‘ä¾èµ–ï¼Œæœç»åŒå‘ä¾èµ–çš„äº§ç”Ÿã€‚UMLä¸­ç”¨å¸¦ç®­å¤´çš„è™šçº¿è¡¨ç¤ºä¾èµ–å…³ç³»ï¼Œè€Œç®­å¤´æ‰€æŒ‡çš„åˆ™æ˜¯è¢«ä¾èµ–çš„ç±»ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778public class Book &#123; private String name; private String author; private Date publishDate; private BigDecimal price; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public String getAuthor() &#123; return author; &#125; public void setAuthor(String author) &#123; this.author = author; &#125; public Date getPublishDate() &#123; return publishDate; &#125; public void setPublishDate(Date publishDate) &#123; this.publishDate = publishDate; &#125; public BigDecimal getPrice() &#123; return price; &#125; public void setPrice(BigDecimal price) &#123; this.price = price; &#125;&#125;public class Student extends People &#123; private Long id; private Double grade; public void study(String course) &#123; System.out.println(\"å­¦ä¹ \" + course); &#125; /** * Studentçš„ç±»ä¾èµ–Bookç±» * */ public void read(Book book) &#123; System.out.println(\"é˜…è¯»\" + book.getName()); &#125; public Long getId() &#123; return id; &#125; public void setId(Long id) &#123; this.id = id; &#125; public Double getGrade() &#123; return grade; &#125; public void setGrade(Double grade) &#123; this.grade = grade; &#125;&#125; æ³¨ï¼šåœ¨æœ€ç»ˆä»£ç ä¸­ï¼Œä¾èµ–å…³ç³»ä½“ç°ä¸ºç±»æ„é€ æ–¹æ³•åŠç±»æ–¹æ³•çš„ä¼ å…¥å‚æ•°ï¼Œç®­å¤´çš„æŒ‡å‘ä¸ºè°ƒç”¨å…³ç³»ï¼›ä¾èµ–å…³ç³»é™¤äº†ä¸´æ—¶çŸ¥é“å¯¹æ–¹å¤–ï¼Œè¿˜æ˜¯â€œä½¿ç”¨â€å¯¹æ–¹çš„æ–¹æ³•å’Œå±æ€§ï¼› å…³è”ã€èšåˆã€ç»„åˆä¸‰ç§å…³ç³»ç”¨ä»£ç è¡¨ç¤ºçš„è¯ï¼Œå¤§å¤šéƒ½æ˜¯ä¸€ä¸ªç±»æ˜¯å¦ä¸€ä¸ªç±»çš„æˆå‘˜å˜é‡ã€‚çœŸæ­£çš„å…³ç³»åªèƒ½é…åˆè¯­ä¹‰ï¼Œç»“åˆä¸Šä¸‹æ–‡æ‰èƒ½å¤Ÿåˆ¤æ–­å‡ºæ¥ï¼Œè€Œåªç»™å‡ºä¸€æ®µä»£ç è®©æˆ‘ä»¬åˆ¤æ–­æ˜¯å…³è”ã€èšåˆè¿˜æ˜¯ç»„åˆå…³ç³»ï¼Œåˆ™æ˜¯æ— æ³•åˆ¤æ–­çš„ã€‚ [1]å‚è€ƒèµ„æ–™https://zhuanlan.zhihu.com/p/24576502[2]å‚è€ƒèµ„æ–™https://design-patterns.readthedocs.io/zh_CN/latest/read_uml.html","categories":[],"tags":[{"name":"UML","slug":"UML","permalink":"https://ydstudios.gitee.io/tags/UML/"},{"name":"ç±»å›¾","slug":"ç±»å›¾","permalink":"https://ydstudios.gitee.io/tags/%E7%B1%BB%E5%9B%BE/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://ydstudios.gitee.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"RocketMQçš„æ¶ˆè´¹æ¨¡å¼","slug":"RocketMQçš„æ¶ˆè´¹æ¨¡å¼","date":"2021-01-18T23:32:39.000Z","updated":"2021-01-18T15:41:25.000Z","comments":true,"path":"post/122ee231.html","link":"","permalink":"https://ydstudios.gitee.io/post/122ee231.html","excerpt":"RocketMQ æ˜¯åŸºäºå‘å¸ƒè®¢é˜…æ¨¡å‹çš„æ¶ˆæ¯ä¸­é—´ä»¶ã€‚æ‰€è°“çš„å‘å¸ƒè®¢é˜…å°±æ˜¯è¯´ï¼Œconsumer è®¢é˜…äº† broker ä¸Šçš„æŸä¸ª topicï¼Œå½“ producer å‘å¸ƒæ¶ˆæ¯åˆ° broker ä¸Šçš„è¯¥ topic æ—¶ï¼Œconsumer å°±èƒ½æ”¶åˆ°è¯¥æ¡æ¶ˆæ¯ã€‚RocketMQé»˜è®¤æ”¯æŒä¸¤ç§æ¶ˆè´¹æ¨¡å¼ï¼Œåˆ†åˆ«æ˜¯é›†ç¾¤æ¶ˆè´¹æ¨¡å¼å’Œå¹¿æ’­æ¶ˆè´¹æ¨¡å¼ï¼Œé»˜è®¤é›†ç¾¤æ¶ˆè´¹æ¨¡å¼ã€‚","text":"RocketMQ æ˜¯åŸºäºå‘å¸ƒè®¢é˜…æ¨¡å‹çš„æ¶ˆæ¯ä¸­é—´ä»¶ã€‚æ‰€è°“çš„å‘å¸ƒè®¢é˜…å°±æ˜¯è¯´ï¼Œconsumer è®¢é˜…äº† broker ä¸Šçš„æŸä¸ª topicï¼Œå½“ producer å‘å¸ƒæ¶ˆæ¯åˆ° broker ä¸Šçš„è¯¥ topic æ—¶ï¼Œconsumer å°±èƒ½æ”¶åˆ°è¯¥æ¡æ¶ˆæ¯ã€‚RocketMQé»˜è®¤æ”¯æŒä¸¤ç§æ¶ˆè´¹æ¨¡å¼ï¼Œåˆ†åˆ«æ˜¯é›†ç¾¤æ¶ˆè´¹æ¨¡å¼å’Œå¹¿æ’­æ¶ˆè´¹æ¨¡å¼ï¼Œé»˜è®¤é›†ç¾¤æ¶ˆè´¹æ¨¡å¼ã€‚ é›†ç¾¤MQ çº¦å®šä½¿ç”¨ç›¸åŒ Consumer ID çš„è®¢é˜…è€…å±äºåŒä¸€ä¸ªé›†ç¾¤ï¼ŒåŒä¸€ä¸ªé›†ç¾¤ä¸‹çš„è®¢é˜…è€…æ¶ˆè´¹é€»è¾‘å¿…é¡»å®Œå…¨ä¸€è‡´ï¼ˆåŒ…æ‹¬ Tag çš„ä½¿ç”¨ï¼‰ï¼Œè¿™äº›è®¢é˜…è€…åœ¨é€»è¾‘ä¸Šå¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªæ¶ˆè´¹èŠ‚ç‚¹ã€‚ æ¶ˆè´¹åŒä¸€ç±»æ¶ˆæ¯çš„å¤šä¸ª consumer å®ä¾‹ç»„æˆä¸€ä¸ªæ¶ˆè´¹è€…ç»„ï¼Œä¹Ÿå¯ä»¥ç§°ä¸ºä¸€ä¸ª consumer é›†ç¾¤ï¼Œè¿™äº› consumer å®ä¾‹ä½¿ç”¨åŒä¸€ä¸ª group nameã€‚éœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œé™¤äº†ä½¿ç”¨åŒä¸€ä¸ª group nameï¼Œè®¢é˜…çš„ tag ä¹Ÿå¿…é¡»æ˜¯ä¸€æ ·çš„ï¼Œåªæœ‰ç¬¦åˆè¿™ä¸¤ä¸ªæ¡ä»¶çš„ consumer å®ä¾‹æ‰èƒ½ç»„æˆ consumer é›†ç¾¤ã€‚ é›†ç¾¤æ¶ˆè´¹æ¨¡å¼å½“ä½¿ç”¨é›†ç¾¤æ¶ˆè´¹æ¨¡å¼æ—¶ï¼ŒMQ è®¤ä¸ºä»»æ„ä¸€æ¡æ¶ˆæ¯åªéœ€è¦è¢«é›†ç¾¤å†…çš„ä»»æ„ä¸€ä¸ªæ¶ˆè´¹è€…å¤„ç†å³å¯ã€‚ 12345678910DefaultMQPushConsumer consumer = new DefaultMQPushConsumer(\"consumer1\"); // åŒæ ·ä¹Ÿè¦è®¾ç½®NameServeråœ°å€ consumer.setNamesrvAddr(\"127.0.0.1:9876;127.0.0.1:9876\"); // é»˜è®¤å°±æ˜¯é›†ç¾¤æ¶ˆè´¹æ¨¡å¼consumer.setMessageModel(MessageModel.CLUSTERING); consumer.setConsumeFromWhere(ConsumeFromWhere.CONSUME_FROM_FIRST_OFFSET); // è®¾ç½®consumeræ‰€è®¢é˜…çš„Topicå’ŒTagï¼Œ*ä»£è¡¨å…¨éƒ¨çš„Tag consumer.subscribe(\"TopicTest\", \"*\"); é€‚ç”¨åœºæ™¯&amp;æ³¨æ„äº‹é¡¹ æ¶ˆè´¹ç«¯é›†ç¾¤åŒ–éƒ¨ç½²ï¼Œæ¯æ¡æ¶ˆæ¯åªéœ€è¦è¢«å¤„ç†ä¸€æ¬¡ã€‚ ç”±äºæ¶ˆè´¹è¿›åº¦åœ¨æœåŠ¡ç«¯ç»´æŠ¤ï¼Œå¯é æ€§æ›´é«˜ã€‚ é›†ç¾¤æ¶ˆè´¹æ¨¡å¼ä¸‹ï¼Œæ¯ä¸€æ¡æ¶ˆæ¯éƒ½åªä¼šè¢«åˆ†å‘åˆ°consumeré›†ç¾¤å†…ä»»æ„ä¸€ä¸ªçš„consumerå®ä¾‹æ¶ˆè´¹å¤„ç†ï¼Œå¦‚æœéœ€è¦è¢«é›†ç¾¤ä¸‹æ‰€æœ‰çš„consumerå®ä¾‹æ¶ˆè´¹å¤„ç†ï¼Œè¯·ä½¿ç”¨å¹¿æ’­æ¨¡å¼ã€‚ é›†ç¾¤æ¶ˆè´¹æ¨¡å¼ä¸‹ï¼Œä¸ä¿è¯æ¶ˆæ¯çš„æ¯ä¸€æ¬¡å¤±è´¥é‡æŠ•ç­‰é€»è¾‘éƒ½èƒ½è·¯ç”±åˆ°åŒä¸€ä¸ªconsumerå®ä¾‹ä¸Šï¼Œå› æ­¤å¤„ç†æ¶ˆæ¯æ—¶ä¸åº”è¯¥åšä»»ä½•ç¡®å®šæ€§å‡è®¾ã€‚ å¹¿æ’­æ¶ˆè´¹æ¨¡å¼å½“ä½¿ç”¨å¹¿æ’­æ¶ˆè´¹æ¨¡å¼æ—¶ï¼ŒMQ ä¼šå°†æ¯æ¡æ¶ˆæ¯æ¨é€ç»™é›†ç¾¤å†…æ‰€æœ‰æ¶ˆè´¹è€…ï¼Œä¿è¯æ¶ˆæ¯è‡³å°‘è¢«æ¯ä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹ä¸€æ¬¡ã€‚ 12345678910DefaultMQPushConsumer consumer = new DefaultMQPushConsumer(\"consumer1\"); // åŒæ ·ä¹Ÿè¦è®¾ç½®NameServeråœ°å€ consumer.setNamesrvAddr(\"127.0.0.1:9876;127.0.0.1:9876\"); // è®¾ç½®ä¸ºå¹¿æ’­æ¶ˆè´¹æ¨¡å¼consumer.setMessageModel(MessageModel.BROADCASTING); consumer.setConsumeFromWhere(ConsumeFromWhere.CONSUME_FROM_FIRST_OFFSET); // è®¾ç½®consumeræ‰€è®¢é˜…çš„Topicå’ŒTagï¼Œ*ä»£è¡¨å…¨éƒ¨çš„Tag consumer.subscribe(\"TopicTest\", \"*\"); é€‚ç”¨åœºæ™¯&amp;æ³¨æ„äº‹é¡¹ æ¯æ¡æ¶ˆæ¯éƒ½éœ€è¦è¢«consumeré›†ç¾¤å†…æ‰€æœ‰çš„consumer å®ä¾‹æ¶ˆè´¹ä¸€æ¬¡ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯æ¡æ¶ˆæ¯è‡³å°‘è¢«æ¯ä¸€ä¸ªconsumer å®ä¾‹æ¶ˆè´¹ä¸€æ¬¡ã€‚ æ¶ˆè´¹è¿›åº¦åœ¨å®¢æˆ·ç«¯ç»´æŠ¤ï¼Œå‡ºç°é‡å¤çš„æ¦‚ç‡ç¨å¤§äºé›†ç¾¤æ¨¡å¼ã€‚ å¹¿æ’­æ¨¡å¼ä¸‹ï¼ŒMQ ä¿è¯æ¯æ¡æ¶ˆæ¯è‡³å°‘è¢«æ¯å°å®¢æˆ·ç«¯æ¶ˆè´¹ä¸€æ¬¡ï¼Œä½†æ˜¯å¹¶ä¸ä¼šå¯¹æ¶ˆè´¹å¤±è´¥çš„æ¶ˆæ¯è¿›è¡Œå¤±è´¥é‡æŠ•ï¼Œå› æ­¤ä¸šåŠ¡æ–¹éœ€è¦å…³æ³¨æ¶ˆè´¹å¤±è´¥çš„æƒ…å†µã€‚ å¹¿æ’­æ¨¡å¼ä¸‹ï¼Œç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶é»˜è®¤ä»æœ€æ–°æ¶ˆæ¯æ¶ˆè´¹ï¼Œå®¢æˆ·ç«¯çš„æ¶ˆè´¹è¿›åº¦æ˜¯è¢«æŒä¹…åŒ–åœ¨å®¢æˆ·ç«¯æœ¬åœ°çš„éšè—æ–‡ä»¶ä¸­ï¼Œå› æ­¤ä¸å»ºè®®åˆ é™¤è¯¥éšè—æ–‡ä»¶ï¼Œå¦åˆ™ä¼šä¸¢å¤±éƒ¨åˆ†æ¶ˆæ¯ã€‚ å¹¿æ’­æ¨¡å¼ä¸‹ï¼Œæ¯æ¡æ¶ˆæ¯éƒ½ä¼šè¢«å¤§é‡çš„å®¢æˆ·ç«¯é‡å¤å¤„ç†ï¼Œå› æ­¤æ¨èå°½å¯èƒ½ä½¿ç”¨é›†ç¾¤æ¨¡å¼ã€‚ å¹¿æ’­æ¨¡å¼ä¸‹æœåŠ¡ç«¯ä¸ç»´æŠ¤æ¶ˆè´¹è¿›åº¦ï¼Œæ‰€ä»¥æœåŠ¡ç«¯ä¸æä¾›å †ç§¯æŸ¥è¯¢å’ŒæŠ¥è­¦åŠŸèƒ½ã€‚ ç›®å‰ä»… Java å®¢æˆ·ç«¯æ”¯æŒå¹¿æ’­æ¨¡å¼ã€‚ è™½ç„¶å¹¿æ’­æ¶ˆè´¹èƒ½ä¿è¯é›†ç¾¤å†…æ¯ä¸ªconsumerå®ä¾‹éƒ½èƒ½æ¶ˆè´¹æ¶ˆæ¯ï¼Œä½†æ˜¯æ¶ˆè´¹è¿›åº¦çš„ç»´æŠ¤ã€ä¸å…·å¤‡æ¶ˆæ¯é‡æŠ•çš„æœºåˆ¶å¤§å¤§å½±å“äº†å®é™…çš„ä½¿ç”¨ã€‚å› æ­¤ï¼Œåœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œæ›´æ¨èä½¿ç”¨é›†ç¾¤æ¶ˆè´¹ï¼Œå› ä¸ºé›†ç¾¤æ¶ˆè´¹ä¸ä»…æ‹¥æœ‰æ¶ˆè´¹è¿›åº¦å­˜å‚¨çš„å¯é æ€§ï¼Œè¿˜å…·æœ‰æ¶ˆæ¯é‡æŠ•çš„æœºåˆ¶ã€‚è€Œä¸”ï¼Œæˆ‘ä»¬é€šè¿‡é›†ç¾¤æ¶ˆè´¹ä¹Ÿå¯ä»¥è¾¾åˆ°å¹¿æ’­æ¶ˆè´¹çš„æ•ˆæœã€‚ ä½¿ç”¨é›†ç¾¤æ¨¡å¼æ¨¡æ‹Ÿå¹¿æ’­æ¨¡å¼æœ‰äº›åœºæ™¯å¸Œæœ›ä¸€ä¸ªæ¶ˆæ¯éœ€è¦å¤šä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹ï¼Œå¹¶ä¸”ä¹Ÿå¸Œæœ›æ¶ˆè´¹è€…æ¶ˆè´¹å¤±è´¥ï¼Œæ¶ˆæ¯èƒ½å¤Ÿé‡æ–°æŠ•é€’ã€‚ è®¢å•æ”¯ä»˜å®Œæˆé€šçŸ¥ä¸‹æ¸¸ç³»ç»Ÿï¼Œç§¯åˆ†æœåŠ¡æ‰£å‡è®¢å•ä½¿ç”¨çš„ç§¯åˆ†ã€ä¼˜æƒ åˆ¸æœåŠ¡å°†ä¼˜æƒ åˆ¸çŠ¶æ€æ›´æ–°ä¸ºå·²ä½¿ç”¨ã€åº“å­˜æœåŠ¡æ‰£å‡å•†å“åº“å­˜ã€ä»“åº“å‡†å¤‡å‘è´§ç­‰ç­‰ é€‚ç”¨åœºæ™¯&amp;æ³¨æ„äº‹é¡¹ æ¯æ¡æ¶ˆæ¯éƒ½éœ€è¦è¢«å¤šä¸ªæ¶ˆè´¹è€…å¤„ç†ï¼Œæ¯ä¸ªæ¶ˆè´¹è€…çš„é€»è¾‘å¯ä»¥ç›¸åŒä¹Ÿå¯ä»¥ä¸ä¸€æ ·ã€‚ æ¶ˆè´¹è¿›åº¦åœ¨æœåŠ¡ç«¯ç»´æŠ¤ï¼Œå¯é æ€§é«˜äºå¹¿æ’­æ¨¡å¼ã€‚ å¦‚æœä¸šåŠ¡ä¸Šç¡®å®éœ€è¦ä½¿ç”¨å¹¿æ’­æ¶ˆè´¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ›å»ºå¤šä¸ª consumer å®ä¾‹ï¼Œæ¯ä¸ª consumer å®ä¾‹å±äºä¸åŒçš„ consumer groupï¼Œä½†æ˜¯å®ƒä»¬éƒ½è®¢é˜…åŒä¸€ä¸ª topicã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬åˆ›å»º 4 ä¸ª consumer å®ä¾‹ï¼Œconsumer1ï¼ˆå±äºconsumerGroup1ï¼‰ã€consumer2ï¼ˆå±äºconsumerGroup 2ï¼‰ã€consumer 3ï¼ˆå±äºconsumerGroup3ï¼‰å’Œ consumer4ï¼ˆå±äºconsumerGroup4ï¼‰ï¼Œå®ƒä»¬éƒ½è®¢é˜…äº† topicA ï¼Œé‚£ä¹ˆå½“ producer å‘é€ä¸€æ¡æ¶ˆæ¯åˆ° topic A ä¸Šæ—¶ï¼Œç”±äº3ä¸ªconsumer å±äºä¸åŒçš„ consumer groupï¼Œæ‰€ä»¥ 3 ä¸ªconsumeréƒ½èƒ½æ”¶åˆ°æ¶ˆæ¯ï¼Œä¹Ÿå°±è¾¾åˆ°äº†å¹¿æ’­æ¶ˆè´¹çš„æ•ˆæœäº†ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940 /** * è®¾ç½®ä¸åŒçš„æ¶ˆè´¹ç»„åï¼Œå®ç°é›†ç¾¤æ¨¡å¼æ¨¡æ‹Ÿå¹¿æ’­æ¶ˆè´¹ * @param consumerGroup æ¶ˆè´¹ç»„å * @throws Exception */public static void consumerMessage(String consumerGroup) throws Exception &#123; if (StringUtils.isBlank(consumerGroup))&#123; consumerGroup = \"unique_group_name\"; &#125; // Instantiate with specified consumer group name. DefaultMQPushConsumer consumer = new DefaultMQPushConsumer(consumerGroup); // Specify name server addresses. consumer.setNamesrvAddr(\"127.0.0.1:9876;127.0.0.1:9870\"); // é‡è¦ï¼šè®¾ç½®æ¶ˆè´¹è€…æ¶ˆæ¯æœ€å¤§é‡è¯•æ¬¡æ•° //consumer.setMaxReconsumeTimes(5); // Subscribe one more more topics to consume. consumer.subscribe(\"TopicTest\", \"*\"); consumer.setConsumeFromWhere(ConsumeFromWhere.CONSUME_FROM_FIRST_OFFSET); // Register callback to execute on arrival of messages fetched from brokers. consumer.registerMessageListener((MessageListenerConcurrently) (messages, context) -&gt; &#123; for (MessageExt message : messages) &#123; int reconsumeTimes = message.getReconsumeTimes(); String msgId = message.getMsgId(); SimpleDateFormat simpleDateFormat = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\"); String format = simpleDateFormat.format(new Date()); String messageContext = new String(message.getBody(), StandardCharsets.UTF_8); System.out.println(\"æ¶ˆè´¹æ—¶é—´ï¼š\" + format + \" ,æ¶ˆæ¯æ¶ˆè´¹æ¬¡æ•°=\" + reconsumeTimes + \", msgId=\" + msgId + \", æ¶ˆæ¯å†…å®¹:\" + messageContext); &#125; return ConsumeConcurrentlyStatus.CONSUME_SUCCESS; &#125;); //Launch the consumer instance. consumer.start(); &#125; é™¤æ­¤ä¹‹å¤–ï¼Œæ¯ä¸ª consumer å®ä¾‹çš„æ¶ˆè´¹é€»è¾‘å¯ä»¥ä¸€æ ·ä¹Ÿå¯ä»¥ä¸ä¸€æ ·ï¼Œæ¯ä¸ªconsumer groupè¿˜å¯ä»¥æ ¹æ®éœ€è¦å¢åŠ  consumer å®ä¾‹ï¼Œæ¯”èµ·å¹¿æ’­æ¶ˆè´¹æ¥è¯´æ›´åŠ çµæ´»ã€‚","categories":[],"tags":[{"name":"rocketmq","slug":"rocketmq","permalink":"https://ydstudios.gitee.io/tags/rocketmq/"},{"name":"æ¶ˆè´¹æ¨¡å¼","slug":"æ¶ˆè´¹æ¨¡å¼","permalink":"https://ydstudios.gitee.io/tags/%E6%B6%88%E8%B4%B9%E6%A8%A1%E5%BC%8F/"}]},{"title":"ç³»ç»Ÿçš„æ•°æ®ä¸€è‡´æ€§åˆ°åº•æ˜¯åœ¨è¯´ä»€ä¹ˆ","slug":"ç³»ç»Ÿçš„æ•°æ®ä¸€è‡´æ€§åˆ°åº•æ˜¯åœ¨è¯´ä»€ä¹ˆ","date":"2021-01-17T11:58:02.000Z","updated":"2021-02-04T12:21:00.000Z","comments":true,"path":"post/e544327e.html","link":"","permalink":"https://ydstudios.gitee.io/post/e544327e.html","excerpt":"ä½œä¸ºä¸€åç¨‹åºå‘˜ï¼Œä½ æ˜¯ä¸æ˜¯ç»å¸¸åœ¨å¾ˆå¤šåœºæ™¯ï¼Œä¾‹å¦‚çœ‹åšå®¢ã€èŠå¤©å¹æ°´ç­‰ç­‰æ—¶å€™å¬åˆ°è¿™æ ·ä¸€ä¸ªè¯â€ç³»ç»Ÿæ•°æ®ä¸€è‡´æ€§â€ï¼Œæ˜¯ä¸æ˜¯æœ‰æ—¶å€™æ„Ÿè§‰åˆ°äº†è¿·ç³Šï¼Œä¸çŸ¥é“è¿™ä¸ªâ€ç³»ç»Ÿæ•°æ®ä¸€è‡´æ€§â€åˆ°åº•æ˜¯åœ¨è¯´ä»€ä¹ˆï¼Ÿå…¶å®ï¼Œä½ å¯èƒ½åªæ˜¯ä¸æ˜ç™½è¿™ä¸ªè¯ï¼Œä½†æ˜¯ä½ è‚¯å®šåœ¨å®é™…å·¥ä½œä¸­å‘ç°ã€è§£å†³è¿‡è¿™æ ·çš„é—®é¢˜ã€‚","text":"ä½œä¸ºä¸€åç¨‹åºå‘˜ï¼Œä½ æ˜¯ä¸æ˜¯ç»å¸¸åœ¨å¾ˆå¤šåœºæ™¯ï¼Œä¾‹å¦‚çœ‹åšå®¢ã€èŠå¤©å¹æ°´ç­‰ç­‰æ—¶å€™å¬åˆ°è¿™æ ·ä¸€ä¸ªè¯â€ç³»ç»Ÿæ•°æ®ä¸€è‡´æ€§â€ï¼Œæ˜¯ä¸æ˜¯æœ‰æ—¶å€™æ„Ÿè§‰åˆ°äº†è¿·ç³Šï¼Œä¸çŸ¥é“è¿™ä¸ªâ€ç³»ç»Ÿæ•°æ®ä¸€è‡´æ€§â€åˆ°åº•æ˜¯åœ¨è¯´ä»€ä¹ˆï¼Ÿå…¶å®ï¼Œä½ å¯èƒ½åªæ˜¯ä¸æ˜ç™½è¿™ä¸ªè¯ï¼Œä½†æ˜¯ä½ è‚¯å®šåœ¨å®é™…å·¥ä½œä¸­å‘ç°ã€è§£å†³è¿‡è¿™æ ·çš„é—®é¢˜ã€‚ å•ä½“æ¶æ„ä¸‹ç³»ç»Ÿæ•°æ®ä¸€è‡´æ€§é—®é¢˜åœ¨ä¼ ç»Ÿçš„ç³»ç»Ÿåº”ç”¨ä¸­ï¼Œä¸€èˆ¬éƒ½æ˜¯ä½¿ç”¨å•ä½“æ¶æ„æ¥æ„å»ºç³»ç»Ÿçš„ã€‚å³æ‰€æœ‰çš„åŠŸèƒ½æ¨¡å—éƒ½æ”¾åœ¨ä¸€èµ·å®ç°ï¼Œæ‰“æˆä¸€ä¸ªWARåŒ…éƒ¨ç½²åœ¨Tomcatä¸­ï¼Œæ•°æ®ä¸€èˆ¬å­˜æ”¾åœ¨å…³ç³»å‹æ•°æ®åº“ä¸­ï¼Œå¦‚MySQLæ•°æ®åº“ã€‚ å‰é¢æˆ‘è¯´è¿‡å³ä½¿è¿™ç§å•ä½“æ¶æ„çš„ç³»ç»Ÿä¹Ÿæ˜¯æ•°æ®ä¸€è‡´æ€§çš„é—®é¢˜çš„ï¼Œä¸¾ä¸€ä¸ªç”µå•†ä¸‹å•çš„ä¾‹å­ï¼Œç”¨æˆ·æäº¤å®Œè®¢å•ï¼Œç³»ç»Ÿï¼Œç³»ç»Ÿåœ¨è®¢å•è¡¨orderè¡¨ä¸­å†™å…¥è®¢å•é‡‘é¢ã€ç”¨æˆ·ç­‰ç›¸å…³æ•°æ®ï¼Œåœ¨è®¢å•æ˜ç»†order_itemè¡¨ä¸­å†™å…¥å•†å“ä»·æ ¼ã€è´­ä¹°çš„æ•°é‡ç­‰æ•°æ®ï¼Œæœ€åæ›´æ–°å•†å“çš„åº“å­˜skuä¿¡æ¯ã€‚ç”¨æˆ·ä¸‹å•æˆåŠŸä¹‹åï¼Œç³»ç»Ÿæ“ä½œäº†orderã€order_itemã€skuè¿™ä¸‰ä¸ªæ•°æ®è¡¨ï¼Œå¯¹äºè¿™ä¸‰ä¸ªè¡¨çš„æ“ä½œæ— è®ºæˆåŠŸä¸å¤±è´¥ï¼Œéƒ½åº”è¯¥æ˜¯åŸå­çš„ï¼Œæ“ä½œæˆåŠŸåˆ™éƒ½è¦æˆåŠŸï¼Œå¤±è´¥åˆ™éƒ½è¦ä¸€èµ·å¤±è´¥ã€‚ä¸ç„¶å°±ä¼šå‡ºç°è„æ•°æ®ï¼Œæ•°æ®ä¸€è‡´æ€§è¢«ç ´åã€‚ 1ã€ å¦‚æœæ“ä½œorderå’Œorder_itemè¡¨æˆåŠŸï¼Œæ“ä½œskuè¡¨å¤±è´¥ï¼Œåˆ™ä¼šå¯¼è‡´æœ¬åº”è¯¥æ‰£å‡çš„åº“å­˜æ²¡æœ‰æ‰£å‡ï¼Œåˆ™å•†å“æœ‰å¯èƒ½å‡ºç°è¶…å–ã€‚ 2ã€å¦‚æœæ“ä½œorderå’Œorder_itemè¡¨å¤±è´¥ï¼Œæ“ä½œskuè¡¨æˆåŠŸï¼Œåˆ™ä¼šå¯¼è‡´æœ¬ä¸åº”è¯¥æ‰£å‡çš„åº“å­˜æ‰£å‡äº†ï¼Œåˆ™å•†å“æœ‰å¯èƒ½å‡ºç°å°‘å–ã€‚ 3ã€å¦‚æœæ“ä½œorderå’Œskuè¡¨æˆåŠŸï¼Œorder_itemæ“ä½œå¤±è´¥ï¼Œåˆ™è¿™ä¸ªè®¢å•æ•°æ®ä¸¢å¤±ï¼Œè®¢å•åç»­çš„æ“ä½œè‚¯å®šä¹Ÿæ˜¯æ“ä½œä¸äº†äº†ã€‚ ä¸Šé¢åªæ˜¯ç®€å•çš„ä¸¾äº†ä¸‰ç§å¯èƒ½å‡ºç°çš„æƒ…å†µï¼Œä¹Ÿå¯èƒ½ä¼šæœ‰å…¶ä»–çš„æƒ…å†µå‘ç”Ÿã€‚é‚£æˆ‘ä»¬æ€ä¹ˆé¿å…è¿™äº›æƒ…å†µçš„å‘ç”Ÿå‘¢ï¼Ÿå…¶å®è¿™ç§é—®é¢˜ç¨å¾®æœ‰çš„å¼€å‘ç»éªŒçš„åŒå­¦éƒ½ä¼šæƒ³åˆ°è§£å†³æ–¹æ¡ˆï¼Œé‚£å°±æ˜¯ä½¿ç”¨æ•°æ®åº“çš„äº‹åŠ¡ï¼Œäº‹åŠ¡çš„åŸå­æ€§ä¿è¯ä¸Šè¿°çš„æ­¥éª¤æˆåŠŸåˆ™ä¸€èµ·æˆåŠŸï¼Œå¤±è´¥åˆ™ä¸€èµ·å¤±è´¥ã€‚ 12345BEGIN;INSERT INTO order;INSERT INTO order_item;UPDATE sku;COMMIT; # ROLLBACK åœ¨å•ä½“æ¶æ„çš„ç³»ç»Ÿä¸‹è§£å†³å†…éƒ¨æ¨¡å—çš„æ•°æ®ä¸€è‡´æ€§çš„é—®é¢˜ï¼Œç”¨æ•°æ®åº“çš„ACIDç‰¹æ€§å°±èƒ½ä¿è¯ã€‚ å•ä½“æ¶æ„çš„ä¼˜ç‚¹å°±æ˜¯ç›¸å¯¹åˆ†å¸ƒå¼æ¥è¯´å¼€å‘ç®€å•ï¼ŒåŠŸèƒ½å¯ä»¥é›†ä¸­ç®¡ç†ï¼Œæ¨¡å—ä¹‹é—´é€šä¿¡æ²¡æœ‰æŸè€—ã€‚ä½†éšç€ä¸šåŠ¡è¶Šæ¥è¶Šå¤æ‚ã€éœ€æ±‚è¶Šæ¥è¶Šåºå¤§ï¼Œäººä»¬å¯¹ç³»ç»Ÿå“åº”æ—¶é—´ã€ååé‡å’Œå‡ºç°æ•…éšœçš„æ—¶å€™çš„ç³»ç»Ÿå¯ç”¨æ€§çš„è¦æ±‚ä¹Ÿè¶Šæ¥è¶Šé«˜ï¼ä¼ ç»Ÿçš„å•ä½“æ¶æ„ç³»ç»Ÿåœ¨è¿™ç§æƒ…å†µä¸‹æš´éœ²çš„ç¼ºç‚¹ä¹Ÿè¶Šæ¥è¶Šå¤šï¼Œäººä»¬å¼€å§‹å¯»æ±‚è½¬å˜ã€‚æ—¢ç„¶éƒ¨ç½²åœ¨ä¸€ä¸ªæœåŠ¡å™¨ä¸Šçš„å•ä½“æ¶æ„ç³»ç»Ÿæä¸å®šï¼Œé‚£å°±å¤šéƒ¨ç½²å‡ å°ï¼Œå³ç”¨å¤šå°å•æœºèŠ‚ç‚¹ç»„æˆé›†ç¾¤ï¼Œå†ç”¨è´Ÿè½½å‡è¡¡å‘å¤–æä¾›æœåŠ¡ã€‚ ä½†æ˜¯è¿™æ ·åšè¿˜æ˜¯è§£å†³ä¸äº†å•ä½“æ¶æ„å­˜åœ¨çš„ä¸€äº›é—®é¢˜ï¼š åªèƒ½ä½¿ç”¨åŒç§è¯­è¨€å¼€å‘ï¼Œä¸èƒ½é’ˆå¯¹ä¸åŒä¸šåŠ¡åœºæ™¯åˆ©ç”¨ä¸åŒè¯­è¨€çš„ä¼˜åŠ¿å¼€å‘å¯¹åº”çš„æ¨¡å—ã€‚ ç³»ç»Ÿæ¨¡å—è€¦åˆæ€§å¤ªå¼ºï¼Œç³»ç»Ÿä¸­æŸä¸€ä¸ªæ¨¡å—å‡ºç°é—®é¢˜ï¼Œä¾‹å¦‚é«˜å¹¶å‘ã€å¤§æ•°æ®åœºæ™¯æˆ–è€…å‡ºç°bugï¼Œæ•´ä¸ªç³»ç»Ÿéƒ½ä¼šå—åˆ°ç‰µè¿ã€‚ æŸä¸ªæ¨¡å—å‘å¸ƒï¼Œæ•´ä¸ªç³»ç»Ÿéƒ½è¦åœæœºå‘å¸ƒï¼Œç³»ç»Ÿæ‰€æœ‰æ¨¡å—éƒ½ä¸èƒ½å¯¹å¤–æä¾›æœåŠ¡ï¼Œè¿™æ ·æ— æ³•å¿«é€Ÿå“åº”å¸‚åœºéœ€æ±‚ã€‚ é›†ç¾¤è´Ÿæ‹…å¤§ï¼Œå¦‚æœæƒ³è¦é›†ç¾¤ï¼Œåªèƒ½å¯¹æ•´ä¸ªç³»ç»Ÿè¿›è¡Œé›†ç¾¤ï¼Œå³ä½¿åªæœ‰ä¸€ä¸ªæ¨¡å—æœ‰å‹åŠ›ã€‚ é›†ç¾¤(Cluster)ï¼š ç³»ç»Ÿå•æœºéƒ¨ç½²å¯¹å¤–æœåŠ¡èƒ½åŠ›å‡ºç°ç“¶é¢ˆï¼Œåˆ™å°†ç³»ç»Ÿè¿›è¡Œå¤šæœºéƒ¨ç½²ï¼Œè¿™äº›ç³»ç»Ÿå¯¹å¤–æä¾›ç›¸åŒçš„æœåŠ¡ï¼Œæ¯ä¸ªå•æœºç³»ç»Ÿæˆ‘ä»¬ç§°ä¹‹ä¸ºèŠ‚ç‚¹ï¼Œå¤šä¸ªèŠ‚ç‚¹ç»Ÿä¸€èµ·æ¥åˆ™å¯ä»¥ç§°ä¹‹ä¸ºé›†ç¾¤ã€‚ åˆ†å¸ƒå¼æ¶æ„ä¸‹ç³»ç»Ÿæ•°æ®ä¸€è‡´æ€§é—®é¢˜å¤©ä¸‹å¤§äº‹åˆ†ä¹…å¿…åˆã€åˆä¹…å¿…åˆ†ï¼æ—¢ç„¶å•ä½“æ¶æ„è§£å†³ä¸äº†é—®é¢˜ï¼Œé‚£æˆ‘ä»¬å°±å°è¯•æ‹†åˆ†ç³»ç»Ÿï¼Œè®©ä¸“ä¸šçš„äººåšä¸“ä¸šçš„äº‹ï¼Œé‚£å¦‚ä½•è¿›è¡Œæ‹†åˆ†å‘¢ï¼Ÿæ‹†åˆ†ä¸€èˆ¬åˆ†ä¸ºæ°´å¹³æ‹†åˆ†å’Œå‚ç›´æ‹†åˆ†ã€‚è¿™é‡Œè¯´çš„æ‹†åˆ†å¹¶ä¸å•æŒ‡æ•°æ®åº“æ‹†åˆ†ï¼Œè€Œæ˜¯æ‰€æœ‰æ¨¡å—éƒ½è¿›è¡Œæ‹†åˆ†ï¼Œæ¯ä¸ªæ¨¡å—éƒ½æœ‰è‡ªå·±çš„ç¼“å­˜ã€æ•°æ®åº“ç­‰ç­‰ã€‚ æ°´å¹³æ‹†åˆ†æŒ‡çš„æ˜¯å•ä¸€çš„èŠ‚ç‚¹æ— æ³•æ»¡è¶³æ€§èƒ½çš„éœ€æ±‚ï¼Œéœ€è¦è¿›è¡Œæ•°é‡ä¸Šçš„æ‰©å±•ã€‚æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½å…·æœ‰ç›¸åŒçš„åŠŸèƒ½ï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½è´Ÿè´£ä¸€éƒ¨åˆ†è¯·æ±‚ï¼ŒèŠ‚ç‚¹ä»¬ç»„æˆä¸€ä¸ªé›†ç¾¤ï¼Œå¯¹å¤–è¿›è¡Œæä¾›æœåŠ¡ã€‚ å‚ç›´æ‹†åˆ†æŒ‡çš„æ˜¯æŒ‰ç…§åŠŸèƒ½è¿›è¡Œæ‹†åˆ†ï¼Œç§‰ç€â€ä¸“ä¸šçš„äººå¹²ä¸“ä¸šçš„äº‹â€ï¼ŒæŠŠå¤æ‚çš„ç³»ç»Ÿæ‹†åˆ†æˆå„ä¸ªæ¨¡å—ã€‚æ¨¡å—ä¹‹é—´é€šè¿‡RPCè¿›è¡Œé€šä¿¡ï¼Œå¯ä»¥åšåˆ°é«˜å†…èšã€ä½è€¦åˆï¼Œæ¯ä¸ªæ¨¡å—ç‹¬ç«‹éƒ¨ç½²å’Œç»´æŠ¤ï¼Œå¯ä»¥å¿«é€Ÿè¿­ä»£å“åº”å¸‚åœºéœ€æ±‚ã€‚å› æ­¤ï¼Œåˆ†å¸ƒå¼æ¶æ„åœ¨è¿™ç§èƒŒæ™¯ä¸‹åº”è¿è€Œç”Ÿã€‚ åˆ†å¸ƒå¼(Distributed)æ¶æ„ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿæ˜¯ç”±é›†ä¸­å¼ç³»ç»Ÿé€æ¸æ¼”å˜è€Œæ¥ã€‚æ‰€è°“çš„é›†ä¸­å¼ç³»ç»Ÿï¼Œå°±æ˜¯æŠŠç³»ç»Ÿä¸­æ‰€ç”¨çš„åŠŸèƒ½éƒ½é›†ä¸­åˆ°ä¸€èµ·ï¼Œä»è€Œå‘å¤–æä¾›æœåŠ¡çš„å•ä½“åº”ç”¨ã€‚ è½¯ä»¶è¡Œä¸šæ˜¯æ²¡æœ‰é“¶å¼¹çš„ï¼Œæ¯ä¸€ä¸ªè¢«å‘æ˜å‡ºæ¥çš„æ–°æŠ€æœ¯ï¼Œéƒ½æ˜¯ä¸€æŠŠåŒåˆƒå‰‘ï¼Œéƒ½æ˜¯åœ¨ç‰¹å®šçš„é¢†åŸŸè§£å†³äº†æŸäº›è€é—®é¢˜ï¼Œä½†æ˜¯åŒæ—¶ä¹Ÿä¼šå¸¦æ¥æ–°çš„é—®é¢˜ã€‚é‚£ä¹ˆå¾®æœåŠ¡è¿™ç§åˆ†å¸ƒå¼æ¶æ„è§£å†³äº†ä»€ä¹ˆè€é—®é¢˜ï¼ŸåŒæ—¶å®ƒåˆå¸¦æ¥äº†å“ªäº›æ–°é—®é¢˜å‘¢ï¼Ÿ è§£å†³äº†è€é—®é¢˜å¾®æœåŠ¡è¿™ä¸­åˆ†å¸ƒå¼æ¶æ„ä¸»è¦è§£å†³äº†å•ä½“æ¶æ„å­˜åœ¨çš„ä¸€äº›é—®é¢˜ã€‚ å„ä¸ªæœåŠ¡å¯ä»¥ä½¿ç”¨ä¸åŒçš„è¯­è¨€å¼€å‘ï¼Œå¯ä»¥åˆ©ç”¨ä¸åŒè¯­è¨€çš„ä¼˜åŠ¿å¼€å‘ä¸åŒæ¨¡å—ã€‚ æœåŠ¡ä¹‹é—´å¯ä»¥åšåˆ°é«˜å†…èšã€ä½è€¦åˆã€‚æ¯ä¸ªæœåŠ¡å¯ä»¥ç‹¬ç«‹ç»´æŠ¤ã€éƒ¨ç½²ï¼Œå¯ä»¥å¿«é€Ÿå“åº”å¸‚åœºéœ€æ±‚ã€‚ å¯ä»¥å•ç‹¬å¯¹æŸä¸ªæœ‰é«˜å¹¶å‘ã€å¤§æµé‡çš„æœåŠ¡å•ç‹¬è¿›è¡Œä¼˜åŒ–ï¼Œä¸æµªè´¹èµ„æºã€‚ å¸¦æ¥äº†æ–°é—®é¢˜ ç³»ç»Ÿçš„ç›‘æ§éš¾åº¦åŠ å¤§ã€‚ æ•°æ®çš„ä¸€è‡´æ€§æˆä¸ºé—®é¢˜ã€‚ ç³»ç»Ÿçš„å¤æ‚åº¦æé«˜ï¼Œç³»ç»Ÿçš„ç»´æŠ¤ã€è®¾è®¡æˆæœ¬å¢åŠ ï¼Œè°ƒè¯•ã€çº é”™éš¾åº¦åŠ å¤§ã€‚ æ–°é—®é¢˜ä¸­çš„ æ•°æ®ä¸€è‡´æ€§é—®é¢˜æ‰æ˜¯æœ¬æ–‡æ¥ä¸‹æ¥çš„é‡ç‚¹ã€‚ ä¸ºå•¥ä¼šæœ‰è¿™ä¸ªæ•°æ®ä¸€è‡´æ€§é—®é¢˜å‘¢å•ä½“æ¶æ„æŒ‰ç…§æ–‡ä¸­çš„è¯´æ³•ï¼Œæ˜¯ä¸€ç§ä¸å¤ªæ—¶é«¦çš„æ¶æ„æ–¹å¼ï¼Œéƒ½èƒ½è½»æ¾è§£å†³æ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼Œæ–°å‘æ˜çš„åˆ†å¸ƒå¼æ¶æ„å´åˆæˆäº†ä¸€ä¸ªæ£˜æ‰‹çš„é—®é¢˜ï¼Œè¿™ä¸ªåˆ°åº•æ˜¯æŠ€æœ¯çš„è¿›æ­¥è¿˜æ˜¯æŠ€æœ¯åœ¨é€€æ­¥å‘¢ï¼Ÿå“ˆå“ˆğŸ˜„ğŸ˜„(æˆ‘çš„ä¸€ç‚¹ç‚¹åæ§½)ï¼ï¼æ¥ä¸‹æ¥æˆ‘æ¥è§£é‡Šä¸€ä¸‹ä¸ºå•¥åˆ†å¸ƒå¼ç³»ç»Ÿä¼šæœ‰è¿™æ ·çš„é—®é¢˜ã€‚åˆ†å¸ƒå¼ç³»ç»Ÿæ¯ä¸ªåŠŸèƒ½å¤§éƒ½éƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œéƒ¨ç½²åœ¨ä¸åŒå›½å®¶å’Œåœ°åŒºçš„æœåŠ¡å™¨ä¸­ï¼Œéƒ¨ç½²åœ¨ä¸åŒçš„ç½‘ç»œä¸­ï¼Œéƒ¨ç½²åœ¨ä¸åŒå›½å®¶å’Œåœ°åŒºçš„ç½‘ç»œä¸­ã€‚è¿™æ ·ä¸€ä¸ªéœ€è¦å¤§é‡çš„æœåŠ¡å™¨å…±åŒåä½œï¼Œå‘å¤–æä¾›æœåŠ¡çš„ç³»ç»Ÿï¼Œé¢ä¸´ç€è¯¸å¤šçš„æŒ‘æˆ˜ï¼š è‰¯è ä¸é½çš„æœåŠ¡å™¨å’Œç³»ç»Ÿèƒ½åŠ›åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„æœåŠ¡å™¨ï¼Œå¯èƒ½é…ç½®ä¸ä¸€æ ·ï¼Œå…¶ä¸Šéƒ¨ç½²çš„ç³»ç»Ÿå¯èƒ½ä¹Ÿæ˜¯ç”±ä¸åŒçš„ç¨‹åºè¯­è¨€ã€æ¶æ„å®ç°ï¼Œå› æ­¤å¤„ç†è¯·æ±‚çš„èƒ½åŠ›ä¹Ÿå°±ä¸ä¸€æ ·ã€‚ ä¸å¯é çš„ç½‘ç»œå¦‚ä¸Šæ–‡æ‰€è¯´ï¼Œç³»ç»Ÿä¸­å„ä¸ªæœåŠ¡å¯èƒ½éƒ¨ç½²åœ¨ä¸åŒå›½å®¶å’Œåœ°åŒºï¼Œå„ä¸ªæœåŠ¡é€šè¿‡ç½‘ç»œè¿›è¡Œé€šä¿¡ï¼Œä½†æ˜¯ç½‘ç»œæ˜¯ä¸å¯é çš„ã€‚ç½‘ç»œç»å¸¸ä¼šå‡ºç°æŠ–åŠ¨ã€å»¶æ—¶ã€åˆ†å‰²ã€ä¸¢åŒ…ç­‰é—®é¢˜ã€‚ç½‘ç»œé€šä¿¡ä¸­æœ€è®©äººå¤´ç—›çš„æ˜¯å› ä¸ºç½‘ç»œæŠ–åŠ¨ã€å»¶æ—¶ç­‰é—®é¢˜å¯¼è‡´ç³»ç»Ÿä¹‹é—´çš„é€šä¿¡å‡ºç°è¶…æ—¶ï¼šAæœåŠ¡å‘BæœåŠ¡å‘å‡ºè¯·æ±‚ï¼ŒAæœåŠ¡æ²¡æœ‰åœ¨çº¦å®šçš„æ—¶é—´å†…æ¥å—åˆ°BæœåŠ¡çš„å“åº”ï¼Œä½ ä¸èƒ½ç¡®å®šBæœåŠ¡åˆ°åº•æœ‰æ²¡æœ‰å¤„ç†å®ŒAæœåŠ¡çš„è¯·æ±‚ï¼Œè¿™æ ·çš„ä¸ç¡®å®šæ€§å°±éœ€è¦æˆ‘ä»¬è¿›è¡Œé‡è¯•å¤„ç†ï¼Œé‚£ä¹ˆBæœåŠ¡å°±è¦è§£å†³è¯·æ±‚å¹‚ç­‰æ€§é—®é¢˜ã€‚ æ”¯ä»˜å®å‡ºç°è¿‡æœåŠ¡å™¨çš„ç”µç¼†è¢«æŒ–æ–­çš„é—®é¢˜ã€‚æœåŠ¡å™¨çš„æœºæˆ¿å‘ç”Ÿç«ç¾ã€æ–­ç”µç­‰äº‹æ•…ã€‚ æ™®éå­˜åœ¨çš„å•ç‚¹æ•…éšœåˆ†å¸ƒå¼ç³»ç»Ÿä¸ºäº†ä¿è¯æ•…éšœå‘ç”Ÿçš„æ—¶å€™ï¼Œç³»ç»Ÿä»ç„¶ä¿è¯å¯ç”¨ï¼Œæ¯ä¸ªæ¨¡å—éƒ½é‡‡ç”¨é›†ç¾¤éƒ¨ç½²ã€‚å•ä¸ªèŠ‚ç‚¹çš„æ•…éšœæ¦‚ç‡è¾ƒä½ï¼Œä½†æ˜¯èŠ‚ç‚¹æ•°é‡è¾¾åˆ°ä¸€å®šè§„æ¨¡æ—¶ï¼Œç³»ç»Ÿä¸­çš„èŠ‚ç‚¹å‡ºç°æ•…éšœçš„æ¦‚ç‡å°±å˜é«˜äº†ã€‚ åˆ†å¸ƒå¼ç³»ç»Ÿå°±æ˜¯è¿™æ ·ä¸€äº›å¤„åœ¨ä¸åŒåŒºåŸŸã€æœ‰ç€ä¸åŒèƒ½åŠ›å’Œæ‹¥æœ‰å•ä¸€åŠŸèƒ½çš„æœåŠ¡ç»„æˆï¼Œä»–ä»¬é€šåŠ›åˆä½œæ‰èƒ½å‘å¤–æä¾›æœåŠ¡ï¼Œé‚£å¦‚ä½•ä¿è¯ä»–ä»¬çš„çŠ¶æ€ã€ä¿¡æ¯ä¸€è‡´å¹¶ä¸”åè°ƒæœ‰åºå°±æˆäº†ä¸€ä¸ªéš¾é¢˜ã€‚ åˆ†å¸ƒå¼ç³»ç»Ÿå°±æ˜¯è¦è§£å†³è§£å†³é›†ä¸­å¼çš„å•ä½“æ¶æ„ç³»ç»Ÿçš„å„ç§ç¼ºé™·ï¼Œå®ç°æ•´ä¸ªç³»ç»Ÿçš„ é«˜æ€§èƒ½ã€é«˜å¯ç”¨ã€å¯æ‰©å±•,ä½†æ˜¯è¦å®ç°è¿™ä¸‰ä¸ªç›®æ ‡å¹¶ä¸å®¹æ˜“ï¼Œå°†ç³»ç»Ÿè¿›è¡Œæ‹†åˆ†çš„è¿‡ç¨‹ä¸­ä¼šå‡ºç°ä¸Šæ–‡ä¸­è¯´åˆ°çš„é—®é¢˜ï¼Œä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œè¯ç”Ÿäº†å¾ˆå¤šå…³äºåˆ†å¸ƒå¼çš„åŸºæœ¬ç†è®ºï¼Œæ¯”å¦‚CAPã€BASEç­‰ç­‰ã€‚ æˆ‘ä»¬å…ˆæ¥è¯´è¯´CAPç†è®ºè¿™ä¸ªCAPç†è®ºç›¸ä¿¡å¾ˆå¤šäººéƒ½å¬è¯´è¿‡ï¼Œä¸‹é¢è¯·å…è®¸æˆ‘å†™ä¸‹æ•™ç§‘ä¹¦èˆ¬çš„ç†è®ºå†…å®¹ï¼š CAPåŸåˆ™åˆç§°CAPå®šç†ï¼ŒæŒ‡çš„æ˜¯åœ¨ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼ŒConsistencyï¼ˆä¸€è‡´æ€§ï¼‰ã€ Availabilityï¼ˆå¯ç”¨æ€§ï¼‰ã€Partition toleranceï¼ˆåˆ†åŒºå®¹é”™æ€§ï¼‰ï¼Œä¸‰è€…ä¸å¯å¾—å…¼ã€‚ ä¸€è‡´æ€§ï¼ˆCï¼‰ï¼šåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„æ‰€æœ‰æ•°æ®å¤‡ä»½ï¼Œåœ¨åŒä¸€æ—¶åˆ»æ˜¯å¦åŒæ ·çš„å€¼ã€‚ï¼ˆç­‰åŒäºæ‰€æœ‰èŠ‚ç‚¹è®¿é—®åŒä¸€ä»½æœ€æ–°çš„æ•°æ®å‰¯æœ¬ï¼‰ å¯ç”¨æ€§ï¼ˆAï¼‰ï¼šä¿è¯æ¯ä¸ªè¯·æ±‚ä¸ç®¡æˆåŠŸæˆ–è€…å¤±è´¥éƒ½æœ‰å“åº”ã€‚ åˆ†åŒºå®¹å¿æ€§ï¼ˆPï¼‰ï¼šç³»ç»Ÿä¸­ä»»æ„ä¿¡æ¯çš„ä¸¢å¤±æˆ–å¤±è´¥ä¸ä¼šå½±å“ç³»ç»Ÿçš„ç»§ç»­è¿ä½œã€‚ å•¥ç©æ„å•Šä¸Šæ¥å°±å’Œæˆ‘è¯´åˆ†å¸ƒå¼ç³»ç»Ÿåªèƒ½æ»¡è¶³CAPä¸­çš„ä¸¤ç‚¹ï¼Œä¸å¯é±¼å’Œç†ŠæŒå…¼å¾—ã€‚","categories":[],"tags":[{"name":"åˆ†å¸ƒå¼","slug":"åˆ†å¸ƒå¼","permalink":"https://ydstudios.gitee.io/tags/%E5%88%86%E5%B8%83%E5%BC%8F/"},{"name":"ä¸€è‡´æ€§","slug":"ä¸€è‡´æ€§","permalink":"https://ydstudios.gitee.io/tags/%E4%B8%80%E8%87%B4%E6%80%A7/"}]},{"title":"2020å¹´çš„å¹´ç»ˆå°ç»“","slug":"2020å¹´çš„å¹´ç»ˆå°ç»“","date":"2021-01-11T20:06:57.000Z","updated":"2021-01-17T03:48:14.000Z","comments":true,"path":"post/b4e52eb3.html","link":"","permalink":"https://ydstudios.gitee.io/post/b4e52eb3.html","excerpt":"2020å¹´çœŸçš„æ˜¯ä¸€ä¸ªç¥å¥‡å¹´åº¦ï¼Œè¿™ä¸€å¹´ä½œä¸ºåƒç“œç¾¤ä¼—çš„æˆ‘ï¼Œè§åˆ°äº†å¤ªå¤šç‰›é¬¼è›‡ç¥ã€‚","text":"2020å¹´çœŸçš„æ˜¯ä¸€ä¸ªç¥å¥‡å¹´åº¦ï¼Œè¿™ä¸€å¹´ä½œä¸ºåƒç“œç¾¤ä¼—çš„æˆ‘ï¼Œè§åˆ°äº†å¤ªå¤šç‰›é¬¼è›‡ç¥ã€‚ å‘¨è¾¹ç¯å¢ƒçš„ä¸å¹³å‡¡æ–°å† ç–«æƒ…å¸­å·å…¨çƒï¼Œä¸­å›½æ”¿åºœçš„å°é—­ç®¡ç†æ•ˆæœæ˜¾è‘—ï¼Œç”Ÿäº§æ´»åŠ¨å¾—åˆ°äº†æœ‰åºæ¢å¤ã€‚6æœˆ16æ—¥åœ¨åŠ å‹’ä¸‡æ²³è°·åœ°åŒºä¸­å°å‘ç”Ÿæ‘©æ“¦äº‹ä»¶ï¼Œå°å†›è¢«å¨æ­¦çš„è§£æ”¾å†›æš´æåæ­»äº¡20äººã€‚è€ç¾çš„ç»æµæ³¢åŠ¨ï¼Œè‚¡å¸‚ç ´çºªå½•çš„å››æ¬¡ç†”æ–­ï¼Œå·å»ºå›½çš„ç¾å›½æ€»ç»Ÿä¹‹æ—…åœ¨11æœˆç»“æŸã€‚åŒ—äº¬æ—¶é—´12æœˆ17æ—¥1æ—¶59åˆ†ï¼Œå«¦å¨¥äº”å·è¿”å›å™¨åœ¨å†…è’™å¤å››å­ç‹æ——æˆåŠŸç€é™†ï¼Œæ ‡å¿—ç€æˆ‘å›½é¦–æ¬¡åœ°å¤–å¤©ä½“é‡‡æ ·è¿”å›ä»»åŠ¡åœ†æ»¡å®Œæˆã€‚ å›½å†…ç–«æƒ…æ¦‚è§ˆ å›½å¤–ç–«æƒ…æ¦‚è§ˆ ä¸ªäººç”Ÿæ´»è¶ç€å›½åº†æ”¾å‡åˆå»äº†ä¸€è¶Ÿåˆè‚¥ï¼Œè¿™ä¸€æ¬¡åƒä¸Šäº†ä¸ˆæ¯å¨˜äº²æ‰‹åšçš„çº¢çƒ§é±¿é±¼ï¼Œå‘³é“çœŸæ˜¯ä¸é”™ï¼å›½åº†çš„ç¬¬å››å¤©å’Œå¥³æœ‹å‹å»äº†é»„å±±å¸‚æ—…æ¸¸ï¼Œçˆ¬äº†è²èŠ±å³°ã€å»äº†å¤§å³¡è°·è¿˜åƒäº†è‡­é³œé±¼ã€‚é»„å±±çš„é£æ™¯çœŸæ˜¯ä¸é”™ï¼Œå±±å³°é™¡å³­ã€æ™¯è‰²ç§€ä¸½ã€‚å› ä¸ºæƒ³çœ‹çœ‹é»„å±±çš„æ—¥å‡ºï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å±±ä¸Šä½äº†ä¸€æ™šã€‚ç¬¬äºŒå¤©æ—©ä¸Šæˆ‘ä»¬æ€¥æ€¥å¿™å¿™çš„èµ·åºŠï¼Œç©¿ä¸Šé…’åº—é‡Œé¢åšåšå¤§å¤§æ£‰è¡£ï¼Œå¤–é¢ä¸‹ç€å°é›¨ã€åˆ®ç€å†·é£è¿˜æœ‰å¤§é›¾ï¼Œè‡ªç„¶ä¹Ÿå°±æ²¡æœ‰çœ‹åˆ°æ—¥å‡ºã€‚å¬å®¾é¦†çš„æœåŠ¡äººå‘˜è¯´å±±ä¸Š365å¤©æœ‰360å¤©éƒ½åœ¨ä¸‹é›¨ï¼Œä½ è¦æ˜¯èƒ½çœ‹åˆ°æ—¥å‡ºï¼Œè¯æ˜ä½ çš„è¿æ°”çœŸæ˜¯çˆ†æ£šï¼è²èŠ±å³°æ‹ç…§ç•™å¿µ å·¥ä½œåœ¨2020å¹´çš„æœ€åå‡ å¤©æœ‰å¹¸å’Œå‡ ä½å¤§ä½¬èŠäº†èŠï¼Œå‘ç°å¤§ä½¬å°±æ˜¯å¤§ä½¬ï¼Œä¸ç®¡æ˜¯åœ¨æŠ€æœ¯ä¸Šè¿˜æ˜¯åœ¨æ€æƒ³ä¸Šéƒ½è¿œè¿œè¶…è¿‡æˆ‘ã€‚å¤§ä½¬æœ‰å¥è¯å…³äºç³»ç»Ÿè®¾è®¡çš„è¯ï¼Œæˆ‘ç”šæ˜¯èµåŒï¼Œè¯çš„å†…å®¹å¤§è‡´å¦‚ä¸‹ï¼š ä¸šåŠ¡çš„è¯‰æ±‚è½¬åŒ–æˆäº§å“çš„éœ€æ±‚ï¼Œäº§å“çš„éœ€æ±‚è½¬åŒ–æˆæŠ€æœ¯çš„è¦æ±‚ï¼Œæœ€ç»ˆè½¬æ¢æˆç³»ç»Ÿçš„èƒ½åŠ›ã€‚ ä¸€å¥è¯å°±è¯´å‡ºäº†ç³»ç»Ÿè®¾è®¡çš„è¿‡ç¨‹å’Œç›®çš„ï¼Œè¨€ç®€æ„èµ…å‘€ï¼è°ˆè¯ä¸­å¤§ä½¬è¿˜æŒ‡å‡ºäº†æˆ‘çš„ä¸€äº›é—®é¢˜ï¼Œè®©æˆ‘ä»¥åå¤šå¤šå…³æ³¨ä¸€ä¸‹ç³»ç»Ÿè®¾è®¡ï¼Œè¦æƒ³æ³•å­å»æé«˜è‡ªå·±çš„æ ¸å¿ƒç«äº‰åŠ›ã€‚æˆ‘äº‹åä¹Ÿæƒ³äº†æƒ³ï¼Œæˆ‘åœ¨çŸ¥è¯†æ€»ç»“ã€ç³»ç»Ÿè®¾è®¡å’Œè¯­è¨€ç»„ç»‡èƒ½åŠ›ä¸Šéƒ½æœ‰ä¸è¶³ï¼Œæ–°çš„ä¸€å¹´è¦æ³¨æ„è¿™å‡ ä¸ªæ–¹é¢çš„é”»ç‚¼ã€‚çŸ¥è¯†æ€»ç»“è¿™æ–¹é¢ï¼Œæˆ‘å†³å®šåé¢å¤šå¤šæ€»ç»“ï¼ŒæŠŠçŸ¥è¯†ä¸²è”èµ·æ¥ï¼Œå¤šè¾“å‡ºä¸€äº›åšå®¢ã€‚è¯­è¨€ç»„ç»‡èƒ½åŠ›æˆ‘æƒ³æˆ‘å¹³æ—¶å¤šæ³¨æ„ä¸€ä¸‹ï¼Œç„¶åé€‚å½“çš„é”»ç‚¼é”»ç‚¼åé¢åº”è¯¥ä¼šæ¸æ¸å˜å¥½ã€‚ç³»ç»Ÿè®¾è®¡èƒ½åŠ›è¿™æ–¹é¢çš„è¯ï¼Œåªèƒ½çœ‹çœ‹å·¥ä½œä¸Šæœ‰æ²¡æœ‰ç±»ä¼¼çš„æœºä¼šäº†ï¼Œè¿™ä¸ªå…‰é æƒ³åº”è¯¥ä¸è¡Œï¼Œè¿˜æ˜¯å¾—å®è·µè§çœŸçŸ¥ï¼","categories":[],"tags":[{"name":"å¹´ç»ˆ","slug":"å¹´ç»ˆ","permalink":"https://ydstudios.gitee.io/tags/%E5%B9%B4%E7%BB%88/"},{"name":"æ„Ÿæ‚Ÿ","slug":"æ„Ÿæ‚Ÿ","permalink":"https://ydstudios.gitee.io/tags/%E6%84%9F%E6%82%9F/"}]},{"title":"å·§ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºä¸åŒçš„çŠ¶æ€","slug":"å·§ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºä¸åŒçš„çŠ¶æ€","date":"2021-01-06T21:28:00.000Z","updated":"2021-01-07T15:21:55.000Z","comments":true,"path":"post/b7145215.html","link":"","permalink":"https://ydstudios.gitee.io/post/b7145215.html","excerpt":"æˆ‘ä»¬åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ä¼šé‡åˆ°è¿™ç§åœºæ™¯ï¼Œåœ¨ç³»ç»Ÿçš„æƒé™ã€é€‰é¡¹è®¾ç½®ï¼Œåªæœ‰ä¸¤ç§çŠ¶æ€å¼€å¯æˆ–è€…å…³é—­ã€‚","text":"æˆ‘ä»¬åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ä¼šé‡åˆ°è¿™ç§åœºæ™¯ï¼Œåœ¨ç³»ç»Ÿçš„æƒé™ã€é€‰é¡¹è®¾ç½®ï¼Œåªæœ‰ä¸¤ç§çŠ¶æ€å¼€å¯æˆ–è€…å…³é—­ã€‚ å…·ä½“æˆ‘ä»¬ä»¥å“”å“©å“”å“©çš„éšç§è®¾ç½®ä¸ºä¾‹ï¼š è¿™ä¹ˆå‡ ç§å¼€å…³ä½ ä¼šæ€ä¹ˆè®¾è®¡æ•°æ®è¡¨ï¼ŸæŒ‰ç…§æ­£å¸¸çš„æ“ä½œé’ˆå¯¹ä¸€ä¸ªå¼€å…³æ·»åŠ å­—æ®µè¿›è¡Œè¡¨ç¤ºã€‚å¯æ˜¯åç»­å°±ä¼šæœ‰ä¸‹é¢çš„è¿™æ ·çš„æƒ…å†µï¼š å“ˆå“ˆï¼Œäº§å“éœ€æ±‚è¿­ä»£å¢åŠ äº†åç»­å‡ ç§å¼€å…³ï¼Œä½ å‡†å¤‡æ€ä¹ˆåšï¼Ÿè¿˜æ˜¯ç»§ç»­å¢åŠ å­—æ®µè¿›è¡Œä¿å­˜ä¹ˆï¼Ÿå¢åŠ å­—æ®µè¿›è¡Œä¿å­˜ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯æ„Ÿè§‰ä¸Šä¼šæœ‰é‚£ä¹ˆä¸€ç‚¹ç‚¹lowï¼æ–°çš„å¼€å…³å‡ºç°å¢åŠ å­—æ®µè¿›è¡Œä¿å­˜ï¼Œæ—¢è¦ä¿®æ”¹è¡¨ç»“æ„ï¼Œåˆè¦æ”¹å®ä½“å±æ€§ï¼Œè¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼æ‰€ä»¥ï¼Œå¯¹äºè¿™ç§ç±»ä¼¼çš„éœ€æ±‚ï¼Œæˆ‘ä»¬è¦æœ‰ä¸€ä¸ªè‰¯å¥½çš„è®¾è®¡æ¥åº”å¯¹ï¼Œé‚£æˆ‘ä»¬å¦‚ä½•è§£å†³å‘¢ï¼Ÿ ç”¨è¿‡linuxç³»ç»Ÿçš„åŒå­¦ä¼šçŸ¥é“è¿™æ ·ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼š 12chomd 777 something# å¯è¯»r=4ï¼Œå¯å†™w=2ï¼Œå¯æ‰§è¡Œx=1ï¼Œå³ äºŒè¿›åˆ¶çš„001ä»£è¡¨å¯æ‰§è¡Œï¼Œ010ä»£è¡¨å¯å†™ï¼Œ100ä»£è¡¨å¯è¯» ä¸Šé¢çš„linuxå‘½ä»¤ä»£è¡¨æŠŠsomethingçš„æƒé™ä¿®æ”¹æˆæ‰€æœ‰è€…ã€ç”¨æˆ·ç»„ã€å…¶ä»–ç”¨æˆ·éƒ½å¯ä»¥è¿›è¡Œå¯è¯»ã€å¯å†™ã€å¯æ‰§è¡Œã€‚ æ•°å­— æƒé™ rwx äºŒè¿›åˆ¶ 7 è¯» + å†™ + æ‰§è¡Œ rwx 111 6 è¯» + å†™ rw- 110 5 è¯» + æ‰§è¡Œ r-x 101 4 åªè¯» râ€“ 100 3 å†™ + æ‰§è¡Œ -wx 011 2 åªå†™ -w- 010 1 åªæ‰§è¡Œ â€“x 001 0 æ—  â€” 000 ç”¨çš„æ˜¯äºŒè¿›åˆ¶çš„001ä»£è¡¨å¯æ‰§è¡Œï¼Œ010ä»£è¡¨å¯å†™ï¼Œ100ä»£è¡¨å¯è¯»ï¼Œé‚£ä¹ˆåªéœ€è¦3ä½äºŒè¿›åˆ¶æ•°å³å¯è¡¨ç¤ºè¿™ä¸‰ç§çŠ¶æ€çš„æ··åˆæ­é…ã€‚å€Ÿç”¨è¿™ç§æ€æƒ³ï¼Œæˆ‘ä»¬æ¥è§£å†³ä¸Šè¿°çš„é—®é¢˜ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªintç±»å‹å­—æ®µå°±å¯ä»¥è¡¨ç¤ºä¸Šè¿°æ‰€æœ‰çš„çŠ¶æ€å¼€å…³ã€‚ä½¿ç”¨2çš„æ¬¡å¹‚å€¼ä»£è¡¨ä¸€ç§çŠ¶æ€ï¼Œæ¯”å¦‚æˆ‘ä»¬ç”¨ 2çš„é›¶æ¬¡æ–¹ $2^{0}$ = 1 è¡¨ç¤ºæ‰“å¼€æˆ‘çš„æ”¶è— 2çš„ä¸€æ¬¡æ–¹ $2^{1}$ = 2 è¡¨ç¤ºæ‰“å¼€è¿½ç•ªè¿½å‰§ 2çš„äºŒæ¬¡æ–¹ $2^{2}$ = 4 è¡¨ç¤ºæ‰“å¼€è®¢é˜…æ ‡ç­¾ 2çš„ä¸‰æ¬¡æ–¹ $2^{3}$ = 8 è¡¨ç¤ºæ‰“å¼€æœ€è¿‘æŠ•å¸çš„è§†é¢‘ 2çš„å››æ¬¡æ–¹ $2^{4}$ = 16 è¡¨ç¤ºæ‰“å¼€ä¸ªäººèµ„æ–™ 2çš„äº”æ¬¡æ–¹ $2^{5}$ = 32 è¡¨ç¤ºæ‰“å¼€æœ€è¿‘ç©è¿‡çš„æ¸¸æˆ åšå®¢ä½¿ç”¨hexoæ­å»ºï¼Œé‡‡ç”¨é»˜è®¤çš„landscapeä¸»é¢˜ä¸æ”¯æŒLaTeX å…¬å¼ï¼Œæ‰€ä»¥ä¸Šé¢çš„æ¬¡æ–¹å…¬å¼æ˜¾ç¤ºçš„æœ‰é—®é¢˜ã€‚ äºŒè¿›åˆ¶ æ•°å­—ï¼ˆåè¿›åˆ¶ï¼‰ å«ä¹‰ 000 000 0 å…¨éƒ¨å…³é—­ 000 001 1 å¼€å¯æˆ‘çš„æ”¶è— 000 011 3 å¼€å¯æˆ‘çš„æ”¶è—ã€è¿½ç•ªè¿½å‰§ 000 111 7 å¼€å¯æˆ‘çš„æ”¶è—ã€è¿½ç•ªè¿½å‰§ã€è®¢é˜…æ ‡ç­¾ 111 111 63 å…¨éƒ¨å¼€å¯ å…¶å®å°±æ˜¯ç”¨bitä½è¡¨ç¤ºå¼€å¯æˆ–è€…å…³é—­ï¼Œå¦‚æœæ˜¯1è¡¨ç¤ºå¼€å¯ï¼Œ0è¡¨ç¤ºå…³é—­ã€‚ 123æˆ–è¿ç®—ï¼šbitä½ä¸Šæœ‰1ä¸º1ã€‚ä¾‹å¦‚ï¼š2 | 1 == 0000 0010 | 0000 0001 == 3ä¸è¿ç®—ï¼šbitä½éƒ½ä¸º1æ‰ä¸º1ã€‚ ä¾‹å¦‚ 5 &amp; 2 == 0000 0101 &amp; 0000 0010 == 0å¼‚æˆ–è¿ç®—ï¼š0^0=0ï¼› 0^1=1ï¼› 1^0=1ï¼› 1^1=0ï¼›å³ï¼šå‚åŠ è¿ç®—çš„ä¸¤ä¸ªå¯¹è±¡ï¼Œå¦‚æœä¸¤ä¸ªç›¸åº”ä½ä¸ºâ€œå¼‚â€ï¼ˆå€¼ä¸åŒï¼‰ï¼Œåˆ™è¯¥ä½ç»“æœä¸º1ï¼Œå¦åˆ™ä¸º0ã€‚ é‚£æˆ‘ä»¬å°±æ¥ç¼–ç å®ç°ä¸Šè¿°åŠŸèƒ½ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657package com.ydstudio.flashsale.module.business.bit;import lombok.AllArgsConstructor;import lombok.Getter;/** * @author åˆ˜æ´‹ Sam * @date 2021/1/7 * @since 1.0.0 */@Getter@AllArgsConstructorpublic enum MemberOption &#123; FAVORITE(1, \"æˆ‘çš„æ”¶è—\", 1), FOLLOW(2, \"è¿½ç•ªè¿½å‰§\", 2), SUBSCRIBE(3, \"è®¢é˜…æ ‡ç­¾\", 4), VIDEO(4, \"æœ€è¿‘æŠ•å¸è§†é¢‘\", 8), PROFILE(5, \"ä¸ªäººèµ„æ–™\", 16), GAME(6, \"æœ€è¿‘ç©çš„æ¸¸æˆ\", 32),; /** * æšä¸¾ */ private Integer code; /** * æè¿° */ private String desc; /** * çŠ¶æ€ä½ */ private Integer tag; /** * æ˜¯å¦æœ‰æŸä¸ªtag * * @param tags æ‹¥æœ‰çš„tagé›†åˆ * @return */ public boolean hasTag(int tags) &#123; return (tags &amp; this.tag) == this.tag; &#125; public static void main(String[] args) &#123; int tags = 37; // true System.out.println(MemberOption.FAVORITE.hasTag(tags)); // true System.out.println(MemberOption.SUBSCRIBE.hasTag(tags)); // false System.out.println(MemberOption.VIDEO.hasTag(tags)); // true System.out.println(MemberOption.GAME.hasTag(tags)); &#125;&#125; å¼€å¯æˆ‘çš„æ”¶è—å’Œæœ€è¿‘ç©çš„æ¸¸æˆï¼Œå…¶ä»–é€‰é¡¹éƒ½å…³é—­ï¼Œåˆ™è®¡ç®—è¿‡ç¨‹å¦‚ä¸‹ï¼š1234567891011121314# æˆ‘çš„æ”¶è— tag = 1 æœ€è¿‘ç©çš„æ¸¸æˆ tag = 32tags = 1 + 32 = 33 æˆ–è€…é‡‡ç”¨ä½æˆ–è¿ç®— tags = 1 | 32 = 33 /** * è®¡ç®—çŠ¶æ€ä½ * tags: å·²æœ‰çŠ¶æ€ä½ * values: éœ€è¦æ·»åŠ çš„çŠ¶æ€å€¼ */public static int addTag(int tags, int... values) &#123; for (int value : values) &#123; tags |= value; &#125; return tags;&#125; å…³é—­æœ€è¿‘ç©çš„æ¸¸æˆï¼Œåˆ™è®¡ç®—è¿‡ç¨‹å¦‚ä¸‹ï¼š1234567891011121314ä¸Šé¢è®¡ç®—çš„tags = 33 ï¼Œæœ€è¿‘ç©çš„æ¸¸æˆ tag = 32å…³é—­æœ€è¿‘ç©çš„æ¸¸æˆï¼Œtags = 33 ^ 32 = 0010 0001 ^ 0010 0000 = 0000 0001 = 1 /** * ç§»é™¤çŠ¶æ€ä½ * tags: å·²æœ‰çŠ¶æ€ä½ * tag: éœ€è¦ç§»é™¤çš„çŠ¶æ€å€¼ */public static int delTag(int tags, int tag) &#123; // tagså’Œvalueä¸è¿ç®—ä¸ç­‰äºtagï¼Œè¯´æ˜æ²¡æœ‰å¼€å¯tagå¯¹åº”çš„é€‰é¡¹ï¼Œåˆ™ç›´æ¥è¿”å›tags if ((tags &amp; tag) != tag) return tags; return tags ^ tag;&#125; åˆ¤æ–­æ˜¯å¦å¼€å¯æœ€è¿‘ç©çš„æ¸¸æˆï¼Œåˆ™è®¡ç®—è¿‡ç¨‹å¦‚ä¸‹ï¼š12345678910111213ä¸Šé¢è®¡ç®—çš„tags = 33 ï¼Œæœ€è¿‘ç©çš„æ¸¸æˆ tag = 32 33 &amp; 32 = 0010 0001 &amp; 0010 0000 = 0010 0000 = 32 (0010 0000) /** * æ˜¯å¦æœ‰æŸä¸ªtag * * @param tags æ‹¥æœ‰çš„tagé›†åˆ * @param tag å¾…åˆ¤æ–­çš„tag * @return */ public boolean hasTag(int tags, int tag) &#123; return (tags &amp; tag) == tag; &#125; å¦‚ä½•ç”¨SQLæŸ¥è¯¢å¼€å¯æœ€è¿‘ç©çš„æ¸¸æˆé€‰é¡¹çš„ç”¨æˆ·12# MySQLä¹Ÿæ˜¯æ”¯æŒä½è¿ç®—çš„ï¼Œå…¶ä»–çš„æ•°æ®åº“åº”è¯¥ä¹Ÿæ˜¯æ”¯æŒçš„select member_id from table_name where member_option &amp; #&#123;option&#125; = #&#123;option&#125; å°±è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç”¨ä¸€ä¸ªintå‹å­—æ®µä¿å­˜4*8 = 32ä¸ªçŠ¶æ€ä½ï¼ˆæ— ç¬¦å·çš„æƒ…å†µä¸‹ï¼‰,çœ‹èµ·æ¥è¿˜æ˜¯å¾ˆä¸é”™ï¼Œè¿ç®—çš„æ•ˆç‡é«˜ï¼Œåªç”¨ä¸€ä¸ªå­—æ®µå¯ä»¥ä¿å­˜è¾ƒå¤šçš„çŠ¶æ€ã€‚ç¼ºç‚¹å˜›ä¹Ÿæ˜¯æœ‰çš„ï¼Œå°±æ˜¯å¯è¯»æ€§å·®ï¼Œä¸èƒ½å¾ˆç›´è§‚çš„çœ‹å‡ºåˆ°åº•æœ‰å“ªäº›çŠ¶æ€ã€‚å…¶å®è¿™ç§æ–¹æ³•å¯ä»¥ç”¨ä¸€ä¸ªå­—æ®µè¡¨ç¤ºå¤šç§çŠ¶æ€ï¼Œä¾‹å¦‚ è®¢å•ä¸€èˆ¬æœ‰æ”¯ä»˜çŠ¶æ€ï¼šå¾…æ”¯ä»˜ 1 ã€æ”¯ä»˜ä¸­ 2 ã€æ”¯ä»˜æˆåŠŸ4 ã€æ”¯ä»˜å¤±è´¥8å’Œå‘è´§çŠ¶æ€ï¼šå¾…å‘è´§16ã€å·²å‘è´§32ã€åœ¨é€”64ã€å·²æ”¶è´§128ï¼Œè¿™æ ·çš„è¯ç”¨ä¸€ä¸ªorderStatusæ¥è¡¨ç¤ºè¿™ä¸¤ç§çŠ¶æ€ï¼šæ”¯ä»˜æˆåŠŸ4 + å¾…å‘è´§16 = 4 | 16 = 20ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ä½†æ˜¯å¦‚ä¸Šé¢æ‰€è¯´ï¼Œä¼˜ç¼ºç‚¹éƒ½æœ‰ï¼Œçœ‹ä½ çš„å®é™…æƒ…å†µè¿›è¡Œé€‰æ‹©äº†ï¼","categories":[],"tags":[{"name":"äºŒè¿›åˆ¶","slug":"äºŒè¿›åˆ¶","permalink":"https://ydstudios.gitee.io/tags/%E4%BA%8C%E8%BF%9B%E5%88%B6/"},{"name":"ä½è¿ç®—","slug":"ä½è¿ç®—","permalink":"https://ydstudios.gitee.io/tags/%E4%BD%8D%E8%BF%90%E7%AE%97/"}]},{"title":"Luaè„šæœ¬åœ¨ç§’æ€åœºæ™¯ä¸‹çš„ä½¿ç”¨","slug":"Luaè„šæœ¬åœ¨ç§’æ€åœºæ™¯ä¸‹çš„ä½¿ç”¨","date":"2020-12-24T22:40:10.000Z","updated":"2021-01-06T13:07:07.000Z","comments":true,"path":"post/d958d490.html","link":"","permalink":"https://ydstudios.gitee.io/post/d958d490.html","excerpt":"åœ¨ç§’æ€è¿™ç§é«˜å¹¶å‘ã€å¤§æµé‡çš„åœºæ™¯ä¸‹ï¼Œåˆ©ç”¨æ•°æ®åº“è¿›è¡Œåº“å­˜æ‰£å‡ã€æ•°æ®æŸ¥è¯¢è¿™ç§æƒ³æ³•å°±ä¸è¦è€ƒè™‘äº†ã€‚ä½ è¦æ˜¯æœ‰è¿™ç§æƒ³æ³•ï¼ŒåŠä½ æ—©ç‚¹æ”¾å¼ƒï¼ŒP0äº‹æ•…ä¸€å®šåœ¨ç­‰ç€ä½ ã€‚ä¹‹å‰ç”¨Luaè„šæœ¬å®ç°ç§’æ€åœºæ™¯ä¸‹çš„åº“å­˜æ‰£å‡æ„Ÿè§‰å¾ˆä¸é”™ï¼Œé…åˆRedisç§’æ€æ•ˆæœæ æ çš„ï¼Redis 2.6 ç‰ˆæœ¬é€šè¿‡å†…åµŒæ”¯æŒ Lua ç¯å¢ƒï¼Œä¼šå•çº¿ç¨‹åŸå­æ€§æ‰§è¡Œ Lua è„šæœ¬ï¼Œä¿è¯ Lua è„šæœ¬åœ¨å¤„ç†çš„è¿‡ç¨‹ä¸­ä¸ä¼šè¢«ä»»æ„å…¶å®ƒè¯·æ±‚æ‰“æ–­ã€‚","text":"åœ¨ç§’æ€è¿™ç§é«˜å¹¶å‘ã€å¤§æµé‡çš„åœºæ™¯ä¸‹ï¼Œåˆ©ç”¨æ•°æ®åº“è¿›è¡Œåº“å­˜æ‰£å‡ã€æ•°æ®æŸ¥è¯¢è¿™ç§æƒ³æ³•å°±ä¸è¦è€ƒè™‘äº†ã€‚ä½ è¦æ˜¯æœ‰è¿™ç§æƒ³æ³•ï¼ŒåŠä½ æ—©ç‚¹æ”¾å¼ƒï¼ŒP0äº‹æ•…ä¸€å®šåœ¨ç­‰ç€ä½ ã€‚ä¹‹å‰ç”¨Luaè„šæœ¬å®ç°ç§’æ€åœºæ™¯ä¸‹çš„åº“å­˜æ‰£å‡æ„Ÿè§‰å¾ˆä¸é”™ï¼Œé…åˆRedisç§’æ€æ•ˆæœæ æ çš„ï¼Redis 2.6 ç‰ˆæœ¬é€šè¿‡å†…åµŒæ”¯æŒ Lua ç¯å¢ƒï¼Œä¼šå•çº¿ç¨‹åŸå­æ€§æ‰§è¡Œ Lua è„šæœ¬ï¼Œä¿è¯ Lua è„šæœ¬åœ¨å¤„ç†çš„è¿‡ç¨‹ä¸­ä¸ä¼šè¢«ä»»æ„å…¶å®ƒè¯·æ±‚æ‰“æ–­ã€‚ å…ˆè¯´ä¸€ä¸‹å¤§æ¦‚çš„æƒ…å†µï¼Œåœ¨ä¸Šç§’æ€çš„å•†å“çš„æ—¶å€™ï¼Œå°±ç›´æ¥å°†äº§å“çš„åº“å­˜ã€ç”¨æˆ·æ¯äººçš„é™è´­çš„æ•°é‡ç­‰ä¿¡æ¯ç›´æ¥ç”¨Hashæ•°æ®ç±»å‹ä¿å­˜åœ¨Redisçš„é”®goods_å•†å“IDä¸­ï¼Œä¸è®¾ç½®ç¼“å­˜æœ‰æ•ˆæ—¶é—´ã€‚ç”¨æˆ·çš„è´­ä¹°è®°å½•ç”¨zsetä¿å­˜purchase_goods_å•†å“idä¸­ï¼Œç”¨å•†å“çš„IDä½œä¸ºkeyï¼Œç”¨æˆ·å”¯ä¸€æ ‡è¯†ä¸ºmember,è´­ä¹°çš„æ•°é‡ä¸ºscoreã€‚ç›¸å…³çš„å‘½ä»¤å¦‚ä¸‹ï¼š 12345678910# åˆå§‹åŒ–ä¸€äº›ç§’æ€äº§å“hmset seckill:goods:1000 goodsId 1000 name æˆ´æ£®å¸å°˜å™¨V10Motorheadå…¥é—¨æ¬¾,æ€§ä»·æ¯”ä¹‹é€‰ stock 10 purchaseLimit 1 price 999.99 startSaleTime 1614137304000 endSaleTime 1614140904000 coverImage https://dss2.bdstatic.com/8_V1bjqh_Q23odCf/pacific/1955446237.pnghmset seckill:goods:2000 goodsId 2000 name æˆ´æ£®æ— å¶é£æ‰‡ stock 15 purchaseLimit 1 price 1999.99 startSaleTime 1640406504000 endSaleTime 1614140904000 coverImage https://dss2.bdstatic.com/8_V1bjqh_Q23odCf/pacific/1957729018.pnghmset seckill:goods:3000 goodsId 3000 name æˆ´æ£®æ™ºèƒ½ç…§æ˜ç¯ stock 32 purchaseLimit 1 price 299.99 startSaleTime 1640406504000 endSaleTime 1614140904000 coverImage https://dss2.bdstatic.com/8_V1bjqh_Q23odCf/pacific/1947896752.jpghmset seckill:goods:4000 goodsId 4000 name æˆ´æ£®AM10é™¤èŒåŠ æ¹¿å™¨ stock 15 purchaseLimit 1 price 1299.99 startSaleTime 1640752104000 endSaleTime 1610166504000 coverImage https://dss2.bdstatic.com/8_V1bjqh_Q23odCf/pacific/1947896752.jpghmset seckill:goods:5000 goodsId 5000 name è‹¹æœAirPodsMax stock 13 purchaseLimit 1 price 2099.99 startSaleTime 1640752104000 endSaleTime 1610166504000 coverImage https://dss2.bdstatic.com/8_V1bjqh_Q23odCf/pacific/1983533493.jpg å…·ä½“çš„Luaè„šæœ¬ç¼–å†™è¿‡ç¨‹æ¯”è¾ƒç®€å•ï¼Œç¨å¾®ç†Ÿæ‚‰ä¸€ä¸‹å°±èƒ½çœ‹æ‡‚äº†ï¼Œå…·ä½“å†…å®¹å¦‚ä¸‹ï¼ˆä¸´æ—¶é‡å†™çš„æ²¡æœ‰ä¼˜åŒ–ï¼Œå‡‘åˆç€çœ‹å§ï¼‰ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960--KEYS[1] å¯¹åº”å•†å“çš„è´­ä¹°è®°å½•:purchase_goods_1000--KEYS[2] å•†å“çš„key:goods_1000--ARGV[1] è´­ä¹°äººå”¯ä¸€æ ‡è¯†memberId:2000--ARGV[2] è´­ä¹°æ•°é‡number: 2local goodsExists=redis.call('EXISTS', KEYS[2])if goodsExists == 0then -- äº§å“ä¸å­˜åœ¨ return -1endlocal goodsStockExists=redis.call('hexists', KEYS[2], 'stock')if goodsStockExists == 0 then -- ä»£è¡¨äº§å“åº“å­˜ä¸å­˜åœ¨ return -2end --ç”¨æˆ·é™è´­æ•°é‡local purchaseLimitExists=redis.call('hexists', KEYS[2], 'purchaseLimit')if purchaseLimitExists == 0then -- å•†å“é™è´­æ•°é‡ä¸å­˜åœ¨ return -3end--ç”¨æˆ·é™è´­æ•°é‡local purchaseLimit=tonumber(redis.call('hget', KEYS[2], 'purchaseLimit'))--ç”¨æˆ·å·²ç»è´­ä¹°çš„æ•°é‡local purchasedNumber=redis.call('ZSCORE', KEYS[1], ARGV[1])--è´­ä¹°æ•°é‡ä¸å­˜åœ¨åˆ™é»˜è®¤ä¸º0if not purchasedNumberthen purchasedNumber = 0end-- ç”¨æˆ·ç°åœ¨è¦è´­ä¹°çš„æ•°é‡local nowPurchasedNumber = tonumber(ARGV[2])-- ç”¨æˆ·å°†è¦è´­ä¹°çš„æ€»æ•°é‡local totalPurchaseNumber = nowPurchasedNumber+purchasedNumberif purchaseLimit &lt; totalPurchaseNumberthen -- ç”¨æˆ·è´­ä¹°æ•°é‡è¶…è¿‡äº†é™è´­æ•°é‡ return -4endlocal stock=tonumber(redis.call('hget', KEYS[2], 'stock'))if stock &lt;= 0then -- åº“å­˜ä¸º0 return 1endif stock &lt; nowPurchasedNumberthen -- åº“å­˜ä¸è¶³ return 2end--æ‰£å‡å•†å“åº“å­˜redis.call('hincrby', KEYS[2], 'stock', -nowPurchasedNumber)-- æ›´æ–°ç”¨æˆ·çš„æ€»è´­ä¹°æ•°é‡redis.call('zadd',KEYS[1], totalPurchaseNumber, ARGV[1])-- ç”¨æˆ·è´­ä¹°æˆåŠŸreturn 0 å°½ç®¡Luaä¼šæä¾›å­—ç¬¦ä¸²å’Œæ•°å­—çš„è‡ªåŠ¨è½¬æ¢ï¼Œä½†æ˜¯æ›´å¥½è¿˜æ˜¯è½¬æ¢ä¸€ä¸‹ã€‚tonumberå°±æ˜¯æŠŠå­—ç¬¦ä¸²æ•°å­—è½¬æ¢æˆæ•°å­—çš„å‡½æ•°ã€‚ redis.callæ˜¯ç”¨æ¥æ‰§è¡Œrediså‡½æ•°çš„æ–¹æ³•ã€‚ ä¸Šè¿°çš„è„šæœ¬å¯ä»¥é€šè¿‡EVALã€EVALSHAæˆ–è€…redis-cli å‚æ•°çš„å½¢å¼æ‰§è¡Œã€‚ä½†æ˜¯ä¸Šé¢çš„è„šæœ¬å·²ç»æ ¼å¼åŒ–äº†ï¼Œæœ€å¥½è¿˜æ˜¯ä»¥åé¢çš„æ–¹å¼è¿è¡Œã€‚ Luaçš„æ³¨é‡Šæ˜¯ä»¥ â€“ å¼€å¤´ä½œä¸ºå•è¡Œæ³¨é‡Š å…·ä½“æ‰§è¡Œæ¼”ç¤ºå¦‚ä¸‹ï¼š 123Sam-Mac:Downloads Sam$ rediscli --eval /Users/sam/Downloads/seckill.lua purchase_goods_3000 seckill:goods:1000 , 202 1(integer) 0Sam-Mac:Downloads Sam$ â€“evalå‚æ•°æ˜¯å‘Šè¯‰rediscli(è¿™ä¸ªæ˜¯è‡ªå®šä¹‰redis-cliå‘½ä»¤çš„åœ°å€)è¯»å–å¹¶è¿è¡Œåé¢çš„Luaè„šæœ¬ã€‚ /Users/sam/Downloads/seckill.lua æ˜¯è„šæœ¬çš„ä½ç½®ï¼Œåé¢è·Ÿç€æ˜¯ä¼ ç»™Luaè„šæœ¬çš„å‚æ•°ã€‚ é€—å·â€,â€å‰çš„purchase_goods_3000 seckill:goods:1000 æ˜¯è¦æ“ä½œçš„é”®ï¼Œå¯ä»¥åœ¨è„šæœ¬ä¸­ç”¨KEYS[1]ã€KEYS[2]è·å–ï¼Œé€—å·â€,â€åé¢çš„202å’Œ1æ˜¯å‚æ•°ï¼Œåœ¨è„šæœ¬ä¸­èƒ½å¤Ÿä½¿ç”¨ARGV[1]å’ŒARGV[2]è·å¾—ã€‚ æ³¨æ„â€,â€é€—å·ä¸¤è¾¹çš„ç©ºæ ¼ä¸èƒ½çœç•¥ï¼Œå¦åˆ™ä¼šå‡ºé”™ åœ¨Redisä¸­è°ƒç”¨Luaè„šæœ¬ï¼Œä¹Ÿæ˜¯å¯ä»¥è°ƒè¯•çš„ã€‚Redis ä» v3.2.0 å¼€å§‹æ”¯æŒ Lua debuggerï¼Œå¯ä»¥åŠ æ–­ç‚¹ã€print å˜é‡ä¿¡æ¯ã€å±•ç¤ºæ­£åœ¨æ‰§è¡Œçš„ä»£ç ã€‚å¯ä»¥åœ¨å‘½ä»¤ä¸­æ·»åŠ â€“ldbè¿›è¡Œè°ƒè¯•ï¼Œè¿™ä¸ªå‚æ•°æ˜¯å¼€å¯ Lua dubegger çš„æ„æ€ï¼Œè¿™ä¸ªæ¨¡å¼ä¸‹Redisä¼š fork ä¸€ä¸ªè¿›ç¨‹è¿›å…¥éš”ç¦»ç¯å¢ƒï¼Œä¸ä¼šå½±å“Redisæ­£å¸¸æä¾›æœåŠ¡ï¼Œä½†è°ƒè¯•æœŸé—´ï¼ŒåŸå§‹ redis æ‰§è¡Œå‘½ä»¤ã€è„šæœ¬çš„ç»“æœä¹Ÿä¸ä¼šä½“ç°åˆ° fork ä¹‹åçš„éš”ç¦»ç¯å¢ƒä¹‹ä¸­ã€‚å› æ­¤å‘¢ï¼Œè¿˜æœ‰å¦å¤–ä¸€ç§è°ƒè¯•æ¨¡å¼ â€“ldb-sync-modeï¼Œä¹Ÿå°±æ˜¯å‰é¢æåˆ°çš„åŒæ­¥æ¨¡å¼ï¼Œè¿™ä¸ªæ¨¡å¼ä¸‹ï¼Œä¼šé˜»å¡ redis ä¸Šæ‰€æœ‰çš„å‘½ä»¤ã€è„šæœ¬ï¼Œç›´åˆ°è„šæœ¬é€€å‡ºï¼Œå®Œå…¨æ¨¡æ‹Ÿäº†æ­£å¼ç¯å¢ƒä½¿ç”¨æ—¶å€™çš„æƒ…å†µï¼Œä½¿ç”¨çš„æ—¶å€™åŠ¡å¿…æ³¨æ„è¿™ç‚¹ã€‚ æ·»åŠ å’Œåˆ é™¤æ–­ç‚¹å¾ˆç®€å•ï¼Œåªéœ€ä½¿ç”¨b 1 2 3 4åœ¨ç¬¬1,2,3,4è¡Œæ·»åŠ b 0æ–­ç‚¹ã€‚è¯¥å‘½ä»¤å°†åˆ é™¤æ‰€æœ‰æ–­ç‚¹ã€‚å¯ä»¥ä½¿ç”¨aså‚æ•°åˆ é™¤é€‰å®šçš„æ–­ç‚¹ï¼Œå³æˆ‘ä»¬è¦åˆ é™¤çš„æ–­ç‚¹æ‰€åœ¨çš„è¡Œï¼Œä½†å‰ç¼€ä¸ºå‡å·ã€‚ä¾‹å¦‚b -3ï¼Œä»ç¬¬3è¡Œä¸­åˆ é™¤æ–­ç‚¹ã€‚ 1Sam-Mac:Downloads Sam$ rediscli --ldb --eval /Users/sam/Downloads/seckill.lua purchase_goods_3000 seckill:goods:1000 , 202 1 ä¸Šé¢å°±æ˜¯ä»Šæ—¥æ–‡ç« çš„æ‰€ä»¥å†…å®¹ï¼Œè¿™æ ·çœ‹èµ·æ¥æ˜¯ä¸æ˜¯è§‰å¾—Luaè„šæœ¬ä¹Ÿæ˜¯æŒºå®¹æ˜“çš„å§ï¼","categories":[],"tags":[{"name":"redis","slug":"redis","permalink":"https://ydstudios.gitee.io/tags/redis/"},{"name":"lua","slug":"lua","permalink":"https://ydstudios.gitee.io/tags/lua/"},{"name":"ç§’æ€","slug":"ç§’æ€","permalink":"https://ydstudios.gitee.io/tags/%E7%A7%92%E6%9D%80/"}]},{"title":"MySQLçš„IGNOREå…³é”®å­—åœ¨é¿å…é‡å¤æ’å…¥è®°å½•æ—¶å­˜åœ¨çš„é—®é¢˜åŠæœ€ä½³å®è·µ","slug":"MySQLçš„IGNOREå…³é”®å­—åœ¨é¿å…é‡å¤æ’å…¥è®°å½•æ—¶å­˜åœ¨çš„é—®é¢˜åŠæœ€ä½³å®è·µ","date":"2020-12-16T21:57:39.000Z","updated":"2021-01-23T08:01:44.000Z","comments":true,"path":"post/cef7abb0.html","link":"","permalink":"https://ydstudios.gitee.io/post/cef7abb0.html","excerpt":"æˆ‘ä»¬åœ¨å®é™…å¼€å‘ä¸­æ€»æœ‰è¿™æ ·çš„éœ€æ±‚ï¼Œè¡¨é‡Œçš„æ•°æ®è¦ä¿æŒå”¯ä¸€ï¼Œæ‰€ä»¥æˆ‘ä»¬å¼€å‘ä¸­ç»å¸¸éƒ½æ˜¯å…ˆæŸ¥è¯¢è¿™æ ·çš„æ•°æ®æœ‰æ²¡æœ‰ï¼Œæœ‰çš„è¯è·³è¿‡ï¼Œæ²¡æœ‰çš„è¯å†æ’å…¥ï¼Œç„¶ååœ¨èƒ½è¡¨ç¤ºæ•°æ®è®°å½•å”¯ä¸€çš„åˆ—ä¸ŠåŠ ä¸Šå”¯ä¸€ç´¢å¼•è¿›è¡Œå…œåº•ã€‚è™½ç„¶æœ‰çš„åŒå­¦åŸºæœ¬ä¸Šä¹Ÿæ˜¯è¿™ä¹ˆåšçš„ï¼Œä½†æ˜¯åˆç¨å¾®çš„åšäº†ä¸€ç‚¹å…¶ä»–çš„éªšæ“ä½œğŸ˜„ğŸ˜„ğŸ˜„ã€‚","text":"æˆ‘ä»¬åœ¨å®é™…å¼€å‘ä¸­æ€»æœ‰è¿™æ ·çš„éœ€æ±‚ï¼Œè¡¨é‡Œçš„æ•°æ®è¦ä¿æŒå”¯ä¸€ï¼Œæ‰€ä»¥æˆ‘ä»¬å¼€å‘ä¸­ç»å¸¸éƒ½æ˜¯å…ˆæŸ¥è¯¢è¿™æ ·çš„æ•°æ®æœ‰æ²¡æœ‰ï¼Œæœ‰çš„è¯è·³è¿‡ï¼Œæ²¡æœ‰çš„è¯å†æ’å…¥ï¼Œç„¶ååœ¨èƒ½è¡¨ç¤ºæ•°æ®è®°å½•å”¯ä¸€çš„åˆ—ä¸ŠåŠ ä¸Šå”¯ä¸€ç´¢å¼•è¿›è¡Œå…œåº•ã€‚è™½ç„¶æœ‰çš„åŒå­¦åŸºæœ¬ä¸Šä¹Ÿæ˜¯è¿™ä¹ˆåšçš„ï¼Œä½†æ˜¯åˆç¨å¾®çš„åšäº†ä¸€ç‚¹å…¶ä»–çš„éªšæ“ä½œğŸ˜„ğŸ˜„ğŸ˜„ã€‚ 12# ğŸ˜„ğŸ˜„ğŸ˜„ éªšæ“ä½œ, å½“æœ‰é‡å¤è®°å½•å°±ä¼šå¿½ç•¥é”™è¯¯è¿”å›å½±å“è¡Œæ•°0INSERT IGNORE INTO tableName VALUES () æœ‰çš„åŒå­¦æ˜¯è¿™ä¹ˆæƒ³çš„ï¼Œåœ¨é«˜å¹¶å‘çš„æƒ…å†µä¸‹ï¼Œå…ˆæŸ¥è¯¢å†æ’å…¥çš„è¯æ˜¯æœ‰å¹¶å‘çš„é—®é¢˜çš„ï¼Œæˆ‘ç›´æ¥åœ¨é‡å¤æ’å…¥çš„æ—¶å€™å±è”½é”™è¯¯ï¼Œä¸ç”¨æ•è·æˆ–è€…æŠ›å‡ºå¼‚å¸¸ï¼Œç›´æ¥ç”¨ insert çš„è¿”å›å½±å“è¡Œæ•°æ¥åˆ¤æ–­æ’å…¥æ˜¯å¦æˆåŠŸã€‚è¿™æ ·çš„åšæ³•çœ‹ä¸Šå»æ„Ÿè§‰æ²¡å•¥é—®é¢˜ï¼Œå…¶å®è¿˜æ˜¯æœ‰å¾ˆå¤§çš„é—®é¢˜çš„ã€‚ è¯­ä¹‰ä¸Šçš„ä¸æ­£ç¡®ä½ åœ¨è¡¨ä¸­å®šä¹‰äº†å”¯ä¸€ç´¢å¼•ï¼Œæ’å…¥é‡å¤çš„è®°å½•ç›´æ¥å±è”½äº†é”™è¯¯ï¼Œè¿™å°±é€ æˆå¼‚å¸¸è¢«åæ‰äº†ï¼Œå¯¼è‡´åŠŸèƒ½æœ‰æ•°æ®é‡å¤çš„bugå°±æ— æ³•é€šè¿‡å¼‚å¸¸æ—¥å¿—æ¥å®šä½ã€‚ ç ´åMySQLä¸»ä»çš„æ•°æ®ä¸€è‡´æ€§åœ¨è¯´è¿™ä¸ªIGNOREæ˜¯å¦‚ä½•é€ æˆ MySQL ä¸»ä»æ•°æ®ä¸ä¸€è‡´çš„åŸå› ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè¯´è¯´ MySQL ä¸­çš„ä¸€ä¸ªä½œä¸ºå¼€å‘å¾ˆå°‘å¬è¯´çš„ä¸€ä¸ªè¡¨çº§é”ï¼šAUTO-INCé”ï¼ˆå³è‡ªå¢é”ï¼‰ã€‚ åœ¨ä½¿ç”¨ MySQL çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºè¡¨çš„æŸä¸€åˆ—æ·»åŠ  AUTO_INCREMENTå±æ€§ï¼Œåœ¨æ’å…¥è®°å½•æ—¶è¯¥åˆ—å¯ä»¥ä¸æŒ‡å®šï¼ŒMySQL ä¼šè‡ªåŠ¨ä¸ºè¯¥åˆ—èµ‹äºˆä¸€ä¸ªé€’å¢çš„å€¼ã€‚MySQL è‡ªåŠ¨ç»™AUTO_INCREMENTä¿®é¥°çš„åˆ—è¿›è¡Œé€’å¢èµ‹å€¼çš„å®ç°æ–¹å¼ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ä¸ªï¼š é‡‡ç”¨ AUTO_INCé”ï¼Œåœ¨æ‰§è¡Œæ’å…¥è¯­å¥æ—¶å°±åŠ ä¸€ä¸ªè¡¨çº§åˆ«çš„AUTO_INCé”ï¼Œç„¶åä¸ºæ¯æ¡å¾…æ’å…¥çš„è®°å½•åˆ†é…é€’å¢å€¼ã€‚åœ¨è¯­å¥æ‰§è¡Œç»“æŸåï¼Œå†æŠŠAUTO_INCé”é‡Šæ”¾ã€‚æ‰€ä»¥åœ¨ä¸€ä¸ªäº‹åŠ¡æŒæœ‰AUTO_INCé”çš„è¿‡ç¨‹ä¸­ï¼Œå…¶ä»–æ’å…¥è¯­å¥éƒ½è¦é˜»å¡ï¼Œä»è€Œä¿è¯ä¸€ä¸ªè¯­å¥åˆ†é…çš„é€’å¢å€¼æ˜¯è¿ç»­çš„ã€‚ é‡‡ç”¨ä¸€ä¸ªè½»é‡çº§çš„é”ï¼Œåœ¨ä¸ºINSERTè¯­å¥ç”Ÿæˆé€’å¢å€¼æ—¶è·å–è¿™ä¸ªè½»é‡çº§çš„é”ï¼Œç„¶ååœ¨ç”Ÿæˆæœ¬æ¬¡æ’å…¥è¯­å¥éœ€è¦ç”¨åˆ°çš„é€’å¢å€¼åå°±æŠŠè½»é‡çº§é”é‡Šæ”¾æ‰ï¼Œä¸éœ€è¦ç­‰åˆ°æ•´ä¸ªæ’å…¥è¯­å¥æ‰§è¡Œå®Œæ‰é‡Šæ”¾é”ã€‚ å¦‚æœæˆ‘ä»¬çš„æ’å…¥è¯­å¥åœ¨æ‰§è¡Œå‰å°±å¯ä»¥ç¡®å®šå…·ä½“è¦æ’å…¥å¤šå°‘æ¡è®°å½•ï¼Œæ¯”å¦‚ 1INSERT INTO test(a) VALUES ('1'),('b'); æ­¤æ—¶æˆ‘ä»¬å¯ä»¥åœ¨æ‰§è¡Œå‰å°±ç¡®å®šè¦æ’å…¥2æ¡è®°å½•ï¼Œé‚£ä¹ˆä¸€èˆ¬é‡‡ç”¨è½»é‡çº§é”çš„æ–¹å¼å¯¹ AUTO_INCREMENTä¿®é¥°çš„åˆ—è¿›è¡Œèµ‹å€¼ï¼Œç”¨è¿™ç§æ–¹å¼å¯ä»¥é¿å…é”å®šè¡¨ï¼Œå¯ä»¥æé«˜æ’å…¥æ€§èƒ½ã€‚ Mysql æä¾›äº†ä¸€ä¸ªåä¸º innodb_atuoinc_lock_mode çš„ç³»ç»Ÿå˜é‡ï¼Œæ¥æ§åˆ¶ MySQLä½¿ç”¨ä¸Šè¿°çš„ä¸¤ç§æ–¹å¼ä¸­çš„å“ªä¸€ä¸­æ¥ä¸º AUTO_INCREMENTä¿®é¥°çš„åˆ—è¿›è¡Œèµ‹å€¼ã€‚ å½“ innodb_atuoinc_lock_mode çš„å€¼ä¸º0æ—¶ï¼Œä¸€å¾‹é‡‡ç”¨AUTO_INCé”ï¼› å½“ innodb_atuoinc_lock_mode çš„å€¼ä¸º1æ—¶ï¼Œä¸¤ç§æ–¹å¼æ··åˆä½¿ç”¨ï¼Œæ’å…¥è®°å½•ç¡®å®šæ—¶é‡‡ç”¨è½»é‡çº§é”ï¼Œä¸ç¡®å®šæ—¶ä½¿ç”¨AUTO_INCé”ã€‚ å½“ innodb_atuoinc_lock_mode çš„å€¼ä¸º2æ—¶ï¼Œä¸€å¾‹é‡‡ç”¨è½»é‡çº§é”ï¼› å½“innodb_autoinc_lock_mode=0æ—¶ï¼Œåªæœ‰æ’å…¥æˆåŠŸä¹‹åï¼ŒAUTO_INCREMENT å€¼æ‰ä¼šé€’å¢ï¼Œæ’å…¥å¤±è´¥ä¸ä¼šé€’å¢ã€‚å½“innodb_autoinc_lock_mode=1æ—¶ï¼Œæ— è®ºæ’å…¥æ˜¯å¦æˆåŠŸï¼ŒAUTO_INCREMENTçš„å€¼éƒ½ä¼šé€’å¢ã€‚å½“innodb_atuoinc_lock_modeä¸º2æ—¶ï¼Œå¯èƒ½ä¼šé€ æˆä¸åŒäº‹ç‰©ä¸­çš„æ’å…¥è¯­å¥ä¸ºAUTO_INCREMENTä¿®é¥°çš„åˆ—ç”Ÿçš„å€¼æ˜¯äº¤å‰çš„ï¼Œè¿™åœ¨ä¸»ä»å¤åˆ¶çš„åœºæ™¯æ˜¯ä¸å®‰å…¨çš„ã€‚[1] æˆ‘æŸ¥çœ‹è¿‡æˆ‘ç›®å‰è´Ÿè´£çš„ç³»ç»Ÿï¼ŒMySQL é‡‡ç”¨çš„æ˜¯ä¸»ä»æ¨¡å¼ï¼Œéš”ç¦»çº§åˆ«è®¾ç½®çš„æ˜¯è¯»å·²æäº¤(Read Committed)ï¼Œbinlogçš„æ ¼å¼è®¾ç½®ä¸º ROWï¼Œ innodb_atuoinc_lock_modeè®¾ç½®çš„æ˜¯1ï¼Œä¹Ÿå°±æ˜¯è¯´æ— è®ºæ’å…¥æˆåŠŸä¸å¦ AUTO_INCREMENT çš„å€¼éƒ½ä¼šé€’å¢ã€‚åœ¨æœ¬åœ°æ­å»ºçš„ä¸»ä»æ¨¡å¼çš„ mysqlï¼ˆå®‰è£…æœ¬äººåšå®¢ä¸­ä¹‹å‰çš„æ–‡ç« æ­å»ºçš„ MySQLä¸»ä»ï¼‰ ä¸­çš„masteråº“ æ–°å»ºä¸€ä¸ªå¦‚ä¸‹çš„è¡¨ï¼š æŸ¥çœ‹ä¸€ä¸‹ slave3307æ•°æ®åº“ä¸­å¯¹åº”çš„è¡¨ç»“æ„å’Œè‡ªå¢å€¼ï¼šç¡®å®šå’Œ master ä¸€è‡´ åœ¨ masteråº“ä¸Šæ‰§è¡Œ show master status æŸ¥çœ‹ master çš„binglog ä¿¡æ¯ï¼š åœ¨ master åº“ä¸Šè¿ç»­æ‰§è¡Œä¸‹å›¾çš„ä¸‰ä¸ª SQLï¼Œè§‚å¯Ÿ master ä¸ salve çš„æƒ…å†µã€‚ master çš„è¡¨çš„AUTO_INCREMENTå€¼å·²ç»å‘ç”Ÿäº†å˜åŒ–ï¼Œå¦‚ä¸‹å›¾ï¼š master çš„ binglog å¦‚ä¸‹å›¾ï¼š æˆ‘ä»¬ä»ä¸Šé¢ä¸¤ä¸ªå›¾å¯ä»¥å‘ç°ï¼Œä½¿ç”¨ignoreå…³é”®å­—ï¼Œå°½ç®¡å¾…æ’å…¥çš„è®°å½•å› ä¸ºå”¯ä¸€é”®å†²çªè€Œæ²¡æœ‰æ’å…¥æˆåŠŸï¼Œä½†AUTO_INCREMENTå€¼å´é€’å¢äº†ï¼Œè€Œä¸” binlog ä¸­ä¹Ÿæ²¡æœ‰ INSERT IGNORE è¯­å¥æ—¥å¿—ï¼Œè¿™å¾ˆæ˜æ˜¾å¯¼è‡´æ•°æ®åº“ slave ä¸ä¼šæ‰§è¡Œè¯¥è¯­å¥ï¼Œå¯¼è‡´æ•°æ®åº“ slaveæ•°æ®åº“ä¸­çš„è¡¨çš„ä¸»é”®å’Œ master æ•°æ®åº“ä¸­çš„è¡¨ä¸»é”®ä¸ä¸€è‡´ï¼ æˆ‘ä»¬ç”±æ­¤å¯ä»¥å¤§èƒ†çš„çŒœæµ‹ä¸€ä¸‹ IGNORE çš„å®ç°æœºåˆ¶ï¼š 1ã€å°è¯•æŠŠæ–°è¡Œæ’å…¥åˆ°è¡¨ä¸­ ï¼› 2ã€å¦‚æœæ’å…¥æˆåŠŸåˆ™è¿”å›æ­£å¸¸çš„å½±å“è¡Œæ•°ï¼›å¦‚æœå”¯ä¸€é”®å†²çªï¼ˆé”™è¯¯ï¼‰åˆ™å¿½ç•¥è¯¥é”™è¯¯ï¼Œè¿”å›å½±å“è¡Œæ•°ä¸º0 ï¼› åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ä¸šåŠ¡ä¸Šæ˜¯éœ€è¦å½“å‡ºç°å”¯ä¸€é”®å†²çªæ—¶å‘ç”Ÿé‡å¤è¦æŠ›å‡ºå¼‚å¸¸è€Œä¸æ˜¯åæ‰å¼‚å¸¸ï¼Œè¿™ä¸ªå‰é¢ä¹Ÿæœ‰è¯´åˆ°ã€‚æ­¤å¤–ï¼Œç”±ä¸Šé¢çš„æ‰§è¡Œè¿‡ç¨‹å¯çŸ¥ï¼Œæˆ‘ä»¬æœŸæœ›æ’å…¥çš„è®°å½•å› ä¸ºå”¯ä¸€é”®å†²çªè€Œæ²¡æœ‰æ’å…¥æˆåŠŸï¼Œä½†AUTO_INCREMENTå­—æ®µå€¼å´é€’å¢äº†ã€‚å› ä¸ºæ’å…¥è¯­å¥å¹¶æœªæ‰§è¡ŒæˆåŠŸï¼Œåœ¨binlogä¸­å¹¶ä¸ä¼šæœ‰æ‰§è¡Œè®°å½•ï¼Œè¿™æ„å‘³ç€ä»åº“çš„AUTO_INCREMENTå­—æ®µå€¼ä¸ä¼šé€’å¢ï¼Œå³ä¸»åº“å’Œä»åº“çš„AUTO_INCREMENTå€¼å‡ºç°äº†ä¸ä¸€è‡´ã€‚è¿™å¸¦æ¥çš„é—®é¢˜æ˜¯ï¼Œåç»­å¦‚æœå› ä¸ºä¸»åº“å‘ç”Ÿæ•…éšœè€Œå‘ç”Ÿä¸»ä»åˆ‡æ¢ï¼Œä»åº“çš„AUTO_INCREMENTå€¼è½åäºä¸»åº“ï¼Œå°±ä¼šå¯¼è‡´ä¸€æ®µæ—¶é—´å†…åœ¨åŸä»åº“ç°ä¸»åº“æ’å…¥çš„æ•°æ®åœ¨åŸä¸»åº“ç°ä»åº“ä¸Šå› ä¸ºAUTO_INCREMENTä¸»é”®å†²çªè€Œå¯¼è‡´æ’å…¥å¤±è´¥ï¼Œè¿™ä¸ªè‚¯å®šæ˜¯ç”¨INSERT IGNOREä¹‹å‰æ²¡æœ‰æƒ³åˆ°çš„ï¼Œæ‰€ä»¥å»ºè®®åœ¨å®é™…å¼€å‘ä¸­ä¸è¦ä½¿ç”¨æ­¤ç§éªšæ“ä½œğŸ˜„ğŸ˜„ğŸ˜„ InnoDBè¡¨insertè¯­å¥ä¸»è¦åˆ†ä¸ºä¸‰ç§ç±»å‹ï¼š Simple insert(ç®€å•æ’å…¥)å¯ä»¥é€šè¿‡è¯­å¥é¢„å…ˆåˆ¤æ–­æ’å…¥çš„è¡Œæ•°ã€‚åŒ…æ‹¬ä¸åŒ…å«å­æŸ¥è¯¢çš„å•è¡Œã€å¤šè¡Œ INSERT å’Œ REPLACE è¯­å¥ï¼Œè¿˜æœ‰è¯­å¥INSERT ... ON DUPLICATE KEY UPDATEã€‚ Bulk inserts(å¤§é‡æ’å…¥)æ— æ³•é€šè¿‡è¯­å¥é¢„å…ˆåˆ¤æ–­æ’å…¥çš„è¡Œæ•°ã€‚åŒ…æ‹¬INSERT ... SELECTã€REPLACE ... SELECT &gt;å’ŒLOAD DATAè¯­å¥ã€‚InnoDBæ¯å¤„ç†ä¸€è¡Œæ‰ä¼šä¸º AUTO_INCREMENT åˆ—åˆ†é…ä¸€ä¸ªå€¼ã€‚ Mixed-mode inserts(æ··åˆæ¨¡å¼æ’å…¥)åœ¨ç®€å•æ’å…¥è¯­å¥å½“ä¸­ï¼Œæœ‰çš„è¡Œæœ‰ä¸ºè‡ªå¢åˆ—æŒ‡å®šå€¼ï¼Œè€Œæœ‰çš„è¡Œæ²¡æœ‰ä¸ºè‡ªå¢åˆ—æŒ‡å®šå€¼ã€‚ ä¾‹å¦‚:æ··åˆæ¨¡å¼æ’å…¥ 12# idåˆ—ä½œä¸ºè‡ªå¢åˆ— INSERT INTO t1 (id,c1,c2) VALUES (1,1,'a'), (NULL,NULL,'b'), (10,5,'c'), (NULL,NULL,'d') ; [1] å‚è€ƒã€ŠMySQLæ˜¯æ€æ ·è¿è¡Œçš„ã€‹411é¡µ","categories":[],"tags":[{"name":"mysql","slug":"mysql","permalink":"https://ydstudios.gitee.io/tags/mysql/"},{"name":"ignore","slug":"ignore","permalink":"https://ydstudios.gitee.io/tags/ignore/"}]},{"title":"è®¾è®¡æ¨¡å¼å­¦ä¹ ä¹‹æ¨¡æ¿å’Œç­–ç•¥æ¨¡å¼å®æˆ˜","slug":"è®¾è®¡æ¨¡å¼å­¦ä¹ ä¹‹æ¨¡æ¿å’Œç­–ç•¥æ¨¡å¼å®æˆ˜","date":"2020-12-04T21:41:34.000Z","updated":"2020-12-07T14:02:17.000Z","comments":true,"path":"post/c14af19a.html","link":"","permalink":"https://ydstudios.gitee.io/post/c14af19a.html","excerpt":"å‰é¢æ–‡ç« ç”±æŠ½å¥–æ´»åŠ¨èµ é€ä¸åŒçš„å¥–åŠ±ä»è€Œå¼•å‡ºäº†ç­–ç•¥æ¨¡å¼ï¼Œå®šä¹‰ä¸€ä¸ªç­–ç•¥æ¥å£ï¼Œä¸åŒçš„å¥–åŠ±å‘æ”¾å®ç°ä¸åŒçš„ç­–ç•¥ã€‚å³ä½¿åç»­æ–°å¢åŠ å¥–åŠ±ç§ç±»ï¼Œåªè¦é‡æ–°å®ç°ä¸€ä¸ªç­–ç•¥å³å¯ï¼Œç¬¦åˆäº†è®¾è®¡æ¨¡å¼ä¸­çš„å¼€é—­åŸåˆ™-å¯¹æ‰©å±•å¼€æ”¾å¯¹ä¿®æ”¹å…³é—­ã€‚æˆ‘åœ¨ä¸€æ¬¡è®¢å•æ´»åŠ¨åŠŸèƒ½å¼€å‘ä¸­ä½¿ç”¨åˆ°äº†ç­–ç•¥æ¨¡å¼ï¼Œåœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­å‘ç°ï¼Œè®¢å•ç¬¦åˆæ´»åŠ¨æ¡ä»¶çš„åˆ¤æ–­ã€å‘æ”¾å¥–åŠ±ç»™ç”¨æˆ·ï¼Œå¯ä»¥æå‡åˆ°çˆ¶ç±»å®ç°ï¼Œå…·ä½“çš„æ¡ä»¶åˆ¤æ–­é€»è¾‘å¯ä»¥å»¶è¿Ÿåˆ°å­ç±»å»å®ç°ï¼Œä»è€Œå¼•å‡ºæœ¬ç¯‡æ–‡ç« çš„ä¸»é¢˜ï¼šæ¨¡æ¿æ¨¡å¼ã€‚","text":"å‰é¢æ–‡ç« ç”±æŠ½å¥–æ´»åŠ¨èµ é€ä¸åŒçš„å¥–åŠ±ä»è€Œå¼•å‡ºäº†ç­–ç•¥æ¨¡å¼ï¼Œå®šä¹‰ä¸€ä¸ªç­–ç•¥æ¥å£ï¼Œä¸åŒçš„å¥–åŠ±å‘æ”¾å®ç°ä¸åŒçš„ç­–ç•¥ã€‚å³ä½¿åç»­æ–°å¢åŠ å¥–åŠ±ç§ç±»ï¼Œåªè¦é‡æ–°å®ç°ä¸€ä¸ªç­–ç•¥å³å¯ï¼Œç¬¦åˆäº†è®¾è®¡æ¨¡å¼ä¸­çš„å¼€é—­åŸåˆ™-å¯¹æ‰©å±•å¼€æ”¾å¯¹ä¿®æ”¹å…³é—­ã€‚æˆ‘åœ¨ä¸€æ¬¡è®¢å•æ´»åŠ¨åŠŸèƒ½å¼€å‘ä¸­ä½¿ç”¨åˆ°äº†ç­–ç•¥æ¨¡å¼ï¼Œåœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­å‘ç°ï¼Œè®¢å•ç¬¦åˆæ´»åŠ¨æ¡ä»¶çš„åˆ¤æ–­ã€å‘æ”¾å¥–åŠ±ç»™ç”¨æˆ·ï¼Œå¯ä»¥æå‡åˆ°çˆ¶ç±»å®ç°ï¼Œå…·ä½“çš„æ¡ä»¶åˆ¤æ–­é€»è¾‘å¯ä»¥å»¶è¿Ÿåˆ°å­ç±»å»å®ç°ï¼Œä»è€Œå¼•å‡ºæœ¬ç¯‡æ–‡ç« çš„ä¸»é¢˜ï¼šæ¨¡æ¿æ¨¡å¼ã€‚ æ¨¡æ¿æ¨¡å¼åœ¨æ¨¡æ¿æ¨¡å¼ï¼ˆTemplate Patternï¼‰ä¸­ï¼Œä¸€ä¸ªæŠ½è±¡ç±»å…¬å¼€å®šä¹‰äº†æ‰§è¡Œå®ƒçš„æ–¹æ³•çš„æ–¹å¼/æ¨¡æ¿ã€‚å®ƒçš„å­ç±»å¯ä»¥æŒ‰éœ€è¦é‡å†™æ–¹æ³•å®ç°ï¼Œä½†è°ƒç”¨å°†ä»¥æŠ½è±¡ç±»ä¸­å®šä¹‰çš„æ–¹å¼è¿›è¡Œï¼Œè¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºè¡Œä¸ºå‹æ¨¡å¼ã€‚æ¨¡æ¿æ¨¡å¼ä¸­æ¶‰åŠåˆ°åœ¨çˆ¶ç±»å®ç°ç®—æ³•éª¨æ¶ï¼Œå…·ä½“æ­¥éª¤åœ¨å­ç±»å®ç°ï¼Œæ‰€ä»¥å¿…é¡»è¦æœ‰æŠ½è±¡ç±»ï¼ˆJava8ä¸­çš„æ¥å£çš„ default æ–¹æ³•è²Œä¼¼ä¹Ÿå¯ä»¥å®ç°ï¼‰ã€‚ ä»‹ç» æ„å›¾ï¼šå®šä¹‰ä¸€ä¸ªæ“ä½œä¸­çš„ç®—æ³•çš„éª¨æ¶ï¼Œè€Œå°†ä¸€äº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­ã€‚æ¨¡æ¿æ–¹æ³•ä½¿å¾—å­ç±»å¯ä»¥ä¸æ”¹å˜ä¸€ä¸ªç®—æ³•çš„ç»“æ„å³å¯é‡å®šä¹‰è¯¥ç®—æ³•çš„æŸäº›ç‰¹å®šæ­¥éª¤ã€‚ ä¸»è¦è§£å†³ï¼šä¸€äº›æ–¹æ³•é€šç”¨ï¼Œå´åœ¨æ¯ä¸€ä¸ªå­ç±»éƒ½é‡æ–°å†™äº†è¿™ä¸€æ–¹æ³•ã€‚ ä½•æ—¶ä½¿ç”¨ï¼šæœ‰ä¸€äº›é€šç”¨çš„æ–¹æ³•ã€‚ å¦‚ä½•è§£å†³ï¼šå°†è¿™äº›é€šç”¨ç®—æ³•æŠ½è±¡å‡ºæ¥ã€‚ å…³é”®ä»£ç ï¼šåœ¨æŠ½è±¡ç±»å®ç°ï¼Œå…¶ä»–æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»å®ç°ã€‚ åº”ç”¨å®ä¾‹ï¼š JDKä¸­ ReentrantLockä¸­å…¬å¹³é”å’Œéå…¬å¹³é”çš„å®ç° Spring ä¸­å¯¹ Hibernate çš„æ”¯æŒï¼Œå°†ä¸€äº›å·²ç»å®šå¥½çš„æ–¹æ³•å°è£…èµ·æ¥ï¼Œæ¯”å¦‚å¼€å¯äº‹åŠ¡ã€è·å– Sessionã€å…³é—­ Session ç­‰ï¼Œç¨‹åºå‘˜ä¸é‡å¤å†™é‚£äº›å·²ç»è§„èŒƒå¥½çš„ä»£ç ï¼Œç›´æ¥ä¸¢ä¸€ä¸ªå®ä½“å°±å¯ä»¥ä¿å­˜ã€‚ ä¼˜ç‚¹ï¼š å°è£…ä¸å˜éƒ¨åˆ†ï¼Œæ‰©å±•å¯å˜éƒ¨åˆ†ã€‚ æå–å…¬å…±ä»£ç ï¼Œä¾¿äºç»´æŠ¤ã€‚ è¡Œä¸ºç”±çˆ¶ç±»æ§åˆ¶ï¼Œå­ç±»å®ç°ã€‚ ç¼ºç‚¹ï¼š æ¯ä¸€ä¸ªä¸åŒçš„å®ç°éƒ½éœ€è¦ä¸€ä¸ªå­ç±»æ¥å®ç°ï¼Œå¯¼è‡´ç±»çš„ä¸ªæ•°å¢åŠ ï¼Œä½¿å¾—ç³»ç»Ÿæ›´åŠ åºå¤§ã€‚ ä½¿ç”¨åœºæ™¯ï¼š æœ‰å¤šä¸ªå­ç±»å…±æœ‰çš„æ–¹æ³•ï¼Œä¸”é€»è¾‘ç›¸åŒã€‚ é‡è¦çš„ã€å¤æ‚çš„æ–¹æ³•ï¼Œå¯ä»¥è€ƒè™‘ä½œä¸ºæ¨¡æ¿æ–¹æ³•ã€‚ æ³¨æ„äº‹é¡¹ï¼š ä¸ºé˜²æ­¢æ¶æ„æ“ä½œï¼Œä¸€èˆ¬æ¨¡æ¿æ–¹æ³•éƒ½åŠ ä¸Š final å…³é”®è¯ã€‚ æœ¬æ–‡ç¤ºä¾‹UMLå›¾ ä»£ç ç»“æ„å›¾ ç¤ºä¾‹ä»£ç 1ã€ç­–ç•¥æ¥å£ï¼Œå®šä¹‰äº†ä¸€ä¸ªæ´»åŠ¨ç­–ç•¥éœ€è¦å®ç°çš„æ–¹æ³• 123456789101112131415161718192021222324252627282930313233343536373839package com.ydstudio.flashsale.module.pattern.service;import com.ydstudio.flashsale.common.Result;import com.ydstudio.flashsale.module.pattern.dto.ActiveOrderDto;/** * * æ´»åŠ¨æ¥å£ * * @author Sam * @date 2020/11/26 * @since 1.7.3 */public interface IActiveHandle &#123; /** * è¿”å›æ´»åŠ¨çš„ç±»å‹ * ActiveCategoryEnum æšä¸¾ * * @return */ String getCategory(); /** * è¿”å›æ´»åŠ¨çš„è¯¦ç»†ç±»å‹ * ActiveCategoryDetailEnum æšä¸¾ * * @return */ String getCategoryDetail(); /** * è®¢å•æ£€æŸ¥ * @param temporaryOrderDto ä¸´æ—¶è®¢å• * @return Result */ Result checkOrder(ActiveOrderDto temporaryOrderDto);&#125; 2ã€æ´»åŠ¨æŠ½è±¡ç±»åŒ…å«è®¢å•è§„åˆ™æ˜¯å¦ç¬¦åˆçš„åˆ¤æ–­ä»¥åŠç¬¦åˆè§„åˆ™ä¹‹åå‘é€å¥–åŠ±çš„ç®—æ³•éª¨æ¶ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758package com.ydstudio.flashsale.module.pattern.service;import com.ydstudio.flashsale.common.Result;import com.ydstudio.flashsale.module.pattern.dto.ActiveOrderDto;import org.springframework.stereotype.Component;/** * æ´»åŠ¨æŠ½è±¡ç±»,æŠ½å–å…¬å…±æ–¹æ³•, * æŠŠè®¢å•æ˜¯å¦ç¬¦åˆå¥–åŠ±çš„åˆ¤æ–­ä¹‹åå‘é€å¥–åŠ±çš„å…¬å…±é€»è¾‘åœ¨æ­¤å¤„å®ç°, * è®¢å•å…·ä½“æ¡ä»¶çš„åˆ¤æ–­å»¶è¿Ÿç”±å­ç±»å»å®ç°. * * ç­–ç•¥å’Œæ¨¡æ¿æ¨¡å¼ç»„åˆä½¿ç”¨ * * @author Sam * @date 2020/11/26 * @since 1.7.3 */@Componentpublic abstract class AbstractActiveHandle implements IActiveHandle &#123; /** * å…¶ä»–æŠ½è±¡æ–¹æ³• */ public abstract void otherMethod(); public void otherMethod1() &#123; System.out.println(\"å…¶ä»–å…¬ç”¨æ–¹æ³•\"); &#125; /** * å¤–éƒ¨çœŸæ­£è¦è°ƒç”¨çš„æ–¹æ³• * * @param temporaryOrderDto è®¢å• */ public final String handle(ActiveOrderDto temporaryOrderDto) &#123; // è°ƒç”¨æ¥å£ä¸­éœ€è¦å­ç±»å®ç°çš„æ–¹æ³• Result result = checkOrder(temporaryOrderDto); if (!result.isSuccess()) &#123; System.out.println(\"ä¸ç¬¦åˆå¥–åŠ±å‘æ”¾æ¡ä»¶\"); return \"ä¸ç¬¦åˆå¥–åŠ±å‘æ”¾æ¡ä»¶\"; &#125; return sendReward(temporaryOrderDto, temporaryOrderDto.getMemberId(), \"ç§¯åˆ†\"); &#125; /** * ç»Ÿä¸€çš„å‘é€å¥–åŠ±çš„æ–¹æ³• * @param temporaryOrderDto è®¢å• * @param memberId ç”¨æˆ·ID * @param reward å¥–åŠ± */ private String sendReward(ActiveOrderDto temporaryOrderDto, long memberId, String reward) &#123; String s = \"ç»™ç”¨æˆ·\" + memberId + \"çš„è®¢å•\" + temporaryOrderDto + \"å‘é€å¥–åŠ±\" + reward; System.out.println(s); return s; &#125;&#125; 3ã€ æ´»åŠ¨ç­–ç•¥çš„å®ç°ç±» ä¼šç±è®¢å•ç­–ç•¥å®ç°ç±» 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647package com.ydstudio.flashsale.module.pattern.service.impl;import com.ydstudio.flashsale.common.Result;import com.ydstudio.flashsale.module.pattern.dto.ActiveOrderDto;import com.ydstudio.flashsale.module.pattern.service.AbstractActiveHandle;import lombok.extern.slf4j.Slf4j;import org.springframework.stereotype.Service;import java.util.Random;/** * * ä¼šç±è®¢å•çš„å¤„ç† * * @author Sam * @date 2020/11/26 * @since 1.7.3 */@Slf4j@Servicepublic class LevelOrderActiveHandle extends AbstractActiveHandle &#123; @Override public void otherMethod() &#123; System.out.println(\"ä¼šç±è®¢å•çš„å®ç°\"); &#125; @Override public String getCategory() &#123; return \"2\"; &#125; @Override public String getCategoryDetail() &#123; return \"2\"; &#125; @Override public Result checkOrder(ActiveOrderDto temporaryOrderDto) &#123; Random random = new Random(); int i = random.nextInt(4); if (i &gt;=2)&#123; return new Result(); &#125; return new Result(\"ä¸ç¬¦åˆä¼šç±è®¢å•æ´»åŠ¨æ¡ä»¶\",\"ä¸ç¬¦åˆä¼šç±è®¢å•æ´»åŠ¨æ¡ä»¶\"); &#125;&#125; é…’åº—è®¢å•æ´»åŠ¨ç­–ç•¥å®ç°ç±» 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748package com.ydstudio.flashsale.module.pattern.service.impl;import com.ydstudio.flashsale.common.Result;import com.ydstudio.flashsale.module.pattern.dto.ActiveOrderDto;import com.ydstudio.flashsale.module.pattern.service.AbstractActiveHandle;import lombok.extern.slf4j.Slf4j;import org.springframework.stereotype.Service;import java.util.Random;/** * * é…’åº—è®¢å•å¤„ç† * * @author Sam * @date 2020/11/26 * @since 1.7.3 */@Slf4j@Servicepublic class OrderActiveHandle extends AbstractActiveHandle &#123; @Override public void otherMethod() &#123; System.out.println(\"é…’åº—è®¢å•çš„å®ç°\"); &#125; @Override public String getCategory() &#123; return \"1\"; &#125; @Override public String getCategoryDetail() &#123; return \"1\"; &#125; @Override public Result checkOrder(ActiveOrderDto temporaryOrderDto) &#123; Random random = new Random(); int i = random.nextInt(4); if (i&lt;=2)&#123; return new Result(); &#125; return new Result(\"ä¸ç¬¦åˆé…’åº—è®¢å•æ´»åŠ¨æ¡ä»¶\",\"ä¸ç¬¦åˆé…’åº—è®¢å•æ´»åŠ¨æ¡ä»¶\"); &#125;&#125; 4 ã€ç»Ÿä¸€å…¥å£æä¾›ä¸€ä¸ªContext ç»™å¤–éƒ¨ä½¿ç”¨ è°ƒç”¨æ–¹ç›´æ¥ä½¿ç”¨@Autowired æ³¨å…¥ActiveHandleContextå³å¯ä½¿ç”¨ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940package com.ydstudio.flashsale.module.pattern.service;import lombok.extern.slf4j.Slf4j;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Component;import java.util.List;/** * è´Ÿè´£æ‰€æœ‰æ´»åŠ¨å¤„ç†çš„å…¥å£,æ ¹æ® getImpl(String categoryDetail)ç±»å‹æ¥åˆ¤æ–­è°ƒç”¨å…·ä½“çš„æ´»åŠ¨ç­–ç•¥ * * @author Sam * @date 2020/7/13 * @since 1.6.8 */@Slf4j@Componentpublic class ActiveHandleContext &#123; @Autowired private List&lt;AbstractActiveHandle&gt; activeHandleList; /** * å¯¹å¤–çš„ç»Ÿä¸€å…¥å£ * @param categoryDetail ç±»å‹ * @return */ public AbstractActiveHandle getImpl(String categoryDetail) &#123; log.info(\"å‚æ•° categoryDetail =[&#123;&#125;] è·å–å®ç° \", categoryDetail); for (AbstractActiveHandle activeHandle : activeHandleList) &#123; if (activeHandle.getCategoryDetail().equals(categoryDetail)) &#123; return activeHandle; &#125; &#125; throw new UnsupportedOperationException(\"æ²¡æœ‰è¯¥å®ç°\"); &#125;&#125; çˆ¶ç±»AbstractActiveHandleå®ç°æ´»åŠ¨è§„åˆ™åˆ¤æ–­ã€å‘æ”¾å¥–åŠ±çš„ç®—æ³•éª¨æ¶ï¼Œå­ç±»å®ç°å…·ä½“çš„è§„åˆ™åˆ¤æ–­ï¼Œè¿™æ ·å°±å®ç°äº†ä»£ç çš„ä¼˜åŒ–å’Œå…¬ç”¨ã€‚","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://ydstudios.gitee.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"ç­–ç•¥æ¨¡å¼","slug":"ç­–ç•¥æ¨¡å¼","permalink":"https://ydstudios.gitee.io/tags/%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/"},{"name":"æ¨¡æ¿æ¨¡å¼","slug":"æ¨¡æ¿æ¨¡å¼","permalink":"https://ydstudios.gitee.io/tags/%E6%A8%A1%E6%9D%BF%E6%A8%A1%E5%BC%8F/"}]},{"title":"IDEA éšè—.ideaä¸.imlæ–‡ä»¶","slug":"IDEA-éšè—-ideaä¸-imlæ–‡ä»¶","date":"2020-12-04T20:56:58.000Z","updated":"2020-12-04T13:15:09.000Z","comments":true,"path":"post/c41bdbee.html","link":"","permalink":"https://ydstudios.gitee.io/post/c41bdbee.html","excerpt":"åœ¨ IDEA ä¸­ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åˆ›å»º.idea å’Œ.iml æ–‡ä»¶ï¼Œå…¶å®è¿™ä¸¤ä¸ªæ–‡ä»¶å¯¹æˆ‘ä»¬æ²¡å•¥ç”¨çš„ï¼Œä½†æ˜¯ä¹Ÿä¸èƒ½åˆ æ‰(é¡¹ç›®éœ€è¦è€Œä¸”åˆ äº†åªå¥½è¿˜ä¼šè‡ªåŠ¨åˆ›å»º)ï¼Œé‚£æˆ‘ä»¬åªå¥½æƒ³æ³•å­ç»™ä»–éšè—æ‰ã€‚","text":"åœ¨ IDEA ä¸­ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åˆ›å»º.idea å’Œ.iml æ–‡ä»¶ï¼Œå…¶å®è¿™ä¸¤ä¸ªæ–‡ä»¶å¯¹æˆ‘ä»¬æ²¡å•¥ç”¨çš„ï¼Œä½†æ˜¯ä¹Ÿä¸èƒ½åˆ æ‰(é¡¹ç›®éœ€è¦è€Œä¸”åˆ äº†åªå¥½è¿˜ä¼šè‡ªåŠ¨åˆ›å»º)ï¼Œé‚£æˆ‘ä»¬åªå¥½æƒ³æ³•å­ç»™ä»–éšè—æ‰ã€‚ Windows ç³»ç»Ÿåˆ™ä¾æ¬¡ç‚¹å‡» File â€”- Setting â€”- Editor â€”- File Types Macç³»ç»Ÿä¾æ¬¡ç‚¹å‡»Preferencesâ€”- Editor â€”- File Types åœ¨å›¾ä¸­çº¢æ¡†å¤„æ·»åŠ  .idea å’Œ *imlï¼Œç„¶åä¿å­˜å³å¯ï¼å¿½ç•¥å…¶ä»–ç»“å°¾çš„æ–‡ä»¶ä¹Ÿå¯ä»¥è¿™ä¹ˆæ“ä½œçš„ã€‚","categories":[],"tags":[{"name":"idea","slug":"idea","permalink":"https://ydstudios.gitee.io/tags/idea/"},{"name":"å¼€å‘å·¥å…·","slug":"å¼€å‘å·¥å…·","permalink":"https://ydstudios.gitee.io/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"}]},{"title":"è®¾è®¡æ¨¡å¼å­¦ä¹ ä¹‹ç­–ç•¥æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼å­¦ä¹ ä¹‹ç­–ç•¥æ¨¡å¼","date":"2020-10-24T11:58:02.000Z","updated":"2020-12-06T14:04:33.000Z","comments":true,"path":"post/170b3d6a.html","link":"","permalink":"https://ydstudios.gitee.io/post/170b3d6a.html","excerpt":"ç­–ç•¥æ¨¡å¼ï¼ˆStrategy Patternï¼‰æˆ‘è§‰å¾—åœ¨23ä¸­å¸¸è§çš„è®¾è®¡æ¨¡å¼é‡Œé¢æ˜¯ä¸€ç§æ¯”è¾ƒç®€å•çš„ï¼Œä½¿ç”¨åœºæ™¯ä¹Ÿå¾ˆå¤šã€‚åœ¨ç­–ç•¥æ¨¡å¼ä¸­ï¼Œä¸€ä¸ªç±»çš„è¡Œä¸ºæˆ–å…¶ç®—æ³•å¯ä»¥åœ¨è¿è¡Œæ—¶æ›´æ”¹ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºè¡Œä¸ºå‹æ¨¡å¼ã€‚åœ¨ç­–ç•¥æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºè¡¨ç¤ºå„ç§ç­–ç•¥çš„å¯¹è±¡å’Œä¸€ä¸ªè¡Œä¸ºéšç€ç­–ç•¥å¯¹è±¡æ”¹å˜è€Œæ”¹å˜çš„ context å¯¹è±¡,ç­–ç•¥å¯¹è±¡æ”¹å˜ context å¯¹è±¡çš„æ‰§è¡Œç®—æ³•ã€‚","text":"ç­–ç•¥æ¨¡å¼ï¼ˆStrategy Patternï¼‰æˆ‘è§‰å¾—åœ¨23ä¸­å¸¸è§çš„è®¾è®¡æ¨¡å¼é‡Œé¢æ˜¯ä¸€ç§æ¯”è¾ƒç®€å•çš„ï¼Œä½¿ç”¨åœºæ™¯ä¹Ÿå¾ˆå¤šã€‚åœ¨ç­–ç•¥æ¨¡å¼ä¸­ï¼Œä¸€ä¸ªç±»çš„è¡Œä¸ºæˆ–å…¶ç®—æ³•å¯ä»¥åœ¨è¿è¡Œæ—¶æ›´æ”¹ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºè¡Œä¸ºå‹æ¨¡å¼ã€‚åœ¨ç­–ç•¥æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºè¡¨ç¤ºå„ç§ç­–ç•¥çš„å¯¹è±¡å’Œä¸€ä¸ªè¡Œä¸ºéšç€ç­–ç•¥å¯¹è±¡æ”¹å˜è€Œæ”¹å˜çš„ context å¯¹è±¡,ç­–ç•¥å¯¹è±¡æ”¹å˜ context å¯¹è±¡çš„æ‰§è¡Œç®—æ³•ã€‚ ä»‹ç»æ„å›¾:å®šä¹‰ä¸€ç³»åˆ—çš„ç®—æ³•,æŠŠå®ƒä»¬ä¸€ä¸ªä¸ªå°è£…èµ·æ¥, å¹¶ä¸”ä½¿å®ƒä»¬å¯ç›¸äº’æ›¿æ¢ã€‚ ä¸»è¦è§£å†³ï¼šåœ¨æœ‰å¤šç§ç®—æ³•ç›¸ä¼¼çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨ ifâ€¦else æ‰€å¸¦æ¥çš„å¤æ‚å’Œéš¾ä»¥ç»´æŠ¤ã€‚ ä½•æ—¶ä½¿ç”¨ï¼šä¸€ä¸ªç³»ç»Ÿæœ‰è®¸å¤šè®¸å¤šç±»ï¼Œè€ŒåŒºåˆ†å®ƒä»¬çš„åªæ˜¯ä»–ä»¬ç›´æ¥çš„è¡Œä¸ºã€‚ å¦‚ä½•è§£å†³ï¼šå°†è¿™äº›ç®—æ³•å°è£…æˆä¸€ä¸ªä¸€ä¸ªçš„ç±»ï¼Œä»»æ„åœ°æ›¿æ¢ã€‚ å…³é”®ä»£ç ï¼šéœ€è¦å®ç°åŒä¸€ä¸ªæ¥å£ã€‚ åº”ç”¨å®ä¾‹ï¼š è¯¸è‘›äº®çš„é”¦å›Šå¦™è®¡ï¼Œæ¯ä¸€ä¸ªé”¦å›Šå°±æ˜¯ä¸€ä¸ªç­–ç•¥ã€‚ æ—…è¡Œçš„å‡ºæ¸¸æ–¹å¼ï¼Œé€‰æ‹©éª‘è‡ªè¡Œè½¦ã€åæ±½è½¦ï¼Œæ¯ä¸€ç§æ—…è¡Œæ–¹å¼éƒ½æ˜¯ä¸€ä¸ªç­–ç•¥ã€‚ JAVA AWT ä¸­çš„ LayoutManagerã€‚ ä¼˜ç‚¹ï¼š ç®—æ³•å¯ä»¥è‡ªç”±åˆ‡æ¢ã€‚ é¿å…ä½¿ç”¨å¤šé‡æ¡ä»¶åˆ¤æ–­ã€‚ æ‰©å±•æ€§è‰¯å¥½ã€‚ ç¼ºç‚¹ï¼š ç­–ç•¥ç±»ä¼šå¢å¤šã€‚ æ‰€æœ‰ç­–ç•¥ç±»éƒ½éœ€è¦å¯¹å¤–æš´éœ²(è¿™ä¸ªä¹Ÿä¸ä¸€å®š)ã€‚ ä½¿ç”¨åœºæ™¯ï¼š å¦‚æœåœ¨ä¸€ä¸ªç³»ç»Ÿé‡Œé¢æœ‰è®¸å¤šç±»ï¼Œå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ä»…åœ¨äºå®ƒä»¬çš„è¡Œä¸ºï¼Œé‚£ä¹ˆä½¿ç”¨ç­–ç•¥æ¨¡å¼å¯ä»¥åŠ¨æ€åœ°è®©ä¸€ä¸ªå¯¹è±¡åœ¨è®¸å¤šè¡Œä¸ºä¸­é€‰æ‹©ä¸€ç§è¡Œä¸ºã€‚ ä¸€ä¸ªç³»ç»Ÿéœ€è¦åŠ¨æ€åœ°åœ¨å‡ ç§ç®—æ³•ä¸­é€‰æ‹©ä¸€ç§ã€‚ å¦‚æœä¸€ä¸ªå¯¹è±¡æœ‰å¾ˆå¤šçš„è¡Œä¸ºï¼Œå¦‚æœä¸ç”¨æ°å½“çš„æ¨¡å¼ï¼Œè¿™äº›è¡Œä¸ºå°±åªå¥½ä½¿ç”¨å¤šé‡çš„æ¡ä»¶é€‰æ‹©è¯­å¥æ¥å®ç°ã€‚ æ³¨æ„ï¼š å¦‚æœä¸€ä¸ªç³»ç»Ÿçš„ç­–ç•¥å¤šäºå››ä¸ªï¼Œå°±éœ€è¦è€ƒè™‘ä½¿ç”¨æ··åˆæ¨¡å¼ï¼Œè§£å†³ç­–ç•¥ç±»è†¨èƒ€çš„é—®é¢˜ã€‚ ä¸šåŠ¡åœºæ™¯ä»¥æŠ½å¥–æ´»åŠ¨å‘å¥–ä¸ºä¾‹ï¼Œå¥–å“å¤šç§å¤šæ ·ï¼Œå¯èƒ½æ˜¯ç°é‡‘å¥–ï¼Œè¯è´¹å¥–å“ï¼Œå®ç‰©å¥–ç­‰ç­‰ï¼Œæ¯ç§å¥–å“çš„å‘æ”¾æ–¹å¼éƒ½ä¸ä¸€æ ·ï¼Œæ¯”å¦‚ç°é‡‘æ˜¯ç›´æ¥è½¬è´¦ï¼Œè¯è´¹å¥–å“æ˜¯è°ƒç”¨è¿è¥å•†æä¾›æ¥å£å‘æ”¾ï¼Œå®ç‰©å¥–éœ€è¦äººå·¥å¿«é€’å¯„é€ã€‚åœ¨æœªé‡‡ç”¨ç­–ç•¥æ¨¡å¼ä¹‹å‰ï¼Œå°‘ä¸äº†ä½¿ç”¨ ifâ€¦elseâ€¦æ¥åˆ¤æ–­å‘æ”¾ï¼Œå½“å¢åŠ ä¸€ç§å¥–å“ç±»å‹æ—¶ï¼Œå°±éœ€è¦å¢åŠ  if åˆ¤æ–­ã€‚è€Œé‡‡å–ç­–ç•¥æ¨¡å¼ä¹‹åï¼Œåªéœ€å®ç°ä¸€ä¸ªç­–ç•¥ç±»å³å¯ï¼Œå¯¹åŸæ¥çš„é€»è¾‘æ— éœ€åšä»»ä½•æ”¹åŠ¨ï¼Œä¹Ÿä¸ä¼šå½±å“å…¶ä»–ç­–ç•¥çš„æ­£å¸¸é€»è¾‘ã€‚ UMLå›¾ ä»£ç å®ç°å®¢æˆ·ç«¯éœ€è¦åˆ¤æ–­è¦ä½¿ç”¨å“ªä¸€ä¸ªå…·ä½“çš„ç­–ç•¥ç±»ï¼Œè‹¥è¿˜æ˜¯æŒ‰ç…§ä¼ ç»Ÿçš„æ–¹æ³• ifâ€¦elseâ€¦æ¥åˆ¤æ–­ç­–ç•¥æ¨¡å¼å°±æ²¡æœ‰æ„ä¹‰äº†ï¼Œå› æ­¤ç­–ç•¥æ¨¡å¼ä¸€èˆ¬éƒ½æ˜¯ç»“åˆå…¶ä»–æ¨¡å¼å…±åŒä½¿ç”¨ã€‚æœ¬æ–‡ä¸­ç­–ç•¥ç±»ä½¿ç”¨ Byte æ¥æ ‡è¯†ï¼Œä¹Ÿå¯ä»¥åœ¨ç­–ç•¥ç±»ä¸­å¢åŠ æŠ½è±¡æ–¹æ³•ï¼Œè¿”å›å€¼ä¸ºæšä¸¾ç±»å‹ã€‚ å®šä¹‰ç­–ç•¥æ¥å£ 12345678910111213141516171819202122package com.ydstudio.flashsale.service;/** * ç­–ç•¥æ¥å£ * * @author åˆ˜æ´‹ Sam * @date 2020/10/24 * @since 1.0.0 */public interface RewardSendStrategy &#123; /** * å‘æ”¾å¥–åŠ±çš„ç±»å‹,é€šè¿‡è¿™ä¸ªæ–¹æ³•æ¥æ ‡ç¤ºä¸åŒçš„ç­–ç•¥ * @return */ Byte type(); /** * æ–¹æ³•å¥–åŠ±çš„æ–¹æ³• */ void sendReward();&#125; å‘é€ç°é‡‘å¥–åŠ±ç­–ç•¥å®ç°ç±» 12345678910111213141516171819202122232425262728package com.ydstudio.flashsale.service.impl;import com.ydstudio.flashsale.common.enums.RewardTypeEnum;import com.ydstudio.flashsale.service.RewardSendStrategy;import lombok.extern.slf4j.Slf4j;import org.springframework.stereotype.Service;/** * å‘é€ç°é‡‘å¥–å“ç­–ç•¥ * * @author åˆ˜æ´‹ Sam * @date 2020/10/24 * @since 1.0.0 */@Slf4j@Servicepublic class CashRewardSendStrategy implements RewardSendStrategy &#123; @Override public Byte type() &#123; return RewardTypeEnum.CASH.getCode(); &#125; @Override public void sendReward() &#123; System.out.println(\"å‘æ”¾ç°é‡‘å¥–å“\"); &#125;&#125; å‘æ”¾ç§¯åˆ†å¥–å“ç­–ç•¥å®ç°ç±» 12345678910111213141516171819202122232425262728package com.ydstudio.flashsale.service.impl;import com.ydstudio.flashsale.common.enums.RewardTypeEnum;import com.ydstudio.flashsale.service.RewardSendStrategy;import lombok.extern.slf4j.Slf4j;import org.springframework.stereotype.Service;/** * å‘æ”¾ç§¯åˆ†å¥–å“ç­–ç•¥ * * @author åˆ˜æ´‹ Sam * @date 2020/10/24 * @since 1.0.0 */@Slf4j@Servicepublic class PointRewardSendStrategy implements RewardSendStrategy &#123; @Override public Byte type() &#123; return RewardTypeEnum.POINT.getCode(); &#125; @Override public void sendReward() &#123; System.out.println(\"å‘æ”¾ç§¯åˆ†å¥–å“\"); &#125;&#125; å‘æ”¾ä¼˜æƒ åˆ¸å¥–å“ç­–ç•¥å®ç°ç±» 12345678910111213141516171819202122232425262728 package com.ydstudio.flashsale.service.impl;import com.ydstudio.flashsale.common.enums.RewardTypeEnum;import com.ydstudio.flashsale.service.RewardSendStrategy;import lombok.extern.slf4j.Slf4j;import org.springframework.stereotype.Service; /** * å‘é€ä¼˜æƒ åˆ¸ç­–ç•¥ * * @author åˆ˜æ´‹ Sam * @date 2020/10/24 * @since 1.0.0 */@Slf4j@Servicepublic class CouponRewardSendStrategy implements RewardSendStrategy &#123; @Override public Byte type() &#123; return RewardTypeEnum.COUPON.getCode(); &#125; @Override public void sendReward() &#123; System.out.println(\"å‘æ”¾ä¼˜æƒ åˆ¸å¥–å“\"); &#125;&#125; å‘æ”¾è°¢è°¢å‚ä¸ç­–ç•¥å®ç°ç±» 12345678910111213141516171819202122232425262728package com.ydstudio.flashsale.service.impl;import com.ydstudio.flashsale.common.enums.RewardTypeEnum;import com.ydstudio.flashsale.service.RewardSendStrategy;import lombok.extern.slf4j.Slf4j;import org.springframework.stereotype.Service;/** * è°¢è°¢å‚ä¸å¥–å“å‘æ”¾ç­–ç•¥ * * @author åˆ˜æ´‹ Sam * @date 2020/10/24 * @since 1.0.0 */@Slf4j@Servicepublic class ThankYouRewardSendStrategy implements RewardSendStrategy &#123; @Override public Byte type() &#123; return RewardTypeEnum.THANK_YOU.getCode(); &#125; @Override public void sendReward() &#123; System.out.println(\"è°¢è°¢å‚ä¸\"); &#125;&#125; å®ç°å¯¹æŠ½è±¡ç­–ç•¥å°è£…çš„ä¸Šä¸‹æ–‡å¯¹è±¡ é€šå¸¸ JavaWeb å¼€å‘ä½¿ç”¨ Spring æ¡†æ¶çš„æ¯”è¾ƒå¤šï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬ç”¨Spring æä¾›çš„@Autowiredæ³¨è§£çš„ä¸€ä¸ªå°æŠ€å·§ï¼Œæ¥æ›´æ–¹ä¾¿çš„å®ç°å°è£…ã€‚ä¸ç”¨å†ä½¿ç”¨ java RewardSendStrategyContext å»å®ç° java org.springframework.context.ApplicationContextAware æˆ–è€…æ¯ä¸ªç­–ç•¥ç±»å†å®ç° java org.springframework.beans.factoryæ¥å£ç„¶åå°†ç­–ç•¥ç±»æ·»åŠ åˆ° RewardSendStrategyContext ä¸­çš„ å±æ€§ä¸­ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445package com.ydstudio.flashsale.service;import org.springframework.beans.BeansException;import org.springframework.context.ApplicationContext;import org.springframework.context.ApplicationContextAware;import org.springframework.stereotype.Component;import java.util.Map;import java.util.concurrent.ConcurrentHashMap;/** * * @author åˆ˜æ´‹ Sam * @date 2020/10/25 * @since 1.0.0 */@Componentpublic class RewardSendStrategyContext implements ApplicationContextAware &#123; private final static Map&lt;Byte, RewardSendStrategy&gt; strategyMap = new ConcurrentHashMap&lt;&gt;(); @Override public void setApplicationContext(ApplicationContext applicationContext) throws BeansException &#123; Map&lt;String, RewardSendStrategy&gt; beans = applicationContext.getBeansOfType(RewardSendStrategy.class); beans.values().forEach(bean -&gt; strategyMap.put(bean.type(), bean)); &#125; /** * é€šè¿‡ type è·å–å¥–åŠ±å®ç° * * @param type * @return */ public static RewardSendStrategy getRewardSendStrategy(Byte type) &#123; RewardSendStrategy sendStrategy = strategyMap.get(type); if (sendStrategy == null) &#123; throw new UnsupportedOperationException(\"æ²¡æœ‰æ­¤ç§å¥–åŠ±çš„å‘æ”¾å®ç°\"); &#125; return sendStrategy; &#125;&#125; @Autowried å°æŠ€å·§ï¼Œçœ‹ä¸‹è¿™ä¸ªæ³¨è§£çš„ä¸Šçš„æ³¨é‡Šï¼Œæˆ‘ä¸‹é¢æ¥é€šè¿‡ä¸¾ä¾‹å­è¯´æ˜ï¼š 12345678910111213141516171819/* * &lt;p&gt;In case of a &#123;@link java.util.Collection&#125; or &#123;@link java.util.Map&#125; * dependency type, the container will autowire all beans matching the * declared value type. In case of a Map, the keys must be declared as * type String and will be resolved to the corresponding bean names. * */@Target(&#123;ElementType.CONSTRUCTOR, ElementType.FIELD, ElementType.METHOD, ElementType.ANNOTATION_TYPE&#125;)@Retention(RetentionPolicy.RUNTIME)@Documentedpublic @interface Autowired &#123; /** * Declares whether the annotated dependency is required. * &lt;p&gt;Defaults to &#123;@code true&#125;. */ boolean required() default true;&#125; ä¸¾ä¾‹è¯´æ˜ï¼š 1234567# è¿™æ ·å®šä¹‰å±æ€§çš„æ—¶å€™ï¼ŒSpring ä¼šè‡ªåŠ¨çš„å°†è¿™ä¸ªæ¥å£çš„å®ç°ç±»beanå…¨éƒ½è‡ªåŠ¨æ·»åŠ åˆ°è¿™ä¸ª rewardSendStrategyList ä¸­@Autowiredprivate List&lt;RewardSendStrategy&gt; rewardSendStrategyList;# è¿™æ ·å®šä¹‰å±æ€§çš„æ—¶å€™ï¼ŒSpring ä¼šè‡ªåŠ¨çš„ä»¥å®ç°ç±» beanName ä½œä¸º keyï¼Œbean ä½œä¸º value æ·»åŠ åˆ°è¿™ä¸ª Map ä¸­@Autowiredprivate Map&lt;String, RewardSendStrategy&gt; strategyMap; æ‰€ä»¥ç­–ç•¥ç±»ä¸Šä¸‹æ–‡å¯¹è±¡åº”è¯¥è¿™æ ·å»ç¼–ç å®ç°ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647package com.ydstudio.flashsale.service;import lombok.extern.slf4j.Slf4j;import org.apache.commons.collections.CollectionUtils;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import java.util.List;import java.util.concurrent.ConcurrentMap;import java.util.stream.Collectors;/** * å‘é€å¥–åŠ±çš„ Context ç±» * * @author åˆ˜æ´‹ Sam * @date 2020/10/25 * @since 1.0.0 */@Slf4j@Servicepublic class RewardSendStrategyContext &#123; @Autowired private List&lt;RewardSendStrategy&gt; rewardSendStrategyList; /** * é€šè¿‡ type è·å–å¥–åŠ±å®ç° * * @param type * @return */ public RewardSendStrategy getRewardSendStrategy(Byte type) &#123; if (CollectionUtils.isEmpty(rewardSendStrategyList)) &#123; throw new RuntimeException(\"RewardSendStrategy æ³¨å…¥å¤±è´¥\"); &#125; ConcurrentMap&lt;Byte, RewardSendStrategy&gt; strategyMap = rewardSendStrategyList.stream() .collect(Collectors.toConcurrentMap(RewardSendStrategy::type, RewardSendStrategy -&gt; RewardSendStrategy)); RewardSendStrategy sendStrategy = strategyMap.get(type); if (sendStrategy == null) &#123; throw new UnsupportedOperationException(\"æ²¡æœ‰æ­¤ç§å¥–åŠ±çš„å‘æ”¾å®ç°\"); &#125; return sendStrategy; &#125;&#125; è¿™æ ·å†™æ˜¯ä¸æ˜¯å¾ˆä¼˜é›…ï¼ï¼ï¼é‚£è°ƒç”¨æ–¹å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿå¾ˆç®€å•çš„ç›´æ¥æ³¨å…¥å°±èƒ½ä½¿ç”¨äº†ï¼Œå“ˆå“ˆ 12345678910@Autowiredprivate RewardSendStrategyContext strategyContext;public void test()&#123; Byte aByte = new Byte(\"1\"); RewardSendStrategy rewardSendStrategy = strategyContext.getRewardSendStrategy(aByte); log.info(\"å¥–åŠ±å‘æ”¾å®ç° &#123;&#125;\",sendStrategy);&#125; æ€»ç»“åˆ°æ­¤ç­–ç•¥æ¨¡å¼çš„æ¦‚å¿µã€ç»“æ„å’Œä»£ç å®ç°éƒ½è¯´å®Œäº†ï¼Œæ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼å¤§å®¶åœ¨æ’¸ç çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœé‡åˆ°ç±»ä¼¼çš„åœºæ™¯å¯ä»¥ä½¿ç”¨ç­–ç•¥æ¨¡å¼çš„æ—¶å€™ï¼Œä¸€å®šè¦å°è¯•å»ä½¿ç”¨ç­–ç•¥æ¨¡å¼å»ä¼˜åŒ–è‡ªå·±ä»£ç ï¼Œè¿™æ ·æ—¢é”»ç‚¼äº†è‡ªå·±ï¼Œä¹Ÿå†™å‡ºäº†ç‰›é€¼çš„ä»£ç ä½•ä¹è€Œä¸ä¸ºå‘¢ï¼Ÿéš¾é“ä½ ä¸€ç›´æƒ³å½“ CURD boy ä¹ˆï¼Ÿï¼Ÿï¼Ÿï¼Ÿ","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://ydstudios.gitee.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"ç­–ç•¥æ¨¡å¼","slug":"ç­–ç•¥æ¨¡å¼","permalink":"https://ydstudios.gitee.io/tags/%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/"}]},{"title":"Windowsä¸‹æ­å»ºRocketMQåŒä¸»åŒä»é›†ç¾¤","slug":"Windowsä¸‹æ­å»ºRocketMQåŒä¸»åŒä»é›†ç¾¤","date":"2020-10-02T11:06:35.000Z","updated":"2020-10-10T14:35:40.000Z","comments":true,"path":"post/459042a5.html","link":"","permalink":"https://ydstudios.gitee.io/post/459042a5.html","excerpt":"RocketMQæ˜¯é˜¿é‡Œå·´å·´2016å¹´MQä¸­é—´ä»¶ï¼Œä½¿ç”¨Javaè¯­è¨€å¼€å‘ï¼Œåœ¨é˜¿é‡Œå†…éƒ¨ï¼ŒRocketMQæ‰¿æ¥äº†ä¾‹å¦‚â€œåŒ11â€ç­‰é«˜å¹¶å‘åœºæ™¯çš„æ¶ˆæ¯æµè½¬ï¼Œèƒ½å¤Ÿå¤„ç†ä¸‡äº¿çº§åˆ«çš„æ¶ˆæ¯ã€‚æˆ‘ä»¬ä»Šå¤©å°±åœ¨ windowsä¸‹æ­å»ºRocketMQå¤šMasterå¤šSlaveæ¨¡å¼ï¼ˆåŒæ­¥ï¼‰çš„é›†ç¾¤ã€‚","text":"RocketMQæ˜¯é˜¿é‡Œå·´å·´2016å¹´MQä¸­é—´ä»¶ï¼Œä½¿ç”¨Javaè¯­è¨€å¼€å‘ï¼Œåœ¨é˜¿é‡Œå†…éƒ¨ï¼ŒRocketMQæ‰¿æ¥äº†ä¾‹å¦‚â€œåŒ11â€ç­‰é«˜å¹¶å‘åœºæ™¯çš„æ¶ˆæ¯æµè½¬ï¼Œèƒ½å¤Ÿå¤„ç†ä¸‡äº¿çº§åˆ«çš„æ¶ˆæ¯ã€‚æˆ‘ä»¬ä»Šå¤©å°±åœ¨ windowsä¸‹æ­å»ºRocketMQå¤šMasterå¤šSlaveæ¨¡å¼ï¼ˆåŒæ­¥ï¼‰çš„é›†ç¾¤ã€‚ 1 å‡†å¤‡å·¥ä½œ1.1 ä¸‹è½½RocketMQRocketMQç‰ˆæœ¬ï¼š4.7.1 ä¸‹è½½åœ°å€ 1.2 ç¯å¢ƒè¦æ±‚ Linux64ä½ç³»ç»Ÿ JDK1.8(64ä½) æºç å®‰è£…éœ€è¦å®‰è£…Maven 3.2.x 2 å®‰è£…RocketMQ2.1 å®‰è£…æ­¥éª¤æœ¬æ•™ç¨‹ä»¥äºŒè¿›åˆ¶åŒ…æ–¹å¼å®‰è£… è§£å‹å®‰è£…åŒ… è¿›å…¥å®‰è£…ç›®å½• 2.2 ç›®å½•ä»‹ç» binï¼šå¯åŠ¨è„šæœ¬ï¼ŒåŒ…æ‹¬shellè„šæœ¬å’ŒCMDè„šæœ¬ confï¼šå®ä¾‹é…ç½®æ–‡ä»¶ ï¼ŒåŒ…æ‹¬brokeré…ç½®æ–‡ä»¶ã€logbacké…ç½®æ–‡ä»¶ç­‰ libï¼šä¾èµ–jaråŒ…ï¼ŒåŒ…æ‹¬Nettyã€commons-langã€FastJSONç­‰ 3 é…ç½®mqnamesrvåŒä¸»åœ¨RocketMQ çš„é…ç½®æ–‡ä»¶å¤¹çš„ç›®å½•ä¸‹ï¼Œåˆ†åˆ«åˆ›å»ºæ–‡ä»¶namesrv-a.propertiesã€namesrv-b.properties å†…å®¹åˆ†åˆ«æ˜¯ 123listenPort=9876listenPort=9870 å³è¡¨ç¤ºnamesrv-aç›‘å¬ç«¯å£æ˜¯9876ï¼Œnamesrv-bç›‘å¬ç«¯å£æ˜¯9870. 3.1 å¯åŠ¨åŒä¸»namesrv1234start mqnamesrv.cmd -c D:/ProgramFiles/rocketmq-all-4.7.1/conf/namesrv/namesrv-a.propertiesstart mqnamesrv.cmd -c D:/ProgramFiles/rocketmq-all-4.7.1/conf/namesrv/namesrv-b.properties å¯åŠ¨æˆåŠŸä¼šåœ¨ç»ˆç«¯æ‰“å° 1The Name Server boot success serializeType=JSON 4 é…ç½®brokeråŒä¸»åŒä»æ­¤æ¬¡æˆ‘ä»¬é‡‡ç”¨å¤šMasterå¤šSlaveæ¨¡å¼ï¼ˆåŒæ­¥ï¼‰çš„æ–¹å¼ï¼Œæ¯ä¸ªMasteré…ç½®ä¸€ä¸ªSlaveï¼Œæœ‰å¤šå¯¹Master-Slaveï¼ŒHAé‡‡ç”¨åŒæ­¥åŒå†™æ–¹å¼ï¼Œå³åªæœ‰ä¸»å¤‡éƒ½å†™æˆåŠŸï¼Œæ‰å‘åº”ç”¨è¿”å›æˆåŠŸï¼Œè¿™ç§æ¨¡å¼çš„ä¼˜ç¼ºç‚¹å¦‚ä¸‹ï¼š ä¼˜ç‚¹ï¼šæ•°æ®ä¸æœåŠ¡éƒ½æ— å•ç‚¹æ•…éšœï¼ŒMasterå®•æœºæƒ…å†µä¸‹ï¼Œæ¶ˆæ¯æ— å»¶è¿Ÿï¼ŒæœåŠ¡å¯ç”¨æ€§ä¸æ•°æ®å¯ç”¨æ€§éƒ½éå¸¸é«˜ï¼› ç¼ºç‚¹ï¼šæ€§èƒ½æ¯”å¼‚æ­¥å¤åˆ¶æ¨¡å¼ç•¥ä½ï¼ˆå¤§çº¦ä½10%å·¦å³ï¼‰ï¼Œå‘é€å•ä¸ªæ¶ˆæ¯çš„RTä¼šç•¥é«˜ï¼Œä¸”ç›®å‰ç‰ˆæœ¬åœ¨ä¸»èŠ‚ç‚¹å®•æœºåï¼Œå¤‡æœºä¸èƒ½è‡ªåŠ¨åˆ‡æ¢ä¸ºä¸»æœºã€‚ namesrvAddr æˆ‘ä»¬å°±ä¸ç›´æ¥å†™åˆ°é…ç½®æ–‡ä»¶é‡Œï¼Œæˆ‘ä»¬é‡‡ç”¨åœ¨å‘½ä»¤è¡Œçš„å½¢å¼æ¥æŒ‡å®š namesrvAddr 4.1 broker-a çš„é…ç½®123456789101112131415161718192021222324252627282930313233343536# broker-a çš„é…ç½®brokerClusterName=DefaultCluster# brokeråå­—ï¼Œæ³¨æ„æ­¤å¤„ä¸åŒçš„é…ç½®æ–‡ä»¶å¡«å†™çš„ä¸ä¸€æ ·brokerName=broker-abrokerId=0#nameServeråœ°å€ï¼Œåˆ†å·åˆ†å‰²#namesrvAddr=127.0.0.1:9876;127.0.0.1:9870#åœ¨å‘é€æ¶ˆæ¯æ—¶ï¼Œè‡ªåŠ¨åˆ›å»ºæœåŠ¡å™¨ä¸å­˜åœ¨çš„topicï¼Œé»˜è®¤åˆ›å»ºçš„é˜Ÿåˆ—æ•°defaultTopicQueueNums=4#æ˜¯å¦å…è®¸ Broker è‡ªåŠ¨åˆ›å»ºTopicï¼Œå»ºè®®çº¿ä¸‹å¼€å¯ï¼Œçº¿ä¸Šå…³é—­autoCreateTopicEnable=true#æ˜¯å¦å…è®¸ Broker è‡ªåŠ¨åˆ›å»ºè®¢é˜…ç»„ï¼Œå»ºè®®çº¿ä¸‹å¼€å¯ï¼Œçº¿ä¸Šå…³é—­autoCreateSubscriptionGroup=true#Broker å¯¹å¤–æœåŠ¡çš„ç›‘å¬ç«¯å£,listenPort=10911brokerIP1=127.0.0.1brokerIP2=127.0.0.1deleteWhen=04fileReservedTime=48brokerRole=SYNC_MASTERflushDiskType=ASYNC_FLUSHwaitTimeMillsInSendQueue=500#å­˜å‚¨è·¯å¾„storePathRootDir=D:/ProgramFiles/rocketmq-all-4.7.1/store-broker-a/broker-a#commitLog å­˜å‚¨è·¯å¾„storePathCommitLog=D:/ProgramFiles/rocketmq-all-4.7.1/store-broker-a/broker-a/commitlog#æ¶ˆè´¹é˜Ÿåˆ—å­˜å‚¨è·¯å¾„å­˜å‚¨è·¯å¾„storePathConsumeQueue=D:/ProgramFiles/rocketmq-all-4.7.1/store-broker-a/broker-a/consumequeue#æ¶ˆæ¯ç´¢å¼•å­˜å‚¨è·¯å¾„storePathIndex=D:/ProgramFiles/rocketmq-all-4.7.1/store-broker-a/broker-a/index#checkpoint æ–‡ä»¶å­˜å‚¨è·¯å¾„storeCheckpoint=D:/ProgramFiles/rocketmq-all-4.7.1/store-broker-a/broker-a/checkpoint#abort æ–‡ä»¶å­˜å‚¨è·¯å¾„abortFile=D:/ProgramFiles/rocketmq-all-4.7.1/store-broker-a/broker-a/abort 4.2 broker-a-s çš„é…ç½®1234567891011121314151617181920212223242526# broker-a-s çš„é…ç½®brokerClusterName=DefaultClusterbrokerName=broker-abrokerId=1listenPort=10931#nameServeråœ°å€ï¼Œåˆ†å·åˆ†å‰²#namesrvAddr=127.0.0.1:9876;127.0.0.1:9870brokerIP1=127.0.0.1brokerIP2=127.0.0.1deleteWhen=04fileReservedTime=48brokerRole=SLAVEflushDiskType=ASYNC_FLUSH#å­˜å‚¨è·¯å¾„storePathRootDir=D:/ProgramFiles/rocketmq-all-4.7.1/store-broker-a-s/broker-a-s#commitLog å­˜å‚¨è·¯å¾„storePathCommitLog=D:/ProgramFiles/rocketmq-all-4.7.1/store-broker-a-s/broker-a-s/commitlog#æ¶ˆè´¹é˜Ÿåˆ—å­˜å‚¨è·¯å¾„å­˜å‚¨è·¯å¾„storePathConsumeQueue=D:/ProgramFiles/rocketmq-all-4.7.1/store-broker-a-s/broker-a-s/consumequeue#æ¶ˆæ¯ç´¢å¼•å­˜å‚¨è·¯å¾„storePathIndex=D:/ProgramFiles/rocketmq-all-4.7.1/store-broker-a-s/broker-a-s/index#checkpoint æ–‡ä»¶å­˜å‚¨è·¯å¾„storeCheckpoint=D:/ProgramFiles/rocketmq-all-4.7.1/store-broker-a-s/broker-a-s/checkpoint#abort æ–‡ä»¶å­˜å‚¨è·¯å¾„abortFile=D:/ProgramFiles/rocketmq-all-4.7.1/store-broker-a-s/broker-a-s/abort 4.3 broker-b çš„é…ç½®1234567891011121314151617181920212223242526272829303132333435# broker-b çš„é…ç½®brokerClusterName=DefaultClusterbrokerName=broker-bbrokerId=0#nameServeråœ°å€ï¼Œåˆ†å·åˆ†å‰²#namesrvAddr=127.0.0.1:9876;127.0.0.1:9870#åœ¨å‘é€æ¶ˆæ¯æ—¶ï¼Œè‡ªåŠ¨åˆ›å»ºæœåŠ¡å™¨ä¸å­˜åœ¨çš„topicï¼Œé»˜è®¤åˆ›å»ºçš„é˜Ÿåˆ—æ•°defaultTopicQueueNums=4#æ˜¯å¦å…è®¸ Broker è‡ªåŠ¨åˆ›å»ºTopicï¼Œå»ºè®®çº¿ä¸‹å¼€å¯ï¼Œçº¿ä¸Šå…³é—­autoCreateTopicEnable=true#æ˜¯å¦å…è®¸ Broker è‡ªåŠ¨åˆ›å»ºè®¢é˜…ç»„ï¼Œå»ºè®®çº¿ä¸‹å¼€å¯ï¼Œçº¿ä¸Šå…³é—­autoCreateSubscriptionGroup=true#Broker å¯¹å¤–æœåŠ¡çš„ç›‘å¬ç«¯å£,listenPort=10951brokerIP1=127.0.0.1brokerIP2=127.0.0.1deleteWhen=04fileReservedTime=48brokerRole=SYNC_MASTERflushDiskType=ASYNC_FLUSHwaitTimeMillsInSendQueue=500#å­˜å‚¨è·¯å¾„storePathRootDir=D:/ProgramFiles/rocketmq-all-4.7.1/store-broker-b/broker-b#commitLog å­˜å‚¨è·¯å¾„storePathCommitLog=D:/ProgramFiles/rocketmq-all-4.7.1/store-broker-b/broker-b/commitlog#æ¶ˆè´¹é˜Ÿåˆ—å­˜å‚¨è·¯å¾„å­˜å‚¨è·¯å¾„storePathConsumeQueue=D:/ProgramFiles/rocketmq-all-4.7.1/store-broker-b/broker-b/consumequeue#æ¶ˆæ¯ç´¢å¼•å­˜å‚¨è·¯å¾„storePathIndex=D:/ProgramFiles/rocketmq-all-4.7.1/store-broker-b/broker-b/index#checkpoint æ–‡ä»¶å­˜å‚¨è·¯å¾„storeCheckpoint=D:/ProgramFiles/rocketmq-all-4.7.1/store-broker-b/broker-b/checkpoint#abort æ–‡ä»¶å­˜å‚¨è·¯å¾„abortFile=D:/ProgramFiles/rocketmq-all-4.7.1/store-broker-b/broker-b/abort 4.4 broker-b-s çš„é…ç½®1234567891011121314151617181920212223242526272829# broker-b-s çš„é…ç½®brokerClusterName=DefaultClusterbrokerName=broker-bbrokerId=1listenPort=10971#nameServeråœ°å€ï¼Œåˆ†å·åˆ†å‰²#namesrvAddr=127.0.0.1:9876;127.0.0.1:9870# å¯ä»¥ä¸é…ç½®brokerIP1=127.0.0.1brokerIP2=127.0.0.1deleteWhen=04fileReservedTime=48brokerRole=SLAVEflushDiskType=ASYNC_FLUSH#å­˜å‚¨è·¯å¾„storePathRootDir=D:/ProgramFiles/rocketmq-all-4.7.1/store-broker-b-s/broker-b-s#commitLog å­˜å‚¨è·¯å¾„storePathCommitLog=D:/ProgramFiles/rocketmq-all-4.7.1/store-broker-b-s/broker-b-s/commitlog#æ¶ˆè´¹é˜Ÿåˆ—å­˜å‚¨è·¯å¾„å­˜å‚¨è·¯å¾„storePathConsumeQueue=D:/ProgramFiles/rocketmq-all-4.7.1/store-broker-b-s/broker-b-s/consumequeue#æ¶ˆæ¯ç´¢å¼•å­˜å‚¨è·¯å¾„storePathIndex=D:/ProgramFiles/rocketmq-all-4.7.1/store-broker-b-s/broker-b-s/index#checkpoint æ–‡ä»¶å­˜å‚¨è·¯å¾„storeCheckpoint=D:/ProgramFiles/rocketmq-all-4.7.1/store-broker-b-s/broker-b-s/checkpoint#abort æ–‡ä»¶å­˜å‚¨è·¯å¾„abortFile=D:/ProgramFiles/rocketmq-all-4.7.1/store-broker-b-s/broker-b-s/abort 4.5 å¯åŠ¨åŒä¸»åŒä»boker1234567start mqbroker.cmd -c D:/ProgramFiles/rocketmq-all-4.7.1/conf/2m-2s-sync/broker-a.properties -n \"127.0.0.1:9876;127.0.0.1:9870\"start mqbroker.cmd -c D:/ProgramFiles/rocketmq-all-4.7.1/conf/2m-2s-sync/broker-a-s.properties -n \"127.0.0.1:9876;127.0.0.1:9870\"start mqbroker.cmd -c D:/ProgramFiles/rocketmq-all-4.7.1/conf/2m-2s-sync/broker-b.properties -n \"127.0.0.1:9876;127.0.0.1:9870\"start mqbroker.cmd -c D:/ProgramFiles/rocketmq-all-4.7.1/conf/2m-2s-sync/broker-b-s.properties -n \"127.0.0.1:9876;127.0.0.1:9870\" 5 é…ç½®rocketmq-consoleRocketMQæœ‰ä¸€ä¸ªå¯¹å…¶æ‰©å±•çš„å¼€æºé¡¹ç›®incubator-rocketmq-externalsï¼Œè¿™ä¸ªé¡¹ç›®ä¸­æœ‰ä¸€ä¸ªå­æ¨¡å—å«rocketmq-consoleï¼Œè¿™ä¸ªä¾¿æ˜¯ç®¡ç†æ§åˆ¶å°é¡¹ç›®äº†ï¼Œå…ˆå°†incubator-rocketmq-externalsæ‹‰åˆ°æœ¬åœ°ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦è‡ªå·±å¯¹rocketmq-consoleè¿›è¡Œç¼–è¯‘æ‰“åŒ…è¿è¡Œã€‚ 5.1 ä¸‹è½½å¹¶ç¼–è¯‘æ‰“åŒ…123git clone https://github.com/apache/rocketmq-externalscd rocketmq-consolemvn clean package -Dmaven.test.skip=true æ³¨æ„ï¼šæ‰“åŒ…å‰åœ¨rocketmq-consoleä¸­é…ç½®namesrvé›†ç¾¤åœ°å€ï¼š 12server.port=80rocketmq.config.namesrvAddr=127.0.0.1:9876;192.168.25.138:9870 å¯åŠ¨rocketmq-consoleï¼š 1java -jar rocketmq-console-ng-2.0.0.jar æ³¨æ„ ä½ æ‰§è¡Œä¸Šè¿°å‘½ä»¤ä¹‹åå¯èƒ½å¾—åˆ°çš„ jar åŒ…çš„åå­—å’Œæˆ‘çš„ä¸ä¸€æ ·ï¼Œæ¯•ç«Ÿäººå®¶ä¹Ÿæ˜¯ä¸€ç›´åœ¨æ›´æ–°ç‰ˆæœ¬ï¼Œæ³¨æ„çœ‹è‡ªå·±å¯¹åº”ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œé€‚å½“æ›¿æ¢å°±è¡Œã€‚ å¯åŠ¨æˆåŠŸåï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—®http://localhost:80è¿›å…¥é›†ç¾¤ç•Œé¢äº†å¦‚ä¸‹å›¾ï¼š 6 åœ¨æ­å»ºè¿‡ç¨‹ä¸­å‡ºç°çš„é—®é¢˜6.1 Lock failed,MQ already started12345java.lang.RuntimeException: Lock failed,MQ already started at org.apache.rocketmq.store.DefaultMessageStore.start(DefaultMessageStore.java:227) at org.apache.rocketmq.broker.BrokerController.start(BrokerController.java:853) at org.apache.rocketmq.broker.BrokerStartup.start(BrokerStartup.java:64) at org.apache.rocketmq.broker.BrokerStartup.main(BrokerStartup.java:58) å‡ºç°è¿™ä¸ªé—®é¢˜ æ˜¯å› ä¸ºæˆ‘ä»¬åœ¨é›†ç¾¤ä¸­masterå’Œslaveå…±ç”¨ä¸€ä¸ªstorePathé€ æˆçš„ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬è¦å¯åŠ¨çš„æ¯ä¸€ä¸ªbrokerè¦æŒ‡å®šä¸ä¸€æ ·çš„storePath è·¯å¾„å°±è¡Œï¼Œä¹Ÿå°±æ˜¯åœ¨æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹å³å¯ï¼Œå®Œç¾è§£å†³ã€‚ 6.2 é›†ç¾¤çŠ¶æ€ SLAVE_NOT_AVAILABLEä¸»ä»çš„brokerName ä¸€å®šè¦è®¾ç½®æˆä¸€æ ·çš„ï¼Œä¸»brokerName=broker-a é‚£ä¹ˆä»çš„brokerName=broker-aï¼Œä¸ç„¶å‘é€æ¶ˆæ¯ä¼šå‡ºç° SLAVE_NOT_AVAILABLE 1234567891011# brokeråå­—ï¼Œæ³¨æ„æ­¤å¤„ä¸åŒçš„é…ç½®æ–‡ä»¶å¡«å†™çš„ä¸ä¸€æ ·# broker-a çš„é…ç½®brokerClusterName=DefaultClusterbrokerName=broker-a# broker-a-s çš„é…ç½®brokerClusterName=DefaultClusterbrokerName=broker-a 6.3 æ¶ˆæ¯å‘é€å‡ºç° [TIMEOUT_CLEAN_QUEUE]broker busy 1org.apache.rocketmq.client.exception.MQBrokerException: CODE: 2 DESC: [TIMEOUT_CLEAN_QUEUE]broker busy, start flow control for a while, period in queue: 205ms, size of queue: 2 è§£å†³æ–¹å¼å°±æ˜¯åˆç†è®¾ç½®waitTimeMillsInSendQueueçš„å€¼ 12# æ¸…é™¤å‘é€çº¿ç¨‹æ± ä»»åŠ¡é˜Ÿåˆ—çš„ç­‰å¾…æ—¶é—´ã€‚å¦‚æœç³»ç»Ÿæ—¶é—´å‡å»ä»»åŠ¡æ”¾å…¥é˜Ÿåˆ—ä¸­çš„æ—¶é—´å°äºwaitTimeMillsInSendQueueï¼Œæœ¬æ¬¡è¯·æ±‚ä»»åŠ¡æš‚æ—¶ä¸ç§»é™¤è¯¥ä»»åŠ¡ é»˜è®¤200mswaitTimeMillsInSendQueue=200 åˆ°æ­¤RocketMQåŒä¸»åŒä»é›†ç¾¤å°±æ­å»ºå®Œæ¯•ã€‚ å‚è€ƒèµ„æ–™å‚è€ƒ1å‚è€ƒ2å‚è€ƒ3","categories":[],"tags":[{"name":"Windows","slug":"Windows","permalink":"https://ydstudios.gitee.io/tags/Windows/"},{"name":"RocketMQ","slug":"RocketMQ","permalink":"https://ydstudios.gitee.io/tags/RocketMQ/"},{"name":"åŒä¸»åŒä»é›†ç¾¤","slug":"åŒä¸»åŒä»é›†ç¾¤","permalink":"https://ydstudios.gitee.io/tags/%E5%8F%8C%E4%B8%BB%E5%8F%8C%E4%BB%8E%E9%9B%86%E7%BE%A4/"}]},{"title":"JavaScriptæ¥æ”¶åç«¯Longç±»å‹æ•°æ®ç²¾åº¦ä¸¢å¤±é—®é¢˜","slug":"JavaScriptæ¥æ”¶åç«¯Longç±»å‹æ•°æ®ç²¾åº¦ä¸¢å¤±é—®é¢˜","date":"2020-08-26T22:30:22.000Z","updated":"2020-08-27T14:30:42.000Z","comments":true,"path":"post/175ad151.html","link":"","permalink":"https://ydstudios.gitee.io/post/175ad151.html","excerpt":"åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œé€šå¸¸æˆ‘ä»¬çš„æ•°æ®åº“ä¸»é”®ä¼šä½¿ç”¨ bigintï¼Œå®ƒå¯¹åº” Java ä¸­çš„ Longï¼Œä½†æ˜¯å½“Longçš„æ•°å€¼è¶…è¿‡ä¸€å®šå€¼æ—¶ä¼ åˆ°å‰ç«¯åä¼šä¸¢å¤±ç²¾åº¦ã€‚åŸå› æ˜¯JavaScriptçš„numberç±»å‹æœ‰ä¸ªå®‰å…¨å€¼ï¼Œå³2çš„53æ¬¡æ–¹ï¼Œä¸º9007199254740991ï¼Œå¦‚æœè¶…è¿‡è¿™ä¸ªå€¼ï¼Œé‚£ä¹ˆJavaScriptä¼šå‡ºç°ä¸ç²¾ç¡®çš„é—®é¢˜ã€‚","text":"åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œé€šå¸¸æˆ‘ä»¬çš„æ•°æ®åº“ä¸»é”®ä¼šä½¿ç”¨ bigintï¼Œå®ƒå¯¹åº” Java ä¸­çš„ Longï¼Œä½†æ˜¯å½“Longçš„æ•°å€¼è¶…è¿‡ä¸€å®šå€¼æ—¶ä¼ åˆ°å‰ç«¯åä¼šä¸¢å¤±ç²¾åº¦ã€‚åŸå› æ˜¯JavaScriptçš„numberç±»å‹æœ‰ä¸ªå®‰å…¨å€¼ï¼Œå³2çš„53æ¬¡æ–¹ï¼Œä¸º9007199254740991ï¼Œå¦‚æœè¶…è¿‡è¿™ä¸ªå€¼ï¼Œé‚£ä¹ˆJavaScriptä¼šå‡ºç°ä¸ç²¾ç¡®çš„é—®é¢˜ã€‚ æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸­æ‰“å°å‡ºJavaScriptçš„numberç±»å‹æœ‰ä¸ªå®‰å…¨å€¼ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿæœ€ç®€å•çš„åŠæ³•å°±æ˜¯ç›´æ¥åå°åœ¨è¿”å›ç»™å‰ç«¯çš„æ—¶å€™ï¼ŒæŠŠ Long ç±»å‹çš„æ•°æ®è½¬æ¢æˆå­—ç¬¦ä¸²å³å¯ã€‚å¦‚æœè‡ªå·±æ‰‹åŠ¨è½¬æˆ‘æƒ³è¿™ä¸ªä¼šæ˜¯ä¸€ä¸ªå·¥ä½œé‡ä¸å°çš„æ´»ï¼Œé‚£æˆ‘ä»¬æ€ä¹ˆå®‰å…¨å¿«é€Ÿçš„è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ æ–¹æ¡ˆä¸€ å¦‚æœä½ ä»¬æ˜¯ä½¿ç”¨jacksonæ¡†æ¶çš„è¯ï¼Œå¯ä»¥åœ¨ç›¸åº”çš„å­—æ®µä¸ŠåŠ ä¸Šä»¥ä¸‹çš„æ³¨è§£ï¼ˆè‹¥æ˜¯ç”¨çš„ FastJson ä¹Ÿæœ‰ç›¸åº”çš„æ³¨è§£ï¼‰ 123456import com.fasterxml.jackson.databind.annotation.JsonSerialize;import com.fasterxml.jackson.databind.ser.std.ToStringSerializer;//åºåˆ—åŒ–æˆStringçš„ä¼  @JsonSerialize(using = ToStringSerializer.class) private Long id; æ–¹æ¡ˆäºŒ å¯ä»¥è‡ªå®šä¹‰Jacksonçš„ObjectMapper 123456789101112public class CustomJacksonObjectMapper extends ObjectMapper &#123; public CustomJacksonObjectMapper() &#123; super(); // è®¾ç½®æ—¥æœŸè½¬æ¢yyyy-MM-dd HH:mm:ss setDateFormat(new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\")); // åºåˆ—æ¢æˆjsonæ—¶,å°†æ‰€æœ‰çš„longå˜æˆstring,å› ä¸ºjsä¸­å¾—æ•°å­—ç±»å‹ä¸èƒ½åŒ…å«æ‰€æœ‰çš„java longå€¼ SimpleModule simpleModule = new SimpleModule(\"LongModule\", new Version(1, 0, 0, \"\")); simpleModule.addSerializer(Long.class, ToStringSerializer.instance); simpleModule.addSerializer(Long.TYPE, ToStringSerializer.instance); registerModule(simpleModule); &#125;&#125; æ–¹æ¡ˆä¸‰ å‰ç«¯è‡ªå·±è§£å†³ï¼Œä½¿ç”¨ç¬¬ä¸‰æ–¹åº“å¦‚json-bigint ç­‰","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"},{"name":"JavaScript","slug":"JavaScript","permalink":"https://ydstudios.gitee.io/tags/JavaScript/"},{"name":"æ•°æ®ç²¾åº¦","slug":"æ•°æ®ç²¾åº¦","permalink":"https://ydstudios.gitee.io/tags/%E6%95%B0%E6%8D%AE%E7%B2%BE%E5%BA%A6/"}]},{"title":"ç¼–ç¨‹è¿‡ç¨‹ä¸­æŠ½è±¡ç±»å’Œæ¥å£çš„æŠ‰æ‹©","slug":"ç¼–ç¨‹è¿‡ç¨‹ä¸­æŠ½è±¡ç±»å’Œæ¥å£çš„æŠ‰æ‹©","date":"2020-08-24T21:51:35.000Z","updated":"2020-10-10T14:35:31.000Z","comments":true,"path":"post/665bcc51.html","link":"","permalink":"https://ydstudios.gitee.io/post/665bcc51.html","excerpt":"ä½œä¸ºä¸€ä½ç¨‹åºå‘˜åœ¨ç¼–ç çš„è¿‡ç¨‹ä¸­ï¼Œç»ˆä¼šé‡åˆ°è¿™ç§æƒ…å†µï¼šè¿™ä¸ªåŠŸèƒ½æˆ‘åˆ°åº•æ˜¯ç”¨æ¥å£å‘¢ï¼Ÿè¿˜æ˜¯ç”¨æŠ½è±¡ç±»å‘¢ï¼Ÿ","text":"ä½œä¸ºä¸€ä½ç¨‹åºå‘˜åœ¨ç¼–ç çš„è¿‡ç¨‹ä¸­ï¼Œç»ˆä¼šé‡åˆ°è¿™ç§æƒ…å†µï¼šè¿™ä¸ªåŠŸèƒ½æˆ‘åˆ°åº•æ˜¯ç”¨æ¥å£å‘¢ï¼Ÿè¿˜æ˜¯ç”¨æŠ½è±¡ç±»å‘¢ï¼Ÿ æœ€è¿‘åœ¨é¡¹ç›®ä¸­è´Ÿè´£æ”¯ä»˜åŠŸèƒ½ï¼Œç”±äºé¡¹ç›®æ˜¯åœ¨åŸæœ‰çš„åŸºç¡€ä¸Šï¼Œç”±å°ç¨‹åºæ‰©å……ç»ˆç«¯åˆ°äº†Appï¼Œå°ç¨‹åºä¹‹å‰åˆå¯¹æ¥äº†å¾®ä¿¡çš„ jsapi ï¼Œæ‰€ä»¥ç°åœ¨çš„å¯¹æ¥æ”¯ä»˜å¹³å°çš„æƒ…å†µå˜ä¸ºï¼Œé“¶è”æ”¯ä»˜å®App æ”¯ä»˜ã€æ˜“ä»˜å® Appæ”¯ä»˜ã€å¾®ä¿¡jspaiæ”¯ä»˜ã€å¾®ä¿¡Appæ”¯ä»˜ã€‚ï¼ˆä¸ºå•¥æ²¡æœ‰å¯¹æ¥å°ç¨‹åºæ”¯ä»˜ï¼Œå´å¯¹æ¥äº† jsapi æ”¯ä»˜ï¼Œé‚£æˆ‘å°±ä¸æ™“å¾—äº†ï¼‰ã€‚å¯¹æ¥ä¸€ä¸ªå¹³å°çš„æ”¯ä»˜å°±éœ€è¦å®ç°ä¸‹å•ã€å¼‚æ­¥å›è°ƒå¤„ç†ã€è®¢å•æŸ¥è¯¢ã€è®¢å•é€€æ¬¾ã€è®¢å•é€€æ¬¾æŸ¥è¯¢ï¼Œäºæ˜¯æˆ‘å°±åœ¨æŠ½è±¡ç±»å’Œæ¥å£ä¹‹é—´å¾˜å¾Šï¼Œä¸è¿‡çŸ­æš‚çš„æ€è€ƒè¿‡åæˆ‘è¿˜æ˜¯é€‰æ‹©äº†æ¥å£ã€‚ é‚£ä»€ä¹ˆæ—¶å€™ä½¿ç”¨æ¥å£ï¼Ÿä»€ä¹ˆæ—¶å€™ä½¿ç”¨æŠ½è±¡ç±»ï¼Ÿ ä½¿ç”¨æŠ½è±¡ç±»æ˜¯ä¸ºäº†ä»£ç çš„å¤ç”¨ï¼Œè€Œä½¿ç”¨æ¥å£çš„åŠ¨æœºæ˜¯ä¸ºäº†å®ç°å¤šæ€æ€§ã€‚æŠ½è±¡ç±»é€‚åˆç”¨æ¥å®šä¹‰æŸä¸ªé¢†åŸŸçš„å›ºæœ‰å±æ€§ï¼Œä¹Ÿå°±æ˜¯æœ¬è´¨ï¼Œæ¥å£é€‚åˆç”¨æ¥å®šä¹‰æŸä¸ªé¢†åŸŸçš„æ‰©å±•åŠŸèƒ½ã€‚ ä»€ä¹ˆæ—¶å€™ä½¿ç”¨æŠ½è±¡ç±»? å½“2ä¸ªæˆ–å¤šä¸ªç±»ä¸­æœ‰é‡å¤éƒ¨åˆ†çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æŠ½è±¡å‡ºæ¥ä¸€ä¸ªåŸºç±»ï¼Œå¦‚æœå¸Œæœ›è¿™ä¸ªåŸºç±»ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼Œå°±å¯ä»¥æŠŠè¿™ä¸ªåŸºç±»è®¾è®¡æˆæŠ½è±¡ç±»ã€‚ å½“éœ€è¦ä¸ºä¸€äº›ç±»æä¾›å…¬å…±çš„å®ç°ä»£ç æ—¶ï¼Œåº”ä¼˜å…ˆè€ƒè™‘æŠ½è±¡ç±»ã€‚ å› ä¸ºæŠ½è±¡ç±»ä¸­çš„éæŠ½è±¡æ–¹æ³•å¯ä»¥è¢«å­ç±»ç»§æ‰¿ä¸‹æ¥ï¼Œå› ä¸ºæŠ½è±¡ç±»ä¸­çš„éæŠ½è±¡æ–¹æ³•å¯ä»¥è¢«å­ç±»ç»§æ‰¿ä¸‹æ¥ï¼Œä½¿å®ç°åŠŸèƒ½çš„ä»£ç æ›´ç®€å•ã€‚æŠ½è±¡ç±»åªèƒ½æ˜¯å•ç»§æ‰¿çš„ï¼Œä¸èƒ½å¤šç»§æ‰¿ã€‚ ä»€ä¹ˆæ—¶å€™ä½¿ç”¨æ¥å£ï¼Ÿ å½“æ³¨é‡ä»£ç çš„æ‰©å±•æ€§è·Ÿå¯ç»´æŠ¤æ€§æ—¶ï¼Œåº”å½“ä¼˜å…ˆé‡‡ç”¨æ¥å£ã€‚ æ¥å£ä¸å®ç°å®ƒçš„ç±»ä¹‹é—´å¯ä»¥ä¸å­˜åœ¨ä»»ä½•å±‚æ¬¡å…³ç³»ï¼Œæ¥å£å¯ä»¥å®ç°æ¯«ä¸ç›¸å…³ç±»çš„ç›¸åŒè¡Œä¸ºï¼Œæ¯”æŠ½è±¡ç±»çš„ä½¿ç”¨æ›´åŠ æ–¹ä¾¿çµæ´»; æ¥å£åªå…³å¿ƒå¯¹è±¡ä¹‹é—´çš„äº¤äº’çš„æ–¹æ³•ï¼Œè€Œä¸å…³å¿ƒå¯¹è±¡æ‰€å¯¹åº”çš„å…·ä½“ç±»ã€‚æ¥å£æ˜¯ç¨‹åºä¹‹é—´çš„ä¸€ä¸ªåè®®ï¼Œæ¯”æŠ½è±¡ç±»çš„ä½¿ç”¨æ›´å®‰å…¨ã€æ¸…æ™°ã€‚ä¸€èˆ¬ä½¿ç”¨æ¥å£çš„æƒ…å†µæ›´å¤šã€‚","categories":[],"tags":[{"name":"ç¼–ç¨‹","slug":"ç¼–ç¨‹","permalink":"https://ydstudios.gitee.io/tags/%E7%BC%96%E7%A8%8B/"},{"name":"æŠ½è±¡ç±»","slug":"æŠ½è±¡ç±»","permalink":"https://ydstudios.gitee.io/tags/%E6%8A%BD%E8%B1%A1%E7%B1%BB/"},{"name":"æ¥å£","slug":"æ¥å£","permalink":"https://ydstudios.gitee.io/tags/%E6%8E%A5%E5%8F%A3/"}]},{"title":"è®¾è®¡æ¨¡å¼å­¦ä¹ ä¹‹è´£ä»»é“¾æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼å­¦ä¹ ä¹‹è´£ä»»é“¾æ¨¡å¼","date":"2020-05-12T22:36:21.000Z","updated":"2020-12-06T04:57:23.000Z","comments":true,"path":"post/8ec2718b.html","link":"","permalink":"https://ydstudios.gitee.io/post/8ec2718b.html","excerpt":"è´£ä»»é“¾æ¨¡å¼é¡¾åæ€ä¹‰ï¼Œè´£ä»»é“¾æ¨¡å¼ï¼ˆChain of Responsibility Patternï¼‰ä¸ºè¯·æ±‚åˆ›å»ºäº†ä¸€ä¸ªæ¥æ”¶è€…å¯¹è±¡çš„é“¾ã€‚è¿™ç§æ¨¡å¼ç»™äºˆè¯·æ±‚çš„ç±»å‹ï¼Œå¯¹è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…è¿›è¡Œè§£è€¦ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºè¡Œä¸ºå‹æ¨¡å¼ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸­ï¼Œé€šå¸¸æ¯ä¸ªæ¥æ”¶è€…éƒ½åŒ…å«å¯¹å¦ä¸€ä¸ªæ¥æ”¶è€…çš„å¼•ç”¨ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡ä¸èƒ½å¤„ç†è¯¥è¯·æ±‚ï¼Œé‚£ä¹ˆå®ƒä¼šæŠŠç›¸åŒçš„è¯·æ±‚ä¼ ç»™ä¸‹ä¸€ä¸ªæ¥æ”¶è€…ï¼Œä¾æ­¤ç±»æ¨ã€‚","text":"è´£ä»»é“¾æ¨¡å¼é¡¾åæ€ä¹‰ï¼Œè´£ä»»é“¾æ¨¡å¼ï¼ˆChain of Responsibility Patternï¼‰ä¸ºè¯·æ±‚åˆ›å»ºäº†ä¸€ä¸ªæ¥æ”¶è€…å¯¹è±¡çš„é“¾ã€‚è¿™ç§æ¨¡å¼ç»™äºˆè¯·æ±‚çš„ç±»å‹ï¼Œå¯¹è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…è¿›è¡Œè§£è€¦ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºè¡Œä¸ºå‹æ¨¡å¼ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸­ï¼Œé€šå¸¸æ¯ä¸ªæ¥æ”¶è€…éƒ½åŒ…å«å¯¹å¦ä¸€ä¸ªæ¥æ”¶è€…çš„å¼•ç”¨ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡ä¸èƒ½å¤„ç†è¯¥è¯·æ±‚ï¼Œé‚£ä¹ˆå®ƒä¼šæŠŠç›¸åŒçš„è¯·æ±‚ä¼ ç»™ä¸‹ä¸€ä¸ªæ¥æ”¶è€…ï¼Œä¾æ­¤ç±»æ¨ã€‚ ä»‹ç»æ„å›¾ï¼šé¿å…è¯·æ±‚å‘é€è€…ä¸æ¥æ”¶è€…è€¦åˆåœ¨ä¸€èµ·ï¼Œè®©å¤šä¸ªå¯¹è±¡éƒ½æœ‰å¯èƒ½æ¥æ”¶è¯·æ±‚ï¼Œå°†è¿™äº›å¯¹è±¡è¿æ¥æˆä¸€æ¡é“¾ï¼Œå¹¶ä¸”æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯·æ±‚ï¼Œç›´åˆ°æœ‰å¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢ã€‚ ä¸»è¦è§£å†³ï¼šèŒè´£é“¾ä¸Šçš„å¤„ç†è€…è´Ÿè´£å¤„ç†è¯·æ±‚ï¼Œå®¢æˆ·åªéœ€è¦å°†è¯·æ±‚å‘é€åˆ°èŒè´£é“¾ä¸Šå³å¯ï¼Œæ— é¡»å…³å¿ƒè¯·æ±‚çš„å¤„ç†ç»†èŠ‚å’Œè¯·æ±‚çš„ä¼ é€’ï¼Œæ‰€ä»¥èŒè´£é“¾å°†è¯·æ±‚çš„å‘é€è€…å’Œè¯·æ±‚çš„å¤„ç†è€…è§£è€¦äº†ã€‚ ä½•æ—¶ä½¿ç”¨ ï¼šåœ¨å¤„ç†æ¶ˆæ¯çš„æ—¶å€™ä»¥è¿‡æ»¤å¾ˆå¤šé“ã€‚ å¦‚ä½•è§£å†³ï¼šæ‹¦æˆªçš„ç±»éƒ½å®ç°ç»Ÿä¸€æ¥å£ã€‚ å…³é”®ä»£ç ï¼šHandler é‡Œé¢èšåˆå®ƒè‡ªå·±ï¼Œåœ¨ HandlerRequest é‡Œåˆ¤æ–­æ˜¯å¦åˆé€‚ï¼Œå¦‚æœæ²¡è¾¾åˆ°æ¡ä»¶åˆ™å‘ä¸‹ä¼ é€’ï¼Œå‘è°ä¼ é€’ä¹‹å‰ set è¿›å»ã€‚ åº”ç”¨å®ä¾‹ï¼š 1ã€çº¢æ¥¼æ¢¦ä¸­çš„â€å‡»é¼“ä¼ èŠ±â€ã€‚ 2ã€JS ä¸­çš„äº‹ä»¶å†’æ³¡ã€‚ 3ã€JAVA WEB ä¸­ Apache Tomcat å¯¹ Encoding çš„å¤„ç†ï¼ŒStruts2 çš„æ‹¦æˆªå™¨ï¼Œjsp servlet çš„ Filterã€‚ ä¼˜ç‚¹ï¼š é™ä½è€¦åˆåº¦ã€‚å®ƒå°†è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…è§£è€¦ã€‚ ç®€åŒ–äº†å¯¹è±¡ã€‚ä½¿å¾—å¯¹è±¡ä¸éœ€è¦çŸ¥é“é“¾çš„ç»“æ„ã€‚ å¢å¼ºç»™å¯¹è±¡æŒ‡æ´¾èŒè´£çš„çµæ´»æ€§ã€‚é€šè¿‡æ”¹å˜é“¾å†…çš„æˆå‘˜æˆ–è€…è°ƒåŠ¨å®ƒä»¬çš„æ¬¡åºï¼Œå…è®¸åŠ¨æ€åœ°æ–°å¢æˆ–è€…åˆ é™¤è´£ä»»ã€‚ å¢åŠ æ–°çš„è¯·æ±‚å¤„ç†ç±»å¾ˆæ–¹ä¾¿ã€‚ ç¼ºç‚¹ï¼š ä¸èƒ½ä¿è¯è¯·æ±‚ä¸€å®šè¢«æ¥æ”¶ã€‚ ç³»ç»Ÿæ€§èƒ½å°†å—åˆ°ä¸€å®šå½±å“ï¼Œè€Œä¸”åœ¨è¿›è¡Œä»£ç è°ƒè¯•æ—¶ä¸å¤ªæ–¹ä¾¿ï¼Œå¯èƒ½ä¼šé€ æˆå¾ªç¯è°ƒç”¨ã€‚ å¯èƒ½ä¸å®¹æ˜“è§‚å¯Ÿè¿è¡Œæ—¶çš„ç‰¹å¾ï¼Œæœ‰ç¢äºé™¤é”™ã€‚ ä½¿ç”¨åœºæ™¯ï¼š æœ‰å¤šä¸ªå¯¹è±¡å¯ä»¥å¤„ç†åŒä¸€ä¸ªè¯·æ±‚ï¼Œå…·ä½“å“ªä¸ªå¯¹è±¡å¤„ç†è¯¥è¯·æ±‚ç”±è¿è¡Œæ—¶åˆ»è‡ªåŠ¨ç¡®å®šã€‚ åœ¨ä¸æ˜ç¡®æŒ‡å®šæ¥æ”¶è€…çš„æƒ…å†µä¸‹ï¼Œå‘å¤šä¸ªå¯¹è±¡ä¸­çš„ä¸€ä¸ªæäº¤ä¸€ä¸ªè¯·æ±‚ã€‚ å¯åŠ¨æ€æŒ‡å®šä¸€ç»„å¯¹è±¡å¤„ç†è¯·æ±‚ å®é™…åœºæ™¯æœ¬æ–‡ä»¥å„ç§ç”µå•†ç³»ç»Ÿè®¢å•å®ä»˜é‡‘é¢è®¡ç®—ä¸ºä¾‹ï¼Œè®¢å•æœ€ç»ˆç”¨æˆ·æ‰€éœ€è¦ä»˜çš„é‡‘é¢å¯èƒ½æ˜¯è¿™æ ·çš„ï¼š åº”ä»˜é‡‘é¢=è®¢å•é‡‘é¢-ä¼˜æƒ åˆ¸ä¼˜æƒ é‡‘é¢-ä¿ƒé”€æ´»åŠ¨ä¼˜æƒ é‡‘é¢-ä¼šå‘˜æƒç›Šä¼˜æƒ é‡‘é¢ å½“ç„¶ä¹Ÿæœ‰å¯èƒ½è¿˜ä¼šå¢åŠ å…¶ä»–çš„è®¡ç®—æ­¥éª¤ï¼Œä½¿ç”¨è´£ä»»é“¾æ¨¡å¼æ¥å®ç°è®¢å•é‡‘é¢è®¡ç®—ï¼Œè‹¥å¢åŠ äº†å…¶ä»–è®¡ç®—æ­¥éª¤ï¼Œç›´æ¥å°†æ­¥éª¤åŠ å…¥åˆ°é“¾ä¸­å³å¯ï¼Œè€Œæ— éœ€æ”¹åŠ¨ä»¥å‰çš„ä»£ç ï¼Œæœ€å¤§ç¨‹åº¦å‡å°å‡ºé”™çš„å¯èƒ½æ€§ã€‚è´£ä»»é“¾åˆ†ä¸ºçº¯è´£ä»»é“¾ä¸ä¸çº¯è´£ä»»é“¾ï¼Œåœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œå¾ˆå°‘æœ‰çº¯çš„è´£ä»»é“¾ï¼Œæ‰€è°“çº¯çš„è´£ä»»é“¾ï¼Œå°±æ˜¯å•ä¸ªé“¾ä¸Šå¤„ç†å™¨è¦ä¹ˆç‹¬ç«‹å¤„ç†ï¼Œè¦ä¹ˆå¤„ç†ä¸äº†äº¤ç»™ä¸‹ä¸€ä¸ªå¤„ç†å™¨è¿›è¡Œå¤„ç†ã€‚ æœ¬æ–‡ç¤ºä¾‹UMLå›¾ ä¸ºäº†ç®€åŒ–ç¤ºä¾‹ï¼Œä»£ç ä¸­å…³äºä¼˜æƒ é‡‘é¢çš„è®¡ç®—éƒ½å†™å›ºå®šå€¼ã€‚ 12345678910111213141516171819202122232425262728293031323334 /** * å°è£…å¤„ç†å™¨é“¾å¤„ç†å…ƒç´ ä¸Šä¸‹æ–‡ï¼Œå³å¾…å¤„ç†çš„è®¢å• * çœç•¥ get/set æ–¹æ³• * * @author Sam * @date 2020/5/4 * @since 1.6.5 */public class OrderDto &#123; /** * å½“å‰å¤„ç†å™¨ä½äºå¤„ç†å™¨ chain ä¸Šçš„ä½ç½® */ private int pos; /** * è®¢å•å· */ private String orderNo; /** * è®¢å•é‡‘é¢ */ private Double amount; /** * VIP ç­‰çº§ */ private Integer vipLevel; /** * ä¼˜æƒ åˆ¸ */ private String couponNo;&#125; 123456789101112131415161718192021222324/** * æŠ½è±¡å¤„ç†è€… * * @author Sam * @date 2020/5/4 * @since 1.6.5 */public abstract class OrderAbstractHandler &#123; /** * å‡å…é‡‘é¢å¤„ç† * * @param orderDto å¾…å¤„ç†è®¢å• * @param chain å¤„ç†å™¨é“¾ */ protected abstract void doHandle(OrderDto orderDto, OrderHandlerChain chain); /** * è®¢å•å¤„ç†å™¨çš„æƒé‡ * @return */ protected abstract int weight();&#125; è®¢å•å¤„ç†å™¨é“¾1234567891011121314151617181920212223242526272829303132333435/** * è®¢å•å¤„ç†å™¨é“¾ * @author Sam * @date 2020/5/4 * @since 1.6.5 */public class OrderHandlerChain &#123; private List&lt;OrderAbstractHandler&gt; chainList = new ArrayList&lt;&gt;(10); /** * åˆå§‹åŒ–è®¢å•å¤„ç†å™¨é“¾ * çœŸå®ç¼–ç çš„æ—¶å€™å°½é‡ä¸è¦è¿™æ ·å†™ï¼Œè¿™æ ·ä¸å¤Ÿä¼˜é›… * å¯ä»¥å®ç° ApplicationContextAware è¿›è¡Œ bean çš„æ³¨å…¥æˆ–è€…å…¶ä»–æ–¹å¼å®ç°è‡ªåŠ¨æ³¨å…¥å°±å¥½ */ public OrderHandlerChain() &#123; chainList.add(new CouponOrderHandler()); chainList.add(new VipOrderHandler()); chainList.add(new SalesOrderHandler()); // æ ¹æ®å¤„ç†å™¨çš„æƒé‡ï¼Œå¯¹å¤„ç†å™¨é“¾ä¸­å…ƒç´ è¿›è¡Œæ’åº chainList.sort(Comparator.comparingInt(OrderAbstractHandler::weight)); System.out.println(this.chainList); &#125; public void handle(OrderDto context) &#123; if (context.getPos() &lt; chainList.size()) &#123; OrderAbstractHandler handler = chainList.get(context.getPos()); // ç§»åŠ¨ä½äºå¤„ç†å™¨é“¾ä¸­çš„ä½ç½® context.setPos(context.getPos() + 1); handler.doHandle(context, this); &#125; &#125;&#125;` å…·ä½“å¤„ç†å®ç° ä¼˜æƒ åˆ¸å‡å…é‡‘é¢å®ç° 12345678910111213141516171819202122/** * ä¼˜æƒ åˆ¸å‡å…é‡‘é¢ * * @author åˆ˜æ´‹ Sam * @date 2020/5/4 * @since 1.6.5 */public class CouponOrderHandler extends OrderAbstractHandler &#123; @Override protected void doHandle(OrderDto context, OrderHandlerChain chain) &#123; if (context.getCouponNo() != null) &#123; context.setAmount(context.getAmount() - 10); &#125; // è°ƒç”¨ä¸‹ä¸€ä¸ªå¤„ç†å™¨è¿›è¡Œå¤„ç† chain.handle(context); &#125; @Override protected int weight() &#123; return 1; &#125;&#125; ä¼šå‘˜ç­‰çº§å‡å…é‡‘é¢å®ç°12345678910111213141516171819202122/** * ä¼šå‘˜ç­‰çº§å‡å…é‡‘é¢ * * @author Sam * @date 2020/5/4 * @since 1.6.5 */public class VipOrderHandler extends OrderAbstractHandler &#123; @Override protected void doHandle(OrderDto context, OrderHandlerChain chain) &#123; if (context.getVipLevel() &gt; 2) &#123; context.setAmount(context.getAmount() - 5); &#125; // è°ƒç”¨ä¸‹ä¸€ä¸ªå¤„ç†å™¨è¿›è¡Œå¤„ç† chain.handle(context); &#125; @Override protected int weight() &#123; return 2; &#125;&#125; ä¿ƒé”€æ´»åŠ¨ä¼˜æƒ é‡‘é¢å®ç°1234567891011121314151617181920212223/** * ä¿ƒé”€æ´»åŠ¨ä¼˜æƒ é‡‘é¢ * * @author Sam * @date 2020/5/4 * @since 1.6.5 */public class SalesOrderHandler extends OrderAbstractHandler &#123; @Override protected void doHandle(OrderDto context, OrderHandlerChain chain) &#123; Double amount = context.getAmount(); if (amount != null &amp;&amp; amount &gt; 80d) &#123; context.setAmount(amount * 0.9); &#125; // è°ƒç”¨ä¸‹ä¸€ä¸ªå¤„ç†å™¨è¿›è¡Œå¤„ç† chain.handle(context); &#125; @Override protected int weight() &#123; return 3; &#125;&#125; æµ‹è¯•ç»“æœ 12345678910111213public class Test &#123; public static void main(String[] args) &#123; OrderHandlerChain orderHandlerChain = new OrderHandlerChain(); OrderDto order = new OrderDto(); order.setOrderNo(\"123\"); order.setAmount(100d); order.setVipLevel(3); order.setCouponNo(\"111\"); orderHandlerChain.handle(order); System.out.println(\"è®¢å•æœ€ç»ˆé‡‘é¢ä¸ºï¼š \" + order.getAmount()); &#125;&#125; æœ€ç»ˆè¾“å‡ºç»“æœï¼š è®¢å•æœ€ç»ˆé‡‘é¢ä¸ºï¼š 76.5å¦‚æœåˆ é™¤ä¼˜æƒ åˆ¸ï¼Œè®¢å•çš„å®ä»˜é‡‘é¢å°±åˆå˜åŠ¨äº†ã€‚ æ€»ç»“ï¼š å¤„ç†å™¨é“¾è°ƒç”¨handleæ–¹æ³•ï¼Œé€ä¸ªè°ƒç”¨å¤„ç†å™¨é“¾ä¸­çš„å¤„ç†å™¨çš„doHanleæ–¹æ³•ï¼Œå¯¹è®¢å•è¿›è¡Œå¤„ç†ï¼Œå½“å‰å¤„ç†å™¨å¤„ç†å®Œæ¯•åï¼Œå¯ä»¥é€‰æ‹©æ˜¯å¦ç»§ç»­äº¤ç”±ä¸‹ä¸€ä¸ªå¤„ç†å™¨è¿›è¡Œå¤„ç†ï¼Œå³è®¾ç½®chain.handle(context);ï¼Œå¦‚æœä¸éœ€è¦ç»§ç»­å¾€ä¸‹å¤„ç†ï¼Œä¸è°ƒç”¨æ­¤ä»£ç å³å¯ã€‚ ç½‘ä¸Šæµä¼ çš„ä»£ç éƒ½æ˜¯ç›´æ¥åœ¨æŠ½è±¡å¤„ç†å™¨ä¸­åŒ…å«ä¸‹ä¸€ä¸ªå¤„ç†å™¨çš„å¼•ç”¨ï¼Œè¿™æ ·å¯¼è‡´åœ¨å®¢æˆ·ç«¯ä½¿ç”¨çš„æ—¶å€™ï¼Œå°±éœ€è¦æ‰‹åŠ¨å»é€ä¸ªsetä¸‹çº§å¤„ç†å™¨ï¼Œæ‰‹è¯¯å¾ˆå®¹æ˜“é€ æˆå¤„ç†å™¨æ­»å¾ªç¯çš„æƒ…å†µï¼Œä¹Ÿå¯èƒ½å‡ºç°ç¼ºå¤±æŸä¸ªå¤„ç†å™¨çš„æƒ…å†µï¼Œå› è€Œæœ¬æ–‡å‚ç…§Tomcatæºç ä¸­Filterçš„ä½œæ³•ï¼Œå¼•å…¥äº†Chainç±»ï¼Œç»Ÿä¸€å¯¹å¤„ç†å™¨å°è£…ä¸ºé“¾ï¼Œå‡å°‘å®¢æˆ·ç«¯ä½¿ç”¨æ—¶å‡ºé”™çš„å¯èƒ½ã€‚ é“¾å¼å¤„ç†çš„å¥½å¤„åœ¨äºå¢åŠ å‡å°‘æ–°çš„å¤„ç†å™¨ä¸ä¼šå½±å“å…¶ä»–å¤„ç†å™¨çš„é€»è¾‘ï¼Œå„ä¸ªå¤„ç†å™¨ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œå¯ä»¥å‡å°è€¦åˆå¸¦æ¥çš„å½±å“ã€‚ å‚è€ƒè®¾è®¡æ¨¡å¼ä¹‹è´£ä»»é“¾æ¨¡å¼å®æˆ˜","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://ydstudios.gitee.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è´£ä»»é“¾æ¨¡å¼","slug":"è´£ä»»é“¾æ¨¡å¼","permalink":"https://ydstudios.gitee.io/tags/%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F/"}]},{"title":"MySQLçš„bin-log","slug":"MySQLçš„bin-log","date":"2020-03-15T15:22:12.000Z","updated":"2020-12-18T14:02:34.000Z","comments":true,"path":"post/d1d9a9.html","link":"","permalink":"https://ydstudios.gitee.io/post/d1d9a9.html","excerpt":"ä»€ä¹ˆæ˜¯binlogï¼Ÿmysql-binlogæ˜¯MySQLæ•°æ®åº“çš„äºŒè¿›åˆ¶æ—¥å¿—ï¼Œç”¨äºè®°å½•ç”¨æˆ·å¯¹æ•°æ®åº“æ“ä½œçš„SQLè¯­å¥ï¼ˆé™¤äº†æ•°æ®æŸ¥è¯¢è¯­å¥ï¼Œå³è®°å½•insertã€updateã€deleteçš„sqlï¼‰ä¿¡æ¯ã€‚å¯ä»¥ä½¿ç”¨mysqlbinå‘½ä»¤æŸ¥çœ‹äºŒè¿›åˆ¶æ—¥å¿—çš„å†…å®¹ã€‚","text":"ä»€ä¹ˆæ˜¯binlogï¼Ÿmysql-binlogæ˜¯MySQLæ•°æ®åº“çš„äºŒè¿›åˆ¶æ—¥å¿—ï¼Œç”¨äºè®°å½•ç”¨æˆ·å¯¹æ•°æ®åº“æ“ä½œçš„SQLè¯­å¥ï¼ˆé™¤äº†æ•°æ®æŸ¥è¯¢è¯­å¥ï¼Œå³è®°å½•insertã€updateã€deleteçš„sqlï¼‰ä¿¡æ¯ã€‚å¯ä»¥ä½¿ç”¨mysqlbinå‘½ä»¤æŸ¥çœ‹äºŒè¿›åˆ¶æ—¥å¿—çš„å†…å®¹ã€‚ MySQL bin-log çš„æ ¼å¼binlogçš„æ ¼å¼ä¹Ÿæœ‰ä¸‰ç§ï¼šSTATEMENTã€ROWã€MIXED 1ã€ STATMENTæ¨¡å¼ï¼šåŸºäºSQLè¯­å¥çš„å¤åˆ¶(statement-based replication, SBR)ï¼Œæ¯ä¸€æ¡ä¼šä¿®æ”¹æ•°æ®çš„sqlè¯­å¥ä¼šè®°å½•åˆ°binlogä¸­ã€‚ä¼˜ç‚¹ï¼šä¸éœ€è¦è®°å½•æ¯ä¸€æ¡SQLè¯­å¥ä¸æ¯è¡Œçš„æ•°æ®å˜åŒ–ï¼Œè¿™æ ·å­binlogçš„æ—¥å¿—ä¹Ÿä¼šæ¯”è¾ƒå°‘ï¼Œå‡å°‘äº†ç£ç›˜IOï¼Œæé«˜æ€§èƒ½ã€‚ç¼ºç‚¹ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ä¼šå¯¼è‡´master-slaveä¸­çš„æ•°æ®ä¸ä¸€è‡´(å¦‚sleep()å‡½æ•°ï¼Œ last_insert_id()ï¼Œä»¥åŠuser-defined functions(udf)ç­‰ä¼šå‡ºç°é—®é¢˜) 2ã€ROWæ¨¡å¼ï¼šåŸºäºè¡Œçš„å¤åˆ¶(row-based replication, RBR)ï¼šä¸è®°å½•æ¯ä¸€æ¡SQLè¯­å¥çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œä»…éœ€è®°å½•å“ªæ¡æ•°æ®è¢«ä¿®æ”¹äº†ï¼Œä¿®æ”¹æˆäº†ä»€ä¹ˆæ ·å­äº†ã€‚ä¼˜ç‚¹ï¼šä¸ä¼šå‡ºç°æŸäº›ç‰¹å®šæƒ…å†µä¸‹çš„å­˜å‚¨è¿‡ç¨‹ã€æˆ–functionã€æˆ–triggerçš„è°ƒç”¨å’Œè§¦å‘æ— æ³•è¢«æ­£ç¡®å¤åˆ¶çš„é—®é¢˜ã€‚ç¼ºç‚¹ï¼šä¼šäº§ç”Ÿå¤§é‡çš„æ—¥å¿—ï¼Œå°¤å…¶æ˜¯alter tableçš„æ—¶å€™ä¼šè®©æ—¥å¿—æš´æ¶¨ã€‚ 3ã€MIXEDæ¨¡å¼ï¼šæ··åˆæ¨¡å¼å¤åˆ¶(mixed-based replication, MBR)ï¼šä»¥ä¸Šä¸¤ç§æ¨¡å¼çš„æ··åˆä½¿ç”¨ï¼Œä¸€èˆ¬çš„å¤åˆ¶ä½¿ç”¨STATEMENTæ¨¡å¼ä¿å­˜binlogï¼Œå¯¹äºSTATEMENTæ¨¡å¼æ— æ³•å¤åˆ¶çš„æ“ä½œä½¿ç”¨ROWæ¨¡å¼ä¿å­˜binlogï¼ŒMySQLä¼šæ ¹æ®æ‰§è¡Œçš„SQLè¯­å¥é€‰æ‹©æ—¥å¿—ä¿å­˜æ–¹å¼ã€‚ æœåŠ¡å™¨ä¸Šç”¨å“ªç§æ¨¡å¼å¥½å‘¢ï¼Ÿæˆ‘ä»¬æ¥ä¸¾ä¾‹å­è¯´æ˜ï¼š insert into xxtable values (x,y,z)ä¸ºä¾‹ å½±å“ï¼š1è¡Œ,ä¸”ä¸ºæ–°å¢1è¡Œ, å¯¹äºå…¶ä»–è¡Œæ²¡æœ‰å½±å“. è¿™ä¸ªæƒ…å†µ,ç”¨rowæ ¼å¼,ç›´æ¥å¤åˆ¶ç£ç›˜ä¸Š1è¡Œçš„æ–°å¢å˜åŒ–ã€‚ update xxtable set age=21 where name=â€™sssâ€™ä¸ºä¾‹å½±å“ï¼šä¸€èˆ¬ä¹Ÿåªæ˜¯å½±å“1è¡Œ. ç”¨rowä¹Ÿæ¯”è¾ƒåˆé€‚ã€‚ è¿‡å¹´å‘çº¢åŒ…,å…¨å…¬å¸çš„äºº,éƒ½æ¶¨è–ª100å…ƒ.update xxtable set salary=salary+100;å½±å“: è¿™ä¸ªè¯­å¥å¸¦æ¥çš„å½±å“æ˜¯é’ˆå¯¹æ¯ä¸€è¡Œçš„, å› æ­¤ç£ç›˜ä¸Šå¾ˆå¤šrowéƒ½å‘ç”Ÿäº†å˜åŒ–.æ­¤å¤„é€‚åˆç”¨statmentæ ¼å¼çš„æ—¥å¿—. MySQLåæ¥åˆæä¾›äº†ä¸€ä¸ªæ–°çš„æ··åˆæ¨¡å¼ï¼ˆMIXEDï¼‰ï¼Œå¾ˆå¥½ç†è§£ä¸ºä¸Šè¿°ä¸¤ç§çš„æ¨¡å¼çš„è‡ªç”±åˆ‡æ¢ã€‚Mysqlä¼šæ ¹æ®æ‰§è¡ŒSQLæ¥é€‰æ‹©ä½¿ç”¨STATEMENTè¿˜æ˜¯ROWæ¨¡å¼ã€‚æ‰€ä»¥æˆ‘ä»¬ç”¨è¿™ç§æ¨¡å¼æ˜¯æœ€å¥½çš„ï¼Œèƒ½å…¼é¡¾ä¸¤è€…çš„ä¼˜ç‚¹ã€‚ MySQLå¦‚ä½•é…ç½®bin-logåœ¨MySQLé…ç½®æ–‡ä»¶my.cnfæ–‡ä»¶ä¸­çš„mysqldèŠ‚ä¸­æ·»åŠ ä¸‹é¢çš„é…ç½®æ–‡ä»¶ï¼š 123456789101112131415161718[mysqld]#è®¾ç½®æ—¥å¿—æ ¼å¼binlog_format = mixed#è®¾ç½®æ—¥å¿—è·¯å¾„ï¼Œæ³¨æ„è·¯ç»éœ€è¦mysqlç”¨æˆ·æœ‰æƒé™å†™log-bin = /data/mysql/logs/mysql-bin.log#è®¾ç½®binlogæ¸…ç†æ—¶é—´expire_logs_days = 7#binlogæ¯ä¸ªæ—¥å¿—æ–‡ä»¶å¤§å°max_binlog_size = 100m#binlogç¼“å­˜å¤§å°binlog_cache_size = 4m#æœ€å¤§binlogç¼“å­˜å¤§å°max_binlog_cache_size = 512m é‡å¯MySQLç”Ÿæ•ˆï¼Œå¦‚æœä¸æ–¹ä¾¿é‡å¯æœåŠ¡ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä¿®æ”¹å¯¹åº”çš„å˜é‡å³å¯ã€‚ MySQLçš„bin-logå¦‚ä½•æŸ¥çœ‹MySQLçš„bin-logæ˜¯äºŒè¿›åˆ¶æ ¼å¼çš„æ— æ³•ç›´æ¥æŸ¥çœ‹ï¼ŒMySQLæä¾›äº†ä¸¤ç§æ–¹å¼è¿›è¡ŒæŸ¥çœ‹ã€‚ 1ã€ ç®€å•æŸ¥çœ‹ show binlog eventsè¯­æ³• ï¼š1234SHOW BINLOG EVENTS[IN 'log_name'][FROM pos][LIMIT [offset,] row_count] åœ¨MySQLå®¢æˆ·ç«¯ä¸­æ‰§è¡Œ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119mysql&gt; show binlog events in 'mysql-bin.000004' \\G*************************** 1. row *************************** Log_name: mysql-bin.000004 Pos: 4 Event_type: Format_desc Server_id: 1End_log_pos: 107 Info: Server ver: 5.5.48-log, Binlog ver: 4*************************** 2. row *************************** Log_name: mysql-bin.000004 Pos: 107 Event_type: Query Server_id: 1End_log_pos: 331 Info: use `db01`; CREATE TABLE `student` ( `id` int(11) NOT NULL AUTO_INCREMENT, `student_name` varchar(32) NOT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8*************************** 3. row *************************** Log_name: mysql-bin.000004 Pos: 331 Event_type: Query Server_id: 1End_log_pos: 399 Info: BEGIN*************************** 4. row *************************** Log_name: mysql-bin.000004 Pos: 399 Event_type: Intvar Server_id: 1End_log_pos: 427 Info: INSERT_ID=1*************************** 5. row *************************** Log_name: mysql-bin.000004 Pos: 427 Event_type: Query Server_id: 1End_log_pos: 563 Info: use `db01`; insert into `db01`.`student` ( `id`, `student_name`) values ( '0', 'jim')*************************** 6. row *************************** Log_name: mysql-bin.000004 Pos: 563 Event_type: Xid Server_id: 1End_log_pos: 590 Info: COMMIT /* xid=22 */*************************** 7. row *************************** Log_name: mysql-bin.000004 Pos: 590 Event_type: Query Server_id: 1End_log_pos: 842 Info: use `db02`; CREATE TABLE `student` ( `id` int(11) NOT NULL AUTO_INCREMENT, `student_name` varchar(32) NOT NULL, `birthday` date NOT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8*************************** 8. row *************************** Log_name: mysql-bin.000004 Pos: 842 Event_type: Query Server_id: 1End_log_pos: 910 Info: BEGIN*************************** 9. row *************************** Log_name: mysql-bin.000004 Pos: 910 Event_type: Intvar Server_id: 1End_log_pos: 938 Info: INSERT_ID=2*************************** 10. row *************************** Log_name: mysql-bin.000004 Pos: 938 Event_type: Query Server_id: 1End_log_pos: 1077 Info: use `db01`; insert into `db01`.`student` ( `id`, `student_name`) values ( '0', 'åˆ˜æ´‹')*************************** 11. row *************************** Log_name: mysql-bin.000004 Pos: 1077 Event_type: Xid Server_id: 1End_log_pos: 1104 Info: COMMIT /* xid=128 */*************************** 12. row *************************** Log_name: mysql-bin.000004 Pos: 1104 Event_type: Query Server_id: 1End_log_pos: 1172 Info: BEGIN*************************** 13. row *************************** Log_name: mysql-bin.000004 Pos: 1172 Event_type: Intvar Server_id: 1End_log_pos: 1200 Info: INSERT_ID=3*************************** 14. row *************************** Log_name: mysql-bin.000004 Pos: 1200 Event_type: Query Server_id: 1End_log_pos: 1342 Info: use `db01`; insert into `db01`.`student` ( `id`, `student_name`) values ( '0', 'å¼ ä»å®¹')*************************** 15. row *************************** Log_name: mysql-bin.000004 Pos: 1342 Event_type: Xid Server_id: 1End_log_pos: 1369 Info: COMMIT /* xid=146 */15 rows in set (0.00 sec)mysql&gt; å…¶å®æˆ‘åœ¨14å’Œ15è¡Œä¹‹é—´ï¼Œè¿›è¡Œäº†ä¸€æ¬¡SelectæŸ¥è¯¢ï¼Œä½†æ˜¯è¿™ä¸ªæ“ä½œåœ¨bin-logä¸­å¹¶æ²¡æœ‰å‘ç°ï¼Œå°è¯äº†å¼€å¤´è¯´çš„bin-logä¸è®°å½•SelectæŸ¥è¯¢ã€‚ ä¸Šè¿°å‡ºç°çš„å‚æ•°è§£é‡Šï¼š Log_name:The name of the file that is being listed. Posï¼šThe position at which the event occurs. Event_typeï¼šAn identifier that describes the event type. Server_idï¼šThe server ID of the server on which the event originated. End_log_posï¼šThe position at which the next event begins, which is equal to Pos plus the size of the event. Infoï¼šMore detailed information about the event type. The format of this information depends on the event type. 1ã€ è¯¦ç»†æŸ¥çœ‹ mysqlbinlog 1è¯­æ³•ï¼š mysqlbinlog [bin-log-name] é—®é¢˜1ï¼šæ— æ³•è¯†åˆ«çš„ç¼–ç  12Sam-Mac:data Sam$ /usr/local/mysql/bin/mysqlbinlog ./mysql-bin.000004/usr/local/mysql/bin/mysqlbinlog: unknown variable 'default-character-set=utf8' åŸå› ï¼š mysqlbinlogè¿™ä¸ªå·¥å…·æ— æ³•è¯†åˆ«binlogä¸­çš„é…ç½®ä¸­çš„default-character-set=utf8mb4è¿™ä¸ªæŒ‡ä»¤ï¼Œä½¿ç”¨å‚æ•°â€“no-defaults é—®é¢˜2ï¼šbin-logæ—¥å¿—æ–‡ä»¶ä¸å­˜åœ¨ 1/usr/local/mysql/bin/mysqlbinlog: File './mysql-bin.000004' not found (Errcode: 13) åŸå› ï¼šæƒé™é—®é¢˜ä½¿ç”¨sudo æœ€ç»ˆå‘½ä»¤ï¼š sudo /usr/local/mysql/bin/mysqlbinlog â€“no-defaults /usr/local/mysql/data/mysql-bin.000004 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394959697Sam-Mac:data Sam$ sudo /usr/local/mysql/bin/mysqlbinlog --no-defaults /usr/local/mysql/data/mysql-bin.000004/*!50530 SET @@SESSION.PSEUDO_SLAVE_MODE=1*/;/*!40019 SET @@session.max_insert_delayed_threads=0*/;/*!50003 SET @OLD_COMPLETION_TYPE=@@COMPLETION_TYPE,COMPLETION_TYPE=0*/;DELIMITER /*!*/;# at 4#200315 13:18:28 server id 1 end_log_pos 107 Start: binlog v 4, server v 5.5.48-log created 200315 13:18:28 at startup# Warning: this binlog is either in use or was not closed properly.ROLLBACK/*!*/;BINLOG 'pLptXg8BAAAAZwAAAGsAAAABAAQANS41LjQ4LWxvZwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACkum1eEzgNAAgAEgAEBAQEEgAAVAAEGggAAAAICAgCAA=='/*!*/;# at 107#200315 13:21:09 server id 1 end_log_pos 331 Query thread_id=5 exec_time=0 error_code=0use `db01`/*!*/;SET TIMESTAMP=1584249669/*!*/;SET @@session.pseudo_thread_id=5/*!*/;SET @@session.foreign_key_checks=1, @@session.sql_auto_is_null=0, @@session.unique_checks=1, @@session.autocommit=1/*!*/;SET @@session.sql_mode=0/*!*/;SET @@session.auto_increment_increment=1, @@session.auto_increment_offset=1/*!*/;/*!\\C utf8 *//*!*/;SET @@session.character_set_client=33,@@session.collation_connection=33,@@session.collation_server=33/*!*/;SET @@session.lc_time_names=0/*!*/;SET @@session.collation_database=DEFAULT/*!*/;CREATE TABLE `student` ( `id` int(11) NOT NULL AUTO_INCREMENT, `student_name` varchar(32) NOT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8/*!*/;# at 331#200315 13:22:39 server id 1 end_log_pos 399 Query thread_id=59 exec_time=0 error_code=0SET TIMESTAMP=1584249759/*!*/;BEGIN/*!*/;# at 399#200315 13:22:39 server id 1 end_log_pos 427 IntvarSET INSERT_ID=1/*!*/;# at 427#200315 13:22:39 server id 1 end_log_pos 563 Query thread_id=59 exec_time=0 error_code=0SET TIMESTAMP=1584249759/*!*/;insert into `db01`.`student` ( `id`, `student_name`) values ( '0', 'jim')/*!*/;# at 563#200315 13:22:39 server id 1 end_log_pos 590 Xid = 22COMMIT/*!*/;# at 590#200315 13:25:56 server id 1 end_log_pos 842 Query thread_id=5 exec_time=0 error_code=0use `db02`/*!*/;SET TIMESTAMP=1584249956/*!*/;CREATE TABLE `student` ( `id` int(11) NOT NULL AUTO_INCREMENT, `student_name` varchar(32) NOT NULL, `birthday` date NOT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8/*!*/;# at 842#200315 16:36:37 server id 1 end_log_pos 910 Query thread_id=1201 exec_time=0 error_code=0SET TIMESTAMP=1584261397/*!*/;BEGIN/*!*/;# at 910#200315 16:36:37 server id 1 end_log_pos 938 IntvarSET INSERT_ID=2/*!*/;# at 938#200315 16:36:37 server id 1 end_log_pos 1077 Query thread_id=1201 exec_time=0 error_code=0use `db01`/*!*/;SET TIMESTAMP=1584261397/*!*/;insert into `db01`.`student` ( `id`, `student_name`) values ( '0', 'åˆ˜æ´‹')/*!*/;# at 1077#200315 16:36:37 server id 1 end_log_pos 1104 Xid = 128COMMIT/*!*/;# at 1104#200315 16:37:09 server id 1 end_log_pos 1172 Query thread_id=1201 exec_time=0 error_code=0SET TIMESTAMP=1584261429/*!*/;BEGIN/*!*/;# at 1172#200315 16:37:09 server id 1 end_log_pos 1200 IntvarSET INSERT_ID=3/*!*/;# at 1200#200315 16:37:09 server id 1 end_log_pos 1342 Query thread_id=1201 exec_time=0 error_code=0SET TIMESTAMP=1584261429/*!*/;insert into `db01`.`student` ( `id`, `student_name`) values ( '0', 'å¼ ä»å®¹')/*!*/;# at 1342#200315 16:37:09 server id 1 end_log_pos 1369 Xid = 146COMMIT/*!*/;DELIMITER ;# End of log fileROLLBACK /* added by mysqlbinlog */;/*!50003 SET COMPLETION_TYPE=@OLD_COMPLETION_TYPE*/;/*!50530 SET @@SESSION.PSEUDO_SLAVE_MODE=0*/;Sam-Mac:data Sam$ æ€»ç»“æ— è®ºæ˜¯å¢é‡å¤‡ä»½è¿˜æ˜¯ä¸»ä»å¤åˆ¶ï¼Œéƒ½æ˜¯éœ€è¦å¼€å¯mysql-binlogæ—¥å¿—ï¼Œæœ€å¥½è·Ÿæ•°æ®ç›®å½•è®¾ç½®åˆ°ä¸åŒçš„ç£ç›˜åˆ†åŒºï¼Œå¯ä»¥é™ä½ioç­‰å¾…ï¼Œæå‡æ€§èƒ½ï¼›å¹¶ä¸”åœ¨ç£ç›˜æ•…éšœçš„æ—¶å€™å¯ä»¥åˆ©ç”¨mysql-binlogæ¢å¤æ•°æ®ã€‚","categories":[],"tags":[{"name":"mysql","slug":"mysql","permalink":"https://ydstudios.gitee.io/tags/mysql/"},{"name":"binlog","slug":"binlog","permalink":"https://ydstudios.gitee.io/tags/binlog/"}]},{"title":"MySQL åˆ é™¤ relay log çš„æ–¹æ³•","slug":"MySQL-åˆ é™¤-relay-log-çš„æ–¹æ³•","date":"2020-03-15T14:35:19.000Z","updated":"2020-12-18T13:59:10.000Z","comments":true,"path":"post/da13f861.html","link":"","permalink":"https://ydstudios.gitee.io/post/da13f861.html","excerpt":"æ–¹æ³•1 ï¼šè‡ªåŠ¨ è®¾ç½®å‚æ•° relay_log_purge = 11234mysql&gt; SET GLOBAL relay_log_purge = 1;Query OK, 0 rows affected (0.00 sec)æˆ–è€…åœ¨/etc/my.cnf [mysqld]æ¨¡å—ä¸‹é¢å¢åŠ ä»¥ä¸‹å†…å®¹relay-log-purge = 1","text":"æ–¹æ³•1 ï¼šè‡ªåŠ¨ è®¾ç½®å‚æ•° relay_log_purge = 11234mysql&gt; SET GLOBAL relay_log_purge = 1;Query OK, 0 rows affected (0.00 sec)æˆ–è€…åœ¨/etc/my.cnf [mysqld]æ¨¡å—ä¸‹é¢å¢åŠ ä»¥ä¸‹å†…å®¹relay-log-purge = 1 è¿™ä¸ªå‚æ•°éœ€è¦é‡å¯æ•°æ®åº“æ‰å¯ç”Ÿæ•ˆã€‚é»˜è®¤æƒ…å†µä¸‹relay-log-purge æ˜¯å¼€å¯çš„ã€‚å¦‚æœä½ å¯¹ä»æ•°æ®åº“è¦æ±‚ä¸é«˜ï¼Œå¯ä»¥å°†relay_log_purge = 1ã€‚å¦‚æœæ•°æ®åº“è¦æ‰‹åŠ¨åˆ é™¤relay logè¯·æ‰§è¡Œ SET GLOBAL relay_log_purge=0ã€‚æˆ–è€…åœ¨/etc/my.cnf 12# [mysqld]æ¨¡å—ä¸‹é¢å¢åŠ ä»¥ä¸‹å†…å®¹relay-log-purge = 0 æ¨¡æ‹Ÿåœºæ™¯ï¼š1ï¼‰ä»åº“æŸ¥çœ‹relay logæƒ…å†µ 12345678[root@aliyun1212 data]# lltotal 5255240-rw-r----- 1 mysql mysql 56 Aug 18 15:40 auto.cnf-rw-r----- 1 mysql mysql 207 Aug 23 16:06 mysqld-relay-bin.000032-rw-r----- 1 mysql mysql 344 Aug 23 18:14 mysqld-relay-bin.000033-rw-r----- 1 mysql mysql 207 Aug 23 18:14 mysqld-relay-bin.000034-rw-r----- 1 mysql mysql 321 Aug 23 18:14 mysqld-relay-bin.000035-rw-r----- 1 mysql mysql 100 Aug 23 18:14 mysqld-relay-bin.index 2ï¼‰ä»åº“æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š 12345678910mysql&gt; SET GLOBAL relay_log_purge = 1;Query OK, 0 rows affected (0.00 sec)mysql&gt; show variables like 'relay_log_purge';+-----------------+-------+| Variable_name | Value |+-----------------+-------+| relay_log_purge | ON |+-----------------+-------+1 row in set (0.00 sec) 3ï¼‰ä¸»åº“æ‰§è¡Œflush logs; 12mysql&gt; flush logs;Query OK, 0 rows affected (0.12 sec) ç”Ÿæˆæ–°çš„binlog4ï¼‰ä»åº“æŸ¥çœ‹relay log æƒ…å†µ 123456[root@aliyun1212 data]# lltotal 5255232-rw-r----- 1 mysql mysql 56 Aug 18 15:40 auto.cnf-rw-r----- 1 mysql mysql 255 Aug 26 03:16 mysqld-relay-bin.000036-rw-r----- 1 mysql mysql 369 Aug 26 03:16 mysqld-relay-bin.000037-rw-r----- 1 mysql mysql 50 Aug 26 03:16 mysqld-relay-bin.index å¯ä»¥çœ‹åˆ°ä»åº“çš„relay log è‡ªåŠ¨åˆ é™¤åªä¿ç•™æœ€è¿‘çš„ä¸¤ä¸ªrelay logã€‚è¯´æ˜ä¸‹å¦‚æœä»åº“åŒæ­¥å‡ºç°é—®é¢˜ï¼Œæ²¡æœ‰åº”ç”¨çš„relay log ä¹Ÿä¸ä¼šè‡ªåŠ¨åˆ é™¤relay logã€‚ç›´åˆ°è§£å†³æ‰é”™è¯¯ï¼Œå¦åˆ™relay log ä¼šè¶ŠæŒ¤è¶Šå¤šã€‚ æ–¹æ³•2ï¼šæ‰‹åŠ¨ rm -rf åˆ é™¤reloy log1ï¼‰æŸ¥çœ‹ä»åº“ 123456789101112[root@aliyun1212 data]# lltotal 5255256-rw-r----- 1 mysql mysql 56 Aug 18 15:40 auto.cnf-rw-r----- 1 mysql mysql 255 Aug 26 03:16 mysqld-relay-bin.000036-rw-r----- 1 mysql mysql 422 Aug 26 03:27 mysqld-relay-bin.000037-rw-r----- 1 mysql mysql 255 Aug 26 03:27 mysqld-relay-bin.000038-rw-r----- 1 mysql mysql 683 Aug 26 03:27 mysqld-relay-bin.000039-rw-r----- 1 mysql mysql 255 Aug 26 03:27 mysqld-relay-bin.000040-rw-r----- 1 mysql mysql 683 Aug 26 03:27 mysqld-relay-bin.000041-rw-r----- 1 mysql mysql 255 Aug 26 03:27 mysqld-relay-bin.000042-rw-r----- 1 mysql mysql 369 Aug 26 03:27 mysqld-relay-bin.000043-rw-r----- 1 mysql mysql 200 Aug 26 03:27 mysqld-relay-bin.index 2ï¼‰ä»åº“æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š 12345678910[root@aliyun1212 data]# rm -rf mysqld-relay-bin.000036 mysqld-relay-bin.37 mysqld-relay-bin.38[root@aliyun1212 data]# lltotal 5255244-rw-r----- 1 mysql mysql 56 Aug 18 15:40 auto.cnf-rw-r----- 1 mysql mysql 683 Aug 26 03:27 mysqld-relay-bin.000039-rw-r----- 1 mysql mysql 255 Aug 26 03:27 mysqld-relay-bin.000040-rw-r----- 1 mysql mysql 683 Aug 26 03:27 mysqld-relay-bin.000041-rw-r----- 1 mysql mysql 255 Aug 26 03:27 mysqld-relay-bin.000042-rw-r----- 1 mysql mysql 369 Aug 26 03:27 mysqld-relay-bin.000043-rw-r----- 1 mysql mysql 200 Aug 26 03:27 mysqld-relay-bin.index ä»åº“æ“ä½œç³»ç»Ÿå±‚é¢rm relay log ä¸»åº“æ›´æ–°æ•°æ®ä»åº“å¯ä»¥ç»§ç»­åŒæ­¥ï¼šä¸»åº“æ“ä½œï¼š 12mysql&gt; insert into test values(13,'ff');Query OK, 1 row affected (0.44 sec) ä»åº“å¯ä»¥çœ‹åˆ°æ•°æ®è¢«åŒæ­¥ 12345678910111213141516mysql&gt; select * from test;+----+------+| id | name |+----+------+| 1 | abc || 4 | cc || 5 | dd || 6 | ee || 7 | ee || 8 | ee || 9 | ff || 10 | ff || 11 | ff || 12 | ff || 13 | ff |+----+------+ å¦‚æœæ­¤æ—¶ stop slaveç„¶ååœ¨æ‰§è¡Œstart slave ,ä¼šæç¤ºä»¥ä¸‹é”™è¯¯ï¼š 12mysql&gt; start slave;ERROR 1872 (HY000): Slave failed to initialize relay log info structure from the repository æ­¤æ—¶è¦æ‰§è¡Œæ­¥éª¤33ï¼‰ç¼–è¾‘æ–‡ä»¶mysqld-relay-bin.index åˆ é™¤åˆšæ‰åˆ é™¤çš„relay log mysqld-relay-bin.000039ä¹‹å‰çš„ã€‚ 123456[root@aliyun1212 data]# vi mysqld-relay-bin.index ./mysqld-relay-bin.000039./mysqld-relay-bin.000040./mysqld-relay-bin.000041./mysqld-relay-bin.000042./mysqld-relay-bin.000043 å†æ¬¡å¯åŠ¨start slave 12mysql&gt; start slave;ERROR 1872 (HY000): Slave failed to initialize relay log info structure from the repository è¿˜æ˜¯ä¼šæŠ¥é”™ã€‚æ­¤æ—¶å¿…é¡»é‡å¯ä»åº“mysql æ•°æ®åº“ 123456[root@aliyun1212 ~]# service mysql restartShutting down MySQL.. [ OK ]Starting MySQL.... [ OK ]# æŸ¥çœ‹ä»åº“çŠ¶æ€æ­£å¸¸mysql&gt; show slave status/G","categories":[],"tags":[{"name":"mysql","slug":"mysql","permalink":"https://ydstudios.gitee.io/tags/mysql/"},{"name":"relay-log","slug":"relay-log","permalink":"https://ydstudios.gitee.io/tags/relay-log/"}]},{"title":"åˆ©ç”¨Macç”µè„‘è‡ªå¸¦åº”ç”¨å°†iPhoneæŠ•å±åˆ°Macç”µè„‘çš„æ•™ç¨‹","slug":"åˆ©ç”¨Macç”µè„‘è‡ªå¸¦åº”ç”¨å°†iPhoneæŠ•å±åˆ°Macç”µè„‘çš„æ•™ç¨‹","date":"2020-03-10T12:40:32.000Z","updated":"2020-03-10T07:01:03.000Z","comments":true,"path":"post/29afd8a9.html","link":"","permalink":"https://ydstudios.gitee.io/post/29afd8a9.html","excerpt":"ä½ åªéœ€è¦å‡†å¤‡ä¸€æ ¹USBæ•°æ®çº¿ï¼Œä¹Ÿå°±æ˜¯æ‰‹æœºçš„å……ç”µçº¿å³å¯ï¼Œæœ€å¥½æ˜¯åŸè£…çš„USBçº¿ã€‚","text":"ä½ åªéœ€è¦å‡†å¤‡ä¸€æ ¹USBæ•°æ®çº¿ï¼Œä¹Ÿå°±æ˜¯æ‰‹æœºçš„å……ç”µçº¿å³å¯ï¼Œæœ€å¥½æ˜¯åŸè£…çš„USBçº¿ã€‚ æ‰‹æœºé€šè¿‡USBçº¿è¿æ¥ç”µè„‘å¦‚æœæ‰‹æœºæ˜¯ç¬¬ä¸€æ¬¡æ’ä¸Šè¿™å°ç”µè„‘å¯èƒ½ä¼šå¼¹å‡ºä¿¡ä»»ç­‰å¼¹æ¡†ï¼Œæ‰‹æœºç«¯ç‚¹å‡»ã€ä¿¡ä»»ã€‘ï¼Œç”µè„‘ç«¯ç‚¹å‡»ã€ç»§ç»­ã€‘ã€‚æ€»çš„æ¥è¯´ï¼Œå°±æ˜¯å…è®¸ç”µè„‘è®¿é—®æ‰‹æœºã€‚ æ‰“å¼€Mac ç³»ç»Ÿè‡ªå¸¦çš„æ’­æ”¾å™¨QuickTime Playerç›´æ¥command + ç©ºæ ¼é”® è°ƒå‡ºSpotLight æœç´¢ â€œQuickTimeâ€ï¼Œå³å¯è°ƒå‡ºQuickTime Playeræ’­æ”¾å™¨ã€‚ èœå•æ ã€æ–‡ä»¶ã€‘â€“&gt;ã€æ–°å»ºå½±ç‰‡å½•åˆ¶ã€‘æ‰“å¼€ã€QuickTime Playerã€‘åï¼Œåœ¨å·¦ä¸Šè§’çš„èœå•æ ä¸­ã€æ–‡ä»¶ã€‘èœå•ï¼Œæ‰¾åˆ°ç¬¬ä¸€é¡¹ã€æ–°å»ºå½±ç‰‡å½•åˆ¶ã€‘ã€‚ æ›´æ”¹æ‘„åƒå¤´é€‰é¡¹ï¼Œé€‰ä¸­æ‰‹æœºå³å¯ã€‚ç‚¹å‡»ã€æ–°å»ºå½±ç‰‡å½•åˆ¶ã€‘åï¼Œæ­¤æ—¶é»˜è®¤æ˜¯æ‰“å¼€çš„ç”µè„‘è‡ªå¸¦çš„æ‘„åƒå¤´ï¼Œæ­¤æ—¶å¯ä»¥æ›´æ–°æ‘„åƒå¤´çš„æ¥æºå’Œéº¦å…‹é£æ¥æºã€‚æ¨èç›¸æœºé€‰æ‹©iPhoneçš„ï¼Œéº¦å…‹é£é€‰æ‹©å†…ç½®éº¦å…‹é£ã€‚","categories":[],"tags":[{"name":"MAC","slug":"MAC","permalink":"https://ydstudios.gitee.io/tags/MAC/"},{"name":"iPhone","slug":"iPhone","permalink":"https://ydstudios.gitee.io/tags/iPhone/"},{"name":"æŠ•å±","slug":"æŠ•å±","permalink":"https://ydstudios.gitee.io/tags/%E6%8A%95%E5%B1%8F/"}]},{"title":"JVMé…ç½®å‚æ•°çš„ç±»å‹","slug":"JVMé…ç½®å‚æ•°çš„ç±»å‹","date":"2020-02-06T15:55:13.000Z","updated":"2020-02-06T07:57:04.000Z","comments":true,"path":"post/ea8be9c5.html","link":"","permalink":"https://ydstudios.gitee.io/post/ea8be9c5.html","excerpt":"å‚æ•°åç§°çš„è¯´æ˜JVMé…ç½®å‚æ•°åˆ†åˆ«ç”¨äºè·Ÿè¸ªç›‘æ§JVMçŠ¶æ€ï¼Œåˆ†é…å †å†…å­˜ä»¥åŠåˆ†é…æ ˆå†…å­˜ã€‚æŒ‰ç…§ç±»å‹åˆ†ä¸ºä¸‰ç±»æ ‡å‡†å‚æ•°ã€éæ ‡å‡†å‚æ•°å’Œéç¨³å®šå‚æ•°","text":"å‚æ•°åç§°çš„è¯´æ˜JVMé…ç½®å‚æ•°åˆ†åˆ«ç”¨äºè·Ÿè¸ªç›‘æ§JVMçŠ¶æ€ï¼Œåˆ†é…å †å†…å­˜ä»¥åŠåˆ†é…æ ˆå†…å­˜ã€‚æŒ‰ç…§ç±»å‹åˆ†ä¸ºä¸‰ç±»æ ‡å‡†å‚æ•°ã€éæ ‡å‡†å‚æ•°å’Œéç¨³å®šå‚æ•° æ ‡å‡†å‚æ•°(-)æ‰€æœ‰ JVM éƒ½å¿…é¡»æ”¯æŒè¿™äº›å‚æ•°çš„åŠŸèƒ½, è€Œä¸”å‘åå…¼å®¹, å¦‚: -client : è®¾ç½® JVM ä½¿ç”¨ client æ¨¡å¼, ç‰¹ç‚¹æ˜¯å¯åŠ¨é€Ÿåº¦æ¯”è¾ƒå¿«, ä½†è¿è¡Œæ—¶æ€§èƒ½å’Œå†…å­˜ç®¡ç†æ•ˆç‡ä¸é«˜. é€šå¸¸ç”¨äºå®¢æˆ·ç«¯åº”ç”¨ç¨‹åºæˆ–å¼€å‘è°ƒè¯•; åœ¨32ä½ç¯å¢ƒä¸‹ç›´æ¥è¿è¡Œ Java ç¨‹åºé»˜è®¤å¯ç”¨è¯¥æ¨¡å¼. -server : è®¾ç½® JVM ä½¿ server æ¨¡å¼, ç‰¹ç‚¹æ˜¯å¯åŠ¨é€Ÿåº¦æ¯”è¾ƒæ…¢, ä½†è¿è¡Œæ—¶æ€§èƒ½å’Œå†…å­˜ç®¡ç†æ•ˆç‡å¾ˆé«˜, é€‚ç”¨äºç”Ÿäº§ç¯å¢ƒ; åœ¨å…·æœ‰64ä½èƒ½åŠ›çš„JDKç¯å¢ƒä¸‹é»˜è®¤å¯ç”¨è¯¥æ¨¡å¼. 123456Sam-Mac:hexo-blog Sam$ java -versionjava version \"1.8.0_74\"Java(TM) SE Runtime Environment (build 1.8.0_74-b02)Java HotSpot(TM) 64-Bit Server VM (build 25.74-b02, mixed mode)Sam-Mac:hexo-blog Sam$ éæ ‡å‡†å‚æ•°(-X)å„ JVM å‚å•†åº”è¯¥éƒ½å®ç°è¿™äº›å‚æ•°çš„åŠŸèƒ½, ä½†æ˜¯å¹¶ä¸ä¿è¯æ‰€æœ‰çš„ JVM å®ç°éƒ½æ»¡è¶³, ä¸”ä¸ä¿è¯å‘åå…¼å®¹ã€‚è¿™äº›ç”¨çš„ä¸å¤šï¼Œçœ‹çœ‹å°±å¥½ã€‚ 12345678// è§£é‡Šæ‰§è¡Œ-Xint// ç¬¬ä¸€æ¬¡ä½¿ç”¨å°±ç¼–è¯‘æˆæœ¬åœ°ä»£ç -Xcomp// æ··åˆæ¨¡å¼-Xmixed éç¨³å®šå‚æ•°(-XX)æ­¤ç±»å‚æ•°å„ä¸ªJVMå®ç°ä¼šæœ‰æ‰€ä¸åŒ, å°†æ¥å¯èƒ½ä¼šä¸è¢«æ”¯æŒ, éœ€è¦æ…é‡ä½¿ç”¨ã€‚è¿™ç§ç±»å‹çš„å‚æ•°è‡ªå·±åˆå¯åˆ†ä¸ºä¸¤ç§ï¼Œåˆ†åˆ«å¦‚ä¸‹ï¼š å¸ƒå°”ç±»å‹ã€‚ -XX:+ æˆ–è€… - æŸä¸ªå±æ€§å€¼ï¼Œ+ è¡¨ç¤ºå¼€å¯ï¼Œ-è¡¨ç¤ºå…³é—­ã€‚ä¾‹å¦‚ï¼š 12345// æ‰“å°GCè¯¦ç»†ä¿¡æ¯-XX:+PrintGCDetails// ä¸æ‰“å°GCè¯¦ç»†ä¿¡æ¯-XX:-PrintGCDetails KVç±»å‹ã€‚-XX:å±æ€§key=å±æ€§å€¼valueï¼Œä¾‹å¦‚ï¼š 12// è®¾ç½®Metaspaceçš„å¤§å°-XX:MetaspaceSize=1024m æ³¨æ„: åœ¨â€-XX:â€åçš„å‚æ•°è‹¥ä¸éœ€è¦èµ‹å€¼, å³åªæ˜¯ç”¨æ¥é…ç½®å¼€å¯æˆ–å…³é—­ç›¸åº”é€‰é¡¹, åˆ™éœ€è¦æœ‰ â€œ+â€ (å¼€å¯) æˆ– â€œ-â€œ (ç¦æ­¢) , å¦åˆ™åº”ç”¨ç¨‹åºå°†åœ¨æ—¥å¿—æ–‡ä»¶ (å¦‚ Tomcat çš„æ—¥å¿—æ–‡ä»¶ catalina.out ) ä¸­æŠ›å‡ºå¦‚ä¸‹é”™è¯¯: 123Missing +/- setting for VM option 'UseConcMarkSweepGC'. Error: Could not create the Java Virtual Machine.Error: A fatal exception has occurred. Program will exit. å¯ä»¥çœ‹å‡º, è¿™é‡Œç¼ºå°‘äº† â€œ+/-â€œ ç¬¦å·, å¯¼è‡´è™šæ‹Ÿæœºå¯åŠ¨å¼‚å¸¸, ä¿®æ”¹åå³å¯æ­£å¸¸å¯åŠ¨. æˆ‘ä»¬å¸¸è®¾ç½®çš„JVMå‚æ•°Xmså’ŒXmx,å±äºå“ªç§ç±»å‹çš„JVMå‚æ•°ï¼Ÿ-Xmsç­‰ä»·äº-XX:InitialHeapSize,-Xmxç­‰ä»·äº-XX:MaxHeapSizeï¼Œæ‰€ä»¥ä»–ä»¬éƒ½æ˜¯XXç±»å‹å‚æ•°ã€‚","categories":[],"tags":[{"name":"Jvm","slug":"Jvm","permalink":"https://ydstudios.gitee.io/tags/Jvm/"}]},{"title":"Springé…ç½®æ–‡ä»¶ä¸­çš„classpath:å’Œclasspath*:çš„åŒºåˆ«","slug":"Springé…ç½®æ–‡ä»¶ä¸­çš„classpath-å’Œclasspath-çš„åŒºåˆ«","date":"2020-01-28T22:46:48.000Z","updated":"2020-01-28T14:53:41.000Z","comments":true,"path":"post/38b6491c.html","link":"","permalink":"https://ydstudios.gitee.io/post/38b6491c.html","excerpt":"classpathæ˜¯springçš„å†™æ³•ï¼Œclasspathæ˜¯æŒ‡WEB-INFæ–‡ä»¶å¤¹ä¸‹çš„classesç›®å½•ï¼Œå¯¹åº”æºä»£ç srcç›®å½•ï¼Œç”¨äºå­˜æ”¾ä»srcä¸­æ‹·è´è¿‡å»çš„å„ç§é…ç½®æ–‡ä»¶ï¼Œä»¥åŠç¼–è¯‘è¿‡åçš„classæ–‡ä»¶ã€‚Springå¯ä»¥é€šè¿‡æŒ‡å®šclasspath*:ä¸classpath:å‰ç¼€åŠ ä¸Šè·¯å¾„çš„æ–¹å¼ä»classpathåŠ è½½é…ç½®æ–‡ä»¶ã€‚","text":"classpathæ˜¯springçš„å†™æ³•ï¼Œclasspathæ˜¯æŒ‡WEB-INFæ–‡ä»¶å¤¹ä¸‹çš„classesç›®å½•ï¼Œå¯¹åº”æºä»£ç srcç›®å½•ï¼Œç”¨äºå­˜æ”¾ä»srcä¸­æ‹·è´è¿‡å»çš„å„ç§é…ç½®æ–‡ä»¶ï¼Œä»¥åŠç¼–è¯‘è¿‡åçš„classæ–‡ä»¶ã€‚Springå¯ä»¥é€šè¿‡æŒ‡å®šclasspath*:ä¸classpath:å‰ç¼€åŠ ä¸Šè·¯å¾„çš„æ–¹å¼ä»classpathåŠ è½½é…ç½®æ–‡ä»¶ã€‚ classpath: çš„å…·ä½“å«ä¹‰classpath:è¡¨ç¤ºä»ç±»è·¯å¾„ä¸­åŠ è½½èµ„æºï¼Œclasspath:å’Œclasspath:/æ˜¯ç­‰ä»·çš„ï¼Œéƒ½æ˜¯ç›¸å¯¹äºç±»çš„æ ¹è·¯å¾„ã€‚èµ„æºæ–‡ä»¶åº“æ ‡å‡†çš„åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œä¹Ÿå¯ä»¥åœ¨JARæˆ–ZIPçš„ç±»åŒ…ä¸­ã€‚ classpath*: çš„å…·ä½“å«ä¹‰classpath*:ï¼šå‡è®¾å¤šä¸ªJARåŒ…æˆ–æ–‡ä»¶ç³»ç»Ÿç±»è·¯å¾„éƒ½æœ‰ä¸€ä¸ªç›¸åŒçš„é…ç½®æ–‡ä»¶ï¼Œclasspath:åªä¼šåœ¨ç¬¬ä¸€ä¸ªåŠ è½½çš„ç±»è·¯å¾„ä¸‹æŸ¥æ‰¾ï¼Œè€Œclasspath:ä¼šæ‰«ææ‰€æœ‰è¿™äº›JARåŒ…åŠç±»è·¯å¾„ä¸‹å‡ºç°çš„åŒåæ–‡ä»¶ã€‚ å…·ä½“ä¾‹å­å¦‚ä¸‹ classpath:applicationContext.xmlï¼ŒåŒ¹é…classpathä¸‹çš„æŒ‡å®šæ–‡ä»¶ classpath:/spring/applicationContext.xmlï¼ŒåŒ¹é…classpathå­ç›®å½•ä¸‹çš„æŒ‡å®šæ–‡ä»¶ classpath:spring-*.xmlï¼ŒåŒ¹é…classpathä¸‹çš„æŒ‡å®šå‰ç¼€çš„æ–‡ä»¶ classpath:*/spring-.xmlï¼ŒåŒ¹é…classpathä¸‹æ‰€æœ‰ç›®å½•ä¸‹çš„æŒ‡å®šå‰ç¼€çš„æ–‡ä»¶ classpath:**/spring-.xmlï¼ŒåŒ¹é…å½“å‰classpathå’Œjarä¸­classpathä¸‹æ‰€æœ‰ç›®å½•ä¸‹çš„æŒ‡å®šå‰ç¼€çš„æ–‡ä»¶","categories":[],"tags":[{"name":"spring","slug":"spring","permalink":"https://ydstudios.gitee.io/tags/spring/"}]},{"title":"åˆ©ç”¨Docker Composeç®¡ç†æœåŠ¡","slug":"åˆ©ç”¨Docker-Composeç®¡ç†æœåŠ¡","date":"2020-01-14T22:17:18.000Z","updated":"2020-01-14T14:57:32.000Z","comments":true,"path":"post/a5d4c4d4.html","link":"","permalink":"https://ydstudios.gitee.io/post/a5d4c4d4.html","excerpt":"docker-compose ç®€ä»‹Composeæ˜¯ç”¨äºå®šä¹‰å’Œè¿è¡Œå¤šå®¹å™¨Dockeråº”ç”¨ç¨‹åºçš„å·¥å…·ã€‚é€šè¿‡Composeï¼Œæ‚¨å¯ä»¥ä½¿ç”¨YMLæ–‡ä»¶æ¥é…ç½®åº”ç”¨ç¨‹åºéœ€è¦çš„æ‰€æœ‰æœåŠ¡ã€‚ç„¶åï¼Œä½¿ç”¨ä¸€ä¸ªå‘½ä»¤ï¼Œå°±å¯ä»¥ä» YML æ–‡ä»¶é…ç½®ä¸­åˆ›å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡ã€‚","text":"docker-compose ç®€ä»‹Composeæ˜¯ç”¨äºå®šä¹‰å’Œè¿è¡Œå¤šå®¹å™¨Dockeråº”ç”¨ç¨‹åºçš„å·¥å…·ã€‚é€šè¿‡Composeï¼Œæ‚¨å¯ä»¥ä½¿ç”¨YMLæ–‡ä»¶æ¥é…ç½®åº”ç”¨ç¨‹åºéœ€è¦çš„æ‰€æœ‰æœåŠ¡ã€‚ç„¶åï¼Œä½¿ç”¨ä¸€ä¸ªå‘½ä»¤ï¼Œå°±å¯ä»¥ä» YML æ–‡ä»¶é…ç½®ä¸­åˆ›å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡ã€‚ docker-compose ä½¿ç”¨çš„ä¸‰ä¸ªæ­¥éª¤ï¼š ä½¿ç”¨ Dockerfile å®šä¹‰åº”ç”¨ç¨‹åºçš„ç¯å¢ƒã€‚ ä½¿ç”¨ docker-compose.yml å®šä¹‰æ„æˆåº”ç”¨ç¨‹åºçš„æœåŠ¡ï¼Œè¿™æ ·å®ƒä»¬å¯ä»¥åœ¨éš”ç¦»ç¯å¢ƒä¸­ä¸€èµ·è¿è¡Œã€‚ æ‰§è¡Œ docker-compose up å‘½ä»¤æ¥å¯åŠ¨å¹¶è¿è¡Œæ•´ä¸ªåº”ç”¨ç¨‹åºã€‚ docker-compose å®‰è£…123#ä»¥centosä¸ºä¾‹yum install -y docker-compose ä½¿ç”¨docker-composeç¼–æ’ä¸€ä¸ªjdk8ã€tomcat7ã€mysql5.7å’Œredis3.2çš„å®ä¾‹å‡†å¤‡çš„ææ–™å’Œç›®å½•ç»“æ„å¦‚ä¸‹ï¼š â”œâ”€â”€ docker-compose.ymlâ””â”€â”€ tomcat7 â”œâ”€â”€ apache-tomcat-7.0.99.zip â”œâ”€â”€ Dockerfile â”œâ”€â”€ jdk-8u131-linux-x64.tar.gz â””â”€â”€ my.cnf #æŒ‚åœ¨åˆ°å®¹å™¨çš„ç›®å½•â”œâ”€â”€ mysqlâ”‚ â”œâ”€â”€ confâ”‚ â”‚ â””â”€â”€ my.cnfâ”‚ â”œâ”€â”€ dataâ”‚ â”œâ”€â”€ initâ”‚ â”‚ â”œâ”€â”€ init.shâ”‚ â”‚ â””â”€â”€ mysql_init.sqlâ”‚ â””â”€â”€ logâ””â”€â”€ tomcat7 â”œâ”€â”€ conf â”‚ â”œâ”€â”€ Catalina â”‚ â”‚ â””â”€â”€ localhost â”‚ â”œâ”€â”€ catalina.policy â”‚ â”œâ”€â”€ catalina.properties â”‚ â”œâ”€â”€ context.xml â”‚ â”œâ”€â”€ logging.properties â”‚ â”œâ”€â”€ server.xml â”‚ â”œâ”€â”€ tomcat-users.xml â”‚ â”œâ”€â”€ tomcat-users.xsd â”‚ â””â”€â”€ web.xml â”œâ”€â”€ data â”œâ”€â”€ logs â””â”€â”€ webapps docker-compose.yml çš„å†…å®¹å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748version: \"3\"services: samjavawebenv: container_name: javawebenv build: context: ./tomcat7/ dockerfile: Dockerfile image: compose-javawebenv:v1 depends_on: - mysql links: - mysql - redis ports: - \"80:80\" - \"443:443\" - \"8080:8080\" privileged: true environment: - Dspring.profiles.active=prod restart: always volumes: - \"../../docker-compose/tomcat7/conf:/usr/local/tomcat7/conf\" - \"../../docker-compose/tomcat7/data:/usr/local/tomcat7/data\" - \"../../docker-compose/tomcat7/logs:/usr/local/tomcat7/logs\" - \"../../docker-compose/tomcat7/webapps:/usr/local/tomcat7/webapps\" mysql: container_name: mysql5.7 environment: MYSQL_ROOT_HOST: \"%\" MYSQL_HOST: \"localhost\" MYSQL_ROOT_PASSWORD: \"xxxx\" image: \"mysql:5.7\" ports: - \"3306:3306\" restart: always volumes: - \"../../docker-compose/mysql/data:/var/lib/mysql\" - \"../../docker-compose/mysql/conf:/etc/mysql/conf.d\" - \"../../docker-compose/mysql/init:/docker-entrypoint-initdb.d\" command: --default-authentication-plugin=mysql_native_password redis: container_name: redis3.2 image: \"redis:3.2\" ports: - \"6380:6379\" restart: always command: \"redis-server --appendonly yes\" init.shä¸­çš„å†…å®¹ 123#!/bin/bashmysql -uroot -pxxx &lt;&lt; EOFsource /docker-entrypoint-initdb.d/mysql_init.sql; mysql_init.sqlä¸­çš„å†…å®¹ 123456789101112use mysql;update user set authentication_string=password('xxxx') where user='root' and host='localhost'; INSERT INTO `mysql`.`user` (`Host`, `User`, `Select_priv`, `Insert_priv`, `Update_priv`, `Delete_priv`, `Create_priv`, `Drop_priv`, `Reload_priv`, `Shutdown_priv`, `Process_priv`, `File_priv`, `Grant_priv`, `References_priv`, `Index_priv`, `Alter_priv`, `Show_db_priv`, `Super_priv`, `Create_tmp_table_priv`, `Lock_tables_priv`, `Execute_priv`, `Repl_slave_priv`, `Repl_client_priv`, `Create_view_priv`, `Show_view_priv`, `Create_routine_priv`, `Alter_routine_priv`, `Create_user_priv`, `Event_priv`, `Trigger_priv`, `Create_tablespace_priv`, `ssl_type`, `ssl_cipher`, `x509_issuer`, `x509_subject`, `max_questions`, `max_updates`, `max_connections`, `max_user_connections`, `plugin`, `authentication_string`, `password_expired`, `password_last_changed`, `password_lifetime`, `account_locked`) VALUES ('%', 'xx', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', '', '', '', '', '0', '0', '0', '0', 'mysql_native_password', password('xxx'), 'N', '2020-01-09 11:41:17', NULL, 'N');flush privileges; å®¹å™¨é—´è®¿é—®mysqlå’Œredisçš„é“¾æ¥åœ°å€è¦ä¿®æ”¹ 1234# æŠŠä¸»æœºåœ°å€æ¢æˆserviceçš„åå­—jbdc.url=jdbc:mysql://mysql:3306/flash_sale?useUnicode=true&amp;characterEncoding=utf-8#mysqlçš„ç”¨æˆ·ä¸»æœºä¸º javawebenv.compose_default å³ container_name + compose_default docker-compose å‘½ä»¤1234567891011121314#æ„å»ºdocker-compose build# å¯åŠ¨docker-compose up#å¦‚æœä½ æƒ³åœ¨åå°æ‰§è¡Œè¯¥æœåŠ¡å¯ä»¥åŠ ä¸Š -d å‚æ•°docker-compose up -d#å…³é—­docker-compose stop#åˆ é™¤docker-compose rm ä»¥ä¸Šçš„docker-composeå‘½ä»¤éƒ½æ˜¯åœ¨ docker-compose.yml æ–‡ä»¶ç›®å½•ä¸‹æ‰§è¡Œ","categories":[],"tags":[{"name":"docker","slug":"docker","permalink":"https://ydstudios.gitee.io/tags/docker/"},{"name":"docker-compose","slug":"docker-compose","permalink":"https://ydstudios.gitee.io/tags/docker-compose/"}]},{"title":"æˆ‘å¸¸ç”¨çš„dockeråŸºæœ¬å‘½ä»¤","slug":"æˆ‘å¸¸ç”¨çš„dockeråŸºæœ¬å‘½ä»¤","date":"2020-01-13T22:00:51.000Z","updated":"2020-01-14T14:45:55.000Z","comments":true,"path":"post/c9b0a620.html","link":"","permalink":"https://ydstudios.gitee.io/post/c9b0a620.html","excerpt":"docker å®¢æˆ·ç«¯éå¸¸ç®€å• ,æˆ‘ä»¬å¯ä»¥ç›´æ¥è¾“å…¥ docker å‘½ä»¤æ¥æŸ¥çœ‹åˆ° Docker å®¢æˆ·ç«¯çš„æ‰€æœ‰å‘½ä»¤é€‰é¡¹ã€‚å¯ä»¥é€šè¿‡å‘½ä»¤ docker command â€“help æ›´æ·±å…¥çš„äº†è§£æŒ‡å®šçš„ Docker å‘½ä»¤ä½¿ç”¨æ–¹æ³•ã€‚ä¾‹å¦‚æˆ‘ä»¬è¦æŸ¥çœ‹ docker stats æŒ‡ä»¤çš„å…·ä½“ä½¿ç”¨æ–¹æ³•ï¼š 1docker stats --help","text":"docker å®¢æˆ·ç«¯éå¸¸ç®€å• ,æˆ‘ä»¬å¯ä»¥ç›´æ¥è¾“å…¥ docker å‘½ä»¤æ¥æŸ¥çœ‹åˆ° Docker å®¢æˆ·ç«¯çš„æ‰€æœ‰å‘½ä»¤é€‰é¡¹ã€‚å¯ä»¥é€šè¿‡å‘½ä»¤ docker command â€“help æ›´æ·±å…¥çš„äº†è§£æŒ‡å®šçš„ Docker å‘½ä»¤ä½¿ç”¨æ–¹æ³•ã€‚ä¾‹å¦‚æˆ‘ä»¬è¦æŸ¥çœ‹ docker stats æŒ‡ä»¤çš„å…·ä½“ä½¿ç”¨æ–¹æ³•ï¼š 1docker stats --help dockeræŸ¥æ‰¾é•œåƒ1234567# æŸ¥è¯¢é•œåƒdocker search é•œåƒåç§°#dockeræŸ¥æ‰¾å®˜æ–¹åŸç‰ˆé•œåƒdocker search --filter \"is-official=true\" centos#æˆ–è€…docker search -f is-official=true centos docker å®‰è£…é•œåƒ12345678#å‘½ä»¤è¯­æ³•docker pull é•œåƒåç§°:æ ‡ç­¾#å®‰è£… tomcat8 docker pull tomcat:8#å®‰è£… mysql5.7 docker pull mysql:5.7 åˆ é™¤images123456789#è‹¥åˆ é™¤ä¸æ‰ï¼Œè¯´æ˜æœ‰å®¹å™¨æ­£åœ¨ä½¿ç”¨æ­¤ imagesdocker rmi imgId#å…ˆæ‰§è¡Œ docker rm containerId#å†æ‰§è¡Œ docker rmi imgId å¯åŠ¨å®¹å™¨ä»¥ä¸‹å‘½ä»¤ä½¿ç”¨ ubuntu é•œåƒå¯åŠ¨ä¸€ä¸ªå®¹å™¨ï¼Œå‚æ•°ä¸ºä»¥å‘½ä»¤è¡Œæ¨¡å¼è¿›å…¥è¯¥å®¹å™¨ï¼š 1234567891011#å‘½ä»¤è¯­æ³•docker run &lt;ç›¸å…³å‚æ•°&gt; &lt;é•œåƒ ID&gt; &lt;åˆå§‹å‘½ä»¤&gt; docker run -itd --name è‡ªå®šä¹‰å®¹å™¨åç§° é•œåƒåç§°:æ ‡ç­¾ shell#è¿è¡Œtomcat8 docker run -p 8080:8080 --name mytomcat tomcat:8#è¿è¡Œubuntué•œåƒdocker run -itd ubuntu /bin/bash å‚æ•°è¯´æ˜ï¼š -i: äº¤äº’å¼æ“ä½œã€‚ -t: ç»ˆç«¯ã€‚ -dï¼šæŒ‡å®šå®¹å™¨çš„è¿è¡Œæ¨¡å¼ä¸ºåå°è¿è¡Œã€‚ -P:æ˜¯å®¹å™¨å†…éƒ¨ç«¯å£éšæœºæ˜ å°„åˆ°ä¸»æœºçš„é«˜ç«¯å£ã€‚ -p: æ˜¯å®¹å™¨å†…éƒ¨ç«¯å£ç»‘å®šåˆ°æŒ‡å®šçš„ä¸»æœºç«¯å£ã€‚ â€“name: æ ‡è¯†æ¥å‘½åå®¹å™¨ã€‚ ubuntu: ubuntu é•œåƒã€‚ /bin/bashï¼šæ”¾åœ¨é•œåƒååçš„æ˜¯å‘½ä»¤ï¼Œè¿™é‡Œæˆ‘ä»¬å¸Œæœ›æœ‰ä¸ªäº¤äº’å¼ Shellï¼Œå› æ­¤ç”¨çš„æ˜¯ /bin/bashã€‚ -vï¼šè¡¨ç¤ºéœ€è¦å°†æœ¬åœ°å“ªä¸ªç›®å½•æŒ‚è½½åˆ°å®¹å™¨ä¸­ï¼Œæ ¼å¼ï¼š-v &lt;å®¿ä¸»æœºç›®å½•&gt;:&lt;å®¹å™¨ç›®å½•&gt; éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œä¸ä¸€å®šè¦ä½¿ç”¨â€œé•œåƒ IDâ€ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨â€œä»“åº“å:æ ‡ç­¾åâ€ï¼Œä¾‹å¦‚ï¼šcentos:latestã€‚åˆå§‹å‘½ä»¤è¡¨ç¤ºä¸€æ—¦å®¹å™¨å¯åŠ¨ï¼Œéœ€è¦è¿è¡Œçš„å‘½ä»¤ï¼Œæ­¤æ—¶ä½¿ç”¨â€œ/bin/bashâ€ï¼Œè¡¨ç¤ºä»€ä¹ˆä¹Ÿä¸åšï¼Œåªéœ€è¿›å…¥å‘½ä»¤è¡Œå³å¯ã€‚ 123456docker run -d --name mysql5.7 -p 3306:3306 -v /usr/local/mysql/data:/var/lib/mysql -v /usr/local/mysql/conf.d:/etc/mysql/conf.d -e MYSQL_ROOT_PASSWORD=123456 mysql:5.7.25#å°†windowsä¸‹Fç›˜çš„ç›®å½•javaResourceæŒ‚è½½åˆ°dockerä¸­centosä¸­çš„/usr/local/srcä¸‹ï¼Œdockerä¸­å¯ä»¥å…ˆè®¾ç½®åˆ†äº«ç›˜ç¬¦docker run -it --privileged=true -v /F/javaResource/:/usr/local/src/ 5e35e350aded /bin/bash è¦é€€å‡ºç»ˆç«¯ï¼Œç›´æ¥è¾“å…¥ exit:é€šè¿‡ docker inspect å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥è·å–é•œåƒçš„è¯¦ç»†ä¿¡æ¯ï¼Œå…¶ä¸­ï¼ŒåŒ…æ‹¬åˆ›å»ºè€…ï¼Œå„å±‚çš„æ•°å­—æ‘˜è¦ç­‰ã€‚123456docker inspect repository:tagdocker inspect mysql:5.7docker inspect è¿”å›çš„æ˜¯ JSON æ ¼å¼çš„ä¿¡æ¯ï¼Œå¦‚æœæ‚¨æƒ³è·å–å…¶ä¸­æŒ‡å®šçš„ä¸€é¡¹å†…å®¹ï¼Œå¯ä»¥é€šè¿‡ -f æ¥æŒ‡å®šï¼Œå¦‚è·å–é•œåƒå¤§å°ï¼šdocker inspect -f &#123;&#123;\".Size\"&#125;&#125; mysql:5.7 å®¹å™¨å…¶ä»–å‘½ä»¤1234567891011121314#æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨docker ps#æŸ¥çœ‹æ‰€æœ‰çš„å®¹å™¨docker ps -a#åœæ­¢å®¹å™¨docker stop containerId#å¯åŠ¨å®¹å™¨docker start containerId#é‡å¯å®¹å™¨docker restart containerId è¿›å…¥å®¹å™¨åœ¨ä½¿ç”¨ -d å‚æ•°æ—¶ï¼Œå®¹å™¨å¯åŠ¨åä¼šè¿›å…¥åå°ã€‚æ­¤æ—¶æƒ³è¦è¿›å…¥å®¹å™¨ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æŒ‡ä»¤è¿›å…¥ï¼š docker attach docker execï¼šæ¨èå¤§å®¶ä½¿ç”¨ docker exec å‘½ä»¤ï¼Œå› ä¸ºæ­¤é€€å‡ºå®¹å™¨ç»ˆç«¯ï¼Œä¸ä¼šå¯¼è‡´å®¹å™¨çš„åœæ­¢ã€‚ 1docker exec -it mytomcat bash #åœ¨è¿™é‡Œç”¨åˆ°äº†ä¸Šé¢æåˆ°çš„å®¹å™¨åˆ«åmytomcat ä»€ä¹ˆæ˜¯ DockerfileDockerfile æ˜¯ä¸€ä¸ªç”¨æ¥æ„å»ºé•œåƒçš„æ–‡æœ¬æ–‡ä»¶ï¼Œæ–‡æœ¬å†…å®¹åŒ…å«äº†ä¸€æ¡æ¡æ„å»ºé•œåƒæ‰€éœ€çš„æŒ‡ä»¤å’Œè¯´æ˜ã€‚ FROM å’Œ RUN æŒ‡ä»¤çš„ä½œç”¨ FROMï¼šå®šåˆ¶çš„é•œåƒéƒ½æ˜¯åŸºäº FROM çš„é•œåƒï¼Œè¿™é‡Œçš„ nginx å°±æ˜¯å®šåˆ¶éœ€è¦çš„åŸºç¡€é•œåƒã€‚åç»­çš„æ“ä½œéƒ½æ˜¯åŸºäº nginxã€‚ RUNï¼šç”¨äºæ‰§è¡Œåé¢è·Ÿç€çš„å‘½ä»¤è¡Œå‘½ä»¤ã€‚æœ‰ä»¥ä¸‹ä¿©ç§æ ¼å¼ï¼š 12345678#shellæ ¼å¼RUN &lt;å‘½ä»¤è¡Œå‘½ä»¤&gt;# &lt;å‘½ä»¤è¡Œå‘½ä»¤&gt; ç­‰åŒäºï¼Œåœ¨ç»ˆç«¯æ“ä½œçš„ shell å‘½ä»¤ã€‚#exec æ ¼å¼RUN [\"å¯æ‰§è¡Œæ–‡ä»¶\", \"å‚æ•°1\", \"å‚æ•°2\"]# ä¾‹å¦‚ï¼š# RUN [\"./test.php\", \"dev\", \"offline\"] ç­‰ä»·äº RUN ./test.php dev offline æ³¨æ„ï¼šDockerfile çš„æŒ‡ä»¤æ¯æ‰§è¡Œä¸€æ¬¡éƒ½ä¼šåœ¨ docker ä¸Šæ–°å»ºä¸€å±‚ã€‚æ‰€ä»¥è¿‡å¤šæ— æ„ä¹‰çš„å±‚ï¼Œä¼šé€ æˆé•œåƒè†¨èƒ€è¿‡å¤§ã€‚ä¾‹å¦‚ï¼š 1234FROM centosRUN yum install wgetRUN wget -O redis.tar.gz \"http://download.redis.io/releases/redis-5.0.3.tar.gz\"RUN tar -xvf redis.tar.gz ä»¥ä¸Šæ‰§è¡Œä¼šåˆ›å»º 3 å±‚é•œåƒã€‚å¯ç®€åŒ–ä¸ºä»¥ä¸‹æ ¼å¼ï¼š 1234FROM centosRUN yum install wget \\ &amp;&amp; wget -O redis.tar.gz \"http://download.redis.io/releases/redis-5.0.3.tar.gz\" \\ &amp;&amp; tar -xvf redis.tar.gz å¦‚ä¸Šï¼Œä»¥ &amp;&amp; ç¬¦å·è¿æ¥å‘½ä»¤ï¼Œè¿™æ ·æ‰§è¡Œåï¼Œåªä¼šåˆ›å»º 1 å±‚é•œåƒã€‚ å¼€å§‹æ„å»ºé•œåƒåœ¨ Dockerfile æ–‡ä»¶çš„å­˜æ”¾ç›®å½•ä¸‹ï¼Œæ‰§è¡Œæ„å»ºåŠ¨ä½œã€‚ ä»¥ä¸‹ç¤ºä¾‹ï¼Œé€šè¿‡ç›®å½•ä¸‹çš„ Dockerfile æ„å»ºä¸€ä¸ª tomcatå’Œjdkæ•´åˆçš„é•œåƒ:v1ï¼ˆé•œåƒåç§°:é•œåƒæ ‡ç­¾ï¼‰æ³¨ï¼šæœ€åçš„ . ä»£è¡¨æœ¬æ¬¡æ‰§è¡Œçš„ä¸Šä¸‹æ–‡è·¯å¾„ï¼Œä¸‹ä¸€èŠ‚ä¼šä»‹ç»ã€‚ æ„å»ºé•œåƒå‘½ä»¤123456#å‘½ä»¤è¯­æ³• docker build -t name:tag .-t é•œåƒçš„åå­—åŠæ ‡ç­¾ï¼Œé€šå¸¸ name:tag æˆ–è€… name æ ¼å¼ï¼›å¯ä»¥åœ¨ä¸€æ¬¡æ„å»ºä¸­ä¸ºä¸€ä¸ªé•œåƒè®¾ç½®å¤šä¸ªæ ‡ç­¾ã€‚# ä¾‹å¦‚docker build -t javawebenv:v1 . Dockerfileå†…å®¹1234567891011121314151617181920212223FROM centos:7 #ä½¿ç”¨centos7æœ€æ–°çš„å®˜æ–¹é•œåƒMAINTAINER samdockerdeveloperRUN mkdir -p /usr/local/tomcat7 \\&amp;&amp;mkdir -p /usr/local/jdk8WORKDIR /usr/local/src/ #ä½¿ç”¨è¯¥ç›®å½•ä½œä¸ºå·¥ä½œç›®å½•COPY apache-tomcat-7.0.99.zip /usr/local/src/COPY jdk-8u131-linux-x64.tar.gz /usr/local/src/COPY my.cnf /usr/local/src/RUN yum update -y \\&amp;&amp;yum install -y unzip \\&amp;&amp;unzip apache-tomcat-7.0.99.zip \\&amp;&amp;rpm --import /etc/pki/rpm-gpg/RPM* \\&amp;&amp;cp -R apache-tomcat-7.0.99/* /usr/local/tomcat7 \\&amp;&amp;chmod +x /usr/local/tomcat7/bin/*.sh \\&amp;&amp;tar -xf jdk-8u131-linux-x64.tar.gz -C /usr/local/jdk8 --strip-components 1 # æ”¾å¼ƒä¸Šçº§ç›®å½•è§£å‹åˆ°/usr/local/jdk8ç›®å½•ä¸‹ENV JAVA_HOME /usr/local/jdk8ENV CLASSPATH $JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jarENV CATALINA_HOME /usr/local/tomcat7ENV CATALINA_BASE /usr/local/tomcat7ENV PATH $PATH:$JAVA_HOME/bin:$CATALINA_HOME/lib:$CATALINA_HOME/binEXPOSE 8080 #æš´éœ²8080ç«¯å£ENTRYPOINT [\"/usr/local/tomcat7/bin/catalina.sh\",\"run\"] ä¸Šä¸‹æ–‡è·¯å¾„ï¼Œæ˜¯æŒ‡ docker åœ¨æ„å»ºé•œåƒï¼Œæœ‰æ—¶å€™æƒ³è¦ä½¿ç”¨åˆ°æœ¬æœºçš„æ–‡ä»¶ï¼ˆæ¯”å¦‚å¤åˆ¶ï¼‰ï¼Œdocker build å‘½ä»¤å¾—çŸ¥è¿™ä¸ªè·¯å¾„åï¼Œä¼šå°†è·¯å¾„ä¸‹çš„æ‰€æœ‰å†…å®¹æ‰“åŒ…ã€‚ è§£æï¼šç”±äº docker çš„è¿è¡Œæ¨¡å¼æ˜¯ C/Sã€‚æˆ‘ä»¬æœ¬æœºæ˜¯ Cï¼Œdockerå¼•æ“æ˜¯Sã€‚å®é™…çš„æ„å»ºè¿‡ç¨‹æ˜¯åœ¨dockerå¼•æ“ä¸‹å®Œæˆçš„ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™æ— æ³•ç”¨åˆ°æˆ‘ä»¬æœ¬æœºçš„æ–‡ä»¶ã€‚è¿™å°±éœ€è¦æŠŠæˆ‘ä»¬æœ¬æœºçš„æŒ‡å®šç›®å½•ä¸‹çš„æ–‡ä»¶ä¸€èµ·æ‰“åŒ…æä¾›ç»™ docker å¼•æ“ä½¿ç”¨ã€‚ å¦‚æœæœªè¯´æ˜æœ€åä¸€ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆé»˜è®¤ä¸Šä¸‹æ–‡è·¯å¾„å°±æ˜¯ Dockerfile æ‰€åœ¨çš„ä½ç½®ã€‚æ³¨æ„ï¼šä¸Šä¸‹æ–‡è·¯å¾„ä¸‹ä¸è¦æ”¾æ— ç”¨çš„æ–‡ä»¶ï¼Œå› ä¸ºä¼šä¸€èµ·æ‰“åŒ…å‘é€ç»™ docker å¼•æ“ï¼Œå¦‚æœæ–‡ä»¶è¿‡å¤šä¼šé€ æˆè¿‡ç¨‹ç¼“æ…¢ã€‚ ä½¿ç”¨çš„è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜123456789101112DockeræŠ¥é”™â€œDockerfile parse error line 1: FROM requires either one or three argumentsâ€ çœ‹å®˜æ–¹æ–‡æ¡£Formatï¼šä»¥'#' å¼€å¤´ä¸€è¡Œè¢«è§†ä¸ºè¯„è®ºï¼Œå‡ºç°åœ¨å…¶ä»–ä½ç½®è§†ä¸ºå‚æ•°,ä¹Ÿå°±ä¸éš¾ç†è§£æŠ¥é”™åŸå› ï¼šå°†å†™åœ¨åŒä¸€è¡Œçš„æ³¨é‡Šè§†ä¸ºå‚æ•°äº†ã€‚Failed to get D-Bus connection: Operation not permitted /etc/init.d/mysqld:å¯åŠ¨å‘½ä»¤ docker run -d -p 8080:8080 -v /root/webapps:/usr/local/tomcat7/webapps --name mycentos mycentos:7 /bin/bashä»¥ç‰¹æƒæ¨¡å¼è¿è¡Œå®¹å™¨å¯åŠ¨å‘½ä»¤æ”¹æˆ docker run -d -p 8080:8080 -v /root/webapps:/usr/local/tomcat7/webapps --name mycentos mycentos:7 /usr/sbin/init/etc/sysconfig/network æ–‡ä»¶å¤¹ä¸å­˜åœ¨ç¼–è¾‘/etc/init.d/mysqld ä¸­çš„ . /etc/sysconfig/networkä¿®æ”¹æˆ/etc/sysconfig/network-scripts/ifcfg-loæˆ–è€…ç”¨è½¯è¿æ¥ ln -s /etc/sysconfig/network-scripts/ifcfg-lo /etc/sysconfig/network","categories":[],"tags":[{"name":"docker","slug":"docker","permalink":"https://ydstudios.gitee.io/tags/docker/"}]},{"title":"ä»¥centos7é•œåƒä¸ºåŸºç¡€æ„å»ºä¸€ä¸ªjdk8å’Œtomcat7çš„é•œåƒ","slug":"ä»¥centos7é•œåƒä¸ºåŸºç¡€æ„å»ºä¸€ä¸ªjdk8å’Œtomcat7çš„é•œåƒ","date":"2020-01-04T23:22:55.000Z","updated":"2020-01-05T03:14:41.000Z","comments":true,"path":"post/97b746d3.html","link":"","permalink":"https://ydstudios.gitee.io/post/97b746d3.html","excerpt":"é¦–å…ˆæˆ‘ç®€å•è¯´ä¸€ä¸‹å®¹å™¨çš„ä¸€äº›çŸ¥è¯†ç‚¹ ä¸€ä¸ªå®¹å™¨åªè·‘ä¸€ä¸ªè¿›ç¨‹ï¼Œå¹¶ä¸”è¯¥è¿›ç¨‹åªèƒ½å‰å°è¿è¡Œã€‚ å®¹å™¨æœ‰å±‚çš„æ¦‚å¿µï¼Œå¦‚æœéœ€è¦å®šåˆ¶å®¹å™¨ï¼Œåº”è¯¥å°½é‡é€šè¿‡Dockerfileæ¥æ„å»ºå®¹å™¨ã€‚","text":"é¦–å…ˆæˆ‘ç®€å•è¯´ä¸€ä¸‹å®¹å™¨çš„ä¸€äº›çŸ¥è¯†ç‚¹ ä¸€ä¸ªå®¹å™¨åªè·‘ä¸€ä¸ªè¿›ç¨‹ï¼Œå¹¶ä¸”è¯¥è¿›ç¨‹åªèƒ½å‰å°è¿è¡Œã€‚ å®¹å™¨æœ‰å±‚çš„æ¦‚å¿µï¼Œå¦‚æœéœ€è¦å®šåˆ¶å®¹å™¨ï¼Œåº”è¯¥å°½é‡é€šè¿‡Dockerfileæ¥æ„å»ºå®¹å™¨ã€‚ ä»€ä¹ˆæ˜¯ Dockerfile Dockerfile æ˜¯ä¸€ä¸ªç”¨æ¥æ„å»ºé•œåƒçš„æ–‡æœ¬æ–‡ä»¶ï¼Œæ–‡æœ¬å†…å®¹åŒ…å«äº†ä¸€æ¡æ¡æ„å»ºé•œåƒæ‰€éœ€çš„æŒ‡ä»¤å’Œè¯´æ˜ã€‚ 1234567891011121314151617181920FROM centos:7 MAINTAINER samdockerdeveloperRUN mkdir -p /usr/local/tomcat7 \\&amp;&amp;mkdir -p /usr/local/jdk8WORKDIR /usr/local/src/COPY apache-tomcat-7.0.99.zip /usr/local/src/COPY jdk-8u131-linux-x64.tar.gz /usr/local/src/RUN yum update -y \\&amp;&amp;yum install -y unzip \\&amp;&amp;unzip apache-tomcat-7.0.99.zip \\&amp;&amp;cp -R apache-tomcat-7.0.99/* /usr/local/tomcat7 \\&amp;&amp;chmod +x /usr/local/tomcat7/bin/*.sh \\&amp;&amp;tar -xf jdk-8u131-linux-x64.tar.gz -C /usr/local/jdk8 --strip-components 1ENV JAVA_HOME /usr/local/jdk8 \\ENV CLASSPATH $JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar \\ENV CATALINA_HOME /usr/local/tomcat7 \\ENV CATALINA_BASE /usr/local/tomcat7 \\ENV PATH $PATH:$JAVA_HOME/bin:$CATALINA_HOME/lib:$CATALINA_HOME/binEXPOSE 8080ENTRYPOINT [\"/usr/local/tomcat7/bin/catalina.sh\",\"run\"] åœ¨DockerfileåŒçº§ç›®å½•é‡Œå­˜æ”¾å·²ç»ä¸‹è½½å¥½çš„apache-tomcat-7.0.99.zipã€jdk-8u131-linux-x64.tar.gzã€‚ æ³¨æ„ï¼šDockerfile çš„æŒ‡ä»¤æ¯æ‰§è¡Œä¸€æ¬¡éƒ½ä¼šåœ¨ docker ä¸Šæ–°å»ºä¸€å±‚ã€‚æ‰€ä»¥è¿‡å¤šæ— æ„ä¹‰çš„å±‚ï¼Œä¼šé€ æˆé•œåƒè†¨èƒ€è¿‡å¤§ã€‚ä¾‹å¦‚ï¼š 123456789FROM centosRUN yum install wgetRUN wget -O redis.tar.gz \"http://download.redis.io/releases/redis-5.0.3.tar.gz\"RUN tar -xvf redis.tar.gzä»¥ä¸Šæ‰§è¡Œä¼šåˆ›å»º 3 å±‚é•œåƒã€‚å¯ç®€åŒ–ä¸ºä»¥ä¸‹æ ¼å¼ï¼šFROM centosRUN yum install wget \\ &amp;&amp; wget -O redis.tar.gz \"http://download.redis.io/releases/redis-5.0.3.tar.gz\" \\ &amp;&amp; tar -xvf redis.tar.gz å¦‚ä¸Šï¼Œä»¥ &amp;&amp; ç¬¦å·è¿æ¥å‘½ä»¤ï¼Œè¿™æ ·æ‰§è¡Œåï¼Œåªä¼šåˆ›å»º 1 å±‚é•œåƒã€‚ å¼€å§‹æ„å»ºé•œåƒåœ¨ Dockerfile æ–‡ä»¶çš„å­˜æ”¾ç›®å½•ä¸‹ï¼Œæ‰§è¡Œæ„å»ºåŠ¨ä½œã€‚ ä»¥ä¸‹ç¤ºä¾‹ï¼Œé€šè¿‡ç›®å½•ä¸‹çš„ Dockerfile æ„å»ºä¸€ä¸ª samjavawebenv:v2ï¼ˆé•œåƒåç§°:é•œåƒæ ‡ç­¾ï¼‰ã€‚ æ³¨ï¼šæœ€åçš„ . ä»£è¡¨æœ¬æ¬¡æ‰§è¡Œçš„ä¸Šä¸‹æ–‡è·¯å¾„ 12# docker build -t name:tag .docker build -t samjavawebenv:v2 .","categories":[],"tags":[{"name":"linux","slug":"linux","permalink":"https://ydstudios.gitee.io/tags/linux/"},{"name":"docker","slug":"docker","permalink":"https://ydstudios.gitee.io/tags/docker/"}]},{"title":"SpringMvcä½¿ç”¨@Asyncæ³¨è§£å®ç°æœ‰è¿”å›å€¼å’Œæ— è¿”å›å€¼çš„å¼‚æ­¥å¤„ç†","slug":"SpringMvcä½¿ç”¨-Asyncæ³¨è§£å®ç°æœ‰è¿”å›å€¼å’Œæ— è¿”å›å€¼çš„å¼‚æ­¥å¤„ç†","date":"2020-01-03T23:12:21.000Z","updated":"2020-10-02T10:34:35.000Z","comments":true,"path":"post/e7e78673.html","link":"","permalink":"https://ydstudios.gitee.io/post/e7e78673.html","excerpt":"1. SpringMvcä½¿ç”¨@Asyncæ³¨è§£å®ç°æœ‰è¿”å›å€¼å’Œæ— è¿”å›å€¼çš„å¼‚æ­¥å¤„ç† å¼‚æ­¥è°ƒç”¨å¯¹åº”çš„æ˜¯åŒæ­¥è°ƒç”¨ï¼ŒåŒæ­¥è°ƒç”¨æŒ‡ç¨‹åºæŒ‰ç…§å®šä¹‰é¡ºåºä¾æ¬¡æ‰§è¡Œï¼Œæ¯ä¸€è¡Œç¨‹åºéƒ½å¿…é¡»ç­‰å¾…ä¸Šä¸€è¡Œç¨‹åºæ‰§è¡Œå®Œæˆä¹‹åæ‰èƒ½æ‰§è¡Œï¼›å¼‚æ­¥è°ƒç”¨æŒ‡ç¨‹åºåœ¨é¡ºåºæ‰§è¡Œæ—¶ï¼Œä¸ç­‰å¾…å¼‚æ­¥è°ƒç”¨çš„è¯­å¥è¿”å›ç»“æœå°±æ‰§è¡Œåé¢çš„ç¨‹åºã€‚","text":"1. SpringMvcä½¿ç”¨@Asyncæ³¨è§£å®ç°æœ‰è¿”å›å€¼å’Œæ— è¿”å›å€¼çš„å¼‚æ­¥å¤„ç† å¼‚æ­¥è°ƒç”¨å¯¹åº”çš„æ˜¯åŒæ­¥è°ƒç”¨ï¼ŒåŒæ­¥è°ƒç”¨æŒ‡ç¨‹åºæŒ‰ç…§å®šä¹‰é¡ºåºä¾æ¬¡æ‰§è¡Œï¼Œæ¯ä¸€è¡Œç¨‹åºéƒ½å¿…é¡»ç­‰å¾…ä¸Šä¸€è¡Œç¨‹åºæ‰§è¡Œå®Œæˆä¹‹åæ‰èƒ½æ‰§è¡Œï¼›å¼‚æ­¥è°ƒç”¨æŒ‡ç¨‹åºåœ¨é¡ºåºæ‰§è¡Œæ—¶ï¼Œä¸ç­‰å¾…å¼‚æ­¥è°ƒç”¨çš„è¯­å¥è¿”å›ç»“æœå°±æ‰§è¡Œåé¢çš„ç¨‹åºã€‚ 1.1 åŒæ­¥æ–¹å¼è°ƒç”¨ä»£ç  ç›¸å…³ä»£ç  12345678910111213141516171819202122232425262728@Servicepublic class TaskService &#123; public void doTaskOne() throws Exception &#123; System.out.println(\"å¼€å§‹åšä»»åŠ¡ä¸€\"); long start = System.currentTimeMillis(); Thread.sleep(2000); long end = System.currentTimeMillis(); System.out.println(\"å®Œæˆä»»åŠ¡äºŒï¼Œè€—æ—¶ï¼š%s\" , (end - start) + \"æ¯«ç§’\"); &#125; public void doTaskTwo() throws Exception &#123; System.out.println(\"å¼€å§‹åšä»»åŠ¡äºŒ\"); long start = System.currentTimeMillis(); Thread.sleep(3000); long end = System.currentTimeMillis(); System.out.println(\"å®Œæˆä»»åŠ¡äºŒï¼Œè€—æ—¶ï¼š%s\" , (end - start) + \"æ¯«ç§’\"); &#125; public void doTaskThree() throws Exception &#123; System.out.println(\"å¼€å§‹åšä»»åŠ¡ä¸‰\"); long start = System.currentTimeMillis(); Thread.sleep(4000); long end = System.currentTimeMillis(); System.out.println(\"å®Œæˆä»»åŠ¡äºŒï¼Œè€—æ—¶ï¼š%s\" , (end - start) + \"æ¯«ç§’\"); &#125;&#125; åŒæ­¥è°ƒç”¨ 1234567891011@Autowiredprivate TaskService task;public String test() &#123; try &#123; task.doTaskOne(); task.doTaskTwo(); task.doTaskThree(); &#125;catch (Exception e)&#123; &#125;&#125; ä¸‹é¢æ˜¯è¿è¡Œç»“æœï¼Œå¯ä»¥çœ‹åˆ°ä¸‰ä¸ªæ–¹æ³•æ˜¯ä¾æ¬¡æ‰§è¡Œçš„ï¼Œåˆ†åˆ«è€—æ—¶2ç§’ã€3ç§’ã€4ç§’ã€æ€»è€—æ—¶9ç§’ 123456å¼€å§‹åšä»»åŠ¡ä¸€å®Œæˆä»»åŠ¡ä¸€ï¼Œè€—æ—¶ï¼š2001æ¯«ç§’å¼€å§‹åšä»»åŠ¡äºŒå®Œæˆä»»åŠ¡äºŒï¼Œè€—æ—¶ï¼š3000æ¯«ç§’å¼€å§‹åšä»»åŠ¡ä¸‰å®Œæˆä»»åŠ¡ä¸‰ï¼Œè€—æ—¶ï¼š4001æ¯«ç§’ ä¸Šé¢çš„åŒæ­¥è°ƒç”¨ï¼Œè™½ç„¶é¡ºåˆ©åœ°å®Œæˆäº†ä¸‰ä¸ªä»»åŠ¡ï¼Œä½†æ˜¯æ‰§è¡Œæ—¶é—´æ¯”è¾ƒé•¿ï¼Œå¦‚æœè¿™ä¸‰ä¸ªä»»åŠ¡æ²¡æœ‰ä¾èµ–å…³ç³»ï¼Œå¯ä»¥å¹¶å‘æ‰§è¡Œçš„è¯ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨å¼‚æ­¥è°ƒç”¨çš„æ–¹æ³•ã€‚ 2. å¼‚æ­¥æ–¹å¼è°ƒç”¨ä»£ç æ— è¿”å›å€¼ é¦–å…ˆåœ¨springä¸­é…ç½®ç›¸å…³å‚æ•°å¼€å¯å¼‚æ­¥è°ƒç”¨ 123456789101112&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:context=\"http://www.springframework.org/schema/context\" xmlns:task=\"http://www.springframework.org/schema/task\" xsi:schemaLocation=\" http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task.xsd\"&gt; &lt;task:annotation-driven executor=\"taskExecutor\" /&gt; &lt;task:executor id=\"taskExecutor\" pool-size=\"20\" queue-capacity=\"1000\"/&gt;&lt;/beans&gt; å¦‚æœç›´æ¥æŒ‰ç…§ä¸‹é¢çš„æ–¹å¼é…ç½®ï¼Œåˆ™ Spring ä¼šä½¿ç”¨é»˜è®¤çš„çº¿ç¨‹æ±  org.springframework.core.task.SimpleAsyncTaskExecutorä½†è¿™ä¸ª SimpleAsyncTaskExecutor ä¸æ˜¯çœŸçš„çº¿ç¨‹æ± ï¼Œè¿™ä¸ªç±»ä¸é‡ç”¨çº¿ç¨‹ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹ã€‚ 123456789101112131415&lt;task:annotation-driven/&gt;# è¯¦è§spring-context-4.1.7.RELEASE.jar/org/springframework/scheduling/config/spring-task-4.0.xsd çš„æè¿°&lt;xsd:attribute name=\"executor\" type=\"xsd:string\" use=\"optional\"&gt; &lt;xsd:annotation&gt; &lt;xsd:documentation&gt;&lt;![CDATA[Specifies the java.util.Executor instance to use when invoking asynchronous methods.If not provided, an instance of org.springframework.core.task.SimpleAsyncTaskExecutorwill be used by default.Note that as of Spring 3.1.2, individual @Async methods may qualify which executor touse, meaning that the executor specified here acts as a default for all non-qualified@Async methods. ]]&gt;&lt;/xsd:documentation&gt; &lt;/xsd:annotation&gt; åœ¨æ–¹æ³•ä¸ŠåŠ ä¸Š @Async æ³¨è§£å°±èƒ½å°†åŒæ­¥å‡½æ•°å˜æˆå¼‚æ­¥å‡½æ•°ï¼Œæ”¹é€ åçš„ä»£ç  123456789101112131415161718192021222324252627282930import java.util.concurrent.Future;@Servicepublic class TaskService &#123; @Async public void doTaskOne() throws Exception &#123; System.out.println(\"å¼€å§‹åšä»»åŠ¡ä¸€\"); long start = System.currentTimeMillis(); Thread.sleep(2000); long end = System.currentTimeMillis(); System.out.println(\"å®Œæˆä»»åŠ¡äºŒï¼Œè€—æ—¶ï¼š%s\" , (end - start) + \"æ¯«ç§’\"); &#125; @Async public void doTaskTwo() throws Exception &#123; System.out.println(\"å¼€å§‹åšä»»åŠ¡äºŒ\"); long start = System.currentTimeMillis(); Thread.sleep(3000); long end = System.currentTimeMillis(); System.out.println(\"å®Œæˆä»»åŠ¡äºŒï¼Œè€—æ—¶ï¼š%s\" , (end - start) + \"æ¯«ç§’\"); &#125; @Async public void doTaskThree() throws Exception &#123; System.out.println(\"å¼€å§‹åšä»»åŠ¡ä¸‰\"); long start = System.currentTimeMillis(); Thread.sleep(4000); long end = System.currentTimeMillis(); System.out.println(\"å®Œæˆä»»åŠ¡äºŒï¼Œè€—æ—¶ï¼š%s\" , (end - start) + \"æ¯«ç§’\"); &#125;&#125; é‡æ–°è°ƒç”¨ä¹‹åçš„è¿è¡Œç»“æœå¦‚ä¸‹ï¼š 123456å¼€å§‹åšä»»åŠ¡ä¸‰å¼€å§‹åšä»»åŠ¡äºŒå¼€å§‹åšä»»åŠ¡ä¸€å®Œæˆä»»åŠ¡ä¸€ï¼Œè€—æ—¶ï¼š2000æ¯«ç§’å®Œæˆä»»åŠ¡äºŒï¼Œè€—æ—¶ï¼š3001æ¯«ç§’å®Œæˆä»»åŠ¡ä¸‰ï¼Œè€—æ—¶ï¼š4000æ¯«ç§’ æ³¨æ„äº‹é¡¹ @Async æ‰€ä¿®é¥°çš„å‡½æ•°ä¸è¦å®šä¹‰ä¸º static ç±»å‹ï¼Œè¿™æ ·å¼‚æ­¥è°ƒç”¨ä¸ä¼šç”Ÿæ•ˆã€‚ è°ƒç”¨æ–¹æ³•å’Œå¼‚æ­¥å‡½æ•°ä¸èƒ½åœ¨ä¸€ä¸ª class ä¸­ã€‚ å¯ä»¥åœ¨ä½¿ç”¨çš„æ—¶å€™è‡ªå®šä¹‰çº¿ç¨‹æ±  @Async(&quot;poolTaskExecutor&quot;) 3. å¼‚æ­¥æ–¹å¼è°ƒç”¨ä»£ç æœ‰è¿”å›å€¼å¦‚æœæƒ³çŸ¥é“å¼‚æ­¥å‡½æ•°ä»€ä¹ˆæ—¶å€™æ‰§è¡Œå®Œï¼Œé‚£å°±éœ€è¦ä½¿ç”¨ Future (AsyncResultæ˜¯Futureçš„å­ç±»)æ¥è¿”å›å¼‚æ­¥è°ƒç”¨çš„ç»“æœã€‚æ”¹é€ åçš„ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334@Servicepublic class TaskService &#123; @Async public Future&lt;String&gt; doTaskOne() &#123; System.out.println(\"å¼€å§‹åšä»»åŠ¡ä¸€\"); long start = System.currentTimeMillis(); Thread.sleep(2000); long end = System.currentTimeMillis(); System.out.println(\"å®Œæˆä»»åŠ¡äºŒï¼Œè€—æ—¶ï¼š%s\" , (end - start) + \"æ¯«ç§’\"); return new AsyncResult&lt;&gt;(\"ä»»åŠ¡ä¸€å®Œæˆ\"); &#125; @Async public Future&lt;String&gt; doTaskTwo() &#123; System.out.println(\"å¼€å§‹åšä»»åŠ¡äºŒ\"); long start = System.currentTimeMillis(); Thread.sleep(3000); long end = System.currentTimeMillis(); System.out.println(\"å®Œæˆä»»åŠ¡äºŒï¼Œè€—æ—¶ï¼š%s\" , (end - start) + \"æ¯«ç§’\"); return new AsyncResult&lt;&gt;(\"ä»»åŠ¡äºŒå®Œæˆ\"); &#125; @Async public Future&lt;String&gt; doTaskThree() &#123; System.out.println(\"å¼€å§‹åšä»»åŠ¡ä¸‰\"); long start = System.currentTimeMillis(); Thread.sleep(4000); long end = System.currentTimeMillis(); System.out.println(\"å®Œæˆä»»åŠ¡äºŒï¼Œè€—æ—¶ï¼š%s\" , (end - start) + \"æ¯«ç§’\"); return new AsyncResult&lt;&gt;(\"ä»»åŠ¡ä¸‰å®Œæˆ\"); &#125;&#125; å¼‚æ­¥æ–¹å¼è°ƒç”¨ä»£ç æœ‰è¿”å›å€¼ 123456789101112131415161718192021222324252627282930@Autowiredprivate TaskService task;public List&lt;String&gt; test() &#123; List&lt;String&gt; result = new ArrayList(16); StopWatch stopWatch = new StopWatch(); stopWatch.start(\"æ¥å£é€Ÿåº¦ç»Ÿè®¡\"); // 3ç§’è¶…æ—¶ int timeout = 3; try &#123; Future&lt;String&gt; task1 = task.doTaskOne(); Future&lt;String&gt; task2 = task.doTaskTwo(); Future&lt;String&gt; task3 = task.doTaskThree(); String taskString1= task1.get(timeout, TimeUnit.SECONDS); String taskString2= task2.get(timeout, TimeUnit.SECONDS); String taskString3= task3.get(timeout, TimeUnit.SECONDS); result.add(taskString1); result.add(taskString2); result.add(taskString3); &#125;catch (TimeoutException | InterruptedException | ExecutionException e)&#123; return result; &#125; finally &#123; stopWatch.stop(); log.info(stopWatch.prettyPrint()); &#125; return result;&#125; 12345678910111213å¼€å§‹åšä»»åŠ¡ä¸‰å¼€å§‹åšä»»åŠ¡äºŒå¼€å§‹åšä»»åŠ¡ä¸€å®Œæˆä»»åŠ¡ä¸€ï¼Œè€—æ—¶ï¼š2001æ¯«ç§’å®Œæˆä»»åŠ¡äºŒï¼Œè€—æ—¶ï¼š3000æ¯«ç§’å®Œæˆä»»åŠ¡ä¸‰ï¼Œè€—æ—¶ï¼š4001æ¯«ç§’StopWatch '': running time (millis) = 248-----------------------------------------ms % Task name-----------------------------------------04036 100% æ¥å£é€Ÿåº¦ç»Ÿè®¡ åˆšå¼€å§‹æƒ³åˆ©ç”¨CountDownLatchæ¥å®ç°ç­‰å¾…æ‰€æœ‰çº¿ç¨‹ç»“æŸæ•´åˆç»“æœï¼Œåæ¥è°ƒæ•´ä¸º Future çš„ get(long timeout, TimeUnit unit) æ¥å®ç°çº¿ç¨‹çš„è¶…æ—¶æ§åˆ¶ï¼Œæˆ‘çœ‹æœ‰äº›çš„ä¾‹å­ä½¿ç”¨æ­»å¾ªç¯æ¥é˜»å¡æ•´åˆçº¿ç¨‹çš„æ‰§è¡Œç»“æœï¼Œè¿™æ ·åšæ˜¯æœ‰äº›é—®é¢˜çš„ï¼Œå¦‚æœæœ‰ä¸ªçº¿ç¨‹ä¸€ç›´æ²¡æœ‰ç»“æŸè¿è¡Œï¼Œé‚£å°±å®ŒçŠŠå­äº†ï¼ è¿™æ˜¯ä¸€ç§å¸¸è§çš„åœºæ™¯å°†ä¸€ä¸ªå¤§çš„ä»»åŠ¡åˆ‡åˆ†ä¸ºæ•°ä¸ªå­ä»»åŠ¡ï¼Œå¹¶è¡Œå¤„ç†æ‰€æœ‰å­ä»»åŠ¡ï¼Œå½“æ‰€æœ‰å­ä»»åŠ¡éƒ½æˆåŠŸç»“æŸæ—¶å†ç»§ç»­å¤„ç†åé¢çš„é€»è¾‘ã€‚è¿˜æœ‰ä¸€ç§åšæ³•æ˜¯åˆ©ç”¨CountDownLatch, ä¸»çº¿ç¨‹æ„é€ countDownLatchå¯¹è±¡ï¼Œlatchçš„å¤§å°ä¸ºå­ä»»åŠ¡çš„æ€»æ•°ï¼Œæ¯ä¸€ä¸ªä»»åŠ¡æŒæœ‰countDownLatchçš„å¼•ç”¨ï¼Œä»»åŠ¡å®Œæˆæ—¶å¯¹latchå‡1ï¼Œä¸»çº¿ç¨‹é˜»å¡åœ¨countDownLatch.awaitæ–¹æ³•ä¸Šï¼Œå½“æ‰€æœ‰å­ä»»åŠ¡éƒ½æˆåŠŸæ‰§è¡Œå®Œåï¼Œlatch=0, ä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œã€‚ æ€»ç»“å¼‚æ­¥è°ƒç”¨å¯ä»¥æå‡æ¥å£æ€§èƒ½ã€‚æ¯”å¦‚å¯¼å‡ºä¸‹è½½ã€å‘é€é‚®ä»¶çŸ­ä¿¡ç­‰ä»£ç ï¼Œå¯ä»¥ä½¿ç”¨å¼‚æ­¥æ‰§è¡Œã€‚ å‚è€ƒ https://blog.csdn.net/qqfo24/article/details/81383022","categories":[],"tags":[{"name":"SpringMvc","slug":"SpringMvc","permalink":"https://ydstudios.gitee.io/tags/SpringMvc/"},{"name":"Async","slug":"Async","permalink":"https://ydstudios.gitee.io/tags/Async/"}]},{"title":"åœ¨CentOS7ä¸Šä½¿ç”¨yumå®‰è£…Docker","slug":"åœ¨CentOS7ä¸Šä½¿ç”¨yumå®‰è£…Docker","date":"2019-12-23T22:30:18.000Z","updated":"2020-01-13T14:39:01.000Z","comments":true,"path":"post/ef24ce2b.html","link":"","permalink":"https://ydstudios.gitee.io/post/ef24ce2b.html","excerpt":"ç›®å‰åœ¨ Linux æ“ä½œç³»ç»Ÿä¸Šå®‰è£… Dockerï¼Œå¯¹ç³»ç»Ÿç‰ˆæœ¬æœ‰ä»¥ä¸‹è¦æ±‚ï¼š CentOSï¼š7 Debianï¼š7.7ï¼ˆWheezy LTSï¼‰ã€8.0ï¼ˆJessie LTSï¼‰ã€9ï¼ˆStretchï¼‰ Fedoraï¼š24ã€25 Ubuntuï¼š16.04ï¼ˆXenial LTSï¼‰ã€14.04ï¼ˆTrusty LTSï¼‰ã€17.04ï¼ˆZestyï¼‰","text":"ç›®å‰åœ¨ Linux æ“ä½œç³»ç»Ÿä¸Šå®‰è£… Dockerï¼Œå¯¹ç³»ç»Ÿç‰ˆæœ¬æœ‰ä»¥ä¸‹è¦æ±‚ï¼š CentOSï¼š7 Debianï¼š7.7ï¼ˆWheezy LTSï¼‰ã€8.0ï¼ˆJessie LTSï¼‰ã€9ï¼ˆStretchï¼‰ Fedoraï¼š24ã€25 Ubuntuï¼š16.04ï¼ˆXenial LTSï¼‰ã€14.04ï¼ˆTrusty LTSï¼‰ã€17.04ï¼ˆZestyï¼‰ ä½¿ç”¨ yum è¿›è¡Œå®‰è£…12345678910111213141516171819202122232425262728293031# step 1: å®‰è£…å¿…è¦çš„ä¸€äº›ç³»ç»Ÿå·¥å…·sudo yum install -y yum-utils device-mapper-persistent-data lvm2# Step 2: æ·»åŠ è½¯ä»¶æºä¿¡æ¯sudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo# Step 3: æ›´æ–°å¹¶å®‰è£…Docker-CEsudo yum makecache fastsudo yum -y install docker-ce# Step 4: å¼€å¯DockeræœåŠ¡sudo service docker start# å¼€æœºå¯åŠ¨systemctl enable docker# æ³¨æ„ï¼š# å®˜æ–¹è½¯ä»¶æºé»˜è®¤å¯ç”¨äº†æœ€æ–°çš„è½¯ä»¶ï¼Œæ‚¨å¯ä»¥é€šè¿‡ç¼–è¾‘è½¯ä»¶æºçš„æ–¹å¼è·å–å„ä¸ªç‰ˆæœ¬çš„è½¯ä»¶åŒ…ã€‚# ä¾‹å¦‚å®˜æ–¹å¹¶æ²¡æœ‰å°†æµ‹è¯•ç‰ˆæœ¬çš„è½¯ä»¶æºç½®ä¸ºå¯ç”¨ï¼Œæ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å¼€å¯ã€‚åŒç†å¯ä»¥å¼€å¯å„ç§æµ‹è¯•ç‰ˆæœ¬ç­‰ã€‚# vim /etc/yum.repos.d/docker-ee.repo# å°†[docker-ce-test]ä¸‹æ–¹çš„enabled=0ä¿®æ”¹ä¸ºenabled=1## å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„Docker-CE:# Step 1: æŸ¥æ‰¾Docker-CEçš„ç‰ˆæœ¬:# yum list docker-ce.x86_64 --showduplicates | sort -r# Loading mirror speeds from cached hostfile# Loaded plugins: branch, fastestmirror, langpacks# docker-ce.x86_64 17.03.1.ce-1.el7.centos docker-ce-stable# docker-ce.x86_64 17.03.1.ce-1.el7.centos @docker-ce-stable# docker-ce.x86_64 17.03.0.ce-1.el7.centos docker-ce-stable# Available Packages# Step2: å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„Docker-CE: (VERSIONä¾‹å¦‚ä¸Šé¢çš„17.03.0.ce.1-1.el7.centos)# sudo yum -y install docker-ce-[VERSION] å®‰è£…æ ¡éªŒ12345678910111213141516171819202122232425262728[root@izuf6gp8l1zfgu3hmvia6gz ~]# docker versionClient: Docker Engine - Community Version: 19.03.5 API version: 1.40 Go version: go1.12.12 Git commit: 633a0ea Built: Wed Nov 13 07:25:41 2019 OS/Arch: linux/amd64 Experimental: falseServer: Docker Engine - Community Engine: Version: 19.03.5 API version: 1.40 (minimum version 1.12) Go version: go1.12.12 Git commit: 633a0ea Built: Wed Nov 13 07:24:18 2019 OS/Arch: linux/amd64 Experimental: false containerd: Version: 1.2.10 GitCommit: b34a5c8af56e510852c35414db4c1f4fa6172339 runc: Version: 1.0.0-rc8+dev GitCommit: 3e425f80a8c931f88e6d94a8c831b9d5aa481657 docker-init: Version: 0.18.0 GitCommit: fec3683 è‡³æ­¤dockerå®‰è£…å®Œæˆã€‚ å‚è€ƒèµ„æ–™","categories":[],"tags":[{"name":"docker","slug":"docker","permalink":"https://ydstudios.gitee.io/tags/docker/"},{"name":"centos","slug":"centos","permalink":"https://ydstudios.gitee.io/tags/centos/"}]},{"title":"Macä¸‹å®‰è£…zookeeper","slug":"Macä¸‹å®‰è£…zookeeper","date":"2019-12-07T22:15:07.000Z","updated":"2019-12-15T15:50:49.000Z","comments":true,"path":"post/d97b6c63.html","link":"","permalink":"https://ydstudios.gitee.io/post/d97b6c63.html","excerpt":"ä»zookeeperä¸‹è½½ï¼Œæ³¨æ„ä¸‹è½½å¸¦-binåç¼€çš„å®‰è£…åŒ…ï¼Œä¸ç„¶å®‰è£…ä¹‹åå¯åŠ¨ä¼šå‡ºç°ä»¥ä¸‹çš„é”™è¯¯ã€‚","text":"ä»zookeeperä¸‹è½½ï¼Œæ³¨æ„ä¸‹è½½å¸¦-binåç¼€çš„å®‰è£…åŒ…ï¼Œä¸ç„¶å®‰è£…ä¹‹åå¯åŠ¨ä¼šå‡ºç°ä»¥ä¸‹çš„é”™è¯¯ã€‚ 12é”™è¯¯: æ‰¾ä¸åˆ°æˆ–æ— æ³•åŠ è½½ä¸»ç±»org.apache.zookeeper.server.quorum.QuorumPeerMain è§£å†³æ–¹æ¡ˆåŸæ¥æ˜¯å› ä¸ºä»ç‰ˆæœ¬3.5.5å¼€å§‹ï¼Œå¸¦æœ‰binåç§°çš„åŒ…æ‰æ˜¯æˆ‘ä»¬æƒ³è¦çš„ä¸‹è½½å¯ä»¥ç›´æ¥ä½¿ç”¨çš„é‡Œé¢æœ‰ç¼–è¯‘åçš„äºŒè¿›åˆ¶çš„åŒ…ï¼Œè€Œä¹‹å‰çš„æ™®é€šçš„tar.gzçš„åŒ…é‡Œé¢æ˜¯åªæ˜¯æºç çš„åŒ…æ— æ³•ç›´æ¥ä½¿ç”¨ã€‚ å°†ä¸‹è½½åçš„å®‰è£…åŒ…è§£å‹åˆ° /usr/local/zookeeper ç›®å½•ä¸‹ï¼Œè¿›è¡Œåç»­çš„å®‰è£…é…ç½®ã€‚ ç¼–è¾‘é…ç½®æ–‡ä»¶åœ¨confç›®å½•ä¸‹æ‹·è´ zoo_sample.cfg æ–‡ä»¶æ–°å»º zoo.cfgé…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹æˆ–è€…æ–°åŠ ä»¥ä¸‹å†…å®¹ï¼š 1234567891011121314151617181920# The number of milliseconds of each ticktickTime=2000# The number of ticks that the initial # synchronization phase can takeinitLimit=10# The number of ticks that can pass between # sending a request and getting an acknowledgementsyncLimit=5# the directory where the snapshot is stored.# do not use /tmp for storage, /tmp here is just # example sakes.dataDir=/usr/local/zookeeper/data# the port at which the clients will connectclientPort=2181#tickTime: zookeeperä¸­ä½¿ç”¨çš„åŸºæœ¬æ—¶é—´å•ä½, æ¯«ç§’å€¼.#dataDir: æ•°æ®ç›®å½•. å¯ä»¥æ˜¯ä»»æ„ç›®å½•.#dataLogDir: logç›®å½•, åŒæ ·å¯ä»¥æ˜¯ä»»æ„ç›®å½•. å¦‚æœæ²¡æœ‰è®¾ç½®è¯¥å‚æ•°, å°†ä½¿ç”¨å’Œ#dataDirç›¸åŒçš„è®¾ç½®.æ­¤ç›®å½•å¯ä»¥ä¸åŠ #clientPort: ç›‘å¬clientè¿æ¥çš„ç«¯å£å·. å°†zookeeperåŠ å…¥ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­12345678910111213141516171819202122sudo vim /etc/profilePATH=$PATH:/usr/local/sphinx/bin:/usr/local/elasticsearch/bin:/usr/local/mycat/bin:/usr/local/zookeeper/binexport PATH#è®©ç¯å¢ƒå˜é‡ç«‹é©¬ç”Ÿæ•ˆsource /etc/profile# å¯åŠ¨Sam-Mac-2:~ Sam$ zkServer.sh start/usr/bin/javaZooKeeper JMX enabled by defaultUsing config: /usr/local/zookeeper/bin/../conf/zoo.cfgStarting zookeeper ... STARTED# å…³é—­Sam-Mac-2:~ Sam$ zkServer.sh stop/usr/bin/javaZooKeeper JMX enabled by defaultUsing config: /usr/local/zookeeper/bin/../conf/zoo.cfgStopping zookeeper ... STOPPED","categories":[],"tags":[{"name":"zookeeper","slug":"zookeeper","permalink":"https://ydstudios.gitee.io/tags/zookeeper/"},{"name":"mac","slug":"mac","permalink":"https://ydstudios.gitee.io/tags/mac/"}]},{"title":"Hello World","slug":"hello-world","date":"2019-11-10T13:19:35.000Z","updated":"2020-12-06T05:21:18.000Z","comments":true,"path":"post/4a17b156.html","link":"","permalink":"https://ydstudios.gitee.io/post/4a17b156.html","excerpt":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[],"tags":[]},{"title":"è§£å†³nested exception is java.lang.IllegalArgumentException Could not resolve placeholder alipay.appId in string value  $ {alipay.appId}","slug":"è§£å†³nested-exception-is-java-lang-IllegalArgumentException-Could-not-resolve-placeholder-alipay-appId-in-string-value-alipay-appId","date":"2019-09-18T23:52:05.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/cf36aee2.html","link":"","permalink":"https://ydstudios.gitee.io/post/cf36aee2.html","excerpt":"å¼€å‘çš„æ—¶å€™å‡ºç°äº†è¿™ç§é”™è¯¯ nested exception is java .lang.IllegalArgumentException: Could not resolve placeholder â€˜alipay.appIdâ€™ in string value â€œ${alipay.appId}â€","text":"å¼€å‘çš„æ—¶å€™å‡ºç°äº†è¿™ç§é”™è¯¯ nested exception is java .lang.IllegalArgumentException: Could not resolve placeholder â€˜alipay.appIdâ€™ in string value â€œ${alipay.appId}â€ å¤§æ„æ˜¯Springä¸èƒ½å¤„ç†ç¬¬äºŒä¸ªå±æ€§æ–‡ä»¶ä¸­çš„é…ç½®ä¿¡æ¯ï¼Œå› ä¸ºSpringä¸å…è®¸å®šä¹‰å¤šä¸ªPropertyPlaceholderConfigureræˆ–context:property-placeholderã€‚Springç”¨åå°„æ‰«æçš„å‘ç°æœºåˆ¶ï¼Œåœ¨æ¢æµ‹åˆ°Springå®¹å™¨ä¸­æœ‰ä¸€ä¸ªorg.springframework.beans.factory.config.PropertyPlaceholderConfigurerçš„Beanå°±ä¼šåœæ­¢å¯¹å‰©ä½™PropertyPlaceholderConfigurerçš„æ‰«æï¼ˆSpring 3.1å·²ç»ä½¿ç”¨PropertySourcesPlaceholderConfigureræ›¿ä»£ PropertyPlaceholderConfigureräº†ï¼‰ã€‚æ¢å¥è¯è¯´ï¼Œå³Springå®¹å™¨ä»…å…è®¸æœ€å¤šå®šä¹‰ä¸€ä¸ªPropertyPlaceholderConfigurer(æˆ–context:property-placeholder)ï¼Œå…¶ä½™çš„ä¼šè¢«Springå¿½ç•¥æ‰ï¼ˆå…¶å®Springå¦‚æœæä¾›ä¸€ä¸ªè­¦å‘Šå°±å¥½äº†ï¼‰ã€‚ é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ é€šé…ç¬¦è§£å†³ã€é€—å·åˆ†éš” ä½¿ç”¨é€šé…ç¬¦è®©springä¸€æ¬¡æ€§è¯»å–å¤šä¸ªå±æ€§æ–‡ä»¶åˆ°ä¸€ä¸ª PropertyPlaceholderConfigurer beanä¸­12&lt;context:property-placeholder location=\"classpath:conf/*.properties\"/&gt; æˆ–è€…ä½¿ç”¨ 1&lt;context:property-placeholder location=\"classpath:conf/db.properties,conf/alipay.properties\"/&gt; ä½¿ç”¨å¤šä¸ªcontext:property-placeholder åˆ†å¼€å®šä¹‰ï¼Œæ³¨æ„è¦åŠ ä¸Š ignore-unresolvable å±æ€§12&lt;context:property-placeholder location=\"classpath:conf/db.properties\" ignore-unresolvable=\"true\"/&gt;&lt;context:property-placeholder location=\"classpath:conf/alipay.properties\" ignore-unresolvable=\"true\"/&gt; åœ¨æ¯ä¸ªPropertySourcesPlaceholderConfigureré…ç½®ä¸­æ·»åŠ  æˆ–è€…åœ¨æ¯ä¸ªcontext:property-placeholderä¸­éƒ½åŠ ä¸Šignore-unresolvable=â€trueâ€ å› ä¸ºåœ¨ä½ ä½¿ç”¨@Value(â€œ${xx}â€)æˆ–åœ¨xmlä¸­ä½¿ç”¨${xx}è·å–å±æ€§æ—¶ï¼ŒSpringä¼šåœ¨ç¬¬ä¸€ä¸ªè¯»å–åˆ°çš„å±æ€§æ–‡ä»¶ä¸­å»æ‰¾ï¼Œå¦‚æœæ²¡æœ‰å°±ç›´æ¥æŠ›å‡ºå¼‚å¸¸ï¼Œè€Œä¸ä¼šç»§ç»­å»ç¬¬äºŒä¸ªå±æ€§æ–‡ä»¶ä¸­æ‰¾ ä¸€ä¸ªPropertySourcesPlaceholderConfigurerä¸­åŒ…å«å¤šä¸ªå±æ€§æ–‡ä»¶ï¼Œå’Œæ–¹æ¡ˆ1åŸç†ç›¸åŒ1234567&lt;bean id=\"propertyConfigurer\" class=\"org.springframework.context.support.PropertySourcesPlaceholderConfigurer\"&gt;&lt;property name=\"locations\"&gt; &lt;list&gt; &lt;value&gt;classpath:db.properties&lt;/value&gt; &lt;value&gt;classpath:alipay.properties&lt;/value&gt; &lt;/list&gt;&lt;/property&gt;","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"},{"name":"spring","slug":"spring","permalink":"https://ydstudios.gitee.io/tags/spring/"}]},{"title":"Javaè·å–ä¸€å¤©çš„æœ€å¤§æ—¶é—´23:59:59å’Œæœ€å°æ—¶é—´00:00:00","slug":"Javaè·å–ä¸€å¤©çš„æœ€å¤§æ—¶é—´23-59-59å’Œæœ€å°æ—¶é—´00-00-00","date":"2019-09-04T23:49:24.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/1ef2d20f.html","link":"","permalink":"https://ydstudios.gitee.io/post/1ef2d20f.html","excerpt":"Javaè·å–ä¸€å¤©çš„æœ€å¤§æ—¶é—´23:59:59å’Œæœ€å°æ—¶é—´00:00:00","text":"Javaè·å–ä¸€å¤©çš„æœ€å¤§æ—¶é—´23:59:59å’Œæœ€å°æ—¶é—´00:00:00 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566public class Test &#123; public static void main(String[] args) &#123; // åŠ ä¸Šæ¯«ç§’æ•° SimpleDateFormat sDateFormat=new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss.SSS\"); System.out.println(sDateFormat.format(getAfterYearDateMaxTime(3))); &#125; /** * è‹¥å¹²å¹´ä¹‹åçš„23:59:59 * * @param year * @return */ public static Date getAfterYearDateMaxTime(int year)&#123; Calendar calendarEnd = Calendar.getInstance(); calendarEnd.setTime(new Date()); calendarEnd.add(Calendar.YEAR,year); calendarEnd.set(Calendar.HOUR_OF_DAY, 23); calendarEnd.set(Calendar.MINUTE, 59); calendarEnd.set(Calendar.SECOND, 59); // MySQLæ•°æ®åº“å¯¹äºæ¯«ç§’å¤§äº500çš„æ•°æ®è¿›è¡Œè¿›ä½ï¼Œæ‰€æœ‰å°±é€ æˆçš„MySQLä¸­çš„æ—¶é—´å¤šä¸€ç§’,é˜²æ­¢mysqlè‡ªåŠ¨åŠ ä¸€ç§’,æ¯«ç§’è®¾ä¸º0 calendarEnd.set(Calendar.MILLISECOND, 0); return calendarEnd.getTime(); &#125; /** * å½“å¤©çš„æœ€å¤§æ—¶é—´23:59:59 * * @return */ public static Date getDayMaxTime()&#123; Calendar calendarEnd = Calendar.getInstance(); calendarEnd.setTime(new Date()); calendarEnd.set(Calendar.HOUR_OF_DAY, 23); calendarEnd.set(Calendar.MINUTE, 59); calendarEnd.set(Calendar.SECOND, 59); // MySQLæ•°æ®åº“å¯¹äºæ¯«ç§’å¤§äº500çš„æ•°æ®è¿›è¡Œè¿›ä½ï¼Œæ‰€æœ‰å°±é€ æˆçš„MySQLä¸­çš„æ—¶é—´å¤šä¸€ç§’,é˜²æ­¢mysqlè‡ªåŠ¨åŠ ä¸€ç§’,æ¯«ç§’è®¾ä¸º0 calendarEnd.set(Calendar.MILLISECOND, 0); return calendarEnd.getTime(); &#125; /** * å½“å¤©çš„æœ€å°æ—¶é—´00:00:00 * * @return */ public static Date getDayMinTime()&#123; Calendar calendarEnd = Calendar.getInstance(); calendarEnd.setTime(new Date()); calendarEnd.set(Calendar.HOUR_OF_DAY, 00); calendarEnd.set(Calendar.MINUTE, 00); calendarEnd.set(Calendar.SECOND, 00); // MySQLæ•°æ®åº“å¯¹äºæ¯«ç§’å¤§äº500çš„æ•°æ®è¿›è¡Œè¿›ä½ï¼Œæ‰€æœ‰å°±é€ æˆçš„MySQLä¸­çš„æ—¶é—´å¤šä¸€ç§’,é˜²æ­¢mysqlè‡ªåŠ¨åŠ ä¸€ç§’,æ¯«ç§’è®¾ä¸º0 calendarEnd.set(Calendar.MILLISECOND, 0); return calendarEnd.getTime(); &#125;&#125; è·å–3å¹´åçš„23:59:59ï¼Œæ¯«ç§’æ•°è®¾ç½®æˆ0 12022-09-04 23:59:59.000","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"}]},{"title":"IDEAä¸‹tomcatå¯åŠ¨å serverä¹±ç ï¼ŒTomcat Catalina Logå’ŒTomcat Localhost Logä¹±ç é—®é¢˜çš„è§£å†³ ","slug":"IDEAä¸‹tomcatå¯åŠ¨å-serverä¹±ç ï¼ŒTomcat-Catalina-Logå’ŒTomcat-Localhost-Logä¹±ç é—®é¢˜çš„è§£å†³","date":"2019-06-03T23:48:03.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/35c3eddf.html","link":"","permalink":"https://ydstudios.gitee.io/post/35c3eddf.html","excerpt":"å‰è¨€ä¸æ”¹çš„è¯ï¼Œä¸å½±å“ä½¿ç”¨ï¼Œå› ä¸ºæŠ¥é”™åŸºæœ¬éƒ½æ˜¯è‹±æ–‡æ˜¾ç¤ºçš„ã€‚ä½†æ˜¯è¿™å‡ ä¸ªä¸­æ–‡å­—ä¹±ç çš„çœ‹ç€éš¾å—ã€‚ ä¹±ç çš„æ ¹æœ¬åŸå› ï¼š Windowsç³»ç»Ÿçš„cmdæ˜¯GBKç¼–ç çš„ï¼Œæ‰€ä»¥IDEAçš„ä¸‹æ–¹logè¾“å‡ºçš„éƒ¨åˆ†çš„ç¼–ç ä¹Ÿæ˜¯GBKçš„ï¼Œç„¶è€ŒTomcat 9.0 ç‰ˆæœ¬é»˜è®¤logè¾“å‡ºæ˜¯UTF-8ç¼–ç çš„ï¼Œé‡‡ç”¨äº†ä¸¤ç§ä¸åŒçš„ç¼–ç æ–¹å¼å°±ä¼šå¯¼è‡´ä¹±ç ã€‚","text":"å‰è¨€ä¸æ”¹çš„è¯ï¼Œä¸å½±å“ä½¿ç”¨ï¼Œå› ä¸ºæŠ¥é”™åŸºæœ¬éƒ½æ˜¯è‹±æ–‡æ˜¾ç¤ºçš„ã€‚ä½†æ˜¯è¿™å‡ ä¸ªä¸­æ–‡å­—ä¹±ç çš„çœ‹ç€éš¾å—ã€‚ ä¹±ç çš„æ ¹æœ¬åŸå› ï¼š Windowsç³»ç»Ÿçš„cmdæ˜¯GBKç¼–ç çš„ï¼Œæ‰€ä»¥IDEAçš„ä¸‹æ–¹logè¾“å‡ºçš„éƒ¨åˆ†çš„ç¼–ç ä¹Ÿæ˜¯GBKçš„ï¼Œç„¶è€ŒTomcat 9.0 ç‰ˆæœ¬é»˜è®¤logè¾“å‡ºæ˜¯UTF-8ç¼–ç çš„ï¼Œé‡‡ç”¨äº†ä¸¤ç§ä¸åŒçš„ç¼–ç æ–¹å¼å°±ä¼šå¯¼è‡´ä¹±ç ã€‚ è§£å†³æ–¹æ¡ˆæ–¹æ³•ä¸€ ä¿®æ”¹Tomcat æ—¥å¿—è¾“å‡ºä¸ºGBKç¼–ç å…ˆæ‰“å¼€tomcatçš„å®‰è£…ç›®å½• ç¼–è¾‘ conf ç›®å½•ä¸‹çš„ logging.properties,æŠŠé‡Œé¢çš„UTF-8 é€šé€šæ”¹æˆ GBK,ä¿å­˜ï¼Œé‡å¯Tomcatï¼Œå³å¯ç”Ÿæ•ˆã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071# Licensed to the Apache Software Foundation (ASF) under one or more# contributor license agreements. See the NOTICE file distributed with# this work for additional information regarding copyright ownership.# The ASF licenses this file to You under the Apache License, Version 2.0# (the \"License\"); you may not use this file except in compliance with# the License. You may obtain a copy of the License at## http://www.apache.org/licenses/LICENSE-2.0## Unless required by applicable law or agreed to in writing, software# distributed under the License is distributed on an \"AS IS\" BASIS,# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.# See the License for the specific language governing permissions and# limitations under the License.handlers = 1catalina.org.apache.juli.FileHandler, 2localhost.org.apache.juli.FileHandler, 3manager.org.apache.juli.FileHandler, 4host-manager.org.apache.juli.FileHandler, java.util.logging.ConsoleHandler.handlers = 1catalina.org.apache.juli.FileHandler, java.util.logging.ConsoleHandler############################################################# Handler specific properties.# Describes specific configuration info for Handlers.############################################################1catalina.org.apache.juli.FileHandler.level = FINE1catalina.org.apache.juli.FileHandler.directory = $&#123;catalina.base&#125;/logs1catalina.org.apache.juli.FileHandler.prefix = catalina.1catalina.org.apache.juli.FileHandler.encoding = UTF-82localhost.org.apache.juli.FileHandler.level = FINE2localhost.org.apache.juli.FileHandler.directory = $&#123;catalina.base&#125;/logs2localhost.org.apache.juli.FileHandler.prefix = localhost.2localhost.org.apache.juli.FileHandler.encoding = UTF-83manager.org.apache.juli.FileHandler.level = FINE3manager.org.apache.juli.FileHandler.directory = $&#123;catalina.base&#125;/logs3manager.org.apache.juli.FileHandler.prefix = manager.3manager.org.apache.juli.FileHandler.encoding = UTF-84host-manager.org.apache.juli.FileHandler.level = FINE4host-manager.org.apache.juli.FileHandler.directory = $&#123;catalina.base&#125;/logs4host-manager.org.apache.juli.FileHandler.prefix = host-manager.4host-manager.org.apache.juli.FileHandler.encoding = UTF-8java.util.logging.ConsoleHandler.level = FINEjava.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatterjava.util.logging.ConsoleHandler.encoding = UTF-8############################################################# Facility specific properties.# Provides extra control for each logger.############################################################org.apache.catalina.core.ContainerBase.[Catalina].[localhost].level = INFOorg.apache.catalina.core.ContainerBase.[Catalina].[localhost].handlers = 2localhost.org.apache.juli.FileHandlerorg.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/manager].level = INFOorg.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/manager].handlers = 3manager.org.apache.juli.FileHandlerorg.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/host-manager].level = INFOorg.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/host-manager].handlers = 4host-manager.org.apache.juli.FileHandler# For example, set the org.apache.catalina.util.LifecycleBase logger to log# each component that extends LifecycleBase changing state:#org.apache.catalina.util.LifecycleBase.level = FINE# To see debug messages in TldLocationsCache, uncomment the following line:#org.apache.jasper.compiler.TldLocationsCache.level = FINEjava.util.logging.ConsoleHandler.encoding = UTF-8 æ–¹æ³•äºŒ ä¿®æ”¹IDEAä¸ºUTF-8ç¼–ç idea.exe.vmoptionsã€idea64.exe.vmoptions ä¿®æ”¹idea.exe.vmoptionså’Œidea64.exe.vmoptionsè¿™ä¸¤ä¸ªæ–‡ä»¶ åˆ†åˆ«åœ¨è¿™ä¸¤ä¸ªæ–‡ä»¶çš„æœ€åï¼Œæ·»åŠ ä¸€è¡Œ -Dfile.encoding=UTF-8 12345678910111213-Xms128m-Xmx750m-XX:ReservedCodeCacheSize=240m-XX:+UseConcMarkSweepGC-XX:SoftRefLRUPolicyMSPerMB=50-ea-Dsun.io.useCanonCaches=false-Djava.net.preferIPv4Stack=true-Djdk.http.auth.tunneling.disabledSchemes=\"\"-XX:+HeapDumpOnOutOfMemoryError-XX:-OmitStackTraceInFastThrow-Dfile.encoding=UTF-8 è¿™ä¸ªå‚æ•°çš„ä½œç”¨æ˜¯å¼ºåˆ¶ç³»ç»Ÿæ–‡ä»¶ä½¿ç”¨UTF-8ç¼–ç ,æ”¹å®Œä¹‹åä¿å­˜ï¼Œé‡å¯IDEAå³å¯ã€‚","categories":[],"tags":[{"name":"tomcat","slug":"tomcat","permalink":"https://ydstudios.gitee.io/tags/tomcat/"},{"name":"idea","slug":"idea","permalink":"https://ydstudios.gitee.io/tags/idea/"}]},{"title":"JavaScriptå¦‚ä½•é¢å‘å¯¹è±¡","slug":"JavaScriptå¦‚ä½•é¢å‘å¯¹è±¡","date":"2019-05-23T23:47:08.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/d7445999.html","link":"","permalink":"https://ydstudios.gitee.io/post/d7445999.html","excerpt":"å…³äºJavaScriptç¼–å†™ç±»çš„æ–¹å¼ï¼Œæ€»ç»“ä¸€ä¸‹JavaScriptç¼–å†™ç±»çš„å‡ ç§å†™æ³•ä»¥åŠè¿™å‡ ç§å†™æ³•çš„ä¼˜ç¼ºç‚¹ã€‚","text":"å…³äºJavaScriptç¼–å†™ç±»çš„æ–¹å¼ï¼Œæ€»ç»“ä¸€ä¸‹JavaScriptç¼–å†™ç±»çš„å‡ ç§å†™æ³•ä»¥åŠè¿™å‡ ç§å†™æ³•çš„ä¼˜ç¼ºç‚¹ã€‚ æ„é€ å‡½æ•°æ–¹å¼åŸºæœ¬è¯­æ³•ï¼š 1234567891011121314 function ç±»å()&#123; this.å±æ€§å;//å…¬å…±å±æ€§ var å±æ€§å;//ç§æœ‰å±æ€§ /*å‡¡æ˜¯å®šä¹‰ç±»çš„å…¬å…±å±æ€§å’Œå…¬å…±æ–¹æ³•éƒ½è¦ä½¿ç”¨this*/ //å®šä¹‰ç±»çš„å…¬å…±å‡½æ•° this.å‡½æ•°å=function()&#123; ..... &#125; //å®šä¹‰ç±»çš„ç§æœ‰å‡½æ•° function å‡½æ•°å()&#123; ...... &#125;&#125; 1234567891011121314151617181920212223242526272829303132333435363738394041/*å®šä¹‰ä¸€ä¸ªPersonç±»*/ function Person(_name,_age,_salary)&#123; //Personç±»çš„å…¬å¼€å±æ€§ï¼Œç±»çš„å…¬å¼€å±æ€§çš„å®šä¹‰æ–¹å¼æ˜¯ï¼šâ€this.å±æ€§åâ€œ this.name=_name; //Personç±»çš„ç§æœ‰å±æ€§ï¼Œç±»çš„ç§æœ‰å±æ€§çš„å®šä¹‰æ–¹å¼æ˜¯ï¼šâ€var å±æ€§åâ€œ var age=_age;//ç§æœ‰å±æ€§ var salary=_salary;//ç§æœ‰å±æ€§ /*å®šä¹‰ç§æœ‰å±æ€§Ageçš„å¯¹å¤–å…¬å¼€è®¿é—®æ–¹æ³•*/ this.setAge = function(intAge) &#123; age = intAge; &#125; /*å®šä¹‰ç§æœ‰å±æ€§Ageçš„å¯¹å¤–å…¬å¼€è®¿é—®æ–¹æ³•*/ this.getAge = function() &#123; return age; &#125; //å®šä¹‰Personç±»çš„å…¬å¼€æ–¹æ³•(ç‰¹æƒæ–¹æ³•)ï¼Œç±»çš„å…¬å¼€æ–¹æ³•çš„å®šä¹‰æ–¹å¼æ˜¯ï¼šâ€this.functionName=function()&#123;.....&#125;â€œ this.Show=function()&#123; document.writeln(\"åœ¨å…¬å¼€æ–¹æ³•é‡Œé¢è®¿é—®ç±»çš„ç§æœ‰å±æ€§æ˜¯å…è®¸çš„ï¼Œage=\"+age+\"\\t\"+\"salary=\"+salary);//åœ¨å…¬å¼€æ–¹æ³•é‡Œé¢è®¿é—®ç±»çš„ç§æœ‰å±æ€§æ˜¯å…è®¸çš„ &#125; //å…¬å…±æ–¹æ³• this.publicMethod = function()&#123; document.writeln(\"åœ¨å…¬å¼€æ–¹æ³•é‡Œé¢è®¿é—®ç±»çš„ç§æœ‰æ–¹æ³•æ˜¯å…è®¸çš„\"); privateFn();//åœ¨å…¬å¼€æ–¹æ³•é‡Œé¢è°ƒç”¨ç±»çš„ç§æœ‰æ–¹æ³• privateFn2();//åœ¨å…¬å¼€æ–¹æ³•é‡Œé¢è°ƒç”¨ç±»çš„ç§æœ‰æ–¹æ³• &#125; /* å®šä¹‰Personç±»çš„ç§æœ‰æ–¹æ³•(å†…éƒ¨æ–¹æ³•)ï¼Œ ç±»çš„ç§æœ‰æ–¹æ³•çš„å®šä¹‰æ–¹å¼æ˜¯ï¼šâ€function functionName()&#123;.....&#125;â€œï¼Œ æˆ–è€… var functionName=function()&#123;....&#125; */ function privateFn()&#123; document.writeln(\"æˆ‘æ˜¯Personç±»çš„ç§æœ‰å‡½æ•°privateFn\"); &#125; var privateFn2=function()&#123; document.writeln(\"æˆ‘æ˜¯Personç±»çš„ç§æœ‰å‡½æ•°privateFn2\"); &#125; &#125; æµ‹è¯•Personç±» 1234567891011121314151617181920var p1 = new Person(\"å­¤å‚²è‹ç‹¼\",24,2300); var p2 = new Person(\"ç™½è™ç¥çš‡\",24,2300); document.write(\"&lt;pre&gt;\"); document.writeln(\"p1 instanceof Personçš„ç»“æœæ˜¯ï¼š\"+(p1 instanceof Person));//p1æ˜¯Personç±»çš„å®ä¾‹ï¼Œç»“æœæ˜¯true document.writeln(\"p2 instanceof Personçš„ç»“æœæ˜¯ï¼š\"+(p2 instanceof Person));//p2æ˜¯Personç±»çš„å®ä¾‹ï¼Œç»“æœæ˜¯true //å½“==ä¸¤è¾¹çš„å†…å®¹æ˜¯å¯¹è±¡æˆ–è€…æ˜¯å¯¹è±¡çš„å‡½æ•°å±æ€§æ—¶ï¼Œåˆ™æ¯”è¾ƒå†…å­˜åœ°å€æ˜¯å¦ç›¸ç­‰ document.writeln(\"å½“==ä¸¤è¾¹çš„å†…å®¹æ˜¯å¯¹è±¡æˆ–è€…æ˜¯å¯¹è±¡çš„å‡½æ•°å±æ€§æ—¶ï¼Œåˆ™æ¯”è¾ƒå†…å­˜åœ°å€æ˜¯å¦ç›¸ç­‰\"); document.writeln(\"æ¯”è¾ƒp1å’Œp2è¿™ä¸¤ä¸ªå¯¹è±¡çš„showæ–¹æ³•çš„å†…å­˜åœ°å€æ˜¯å¦ä¸€æ ·ï¼šp1.show== p2.showçš„ç»“æœæ˜¯ï¼š\"+(p1.show == p2.show));//false document.writeln(\"p1.show == p2.showçš„ç»“æœæ˜¯ï¼š\"+(p1.show == p2.show)+\"ï¼Œè¿™è¯æ˜p1å¯¹è±¡å’Œp2å¯¹è±¡ä¸æ˜¯å…±äº«ä¸€ä¸ªshowæ–¹æ³•ï¼Œåœ¨å†…å­˜ä¸­showæ–¹æ³•çš„ä»£ç æœ‰2ä»½ï¼Œå­˜æ”¾åœ¨ä¸¤å—å†…å­˜åŒºåŸŸ\"); document.writeln(\"nameæ˜¯Personç±»å®šä¹‰çš„publicå±æ€§ï¼Œå¯ä»¥ä½¿ç”¨ç±»çš„å¯¹è±¡å»ç›´æ¥è®¿é—®ç±»çš„publicå±æ€§\"); document.writeln(\"p1.name=\"+p1.name);//è®¿é—®å…¬æœ‰å±æ€§ï¼Œè¿™æ˜¯å¯ä»¥æ­£å¸¸è®¿é—®çš„ document.writeln(\"ageå’Œsalaryæ˜¯Personç±»å®šä¹‰çš„privateå±æ€§ï¼Œä¸èƒ½ä½¿ç”¨ç±»çš„å¯¹è±¡å»ç›´æ¥è®¿é—®ç±»ç§æœ‰å±æ€§ï¼Œè¿™æ˜¯è®¿é—®ä¸äº†çš„ï¼Œç»“æœéƒ½æ˜¯undefined\"); document.writeln(\"p1.age=\"+p1.age+\"ï¼Œ\"+\"p1.salary=\"+p1.salary)//ä¸èƒ½ä½¿ç”¨ç±»çš„å¯¹è±¡å»ç›´æ¥è®¿é—®ç±»ç§æœ‰å±æ€§ï¼Œè¿™æ˜¯è®¿é—®ä¸äº†çš„ï¼Œç»“æœéƒ½æ˜¯undefined p1.show();//è°ƒç”¨ç±»çš„å…¬å…±å‡½æ•°ï¼Œè¿™æ¬¡å…è®¸çš„ p1.publicMethod();//è°ƒç”¨ç±»çš„å…¬å…±å‡½æ•°ï¼Œè¿™æ¬¡å…è®¸çš„ p1.setAge(24);//ä½¿ç”¨publicæ–¹æ³•setAgeæ–¹æ³•ä¸ºç§æœ‰å±æ€§ageèµ‹å€¼ document.writeln(\"ä½¿ç”¨publicæ–¹æ³•getAgeæ–¹æ³•è·å–ç§æœ‰å±æ€§ageçš„å€¼ï¼Œp1.getAge()=\"+p1.getAge());//ä½¿ç”¨getAgeæ–¹æ³•è·å–ç§æœ‰å±æ€§ageçš„å€¼ //document.writeln(\"p1.privateFn()ï¼š\"+p1.privateFn()+\"&amp;nbsp;p1.privateFn2()ï¼š\"+p1.privateFn2());//ä¸èƒ½ä½¿ç”¨ç±»çš„å¯¹è±¡å»è°ƒç”¨ç±»çš„ç§æœ‰æ–¹æ³•ï¼Œè¿™é‡Œä¼šæŠ¥é”™â€å¯¹è±¡ä¸æ”¯æŒæ­¤å±æ€§æˆ–è€…æ–¹æ³• document.write(\"&lt;/pre&gt;\"); è¿™ç§æ–¹å¼çš„ä¼˜ç‚¹æ˜¯ï¼šå¯ä»¥æ ¹æ®å‚æ•°æ¥æ„é€ ä¸åŒçš„å¯¹è±¡å®ä¾‹ ï¼Œæ¯ä¸ªå¯¹è±¡çš„å±æ€§ä¸€èˆ¬æ˜¯ä¸ç›¸åŒçš„ï¼Œç¼ºç‚¹æ˜¯æ„é€ æ¯ä¸ªå®ä¾‹å¯¹è±¡æ—¶ï¼Œæ–¹æ³•ä¸èƒ½å…±äº«ï¼ŒPersonç±»é‡Œé¢å®šä¹‰çš„é‚£äº›æ–¹æ³•ï¼Œp1å¯¹è±¡æœ‰ä¸€ä»½ï¼Œp2ä¹Ÿæœ‰ä¸€ä»½ï¼Œé‚£ä¹ˆåœ¨å†…å­˜ä¸­å°±å¾—å¼€è¾Ÿä¸¤å—å†…å­˜ç©ºé—´æ¥åˆ†åˆ«å­˜å‚¨p1çš„æ–¹æ³•å’Œp2çš„æ–¹æ³•ï¼Œè¿™æ ·å°±é€ æˆäº†å†…å­˜çš„æµªè´¹ã€‚å¯¹äºä¸€ä¸ªç±»çš„ä¸åŒå®ä¾‹å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡çš„å±æ€§ä¸€èˆ¬æ˜¯ä¸ç›¸åŒçš„ï¼Œä½†æ˜¯æ–¹æ³•æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥èŠ‚çº¦å†…å­˜çš„åšæ³•å°±æ˜¯æŠŠæ–¹æ³•æ”¾åˆ°å†…å­˜çš„ä¸€å—åŒºåŸŸä¸­å­˜æ”¾ï¼Œç„¶åæ¯ä¸ªå®ä¾‹å¯¹è±¡éƒ½ä»è¿™å—å†…å­˜ä¸­å–å‡ºæ–¹æ³•ã€‚ åŸå‹æ–¹å¼éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œä½¿ç”¨åŸå‹æ–¹å¼ç¼–å†™JavaScriptç±»æ˜¯æ— æ³•ç»™ç±»æ·»åŠ ç§æœ‰å±æ€§å’Œç§æœ‰æ–¹æ³•çš„ï¼Œä½¿ç”¨åŸå‹æ–¹å¼æ·»åŠ çš„å±æ€§å’Œæ–¹æ³•éƒ½æ˜¯publicçš„ã€‚ å†™æ³•ä¸€ 123456789101112131415161718192021222324252627/*å®šä¹‰ä¸€ä¸ªPersonç±»*/ function Person(_name,_age,_weight,_height)&#123; this.init(_name,_age,_weight,_height); &#125; /*ä½¿ç”¨åŸå‹çš„æ–¹å¼å®šä¹‰Personç±»çš„publicå±æ€§ï¼šname,age,weight,heightï¼Œä½¿ç”¨åŸå‹çš„æ–¹å¼æ·»åŠ çš„å±æ€§éƒ½æ˜¯publicçš„*/ Person.prototype.name; Person.prototype.age; Person.prototype.weight; Person.prototype.height; /*ä½¿ç”¨åŸå‹çš„æ–¹å¼ç»™Personç±»æ·»åŠ publicæ–¹æ³•ï¼Œä½¿ç”¨åŸå‹çš„æ–¹å¼æ·»åŠ çš„æ–¹æ³•éƒ½æ˜¯publicçš„*/ /*ä½¿ç”¨åŸå‹çš„æ–¹å¼ç»™Personç±»æ·»åŠ initæ–¹æ³•*/ Person.prototype.init = function(_name,_age,_weight,_height) &#123; if(_name != undefined &amp;&amp; _age!=undefined &amp;&amp; _weight!=undefined &amp;&amp; _height!=undefined)&#123; this.name = _name; this.age = _age; this.weight=_weight; this.height=_height; document.writeln(\"this.name=\"+this.name+\",this.age=\"+this.age+\",this.weight=\"+this.weight+\",this.height=\"+this.height); &#125; &#125; /*ä½¿ç”¨åŸå‹çš„æ–¹å¼ç»™Personç±»æ·»åŠ showæ–¹æ³•*/ Person.prototype.show = function()&#123; document.writeln(\"show method\"); &#125; æµ‹è¯• 123456789101112131415161718document.write(\"&lt;pre&gt;\"); var p1 = new Person(\"å­¤å‚²è‹ç‹¼\",24,115,160); var p2 = new Person(\"ç™½è™ç¥çš‡\",25,120,170); var p3 = new Person(); p3.init(\"ç„å¤©é‚ªå¸\",26,130,180);//è°ƒç”¨publicæ–¹æ³•initåˆå§‹åŒ–p3å¯¹è±¡ document.writeln(\"p1 instanceof Personçš„ç»“æœæ˜¯ï¼š\"+(p1 instanceof Person));//p1æ˜¯Personç±»çš„å®ä¾‹ï¼Œç»“æœæ˜¯true document.writeln(\"p2 instanceof Personçš„ç»“æœæ˜¯ï¼š\"+(p2 instanceof Person));//p2æ˜¯Personç±»çš„å®ä¾‹ï¼Œç»“æœæ˜¯true document.writeln(\"p3 instanceof Personçš„ç»“æœæ˜¯ï¼š\"+(p3 instanceof Person));//p3æ˜¯Personç±»çš„å®ä¾‹ï¼Œç»“æœæ˜¯true //å½“==ä¸¤è¾¹çš„å†…å®¹æ˜¯å¯¹è±¡æˆ–è€…æ˜¯å¯¹è±¡çš„å‡½æ•°å±æ€§æ—¶ï¼Œåˆ™æ¯”è¾ƒå†…å­˜åœ°å€æ˜¯å¦ç›¸ç­‰ document.writeln(\"å½“==ä¸¤è¾¹çš„å†…å®¹æ˜¯å¯¹è±¡æˆ–è€…æ˜¯å¯¹è±¡çš„å‡½æ•°å±æ€§æ—¶ï¼Œåˆ™æ¯”è¾ƒå†…å­˜åœ°å€æ˜¯å¦ç›¸ç­‰\"); document.writeln(\"æ¯”è¾ƒp1å’Œp2è¿™ä¸¤ä¸ªå¯¹è±¡çš„showæ–¹æ³•çš„å†…å­˜åœ°å€æ˜¯å¦ä¸€æ ·ï¼šp1.show == p2.showçš„ç»“æœæ˜¯ï¼š\"+(p1.show == p2.show));//true document.writeln(\"p1.show == p2.showçš„ç»“æœæ˜¯ï¼š\"+(p1.show == p2.show)+\"ï¼Œè¿™è¯æ˜p1å¯¹è±¡å’Œp2å¯¹è±¡å…±äº«ä¸€ä¸ªshowæ–¹æ³•ï¼Œåœ¨å†…å­˜ä¸­showæ–¹æ³•çš„ä»£ç åªæœ‰ä¸€ä»½ï¼Œå­˜æ”¾åœ¨å†…å­˜çš„ä¸€å—åŒºåŸŸ\");//true document.writeln(\"p1.name=\"+p1.name+\"ï¼Œp1.age=\"+p1.age+\"ï¼Œp1.weight=\"+p1.weight+\"ï¼Œp1.height=\"+p1.height);//è®¿é—®å…¬æœ‰å±æ€§ï¼Œè¿™æ˜¯å¯ä»¥æ­£å¸¸è®¿é—®çš„ document.writeln(\"p2.name=\"+p2.name+\"ï¼Œp2.age=\"+p2.age+\"ï¼Œp2.weight=\"+p2.weight+\"ï¼Œp2.height=\"+p2.height);//è®¿é—®å…¬æœ‰å±æ€§ï¼Œè¿™æ˜¯å¯ä»¥æ­£å¸¸è®¿é—®çš„ p3.name=\"ç­ä¸–é­”å°Š\";//ä¸ºå…¬å…±å±æ€§é‡æ–°èµ‹å€¼ document.writeln(\"p3.name=\"+p3.name);//è®¿é—®å…¬æœ‰å±æ€§ï¼Œè¿™æ˜¯å¯ä»¥æ­£å¸¸è®¿é—®çš„ p1.show();//è°ƒç”¨ç±»çš„å…¬å…±å‡½æ•°ï¼Œè¿™æ¬¡å…è®¸çš„ document.write(\"&lt;/pre&gt;\"); å†™æ³•äºŒä½¿ç”¨åŸå‹æ–¹å¼ç»™ç±»å®šä¹‰publicå±æ€§å’Œpublicæ–¹æ³•æ›´åŠ ä¼˜é›…çš„å†™æ³•ï¼Œæˆ‘ä¸ªäººæ¨èä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œè¿™ç§æ–¹å¼çœ‹èµ·æ¥æ¯”è¾ƒèˆ’æœ 123456789101112131415161718192021222324/*å®šä¹‰ç±»Person2*/ function Person2()&#123; &#125; /*ä½¿ç”¨åŸå‹æ–¹å¼ç»™ç±»å®šä¹‰publicå±æ€§å’Œpublicæ–¹æ³•æ›´åŠ ä¼˜é›…çš„å†™æ³•*/ Person2.prototype = &#123; name:\"\",//publicå±æ€§ age:0,//publicå±æ€§ weight:0,//publicå±æ€§ height:0,//publicå±æ€§ /*publicæ–¹æ³•*/ init:function(_name,_age,_weight,_height) &#123; this.name = _name; this.age = _age; this.weight=_weight; this.height=_height; document.writeln(\"this.name=\"+this.name+\",this.age=\"+this.age+\",this.weight=\"+this.weight+\",this.height=\"+this.height); &#125;, /*publicæ–¹æ³•*/ show:function()&#123; document.writeln(\"show method\"); &#125; &#125;; æµ‹è¯•ä»£ç ï¼š 1234567891011121314151617document.write(\"&lt;pre&gt;\"); var p2_1 = new Person2(); var p2_2 = new Person2(); p2_1.init(\"å­¤å‚²è‹ç‹¼\",24,115,160); p2_2.init(\"ç™½è™ç¥çš‡\",25,120,170); document.writeln(\"p2_1.name=\"+p2_1.name+\"ï¼Œp2_1.age=\"+p2_1.age+\"ï¼Œp2_1.weight=\"+p2_1.weight+\"ï¼Œp2_1.height=\"+p2_1.height);//è®¿é—®å…¬æœ‰å±æ€§ï¼Œè¿™æ˜¯å¯ä»¥æ­£å¸¸è®¿é—®çš„ document.writeln(\"p2_2.name=\"+p2_2.name+\"ï¼Œp2_2.age=\"+p2_2.age+\"ï¼Œp2_2.weight=\"+p2_2.weight+\"ï¼Œp2_2.height=\"+p2_2.height);//è®¿é—®å…¬æœ‰å±æ€§ï¼Œè¿™æ˜¯å¯ä»¥æ­£å¸¸è®¿é—®çš„ document.writeln(\"p2_1 instanceof Person2çš„ç»“æœæ˜¯ï¼š\"+(p2_1 instanceof Person2));//p2_1æ˜¯Person2ç±»çš„å®ä¾‹ï¼Œç»“æœæ˜¯true document.writeln(\"p2_2 instanceof Person2çš„ç»“æœæ˜¯ï¼š\"+(p2_2 instanceof Person2));//p2_2æ˜¯Person2ç±»çš„å®ä¾‹ï¼Œç»“æœæ˜¯true //å½“==ä¸¤è¾¹çš„å†…å®¹æ˜¯å¯¹è±¡æˆ–è€…æ˜¯å¯¹è±¡çš„å‡½æ•°å±æ€§æ—¶ï¼Œåˆ™æ¯”è¾ƒå†…å­˜åœ°å€æ˜¯å¦ç›¸ç­‰ document.writeln(\"å½“==ä¸¤è¾¹çš„å†…å®¹æ˜¯å¯¹è±¡æˆ–è€…æ˜¯å¯¹è±¡çš„å‡½æ•°å±æ€§æ—¶ï¼Œåˆ™æ¯”è¾ƒå†…å­˜åœ°å€æ˜¯å¦ç›¸ç­‰\"); document.writeln(\"æ¯”è¾ƒp2_1å’Œp2_2è¿™ä¸¤ä¸ªå¯¹è±¡çš„initæ–¹æ³•çš„å†…å­˜åœ°å€æ˜¯å¦ä¸€æ ·ï¼šp2_1.init == p2_2.initçš„ç»“æœæ˜¯ï¼š\"+(p2_1.init == p2_2.init));//true p2_1.name=\"ç­ä¸–é­”å°Š\";//ä¸ºå…¬å…±å±æ€§é‡æ–°èµ‹å€¼ document.writeln(\"p2_1.name=\"+p2_1.name);//è®¿é—®å…¬æœ‰å±æ€§ï¼Œè¿™æ˜¯å¯ä»¥æ­£å¸¸è®¿é—®çš„ p2_1.show();//è°ƒç”¨ç±»çš„å…¬å…±å‡½æ•°ï¼Œè¿™æ¬¡å…è®¸çš„ document.write(\"&lt;/pre&gt;\"); æ„é€ å‡½æ•°+åŸå‹ æ„é€ å‡½æ•°æ–¹å¼å’ŒåŸå‹æ–¹å¼éƒ½æœ‰å„è‡ªçš„ä¼˜ç¼ºç‚¹ï¼Œå› æ­¤å¯ä»¥æŠŠè¿™ä¸¤ç§æ–¹å¼åˆå¹¶èµ·æ¥ï¼Œç”¨æ„é€ å‡½æ•°æ–¹å¼æ¥å®šä¹‰ç±»çš„å±æ€§(publicå±æ€§ï¼Œprivateå±æ€§)ï¼Œç”¨åŸå‹æ–¹å¼æ¥å®šä¹‰ç±»çš„æ–¹æ³•(publicæ–¹æ³•)ã€‚äº’è¡¥ä¸è¶³ï¼Œè¿™å°±æœ‰äº†ç¬¬ä¸‰ç§å†™æ³•ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849/*å®šä¹‰ä¸€ä¸ªPersonç±»*/ function Person(_name,_age,_salary)&#123; //åœ¨Personç±»å†…éƒ¨å®šä¹‰ç±»çš„publicå±æ€§å’Œprivateå±æ€§ä»¥åŠprivateæ–¹æ³• //Personç±»çš„å…¬å¼€å±æ€§ï¼Œç±»çš„å…¬å¼€å±æ€§çš„å®šä¹‰æ–¹å¼æ˜¯ï¼šâ€this.å±æ€§åâ€œ this.name=_name; //Personç±»çš„ç§æœ‰å±æ€§ï¼Œç±»çš„ç§æœ‰å±æ€§çš„å®šä¹‰æ–¹å¼æ˜¯ï¼šâ€var å±æ€§åâ€œ var age=_age;//ç§æœ‰å±æ€§ï¼Œåªèƒ½åœ¨ç±»å†…éƒ¨ä½¿ç”¨ var salary=_salary;//ç§æœ‰å±æ€§ï¼Œåªèƒ½åœ¨ç±»å†…éƒ¨ä½¿ç”¨ /* å®šä¹‰Personç±»çš„ç§æœ‰æ–¹æ³•(å†…éƒ¨æ–¹æ³•)ï¼Œåªèƒ½åœ¨ç±»å†…éƒ¨ä½¿ç”¨ ç±»çš„ç§æœ‰æ–¹æ³•çš„å®šä¹‰æ–¹å¼æ˜¯ï¼šâ€function functionName()&#123;.....&#125;â€œï¼Œ æˆ–è€… var functionName=function()&#123;....&#125; */ function privateFn()&#123; document.write(\"&lt;pre&gt;\"); document.writeln(\"æˆ‘æ˜¯Personç±»çš„ç§æœ‰å±æ€§ageï¼Œåªèƒ½åœ¨Personç±»å†…éƒ¨ä½¿ç”¨ï¼Œåˆå§‹åŒ–åage=\"+age); document.writeln(\"æˆ‘æ˜¯Personç±»çš„ç§æœ‰å‡½æ•°privateFnï¼Œåªèƒ½åœ¨Personç±»å†…éƒ¨ä½¿ç”¨\"); document.write(\"&lt;/pre&gt;\"); &#125; var privateFn2=function()&#123; document.write(\"&lt;pre&gt;\"); document.writeln(\"æˆ‘æ˜¯Personç±»çš„ç§æœ‰å±æ€§salaryï¼Œåªèƒ½åœ¨Personç±»å†…éƒ¨ä½¿ç”¨ï¼Œåˆå§‹åŒ–åsalary=\"+salary); document.writeln(\"æˆ‘æ˜¯Personç±»çš„ç§æœ‰å‡½æ•°privateFn2ï¼Œåªèƒ½åœ¨Personç±»å†…éƒ¨ä½¿ç”¨\"); document.write(\"&lt;/pre&gt;\"); &#125; privateFn();//åœ¨Personç±»å†…éƒ¨è°ƒç”¨ç§æœ‰æ–¹æ³• privateFn2();//åœ¨Personç±»å†…éƒ¨è°ƒç”¨ç§æœ‰æ–¹æ³• &#125; //ä½¿ç”¨prototypeåŸå‹æ–¹å¼å®šä¹‰çš„æ–¹æ³•(publicæ–¹æ³•)æ˜¯æ— æ³•è®¿é—®ç±»çš„ç§æœ‰å±æ€§å’Œç§æœ‰æ–¹æ³•çš„ //ä½¿ç”¨prototypeåŸå‹æ–¹å¼å®šä¹‰Personç±»çš„æ–¹publicæ–¹æ³• Person.prototype=&#123; setName:function(_name)&#123; this.name = _name; //privateFn();//ä¸èƒ½è°ƒç”¨Personç±»å®šä¹‰çš„ç§æœ‰æ–¹æ³•privateFn()ï¼Œä¼šæŠ¥é”™ï¼šç¼ºå°‘å¯¹è±¡ &#125;, getName:function()&#123; return this.name; &#125;, show:function()&#123; document.writeln(\"å…¬å¼€æ–¹æ³•show\"); &#125;, //å…¬å…±æ–¹æ³• publicMethod:function()&#123; document.writeln(\"å…¬å¼€æ–¹æ³•publicMethod\"); &#125; &#125;; æµ‹è¯•ä»£ç ï¼š 12345678910111213141516171819var p1 = new Person(\"å­¤å‚²è‹ç‹¼\",24,2300); var p2 = new Person(\"ç™½è™ç¥çš‡\",25,3000); document.write(\"&lt;pre&gt;\"); document.writeln(\"p1 instanceof Personçš„ç»“æœæ˜¯ï¼š\"+(p1 instanceof Person));//p1æ˜¯Personç±»çš„å®ä¾‹ï¼Œç»“æœæ˜¯true document.writeln(\"p2 instanceof Personçš„ç»“æœæ˜¯ï¼š\"+(p2 instanceof Person));//p2æ˜¯Personç±»çš„å®ä¾‹ï¼Œç»“æœæ˜¯true //å½“==ä¸¤è¾¹çš„å†…å®¹æ˜¯å¯¹è±¡æˆ–è€…æ˜¯å¯¹è±¡çš„å‡½æ•°å±æ€§æ—¶ï¼Œåˆ™æ¯”è¾ƒå†…å­˜åœ°å€æ˜¯å¦ç›¸ç­‰ document.writeln(\"å½“==ä¸¤è¾¹çš„å†…å®¹æ˜¯å¯¹è±¡æˆ–è€…æ˜¯å¯¹è±¡çš„å‡½æ•°å±æ€§æ—¶ï¼Œåˆ™æ¯”è¾ƒå†…å­˜åœ°å€æ˜¯å¦ç›¸ç­‰\"); document.writeln(\"æ¯”è¾ƒp1å’Œp2è¿™ä¸¤ä¸ªå¯¹è±¡çš„showæ–¹æ³•çš„å†…å­˜åœ°å€æ˜¯å¦ä¸€æ ·ï¼šp1.show== p2.showçš„ç»“æœæ˜¯ï¼š\"+(p1.show == p2.show));//true document.writeln(\"p1.show == p2.showçš„ç»“æœæ˜¯ï¼š\"+(p1.show == p2.show)+\"ï¼Œè¿™è¯æ˜p1å¯¹è±¡å’Œp2å¯¹è±¡å…±äº«ä¸€ä¸ªshowæ–¹æ³•ï¼Œåœ¨å†…å­˜ä¸­showæ–¹æ³•çš„ä»£ç æœ‰1ä»½ï¼Œå­˜æ”¾åœ¨1å—å†…å­˜åŒºåŸŸ\"); document.writeln(\"nameæ˜¯Personç±»å®šä¹‰çš„publicå±æ€§ï¼Œå¯ä»¥ä½¿ç”¨ç±»çš„å¯¹è±¡å»ç›´æ¥è®¿é—®ç±»çš„publicå±æ€§\"); document.writeln(\"p1.name=\"+p1.name);//è®¿é—®å…¬æœ‰å±æ€§ï¼Œè¿™æ˜¯å¯ä»¥æ­£å¸¸è®¿é—®çš„ document.writeln(\"ageå’Œsalaryæ˜¯Personç±»å®šä¹‰çš„privateå±æ€§ï¼Œä¸èƒ½ä½¿ç”¨ç±»çš„å¯¹è±¡å»ç›´æ¥è®¿é—®ç±»ç§æœ‰å±æ€§ï¼Œè¿™æ˜¯è®¿é—®ä¸äº†çš„ï¼Œç»“æœéƒ½æ˜¯undefined\"); document.writeln(\"p1.age=\"+p1.age+\"ï¼Œ\"+\"p1.salary=\"+p1.salary)//ä¸èƒ½ä½¿ç”¨ç±»çš„å¯¹è±¡å»ç›´æ¥è®¿é—®ç±»ç§æœ‰å±æ€§ï¼Œè¿™æ˜¯è®¿é—®ä¸äº†çš„ï¼Œç»“æœéƒ½æ˜¯undefined p1.show();//è°ƒç”¨ç±»çš„å…¬å…±å‡½æ•°ï¼Œè¿™æ¬¡å…è®¸çš„ p1.publicMethod();//è°ƒç”¨ç±»çš„å…¬å…±å‡½æ•°ï¼Œè¿™æ¬¡å…è®¸çš„ p1.setName(\"ç„å¤©é‚ªå¸\");//è°ƒç”¨ç±»çš„å…¬å…±å‡½æ•°è®¾ç½®ä¸ºnameå±æ€§é‡æ–°èµ‹å€¼ document.writeln(\"p1.getName=\"+p1.getName()); //document.writeln(\"p1.privateFn()ï¼š\"+p1.privateFn()+\"&amp;nbsp;p1.privateFn2()ï¼š\"+p1.privateFn2());//ä¸èƒ½ä½¿ç”¨ç±»çš„å¯¹è±¡å»è°ƒç”¨ç±»çš„ç§æœ‰æ–¹æ³•ï¼Œè¿™é‡Œä¼šæŠ¥é”™â€å¯¹è±¡ä¸æ”¯æŒæ­¤å±æ€§æˆ–è€…æ–¹æ³• document.write(\"&lt;/pre&gt;\"); ç¬¬ä¸‰ç§æ–¹å¼é€šè¿‡å‰ä¸¤ç§æ–¹å¼çš„ç»“åˆï¼Œç®—æ˜¯è¾¾åˆ°äº†ä¸€ä¸ªæ¯”è¾ƒç†æƒ³çš„å†™æ³•äº†ï¼Œå¯ä»¥é€šè¿‡ä¼ å‚æ„é€ å¯¹è±¡å®ä¾‹ï¼Œå¯¹è±¡å®ä¾‹éƒ½å…±äº«åŒä¸€ä»½æ–¹æ³•ä¸é€ æˆå†…å­˜æµªè´¹ã€‚ç¬¬ä¸‰ç§æ–¹å¼åœ¨å¼€å‘ä¸­ç”¨å¾—æœ€å¤šï¼Œæˆ‘æœ¬äººä¹Ÿæ˜¯é‡‡ç”¨è¿™ç§æ–¹å¼æ¥ç¼–å†™JavaScriptç±»ã€‚ æŸ¥çœ‹åŸæ–‡","categories":[],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://ydstudios.gitee.io/tags/JavaScript/"},{"name":"oop","slug":"oop","permalink":"https://ydstudios.gitee.io/tags/oop/"}]},{"title":"Dubboæ¶ˆè´¹è€…consumeræ•æ‰æœåŠ¡æä¾›è€…provideræŠ›å‡ºçš„è‡ªå®šä¹‰å¼‚å¸¸","slug":"Dubboæ¶ˆè´¹è€…consumeræ•æ‰æœåŠ¡æä¾›è€…provideræŠ›å‡ºçš„è‡ªå®šä¹‰å¼‚å¸¸","date":"2019-05-20T23:44:33.000Z","updated":"2020-09-05T02:01:16.000Z","comments":true,"path":"post/2e0453a7.html","link":"","permalink":"https://ydstudios.gitee.io/post/2e0453a7.html","excerpt":"æˆ‘ä»¬åœ¨è‡ªå·±çš„ä¸šåŠ¡ç³»ç»Ÿä¸­ï¼Œé€šå¸¸ä¼šç”¨åˆ°è‡ªå®šä¹‰çš„ä¸šåŠ¡å¼‚å¸¸ç±»ï¼Œè¿™ä¸ªå¼‚å¸¸ä¼šç»§æ‰¿extends RuntimeExceptionï¼Œå½“å‘ç”Ÿä¸šåŠ¡é™åˆ¶çš„æ—¶å€™ï¼Œä¼šthrowå‡ºæ¥ã€‚ä½†æ˜¯åœ¨ä½¿ç”¨dubboè¿›è¡Œsoaæ²»ç†çš„æ—¶å€™ï¼Œä¼šå‘ç°provideræŠ›å‡ºçš„å¼‚å¸¸ï¼Œåœ¨customç«¯å¹¶ä¸èƒ½æ­£ç¡®çš„æ•è·ã€‚å³ä¾¿æˆ‘ä»¬åœ¨providerå’Œcustoméƒ½æœ‰å¯¼å…¥ç›¸åŒframework.jarä¸‹é¢çš„BusinessExceptionå¼‚å¸¸ï¼Œå¹¶ä¸”æŠ›å‡ºè¿™ä¸ªå¼‚å¸¸ï¼Œåœ¨Consumerç«¯åªä¼šæ‰“å°ä¸€è¡Œå¼‚å¸¸ä¿¡æ¯ï¼Œè·å–ä¸åˆ°æ­£å¸¸çš„å¼‚å¸¸ã€‚ç™¾åº¦æ‰çŸ¥é“Dubboå¯¹æŠ›å‡ºå¾—å¼‚å¸¸ç”¨ä¸€ä¸ªExceptionFilterçš„ç±»è¿›è¡Œæ‹¦æˆªã€‚","text":"æˆ‘ä»¬åœ¨è‡ªå·±çš„ä¸šåŠ¡ç³»ç»Ÿä¸­ï¼Œé€šå¸¸ä¼šç”¨åˆ°è‡ªå®šä¹‰çš„ä¸šåŠ¡å¼‚å¸¸ç±»ï¼Œè¿™ä¸ªå¼‚å¸¸ä¼šç»§æ‰¿extends RuntimeExceptionï¼Œå½“å‘ç”Ÿä¸šåŠ¡é™åˆ¶çš„æ—¶å€™ï¼Œä¼šthrowå‡ºæ¥ã€‚ä½†æ˜¯åœ¨ä½¿ç”¨dubboè¿›è¡Œsoaæ²»ç†çš„æ—¶å€™ï¼Œä¼šå‘ç°provideræŠ›å‡ºçš„å¼‚å¸¸ï¼Œåœ¨customç«¯å¹¶ä¸èƒ½æ­£ç¡®çš„æ•è·ã€‚å³ä¾¿æˆ‘ä»¬åœ¨providerå’Œcustoméƒ½æœ‰å¯¼å…¥ç›¸åŒframework.jarä¸‹é¢çš„BusinessExceptionå¼‚å¸¸ï¼Œå¹¶ä¸”æŠ›å‡ºè¿™ä¸ªå¼‚å¸¸ï¼Œåœ¨Consumerç«¯åªä¼šæ‰“å°ä¸€è¡Œå¼‚å¸¸ä¿¡æ¯ï¼Œè·å–ä¸åˆ°æ­£å¸¸çš„å¼‚å¸¸ã€‚ç™¾åº¦æ‰çŸ¥é“Dubboå¯¹æŠ›å‡ºå¾—å¼‚å¸¸ç”¨ä¸€ä¸ªExceptionFilterçš„ç±»è¿›è¡Œæ‹¦æˆªã€‚ åœ¨ä¸€ä¸ªå…¬å…±åŒ…é‡Œå®šä¹‰ä¸€ä¸ªå¼‚å¸¸ç±»ï¼Œç»§æ‰¿è‡ªRuntimeExceptionã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243public class BusinessException extends RuntimeException &#123; /** * å¼‚å¸¸code */ private String code; public BusinessException() &#123; super(); &#125; public BusinessException(String message) &#123; super(message); &#125; public BusinessException(String code, String message) &#123; super(message); this.code = code; &#125; public BusinessException(String message, Throwable cause) &#123; super(message, cause); &#125; public BusinessException(String code, String message, Throwable cause) &#123; super(message, cause); this.code = code; &#125; public BusinessException(Throwable cause) &#123; super(cause); &#125; public String getCode() &#123; return code; &#125; public void setCode(String code) &#123; this.code = code; &#125;&#125; åœ¨æœåŠ¡æä¾›è€…çš„Dubboé…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä¸‹é¢çš„å†…å®¹ï¼Œä¸»è¦å°±æ˜¯è‡ªå®šä¹‰exceptionFilterï¼Œç„¶åæ’å‡ºdubboè‡ªå¸¦çš„exceptionFilter 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:dubbo=\"http://code.alibabatech.com/schema/dubbo\" xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://code.alibabatech.com/schema/dubbo http://code.alibabatech.com/schema/dubbo/dubbo.xsd\"&gt; &lt;!-- http://dubbo.apache.org/schema/dubbo/dubbo.xsd ä¸Šé¢é…ç½®ä¸ºè¿™ä¸ªä¸€ç›´æŠ¥é”™ï¼Œæ”¹ä¸º http://code.alibabatech.com/schema/dubbo/dubbo.xsd --&gt; &lt;!--ç”¨äºé…ç½®å½“å‰åº”ç”¨ä¿¡æ¯ï¼Œä¸ç®¡è¯¥åº”ç”¨æ˜¯æä¾›è€…è¿˜æ˜¯æ¶ˆè´¹è€… --&gt; &lt;dubbo:application name=\"dubbo-web-provide\"/&gt; &lt;!-- ç”¨äºé…ç½®è¿æ¥æ³¨å†Œä¸­å¿ƒç›¸å…³ä¿¡æ¯ --&gt; &lt;dubbo:registry address=\"zookeeper://localhost:2181\" timeout=\"30000\"&gt; &lt;!--é…ç½®redisè¿æ¥å‚æ•° --&gt; &lt;!--å…·ä½“å‚æ•°é…ç½®è§com.alibaba.dubbo.registry.redis.RedisRegistry.class --&gt; &lt;dubbo:parameter key=\"max.idle\" value=\"10\" /&gt; &lt;dubbo:parameter key=\"min.idle\" value=\"5\" /&gt; &lt;dubbo:parameter key=\"max.active\" value=\"20\" /&gt; &lt;dubbo:parameter key=\"max.total\" value=\"100\" /&gt; &lt;/dubbo:registry&gt; &lt;!-- æœ€é‡è¦çš„å°±æ˜¯ä¸‹é¢çš„é…ç½®ï¼šè‡ªå®šä¹‰exceptionFilterï¼Œç„¶åæ’å‡ºdubboè‡ªå¸¦çš„exceptionFilter payload è®¾ç½®ä¼ è¾“çš„æœ€å¤§å€¼ --&gt; &lt;dubbo:provider filter=\"dubboExceptionFilter,-exception\" payload=\"123886080\" &gt;&lt;/dubbo:provider&gt; &lt;!-- ç”¨äºé…ç½®æä¾›æœåŠ¡çš„åè®®ä¿¡æ¯ï¼Œåè®®ç”±æä¾›æ–¹æŒ‡å®šï¼Œæ¶ˆè´¹æ–¹è¢«åŠ¨æ¥å— --&gt; &lt;dubbo:protocol name=\"dubbo\" port=\"20880\" accesslog=\"true\" serialization=\"hessian2\" /&gt; &lt;!-- å®ç°ç±» --&gt; &lt;bean id=\"helloService\" class=\"cn.ydstudio.dubbo.web.provide.serviceimpl.HelloServiceImpl\" /&gt; &lt;bean id=\"goodsService\" class=\"cn.ydstudio.dubbo.web.provide.serviceimpl.GoodsServiceImpl\" /&gt; &lt;bean id=\"goodsService2\" class=\"cn.ydstudio.dubbo.web.provide.serviceimpl.GoodsServiceImpl2\" /&gt; &lt;bean id=\"goodsOrderServiceRemoteImpl\" class=\"cn.ydstudio.dubbo.web.provide.serviceimpl.GoodsOrderServiceRemoteImpl\" /&gt; &lt;!--å®šä¹‰æš´éœ²æœåŠ¡çš„æ¥å£ï¼Œç”¨äºæš´éœ²ä¸€ä¸ªæœåŠ¡ï¼Œå®šä¹‰æœåŠ¡çš„å…ƒä¿¡æ¯ï¼Œä¸€ä¸ªæœåŠ¡å¯ä»¥ç”¨å¤šä¸ªåè®®æš´éœ²ï¼Œä¸€ä¸ªæœåŠ¡ä¹Ÿå¯ä»¥æ³¨å†Œåˆ°å¤šä¸ªæ³¨å†Œä¸­å¿ƒ --&gt; &lt;!--æ¯ä¸ªæ¥å£éƒ½åº”å®šä¹‰ç‰ˆæœ¬å·ï¼Œä¸ºåç»­ä¸å…¼å®¹å‡çº§æä¾›å¯èƒ½ --&gt; &lt;!--refï¼šæœåŠ¡çš„çœŸæ­£å®ç°ç±» --&gt; &lt;dubbo:service interface=\"cn.ydstudio.dubbo.rpc.service.HelloService\" ref=\"helloService\" version=\"1.0.0\" retries=\"1\"/&gt; &lt;dubbo:service interface=\"cn.ydstudio.dubbo.rpc.service.GoodsService\" ref=\"goodsService\" version=\"1.0.0\" retries=\"1\"/&gt; &lt;dubbo:service interface=\"cn.ydstudio.dubbo.rpc.service.GoodsService\" ref=\"goodsService2\" version=\"2.0.0\" retries=\"1\"/&gt; &lt;dubbo:service interface=\"cn.ydstudio.dubbo.rpc.service.GoodsOrderServiceRemote\" ref=\"goodsOrderServiceRemoteImpl\" version=\"1.0.0\" retries=\"0\" &gt; &lt;dubbo:method name=\"querGoodsOrderList\" timeout=\"1000000\"/&gt; &lt;/dubbo:service&gt; &lt;!--ç›‘æ§ä¸­å¿ƒé…ç½® ç›‘æ§ä¸­å¿ƒåè®®ï¼Œå¦‚æœä¸ºprotocol=\"registry\"ï¼Œè¡¨ç¤ºä»æ³¨å†Œä¸­å¿ƒå‘ç°ç›‘æ§ä¸­å¿ƒåœ°å€ï¼Œå¦åˆ™ç›´è¿ç›‘æ§ä¸­å¿ƒã€‚ --&gt; &lt;!--&lt;dubbo:monitor protocol=\"registry\"&gt;&lt;/dubbo:monitor&gt;--&gt; &lt;!-- ç›´è¿ç›‘æ§ä¸­å¿ƒæœåŠ¡å™¨åœ°å€ --&gt; &lt;!-- &lt;dubbo:monitor address=\"localhost:6379\"&gt;&lt;/dubbo:monitor&gt; --&gt; &lt;/beans&gt; æœ€é‡è¦çš„ç»§æ‰¿ExceptionFilterï¼Œç„¶åé‡å†™invokeæ–¹æ³• 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495package cn.ydstudio.dubbo.web.provide.filter;import cn.ydstudio.common.tools.exception.BizException;import cn.ydstudio.common.tools.exception.BusinessException;import com.alibaba.dubbo.common.logger.Logger;import com.alibaba.dubbo.common.logger.LoggerFactory;import com.alibaba.dubbo.common.utils.ReflectUtils;import com.alibaba.dubbo.common.utils.StringUtils;import com.alibaba.dubbo.rpc.*;import com.alibaba.dubbo.rpc.filter.ExceptionFilter;import com.alibaba.dubbo.rpc.service.GenericService;import java.lang.reflect.Method;/** * åŠŸèƒ½æè¿°:&lt;br/&gt; * * @Author Sam * @Date 2019/4/30 18:02 */public class DubboExceptionFilter extends ExceptionFilter &#123; private final Logger logger; public DubboExceptionFilter() &#123; this(LoggerFactory.getLogger(com.alibaba.dubbo.rpc.filter.ExceptionFilter.class)); &#125; public DubboExceptionFilter(Logger logger) &#123; this.logger = logger; &#125; @Override public Result invoke(Invoker&lt;?&gt; invoker, Invocation invocation) throws RpcException &#123; try &#123; Result result = invoker.invoke(invocation); if (result.hasException() &amp;&amp; GenericService.class != invoker.getInterface()) &#123; try &#123; Throwable exception = result.getException(); // è‡ªå®šä¹‰çš„å¼‚å¸¸ if (exception instanceof BizException || exception instanceof BusinessException)&#123; return result; &#125; if (!(exception instanceof RuntimeException) &amp;&amp; exception instanceof Exception) &#123; return result; &#125; else &#123; try &#123; Method method = invoker.getInterface().getMethod(invocation.getMethodName(), invocation.getParameterTypes()); Class&lt;?&gt;[] exceptionClassses = method.getExceptionTypes(); Class[] arr$ = exceptionClassses; int len$ = exceptionClassses.length; for (int i$ = 0; i$ &lt; len$; ++i$) &#123; Class&lt;?&gt; exceptionClass = arr$[i$]; if (exception.getClass().equals(exceptionClass)) &#123; return result; &#125; &#125; &#125; catch (NoSuchMethodException var11) &#123; return result; &#125; this.logger.error(\"Got unchecked and undeclared exception which called by \" + RpcContext.getContext().getRemoteHost() + \". service: \" + invoker.getInterface().getName() + \", method: \" + invocation.getMethodName() + \", exception: \" + exception.getClass().getName() + \": \" + exception.getMessage(), exception); String serviceFile = ReflectUtils.getCodeBase(invoker.getInterface()); String exceptionFile = ReflectUtils.getCodeBase(exception.getClass()); if (serviceFile != null &amp;&amp; exceptionFile != null &amp;&amp; !serviceFile.equals(exceptionFile)) &#123; String className = exception.getClass().getName(); if (!className.startsWith(\"java.\") &amp;&amp; !className.startsWith(\"javax.\")) &#123; return (Result) (exception instanceof RpcException ? result : new RpcResult(new RuntimeException(StringUtils.toString(exception)))); &#125; else &#123; return result; &#125; &#125; else &#123; return result; &#125; &#125; &#125; catch (Throwable var12) &#123; this.logger.warn(\"Fail to ExceptionFilter when called by \" + RpcContext.getContext().getRemoteHost() + \". service: \" + invoker.getInterface().getName() + \", method: \" + invocation.getMethodName() + \", exception: \" + var12.getClass().getName() + \": \" + var12.getMessage(), var12); return result; &#125; &#125; else &#123; return result; &#125; &#125; catch (RuntimeException var13) &#123; this.logger.error(\"Got unchecked and undeclared exception which called by \" + RpcContext.getContext().getRemoteHost() + \". service: \" + invoker.getInterface().getName() + \", method: \" + invocation.getMethodName() + \", exception: \" + var13.getClass().getName() + \": \" + var13.getMessage(), var13); throw var13; &#125; &#125;&#125; ç„¶ååœ¨providerå¯ä»¥ç›´æ¥æŠ›å‡ºå¼‚å¸¸ï¼Œåœ¨consumerå¯ä»¥ç›´æ¥æ•æ‰åˆ°ã€‚consumeræœåŠ¡æ¶ˆè´¹ç«¯å¯ä»¥æ–°å»ºä¸€ä¸ªå…¨å±€å¼‚å¸¸å¤„ç†çš„æ§åˆ¶å™¨ï¼Œå¯ä»¥æ ¼å¼åŒ–åè¾“å‡ºç»™å‰ç«¯ã€‚","categories":[],"tags":[{"name":"dubbo","slug":"dubbo","permalink":"https://ydstudios.gitee.io/tags/dubbo/"}]},{"title":"å°è¯•é˜¿é‡Œå·´å·´EasyExcelå¯¼å‡ºExcel","slug":"å°è¯•é˜¿é‡Œå·´å·´EasyExcelå¯¼å‡ºExcel","date":"2019-05-17T23:43:39.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/76eb7bfd.html","link":"","permalink":"https://ydstudios.gitee.io/post/76eb7bfd.html","excerpt":"æ·»åŠ easyexcelçš„mavenä¾èµ–12345&lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;easyexcel&lt;/artifactId&gt; &lt;version&gt;1.1.1&lt;/version&gt; &lt;/dependency&gt;","text":"æ·»åŠ easyexcelçš„mavenä¾èµ–12345&lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;easyexcel&lt;/artifactId&gt; &lt;version&gt;1.1.1&lt;/version&gt; &lt;/dependency&gt; å¯¼å‡ºçš„æ¨¡å‹éœ€è¦ç»§æ‰¿BaseRowModelï¼Œç„¶åå¯ä»¥åœ¨æ¯ä¸ªå±æ€§ä¸Šè®¾ç½®æ‰€åœ¨çš„åˆ—å’Œä¸€äº›format12345678910111213141516171819202122232425262728293031323334public class GoodsOrderExportDto extends BaseRowModel &#123; @ExcelProperty(value = \"è®¢å•åºå·\",index = 0) private Long orderId; @ExcelProperty(value = \"è®¢å•ç¼–å·\",index = 1) private String orderCode; @ExcelProperty(value = \"å•†å“åºå·\",index = 2) private Long goodsId; @ExcelProperty(value = \"å•†å“åç§°\",index = 3) private String goodsTitle; @ExcelProperty(value = \"å•†å“é“¾æ¥\",index = 4) private String goodsDetailsUrl; @ExcelProperty(value = \"å•†å“å›¾ç‰‡\",index = 5) private String goodsPhoto; @ExcelProperty(value = \"å•†å“æ•°é‡\",index = 6) private Long goodsNum; @ExcelProperty(value = \"å•†å“ä»·æ ¼\",index = 7) private BigDecimal goodsAmt; @ExcelProperty(value = \"åŒºåŸŸå…¬å¸\",index = 8) private Long areaComp; @ExcelProperty(value = \"ä»˜æ¬¾æ—¶é—´\",index = 12,format = \"yy-MM-dd hh:mm:ss\") private Date payTime;&#125; æœ€ååœ¨æ§åˆ¶å™¨è¾“å‡º12345678910111213141516171819202122232425262728293031323334@RequestMapping(value = \"export\",method = RequestMethod.GET) public void exportExcel(HttpServletRequest request, HttpServletResponse response) throws IOException &#123; List&lt;GoodsOrderDto&gt; orderDtoList = goodsOrderServiceRemote.querGoodsOrderList(); List&lt;GoodsOrderExportDto&gt; orderExportDtoList = Collections.emptyList(); if (CollectionUtils.isNotEmpty(orderDtoList))&#123; orderExportDtoList = new ArrayList&lt;&gt;(orderDtoList.size()); for (GoodsOrderDto goodsOrderDto : orderDtoList) &#123; GoodsOrderExportDto goodsOrderExportDto = new GoodsOrderExportDto(); BeanUtils.copyProperties(goodsOrderDto,goodsOrderExportDto); orderExportDtoList.add(goodsOrderExportDto); &#125; orderDtoList.clear(); &#125; // è®¾å®šè¾“å‡ºæ–‡ä»¶å¤´ response.setHeader(\"Content-disposition\", \"attachment; filename=\" + URLEncoder.encode(\"è®¢å•å¯¼å‡º.xls\", \"UTF-8\")); // å®šä¹‰è¾“å‡ºç±»å‹ response.setContentType(\"application/msexcel\"); OutputStream outputStream = response.getOutputStream(); ExcelWriter excelWriter = new ExcelWriter(outputStream, ExcelTypeEnum.XLS); Sheet sheet = new Sheet(1, 0, GoodsOrderExportDto.class); excelWriter.write(orderExportDtoList,sheet); outputStream.flush(); excelWriter.finish(); outputStream.close(); &#125;","categories":[],"tags":[{"name":"EasyExcel","slug":"EasyExcel","permalink":"https://ydstudios.gitee.io/tags/EasyExcel/"}]},{"title":"æŸ¥çœ‹ä¾èµ–ç¬¬ä¸‰æ–¹jaræœ€ä½è¦æ±‚è¿è¡Œçš„jdkç‰ˆæœ¬","slug":"æŸ¥çœ‹ä¾èµ–ç¬¬ä¸‰æ–¹jaræœ€ä½è¦æ±‚è¿è¡Œçš„jdkç‰ˆæœ¬","date":"2019-05-17T23:42:49.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/58af8f82.html","link":"","permalink":"https://ydstudios.gitee.io/post/58af8f82.html","excerpt":"æœ€è¿‘åœ¨æ¯”è¾ƒé˜¿é‡Œå·´å·´çš„easyexcelå’Œeasypoiçš„excelå¯¼å‡ºåŠŸèƒ½å“ªä¸ªå¼ºå¤§ã€‚ä¸¤è€…çš„demoæˆ‘éƒ½æ˜¯å†™åœ¨åŒä¸€ä¸ªå·¥ç¨‹é‡Œé¢çš„ï¼Œeasyexcelçš„demoæ˜¯å…ˆå†™çš„ï¼Œä½¿ç”¨èµ·æ¥æ–¹ä¾¿ç®€æ´ã€‚ç„¶åå¼€å§‹å†™easypoiçš„demoæ—¶ï¼Œé¦–å…ˆå‡ºç°äº†ä¾èµ–ä¸‹è½½ä¸äº†ï¼Œä¾èµ–èƒ½ä¸‹è½½ä¹‹åï¼Œè¿˜å‡ºç°äº†ä¸‹é¢çš„ä¹±ä¸ƒå…«ç³Ÿçš„é—®é¢˜ï¼š","text":"æœ€è¿‘åœ¨æ¯”è¾ƒé˜¿é‡Œå·´å·´çš„easyexcelå’Œeasypoiçš„excelå¯¼å‡ºåŠŸèƒ½å“ªä¸ªå¼ºå¤§ã€‚ä¸¤è€…çš„demoæˆ‘éƒ½æ˜¯å†™åœ¨åŒä¸€ä¸ªå·¥ç¨‹é‡Œé¢çš„ï¼Œeasyexcelçš„demoæ˜¯å…ˆå†™çš„ï¼Œä½¿ç”¨èµ·æ¥æ–¹ä¾¿ç®€æ´ã€‚ç„¶åå¼€å§‹å†™easypoiçš„demoæ—¶ï¼Œé¦–å…ˆå‡ºç°äº†ä¾èµ–ä¸‹è½½ä¸äº†ï¼Œä¾èµ–èƒ½ä¸‹è½½ä¹‹åï¼Œè¿˜å‡ºç°äº†ä¸‹é¢çš„ä¹±ä¸ƒå…«ç³Ÿçš„é—®é¢˜ï¼š 123Handler dispatch failed; nested exception is java.lang.NoClassDefFoundError: cn/afterturn/easypoi/excel/entity/ExportParamsUnsupported major.minor version 52.0 åˆšå¼€å§‹æˆ‘æ˜¯ä»¥ä¸ºeasypoiçš„ä¾èµ–åŒ…æ²¡æœ‰å®Œæ•´ä¸‹ä¸‹æ¥ï¼Œåæ¥æ£€æŸ¥å‘ç°åº”è¯¥å…¨éƒ¨ä¸‹è½½äº†ã€‚åæ¥æˆ‘æƒ³æ˜¯ä¸æ˜¯ä¾èµ–æ²¡æœ‰æ·»åŠ å…¨ï¼Œå»easypoiçš„å®˜æ–¹ç½‘ç«™çœ‹ï¼Œæˆ‘çš„ä¾èµ–ä½¿ç”¨åº”è¯¥æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯æŠŠeasypoiçš„ç‰ˆæœ¬ä»4.0.0é™åˆ°äº†3.30ï¼Œä½†æ˜¯demoè¿è¡Œèµ·æ¥è¿˜æ˜¯æŠ¥é”™ã€‚åæ¥æˆ‘æƒ³åˆ°easyexcelä¹Ÿæ˜¯ä¾èµ–poiçš„ï¼Œæ˜¯ä¸æ˜¯ä»–ä¿©åˆç‰ˆæœ¬ä¾èµ–çš„å†²çªã€‚äºæ˜¯æˆ‘æŠŠeasyexcelç»™æ³¨é‡Šäº†ï¼Œäºæ˜¯æˆ‘å°±æˆåŠŸäº†ï¼~æˆ‘å˜ä¸ªå»ï¼ï¼ï¼ï¼ï¼å‡ºç°ç¬¬ä¸€ä¸ªé”™è¯¯å°±æ˜¯å› ä¸ºeasyexcelå’Œeasypoiçš„ä¾èµ–æœ‰å†²çªã€‚å‡ºç°ç¬¬äºŒä¸ªé”™è¯¯æ˜¯è‹±æ–‡ï¼Œä½¿ç”¨çš„easypoiçš„ç‰ˆæœ¬è¿‡é«˜ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯easypoi4.0.0,ä»–éœ€è¦çš„jdkçš„ç‰ˆæœ¬æ˜¯jdk8ä»¥ä¸Šçš„ã€‚ é‚£å¦‚ä½•æŸ¥çœ‹ç¬¬ä¸‰æ–¹ä¾èµ–æœ€ä½è¦æ±‚è¿è¡Œçš„jdkç‰ˆæœ¬å‘¢ï¼Ÿ åœ¨ç¬¬ä¸‰æ–¹jaråŒ…ä¸‹ä¼šå­˜åœ¨ä¸€ä¸ªMETA-INFç›®å½•ï¼Œè¯¥ç›®å½•ä¸‹æœ‰ä¸€ä¸ªMANIFEST.MFæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä»¥é”®å€¼å¯¹çš„å½¢å¼å­˜å‚¨ä¸€äº›å…³äºjaråŒ…çš„å…³é”®ä¿¡æ¯ã€‚ä¸‹é¢æˆ‘ä»¥easypoi-baseçš„MANIFEST.MFæ–‡ä»¶åšä¸ºç¤ºä¾‹ï¼š 12345Manifest-Version: 1.0Archiver-Version: Plexus ArchiverBuilt-By: jueyueCreated-By: Apache Maven 3.1.1Build-Jdk: 1.8.0_144 å¯æ˜¯ä¸€ä¸ª.jaræ–‡ä»¶ä¸­ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªå­—æ®µï¼Œå°±å¿…é¡»é€šè¿‡ä¸‹é¢ä¸€ç§æ–¹æ³•æ¥æŸ¥çœ‹ é€šè¿‡åç¼–è¯‘.classæ–‡ä»¶æ¥æŸ¥çœ‹è§£å‹.jaråŒ…ï¼Œèƒ½å¾—åˆ°.classæ–‡ä»¶ã€‚ç”¨JDKè‡ªå¸¦çš„javapåç¼–è¯‘.classæ–‡ä»¶ï¼Œç”¨å¦‚ä¸‹å‘½ä»¤ï¼š 1234javap -verbose Configuration.class#æŸ¥çœ‹å¾—åˆ°çš„ä¿¡æ¯ä¸­ï¼Œmajor versionå±æ€§çš„å†…å®¹ï¼Œå¦‚ä¸‹major version: 52 è¯´æ˜è¿™ä¸ª.classæ–‡ä»¶æ˜¯ç”±JDK1.8ç¼–è¯‘å¾—åˆ°çš„ã€‚ Java 9 uses major version 53 J2SE 8.0 = 52(0x33 hex) J2SE 7.0 = 51(0x32 hex) J2SE 6.0 = 50 (0x32 hex) J2SE 5.0 = 49 (0x31 hex) JDK 1.4 = 48 (0x30 hex) JDK 1.3 = 47 (0x2F hex) JDK 1.2 = 46 (0x2E hex) JDK 1.1 = 45 (0x2D hex) æ³¨æ„ï¼šä¸€ä¸ª.jaråŒ…ä¸­å¯èƒ½æœ‰å¤šä¸ª.classæ–‡ä»¶ï¼Œæ¯ä¸ª.classçš„JDKç‰ˆæœ¬å¯èƒ½ä¼šä¸ä¸€æ ·ï¼ˆç¼–è¯‘å™¨å¤šä¸ªé¡¹ç›®è®¾ç½®ä¸åŒï¼‰ æˆ‘ç”µè„‘ä¸Šå®‰è£…çš„æ˜¯jdk7ã€‚æ‰€ä»¥è§£å†³åŠæ³•æ˜¯åˆ æ‰easyexcelçš„ä¾èµ–ï¼Œä½¿ç”¨easypoiè¿è¡Œå’Œè‡ªå·±jdkç›¸åŒç‰ˆæœ¬çš„å°±è¡Œäº†","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"}]},{"title":"Dubboå‡ºç°ExceedPayloadLimitException: Data length too largeçš„é”™è¯¯","slug":"Dubboå‡ºç°ExceedPayloadLimitException-Data-length-too-largeçš„é”™è¯¯","date":"2019-05-14T23:41:47.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/45135675.html","link":"","permalink":"https://ydstudios.gitee.io/post/45135675.html","excerpt":"åœ¨ä½¿ç”¨dubboçš„æ—¶å€™ï¼Œä¸€æ¬¡è¯·æ±‚çš„æ•°æ®é‡è¿‡å¤§çš„æ—¶å€™ï¼Œä¼šå‡ºç°ä¸‹é¢çš„é—®é¢˜ã€‚","text":"åœ¨ä½¿ç”¨dubboçš„æ—¶å€™ï¼Œä¸€æ¬¡è¯·æ±‚çš„æ•°æ®é‡è¿‡å¤§çš„æ—¶å€™ï¼Œä¼šå‡ºç°ä¸‹é¢çš„é—®é¢˜ã€‚ 123456789101112131415161718192021222324252627com.alibaba.dubbo.remoting.transport.ExceedPayloadLimitException: Data length too large: 12470880, max payload: 8388608, channel: NettyChannel [channel=[id: 0x78767b1e, /10.23.144.194:54414 =&gt; /10.23.144.194:20880]] at com.alibaba.dubbo.remoting.transport.AbstractCodec.checkPayload(AbstractCodec.java:44) ~[dubbo-2.6.2.jar:2.6.2] at com.alibaba.dubbo.remoting.exchange.codec.ExchangeCodec.encodeResponse(ExchangeCodec.java:288) [dubbo-2.6.2.jar:2.6.2] at com.alibaba.dubbo.remoting.exchange.codec.ExchangeCodec.encode(ExchangeCodec.java:73) [dubbo-2.6.2.jar:2.6.2] at com.alibaba.dubbo.rpc.protocol.dubbo.DubboCountCodec.encode(DubboCountCodec.java:38) [dubbo-2.6.2.jar:2.6.2] at com.alibaba.dubbo.remoting.transport.netty.NettyCodecAdapter$InternalEncoder.encode(NettyCodecAdapter.java:80) [dubbo-2.6.2.jar:2.6.2] at org.jboss.netty.handler.codec.oneone.OneToOneEncoder.handleDownstream(OneToOneEncoder.java:66) [netty-3.2.5.Final.jar:na] at org.jboss.netty.channel.DefaultChannelPipeline.sendDownstream(DefaultChannelPipeline.java:591) [netty-3.2.5.Final.jar:na] at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendDownstream(DefaultChannelPipeline.java:776) [netty-3.2.5.Final.jar:na] at org.jboss.netty.channel.SimpleChannelHandler.writeRequested(SimpleChannelHandler.java:304) [netty-3.2.5.Final.jar:na] at com.alibaba.dubbo.remoting.transport.netty.NettyHandler.writeRequested(NettyHandler.java:98) [dubbo-2.6.2.jar:2.6.2] at org.jboss.netty.channel.SimpleChannelHandler.handleDownstream(SimpleChannelHandler.java:266) [netty-3.2.5.Final.jar:na] at org.jboss.netty.channel.DefaultChannelPipeline.sendDownstream(DefaultChannelPipeline.java:591) [netty-3.2.5.Final.jar:na] at org.jboss.netty.channel.DefaultChannelPipeline.sendDownstream(DefaultChannelPipeline.java:582) [netty-3.2.5.Final.jar:na] at org.jboss.netty.channel.Channels.write(Channels.java:611) [netty-3.2.5.Final.jar:na] at org.jboss.netty.channel.Channels.write(Channels.java:578) [netty-3.2.5.Final.jar:na] at org.jboss.netty.channel.AbstractChannel.write(AbstractChannel.java:251) [netty-3.2.5.Final.jar:na] at com.alibaba.dubbo.remoting.transport.netty.NettyChannel.send(NettyChannel.java:100) [dubbo-2.6.2.jar:2.6.2] at com.alibaba.dubbo.remoting.transport.AbstractPeer.send(AbstractPeer.java:53) [dubbo-2.6.2.jar:2.6.2] at com.alibaba.dubbo.remoting.exchange.support.header.HeaderExchangeHandler.received(HeaderExchangeHandler.java:173) [dubbo-2.6.2.jar:2.6.2] at com.alibaba.dubbo.remoting.transport.DecodeHandler.received(DecodeHandler.java:51) [dubbo-2.6.2.jar:2.6.2] at com.alibaba.dubbo.remoting.transport.dispatcher.ChannelEventRunnable.run(ChannelEventRunnable.java:80) [dubbo-2.6.2.jar:2.6.2] at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [na:1.7.0_80] at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [na:1.7.0_80] at java.lang.Thread.run(Thread.java:745) [na:1.7.0_80]2019-05-14 10:27:30.194 WARN 10424 --- [:20880-thread-4] c.a.d.r.exchange.codec.ExchangeCodec : [DUBBO] Data length too large: 12470880, max payload: 8388608, channel: NettyChannel [channel=[id: 0x78767b1e, /10.23.144.194:54414 =&gt; /10.23.144.194:20880]], dubbo version: 2.6.2, current host: 10.23.144.194 å½“DubboæœåŠ¡æä¾›è€…å‘æ¶ˆè´¹è€…ä¼ è¾“å¤§æ•°æ®å®¹é‡çš„å¯¹è±¡æ—¶ï¼Œä¼šå—åˆ°Dubboçš„é™åˆ¶ï¼ŒæŠ›å‡ºä¸Šé¢çš„Data length too largeå¼‚å¸¸ç¼–è¾‘dubbo.xml,æ·»åŠ payloadé…ç½®ï¼Œé»˜è®¤æ˜¯8Mï¼Œæˆ‘ç»™æ”¹æˆ80Mã€‚è¿™æ ·åšç®€å•ç²—æš´ï¼Œå…¶å®ä¸å¤ªç¬¦åˆDubboçš„è®¾è®¡ç†å¿µã€‚ 1&lt;dubbo:provider filter=\"dubboExceptionFilter,-exception\" payload=\"83886080\" &gt;&lt;/dubbo:provider&gt;","categories":[],"tags":[{"name":"dubbo","slug":"dubbo","permalink":"https://ydstudios.gitee.io/tags/dubbo/"}]},{"title":"MyBatis Generatoré…ç½®æ–‡ä»¶--æŒ‡å®šç”Ÿæˆå®ä½“ç±»ä½¿ç”¨å®é™…çš„è¡¨åˆ—åä½œä¸ºå®ä½“ç±»çš„å±æ€§å","slug":"MyBatis-Generatoré…ç½®æ–‡ä»¶-æŒ‡å®šç”Ÿæˆå®ä½“ç±»ä½¿ç”¨å®é™…çš„è¡¨åˆ—åä½œä¸ºå®ä½“ç±»çš„å±æ€§å","date":"2019-05-13T23:40:33.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/f1ed0391.html","link":"","permalink":"https://ydstudios.gitee.io/post/f1ed0391.html","excerpt":"ä»Šå¤©åœ¨ç”¨MyBatis Generatorç”Ÿæˆè¡¨å®ä½“çš„æ—¶å€™ï¼Œå‘ç°æ•°æ®åº“ä¸­çš„è¡¨å­—æ®µä½¿ç”¨çš„æ˜¯å°é©¼å³°å‘½åè§„åˆ™ï¼Œç”Ÿæˆå‡ºæ¥çš„å®ä½“å±æ€§éƒ½æ˜¯å°å†™äº†ï¼Œæ²¡æœ‰è½¬æˆå°é©¼å³°ï¼Œä¸€ç•ªæœç´¢å¾—çŸ¥å¯ä»¥åœ¨MyBatis Generatorçš„é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹ã€‚","text":"ä»Šå¤©åœ¨ç”¨MyBatis Generatorç”Ÿæˆè¡¨å®ä½“çš„æ—¶å€™ï¼Œå‘ç°æ•°æ®åº“ä¸­çš„è¡¨å­—æ®µä½¿ç”¨çš„æ˜¯å°é©¼å³°å‘½åè§„åˆ™ï¼Œç”Ÿæˆå‡ºæ¥çš„å®ä½“å±æ€§éƒ½æ˜¯å°å†™äº†ï¼Œæ²¡æœ‰è½¬æˆå°é©¼å³°ï¼Œä¸€ç•ªæœç´¢å¾—çŸ¥å¯ä»¥åœ¨MyBatis Generatorçš„é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹ã€‚ tableæ ‡ç­¾ä¸‹çš„è®¾ç½®å±æ€§useActualColumnNamesç”¨äºæŒ‡å®šç”Ÿæˆå®ä½“ç±»æ—¶æ˜¯å¦ä½¿ç”¨å®é™…çš„åˆ—åä½œä¸ºå®ä½“ç±»çš„å±æ€§åï¼Œå–å€¼trueæˆ–falseã€‚ trueï¼šMyBatis Generatorä¼šä½¿ç”¨æ•°æ®åº“ä¸­å®é™…çš„å­—æ®µåå­—ä½œä¸ºç”Ÿæˆçš„å®ä½“ç±»çš„å±æ€§åã€‚ falseï¼šè¿™æ˜¯é»˜è®¤å€¼ã€‚å¦‚æœè®¾ç½®ä¸ºfalse,åˆ™MyBatis Generatorä¼šå°†æ•°æ®åº“ä¸­å®é™…çš„å­—æ®µåå­—è½¬æ¢ä¸ºCamel Caseé£æ ¼ä½œä¸ºç”Ÿæˆçš„å®ä½“ç±»çš„å±æ€§åã€‚ å¦‚æœæ˜ç¡®çš„ä½¿ç”¨columnOverrideå…ƒç´ æŒ‡å®šäº†å­—æ®µå¯¹åº”çš„å®ä½“çš„å±æ€§å,é‚£ä¹ˆuseActualColumnNamesä¼šè¢«å¿½ç•¥ã€‚ å‡è®¾è¡¨æœ‰ä¸€ä¸ªå­—æ®µåä¸ºstart_date,å¦‚æœè¿™ä¸ªå±æ€§è®¾ç½®ä¸ºtrue,åˆ™ç”Ÿæˆçš„å®ä½“ç±»çš„å±æ€§åä¸ºstart_date,ç”Ÿæˆçš„setter/getterä¸º setStart_date/getStart_dateã€‚å¦‚æœuseActualColumnNamesè®¾ç½®ä¸ºfalse,åˆ™ç”Ÿæˆçš„å®ä½“ç±»çš„å±æ€§åä¸ºstartDate,ç”Ÿæˆçš„setter/getterä¸ºsetStartDate/getStartDateã€‚ 123456&lt;table tableName=\"dobbo_goods_order\" domainObjectName=\"GoodsOrder\" enableCountByExample=\"false\" enableUpdateByExample=\"false\" enableDeleteByExample=\"false\" enableSelectByExample=\"false\" selectByExampleQueryId=\"false\" &gt; &lt;!-- tableæ ‡ç­¾ä¸‹çš„è®¾ç½®å±æ€§useActualColumnNamesç”¨äºæŒ‡å®šç”Ÿæˆå®ä½“ç±»æ—¶æ˜¯å¦ä½¿ç”¨å®é™…çš„åˆ—åä½œä¸ºå®ä½“ç±»çš„å±æ€§åï¼Œå–å€¼trueæˆ–false--&gt; &lt;property name=\"useActualColumnNames\" value=\"true\" /&gt; &lt;/table&gt;","categories":[],"tags":[{"name":"mybatis","slug":"mybatis","permalink":"https://ydstudios.gitee.io/tags/mybatis/"}]},{"title":"Dubboç”±äºè¿æ¥ä¸ä¸Šmonitorç›‘æ§ä¸­å¿ƒæŠ¥é”™","slug":"Dubboç”±äºè¿æ¥ä¸ä¸Šmonitorç›‘æ§ä¸­å¿ƒæŠ¥é”™","date":"2019-05-08T23:38:49.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/9008dc8b.html","link":"","permalink":"https://ydstudios.gitee.io/post/9008dc8b.html","excerpt":"dubbboä½¿ç”¨æ—¶å€™æ²¡æœ‰å¯åŠ¨ç›‘æ§ä¸­å¿ƒï¼Œä¸èƒ½é…äº†ç›‘æ§åœ°å€ã€‚","text":"dubbboä½¿ç”¨æ—¶å€™æ²¡æœ‰å¯åŠ¨ç›‘æ§ä¸­å¿ƒï¼Œä¸èƒ½é…äº†ç›‘æ§åœ°å€ã€‚ 12345678910111213141516com.alibaba.dubbo.rpc.RpcException: Failed to invoke the method collect in the service com.alibaba.dubbo.monitor.MonitorService. No provider available for the service com.alibaba.dubbo.monitor.MonitorService from registry localhost:2181 on the consumer 10.23.144.194 using the dubbo version 2.6.2. Please check if the providers have been started and registered. at com.alibaba.dubbo.rpc.cluster.support.AbstractClusterInvoker.checkInvokers(AbstractClusterInvoker.java:257) ~[dubbo-2.6.2.jar:2.6.2] at com.alibaba.dubbo.rpc.cluster.support.FailoverClusterInvoker.doInvoke(FailoverClusterInvoker.java:56) ~[dubbo-2.6.2.jar:2.6.2] at com.alibaba.dubbo.rpc.cluster.support.AbstractClusterInvoker.invoke(AbstractClusterInvoker.java:238) ~[dubbo-2.6.2.jar:2.6.2] at com.alibaba.dubbo.rpc.cluster.support.wrapper.MockClusterInvoker.invoke(MockClusterInvoker.java:75) ~[dubbo-2.6.2.jar:2.6.2] at com.alibaba.dubbo.rpc.proxy.InvokerInvocationHandler.invoke(InvokerInvocationHandler.java:52) ~[dubbo-2.6.2.jar:2.6.2] at com.alibaba.dubbo.common.bytecode.proxy0.collect(proxy0.java) ~[dubbo-2.6.2.jar:2.6.2] at com.alibaba.dubbo.monitor.dubbo.DubboMonitor.send(DubboMonitor.java:112) ~[dubbo-2.6.2.jar:2.6.2] at com.alibaba.dubbo.monitor.dubbo.DubboMonitor$1.run(DubboMonitor.java:69) ~[dubbo-2.6.2.jar:2.6.2] at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) [na:1.7.0_80] at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:304) [na:1.7.0_80] at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:178) [na:1.7.0_80] at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293) [na:1.7.0_80] at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [na:1.7.0_80] at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [na:1.7.0_80] at java.lang.Thread.run(Thread.java:745) [na:1.7.0_80] è§£å†³æ–¹æ¡ˆï¼šè¿™æ˜¯å› ä¸ºæ²¡æœ‰å¯åŠ¨ç›‘æ§ä¸­å¿ƒï¼Œå´é…äº†ç›‘æ§åœ°å€ï¼ŒæŠŠç›‘æ§ä¸­å¿ƒå¯åŠ¨ï¼Œæˆ–è€…æŠŠxmlé…ç½®ä¸­çš„&lt;dubbo:monitor protocol=â€registryâ€&gt;æˆ–propertiesé…ç½®ä¸­çš„dubbo.monitor.protocol=registryå»æ‰ï¼Œå³å¯ã€‚","categories":[],"tags":[{"name":"dubbo","slug":"dubbo","permalink":"https://ydstudios.gitee.io/tags/dubbo/"}]},{"title":"Javaä¸­ListIteratorå’ŒIteratorçš„å¼‚åŒ","slug":"Javaä¸­ListIteratorå’ŒIteratorçš„å¼‚åŒ","date":"2019-05-08T23:37:09.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/5da32797.html","link":"","permalink":"https://ydstudios.gitee.io/post/5da32797.html","excerpt":"åœ¨ä½¿ç”¨Javaé›†åˆçš„æ—¶å€™ï¼Œéƒ½éœ€è¦ä½¿ç”¨Iteratorã€‚ä½†æ˜¯javaé›†åˆä¸­è¿˜æœ‰ä¸€ä¸ªè¿­ä»£å™¨ListIterator,åœ¨ä½¿ç”¨Listã€ArrayListã€LinkedListå’ŒVectorçš„æ—¶å€™å¯ä»¥ä½¿ç”¨ã€‚è¿™ä¸¤ç§è¿­ä»£å™¨æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿä¸‹é¢æˆ‘ä»¬è¯¦ç»†åˆ†æã€‚è¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦æ˜ç¡®çš„æ—¶å€™ï¼Œè¿­ä»£å™¨æŒ‡å‘çš„ä½ç½®æ˜¯å…ƒç´ ä¹‹å‰çš„ä½ç½®ã€‚","text":"åœ¨ä½¿ç”¨Javaé›†åˆçš„æ—¶å€™ï¼Œéƒ½éœ€è¦ä½¿ç”¨Iteratorã€‚ä½†æ˜¯javaé›†åˆä¸­è¿˜æœ‰ä¸€ä¸ªè¿­ä»£å™¨ListIterator,åœ¨ä½¿ç”¨Listã€ArrayListã€LinkedListå’ŒVectorçš„æ—¶å€™å¯ä»¥ä½¿ç”¨ã€‚è¿™ä¸¤ç§è¿­ä»£å™¨æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿä¸‹é¢æˆ‘ä»¬è¯¦ç»†åˆ†æã€‚è¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦æ˜ç¡®çš„æ—¶å€™ï¼Œè¿­ä»£å™¨æŒ‡å‘çš„ä½ç½®æ˜¯å…ƒç´ ä¹‹å‰çš„ä½ç½®ã€‚ é¦–å…ˆçœ‹ä¸€ä¸‹Iteratorå’ŒListIteratorè¿­ä»£å™¨çš„æ–¹æ³•æœ‰å“ªäº›ã€‚ Iteratorè¿­ä»£å™¨åŒ…å«çš„æ–¹æ³•æœ‰ï¼š hasNext()ï¼šå¦‚æœè¿­ä»£å™¨æŒ‡å‘ä½ç½®åé¢è¿˜æœ‰å…ƒç´ ï¼Œåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å›false next()ï¼šè¿”å›é›†åˆä¸­IteratoræŒ‡å‘ä½ç½®åé¢çš„å…ƒç´  remove()ï¼šåˆ é™¤é›†åˆä¸­IteratoræŒ‡å‘ä½ç½®åé¢çš„å…ƒç´  ListIteratorè¿­ä»£å™¨åŒ…å«çš„æ–¹æ³•æœ‰ï¼š add(E e): å°†æŒ‡å®šçš„å…ƒç´ æ’å…¥åˆ—è¡¨ï¼Œæ’å…¥ä½ç½®ä¸ºè¿­ä»£å™¨å½“å‰ä½ç½®ä¹‹å‰ hasNext()ï¼šä»¥æ­£å‘éå†åˆ—è¡¨æ—¶ï¼Œå¦‚æœåˆ—è¡¨è¿­ä»£å™¨åé¢è¿˜æœ‰å…ƒç´ ï¼Œåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å›false hasPrevious():å¦‚æœä»¥é€†å‘éå†åˆ—è¡¨ï¼Œåˆ—è¡¨è¿­ä»£å™¨å‰é¢è¿˜æœ‰å…ƒç´ ï¼Œåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å›false next()ï¼šè¿”å›åˆ—è¡¨ä¸­ListIteratoræŒ‡å‘ä½ç½®åé¢çš„å…ƒç´  nextIndex():è¿”å›åˆ—è¡¨ä¸­ListIteratoræ‰€éœ€ä½ç½®åé¢å…ƒç´ çš„ç´¢å¼• previous():è¿”å›åˆ—è¡¨ä¸­ListIteratoræŒ‡å‘ä½ç½®å‰é¢çš„å…ƒç´  previousIndex()ï¼šè¿”å›åˆ—è¡¨ä¸­ListIteratoræ‰€éœ€ä½ç½®å‰é¢å…ƒç´ çš„ç´¢å¼• remove():ä»åˆ—è¡¨ä¸­åˆ é™¤next()æˆ–previous()è¿”å›çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼ˆæœ‰ç‚¹æ‹—å£ï¼Œæ„æ€å°±æ˜¯å¯¹è¿­ä»£å™¨ä½¿ç”¨hasNext()æ–¹æ³•æ—¶ï¼Œåˆ é™¤ListIteratoræŒ‡å‘ä½ç½®åé¢çš„å…ƒç´ ï¼›å½“å¯¹è¿­ä»£å™¨ä½¿ç”¨hasPrevious()æ–¹æ³•æ—¶ï¼Œåˆ é™¤ListIteratoræŒ‡å‘ä½ç½®å‰é¢çš„å…ƒç´ ï¼‰ set(E e)ï¼šä»åˆ—è¡¨ä¸­å°†next()æˆ–previous()è¿”å›çš„æœ€åä¸€ä¸ªå…ƒç´ è¿”å›çš„æœ€åä¸€ä¸ªå…ƒç´ æ›´æ”¹ä¸ºæŒ‡å®šå…ƒç´ e ç›¸åŒç‚¹éƒ½æ˜¯è¿­ä»£å™¨ï¼Œå½“éœ€è¦å¯¹é›†åˆä¸­å…ƒç´ è¿›è¡Œéå†ä¸éœ€è¦å¹²æ¶‰å…¶éå†è¿‡ç¨‹æ—¶ï¼Œè¿™ä¸¤ç§è¿­ä»£å™¨éƒ½å¯ä»¥ä½¿ç”¨ã€‚ ä¸åŒç‚¹ ä½¿ç”¨èŒƒå›´ä¸åŒï¼ŒIteratorå¯ä»¥åº”ç”¨äºæ‰€æœ‰çš„é›†åˆï¼ŒSetã€Listå’ŒMapå’Œè¿™äº›é›†åˆçš„å­ç±»å‹ã€‚è€ŒListIteratoråªèƒ½ç”¨äºListåŠå…¶å­ç±»å‹ã€‚ ListIteratoræœ‰addæ–¹æ³•ï¼Œå¯ä»¥å‘Listä¸­æ·»åŠ å¯¹è±¡ï¼Œè€ŒIteratorä¸èƒ½ã€‚ ListIteratorå’ŒIteratoréƒ½æœ‰hasNext()å’Œnext()æ–¹æ³•ï¼Œå¯ä»¥å®ç°é¡ºåºå‘åéå†ï¼Œä½†æ˜¯ListIteratoræœ‰hasPrevious()å’Œprevious()æ–¹æ³•ï¼Œå¯ä»¥å®ç°é€†å‘ï¼ˆé¡ºåºå‘å‰ï¼‰éå†ã€‚Iteratorä¸å¯ä»¥ã€‚ ListIteratorå¯ä»¥å®šä½å½“å‰ç´¢å¼•çš„ä½ç½®ï¼ŒnextIndex()å’ŒpreviousIndex()å¯ä»¥å®ç°ã€‚Iteratoræ²¡æœ‰æ­¤åŠŸèƒ½ã€‚ éƒ½å¯å®ç°åˆ é™¤æ“ä½œï¼Œä½†æ˜¯ListIteratorå¯ä»¥å®ç°å¯¹è±¡çš„ä¿®æ”¹ï¼Œset()æ–¹æ³•å¯ä»¥å®ç°ã€‚Iteratorä»…èƒ½éå†ï¼Œä¸èƒ½ä¿®æ”¹ã€‚ 1234567891011121314151617181920212223ArrayList&lt;String&gt; stringArrayList1 = new ArrayList&lt;String&gt;(); ArrayList&lt;String&gt; stringArrayList2 = new ArrayList&lt;String&gt;(); stringArrayList1.add(\"ok\"); stringArrayList1.add(\"hello\"); stringArrayList1.add(\"world\"); stringArrayList2.add(\"å¥½çš„\"); stringArrayList2.add(\"ä½ å¥½\"); stringArrayList2.add(\"ä¸–ç•Œ\"); stringArrayList1.addAll(stringArrayList2); ListIterator&lt;String&gt; iterator = stringArrayList1.listIterator(); System.out.println(\"ä»å‰å¾€åè¾“å‡º:\"); while (iterator.hasNext())&#123; System.out.println(\"next=\"+iterator.next()); &#125; System.out.println(\"\\r\\nä»åå¾€å‰è¾“å‡º:\"); while (iterator.hasPrevious())&#123; System.out.println(\"previous=\"+iterator.previous()); &#125; æ³¨æ„ï¼šä¸€å®šè¦å…ˆè¿›è¡Œç”±å‰å‘åè¾“å‡ºï¼Œä¹‹åæ‰èƒ½è¿›è¡Œç”±åå‘å‰çš„è¾“å‡ºã€‚","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"},{"name":"ListIterator","slug":"ListIterator","permalink":"https://ydstudios.gitee.io/tags/ListIterator/"},{"name":"Iterator","slug":"Iterator","permalink":"https://ydstudios.gitee.io/tags/Iterator/"}]},{"title":"æ·±å…¥ç†è§£springæ³¨è§£ä¹‹@Beanæ³¨è§£","slug":"æ·±å…¥ç†è§£springæ³¨è§£ä¹‹-Beanæ³¨è§£","date":"2019-04-23T23:36:01.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/2d1810c4.html","link":"","permalink":"https://ydstudios.gitee.io/post/2d1810c4.html","excerpt":"@Beanæ˜¯ä¸€ä¸ªæ–¹æ³•çº§åˆ«ä¸Šçš„æ³¨è§£ï¼Œä¸»è¦ç”¨åœ¨@Configurationæ³¨è§£çš„ç±»é‡Œï¼Œä¹Ÿå¯ä»¥ç”¨åœ¨@Componentæ³¨è§£çš„ç±»é‡Œã€‚æ·»åŠ çš„beançš„idä¸ºæ–¹æ³•åã€‚","text":"@Beanæ˜¯ä¸€ä¸ªæ–¹æ³•çº§åˆ«ä¸Šçš„æ³¨è§£ï¼Œä¸»è¦ç”¨åœ¨@Configurationæ³¨è§£çš„ç±»é‡Œï¼Œä¹Ÿå¯ä»¥ç”¨åœ¨@Componentæ³¨è§£çš„ç±»é‡Œã€‚æ·»åŠ çš„beançš„idä¸ºæ–¹æ³•åã€‚ 12345678910111213141516171819202122@Target(&#123;ElementType.METHOD, ElementType.ANNOTATION_TYPE&#125;)@Retention(RetentionPolicy.RUNTIME)@Documentedpublic @interface Bean &#123; @AliasFor(\"name\") String[] value() default &#123;&#125;; @AliasFor(\"value\") String[] name() default &#123;&#125;; Autowire autowire() default Autowire.NO; String initMethod() default \"\"; String destroyMethod() default \"(inferred)\";&#125;value -- beanåˆ«åå’Œnameæ˜¯ç›¸äº’ä¾èµ–å…³è”çš„ï¼Œvalue,nameå¦‚æœéƒ½ä½¿ç”¨çš„è¯å€¼å¿…é¡»è¦ä¸€è‡´name -- beanåç§°ï¼Œå¦‚æœä¸å†™ä¼šé»˜è®¤ä¸ºæ³¨è§£çš„æ–¹æ³•åç§°autowire -- è‡ªå®šè£…é…é»˜è®¤æ˜¯ä¸å¼€å¯çš„ï¼Œå»ºè®®å°½é‡ä¸è¦å¼€å¯ï¼Œå› ä¸ºè‡ªåŠ¨è£…é…ä¸èƒ½è£…é…åŸºæœ¬æ•°æ®ç±»å‹ã€å­—ç¬¦ä¸²ã€æ•°ç»„ç­‰ï¼Œè¿™æ˜¯è‡ªåŠ¨è£…é…è®¾è®¡çš„å±€é™æ€§ï¼Œä»¥åŠè‡ªåŠ¨è£…é…ä¸å¦‚æ˜¾ç¤ºä¾èµ–æ³¨å…¥ç²¾ç¡®initMethod -- beançš„åˆå§‹åŒ–ä¹‹å‰çš„æ‰§è¡Œæ–¹æ³•ï¼Œè¯¥å‚æ•°ä¸€èˆ¬ä¸æ€ä¹ˆç”¨ï¼Œå› ä¸ºå¯ä»¥å®Œå…¨å¯ä»¥åœ¨ä»£ç ä¸­å®ç°destroyMethod -- beané”€æ¯æ‰§è¡Œçš„æ–¹æ³• 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190package net.ydstudio.practise.bean;import org.springframework.context.annotation.*;/** * åŠŸèƒ½æè¿°:&lt;br/&gt; * @Beanæ„æ€æ˜¯å®šä¹‰ä¸€ä¸ªbeanï¼Œè¯¥æ³¨è§£æ˜¯ä¸€ä¸ªæ–¹æ³•çº§åˆ«ä¸Šçš„æ³¨è§£ï¼Œå¯ä»¥ä½¿ç”¨åœ¨@Configurationçš„ç±»é‡Œï¼Œä¹Ÿå¯ä»¥ * åœ¨@Componentæ³¨è§£çš„ç±»é‡Œï¼Œæ·»åŠ çš„beançš„idä¸ºæ–¹æ³•çš„åç§° * * @Date 2019/4/23 19:36 */@Configurationpublic class AppConfig &#123; /** * * ä¸‹é¢çš„ä»£ç å°±ç›¸å½“äºåœ¨xmlä¹‹ä¸­æ·»åŠ ä¸‹é¢çš„é…ç½® * &lt;beans&gt; * &lt;bean id=\"transferService\" class=\"net.ydstudio.practise.bean.TransferServiceImplâ€œ &gt;&lt;/bean&gt; * &lt;/beans&gt; * * è¿˜èƒ½å¤Ÿä½¿ç”¨@Scopeæ³¨è§£æ¥æŒ‡å®šä½¿ç”¨@Beanå®šä¹‰çš„bean * singleton : å•ä¾‹ï¼Œæ•´ä¸ªåº”ç”¨ä¸­åªå­˜åœ¨ä¸€ä¸ªå®ä¾‹bean * prototype ï¼š ä¸å•ä¾‹ç›¸å¯¹ï¼Œæ¯æ¬¡getBeanéƒ½ä¼šé‡æ–°ç”Ÿæˆä¸€ä¸ªBeanã€‚ * request ï¼š webç¯å¢ƒä¸‹ï¼Œæ¯ä¸ªè¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªbeanï¼Œåœ¨ä¸€æ¬¡è¯·æ±‚ä¸­åªå­˜åœ¨ä¸€ä¸ªBeanï¼Œä¸åŒrequestçš„beanä¸åŒ * session ï¼š webç¯å¢ƒä¸‹ï¼Œsessionç”Ÿå‘½å‘¨æœŸä¸‹ï¼Œè·å–çš„æ˜¯åŒä¸€ä¸ªbean * * é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰å•å®ä¾‹beanéƒ½ä¼šåœ¨åˆ›å»ºspringå®¹å™¨çš„æ—¶å€™åˆ›å»ºï¼Œ * å¦‚æœåœ¨beanç¬¬ä¸€æ¬¡ä½¿ç”¨çš„æ—¶å€™åˆ›å»ºï¼Œæˆ‘ä»¬ç§°ä¸ºæ‡’åŠ è½½ * é…ç½®å¾ˆç®€å•ï¼Œåœ¨åˆ›å»ºbeançš„æ–¹æ³•ä¸Šæ·»åŠ @Lazyæ³¨è§£å³å¯ * * @return net.ydstudio.practise.bean.TransferService * @date 2019/4/23 19:41 */ @Bean @Lazy @Scope(\"singleton\") public TransferService transferService()&#123; return new TransferServiceImpl(); &#125; /** * @Beanå¯ä»¥ä¾èµ–å…¶ä»–ä»»æ„æ•°é‡çš„beanï¼Œå¦‚æœTransferServiceä¾èµ–Fooï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ–¹æ³•å‚æ•°å®ç°è¿™ä¸ªä¾èµ– * * @param: foo * @return net.ydstudio.practise.bean.TransferService * @date 2019/4/24 11:23 */ @Bean public TransferService transferService(Foo foo)&#123; return new TransferServiceImpl(foo); &#125; /** * * ä»»ä½•ä½¿ç”¨@Beanå®šä¹‰çš„beanï¼Œä¹Ÿå¯ä»¥æ‰§è¡Œç”Ÿå‘½å‘¨æœŸçš„å›è°ƒå‡½æ•° * ç±»ä¼¼@PostConstruct and @PreDestroyçš„æ–¹æ³• * * @return net.ydstudio.practise.bean.Foo * @date 2019/4/23 19:49 */ @Bean(initMethod = \"init\") public Foo foo()&#123; return new Foo(); &#125; /** * ä»»ä½•ä½¿ç”¨@Beanå®šä¹‰çš„beanï¼Œä¹Ÿå¯ä»¥æ‰§è¡Œç”Ÿå‘½å‘¨æœŸçš„å›è°ƒå‡½æ•° * ç±»ä¼¼@PostConstruct and @PreDestroyçš„æ–¹æ³• * @param: * @return net.ydstudio.practise.bean.Bar * @date 2019/4/23 19:50 */ @Bean(destroyMethod = \"cleanUp\") public Bar bar()&#123; return new Bar(); &#125; /** * * é»˜è®¤æƒ…å†µä¸‹beançš„åç§°å’Œæ–¹æ³•åç§°ç›¸åŒï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ * æ³¨è§£ä¸­çš„nameå±æ€§è¿›è¡ŒæŒ‡å®š * * @param: * @return net.ydstudio.practise.bean.Foo * @date 2019/4/23 19:52 */ @Bean(name = \"myFoo\") public Foo getFoo()&#123; return new Foo(); &#125; /** * å¯ä»¥é€šè¿‡æŸäº›æ¡ä»¶ï¼Œæ¥é€‰æ‹©æ˜¯å¦æ³¨å†ŒBeanï¼Œé€šè¿‡@Conditionæ³¨è§£æ¥å®ç° * å®ç°Conditionæ¥å£ï¼Œå¹¶é‡å†™matchesæ–¹æ³•ï¼Œæ ¹æ®è¯¥æ–¹æ³•è¿”å›çš„å¸ƒå°”å€¼æ¥å†³å®šæ˜¯å¦æ³¨å†ŒBean * @return net.ydstudio.practise.bean.Book * @date 2019/4/24 11:54 */ @Bean @Conditional(MyCondition.class) public Book book()&#123; return new Book(); &#125;&#125;public class Bar &#123; public void cleanUp()&#123; System.out.println(\"---111111cleanUp---\"); &#125; @Override public String toString() &#123; final StringBuffer sb = new StringBuffer(\"Bar&#123;\"); sb.append('&#125;'); return sb.toString(); &#125;&#125;public class Book &#123; private String name; private BigDecimal price; private Date publishDate; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public BigDecimal getPrice() &#123; return price; &#125; public void setPrice(BigDecimal price) &#123; this.price = price; &#125; public Date getPublishDate() &#123; return publishDate; &#125; public void setPublishDate(Date publishDate) &#123; this.publishDate = publishDate; &#125;&#125;public class Foo &#123; public void init()&#123; System.out.println(\"åˆå§‹åŒ–ä¹‹å‰---init---åˆå§‹åŒ–ä¹‹å‰\"); &#125; @Override public String toString() &#123; final StringBuffer sb = new StringBuffer(\"Foo&#123;\"); sb.append('&#125;'); return sb.toString(); &#125;&#125;public class MyCondition implements Condition &#123; @Override public boolean matches(ConditionContext conditionContext, AnnotatedTypeMetadata annotatedTypeMetadata) &#123; /** * æ ¹æ®ç¯å¢ƒå˜é‡æ˜¯å¦å­˜åœ¨my.env=helloçš„å±æ€§æ¥å†³å®šæ˜¯å¦åˆ›å»ºï¼Œ * å¯ä»¥é€šè¿‡å¯åŠ¨å‚æ•°æŒ‡å®š-Dmy.env=helloæ¥æµ‹è¯•ã€‚ **/ Environment environment = conditionContext.getEnvironment(); String property = environment.getProperty(\"my.env\"); if (\"hello\".equals(property)) &#123; return true; &#125; return false; &#125;&#125;public interface TransferService &#123;&#125;public class TransferServiceImpl implements TransferService&#123; private Foo foo; public TransferServiceImpl(Foo foo) &#123; this.foo = foo; &#125; public TransferServiceImpl() &#123; &#125;&#125;","categories":[],"tags":[{"name":"spring","slug":"spring","permalink":"https://ydstudios.gitee.io/tags/spring/"},{"name":"bean","slug":"bean","permalink":"https://ydstudios.gitee.io/tags/bean/"}]},{"title":"ideaè‡ªåŠ¨ç”Ÿæˆæ–¹æ³•æ³¨é‡Šï¼ˆå«å‚æ•°åŠè¿”å›å€¼ï¼‰","slug":"ideaè‡ªåŠ¨ç”Ÿæˆæ–¹æ³•æ³¨é‡Šï¼ˆå«å‚æ•°åŠè¿”å›å€¼ï¼‰","date":"2019-04-22T23:35:02.000Z","updated":"2020-12-06T14:02:12.000Z","comments":true,"path":"post/526abd46.html","link":"","permalink":"https://ydstudios.gitee.io/post/526abd46.html","excerpt":"ç¨‹åºå‘˜åˆ°æ–°çš„å…¬å¸ä¸Šç­ï¼Œæ‹¿åˆ°æ–°ç”µè„‘å½“ç„¶è¦ç¬¬ä¸€æ—¶é—´é…ç½®å¥½å„ç§å¼€å‘ç¯å¢ƒå’Œå¼€å‘å·¥å…·ã€‚","text":"ç¨‹åºå‘˜åˆ°æ–°çš„å…¬å¸ä¸Šç­ï¼Œæ‹¿åˆ°æ–°ç”µè„‘å½“ç„¶è¦ç¬¬ä¸€æ—¶é—´é…ç½®å¥½å„ç§å¼€å‘ç¯å¢ƒå’Œå¼€å‘å·¥å…·ã€‚ åœ¨ideaä¸­æ‰“å¼€è®¾ç½®ï¼Œé€‰æ‹©File-&gt;settings-&gt;Editor-&gt;Live Templatesç‚¹å‡»â€+â€-&gt;é€‰æ‹©template group ï¼Œç„¶åè¾“å…¥groupçš„nameï¼Œå¦‚annotationã€‚ç„¶åï¼Œé€‰ä¸­åˆšæ‰åˆ›å»ºçš„myGroupï¼Œç„¶åå†æ¬¡ç‚¹å‡»å³ä¾§çš„ç»¿è‰²+ï¼Œè¿™æ¬¡é€‰æ‹©çš„æ˜¯Live Templateã€‚å–åï¼ˆAbbreviationï¼‰ä¸º*ã€‚Descriptionä¸­å¡«å†™â€æ–¹æ³•æ³¨é‡Šâ€ é…ç½®æ¨¡æ¿é€‰æ‹©åˆšåˆšæ·»åŠ çš„Live Templateï¼Œåœ¨ä¸‹é¢çš„Text Templateä¸­æ·»åŠ ä¸‹é¢çš„å†…å®¹ï¼Œæ³¨æ„ä¸è¦æ•´ç†ä¸‹é¢çš„æ ¼å¼ã€‚ 12345678* * * $VAR1$ $params$ * @return $returns$ * @author 19037900@xx.cn * @date $date$ $time$ */ æ³¨æ„ï¼šæ­¤å¤„ä¸€å®šè¦ä¸ºåˆšåˆšçš„æ¨¡æ¿æŒ‡å®šä½¿ç”¨èŒƒå›´,é€‰æ‹©å…¨éƒ¨å°±è¡Œäº†ã€‚ é…ç½®variablesï¼Œç‚¹å‡» Edit variablesVAR1å‚æ•°ä¸ç”¨ç®¡params (ç½‘ä¸Šå¥½å¤šéƒ½ä¸è¡Œï¼Œè¿™ä¸ªæ˜¯æˆ‘æ­£åœ¨ç”¨çš„) 1groovyScript(\"def result=''; def params=\\\"$&#123;_1&#125;\\\".replaceAll('[\\\\\\\\[|\\\\\\\\]|\\\\\\\\s]', '').split(',').toList(); for(i = 0; i &lt; params.size(); i++) &#123;result+='* @'+'param: ' + params[i] + ((i &lt; params.size() - 1) ? '\\\\n'+'\\\\b' : '')&#125;; return result\", methodParameters()) returnså‚æ•°å¯ä»¥ä¸‹æ‹‰ï¼Œé€‰æ‹©methodReturnType();dateå‚æ•°å¯ä»¥ä¸‹æ‹‰ï¼Œé€‰æ‹©date();timeå‚æ•°å¯ä»¥ä¸‹æ‹‰ï¼Œé€‰æ‹©time(); é…ç½®å¿«æ·é”®ï¼Œç‚¹å‡»Edit variablesä¸‹é¢çš„Optionsä¸­çš„Expand withä¸‹æ‹‰é€‰æ‹©Enterã€‚å¼€å§‹ä½¿ç”¨è¾“å…¥ /**ï¼Œç„¶åEnterï¼Œå¤§åŠŸå‘Šæˆ","categories":[],"tags":[{"name":"idea","slug":"idea","permalink":"https://ydstudios.gitee.io/tags/idea/"}]},{"title":"Windowsä¸‹æ­å»ºRedisé«˜å¯ç”¨é›†ç¾¤-å“¨å…µæ¨¡å¼ï¼ˆRedis-Sentinelï¼‰","slug":"Windowsä¸‹æ­å»ºRedisé«˜å¯ç”¨é›†ç¾¤-å“¨å…µæ¨¡å¼ï¼ˆRedis-Sentinel","date":"2019-02-28T23:32:15.000Z","updated":"2020-10-02T03:11:00.000Z","comments":true,"path":"post/bdbc3b8a.html","link":"","permalink":"https://ydstudios.gitee.io/post/bdbc3b8a.html","excerpt":"Sentinelçš„åˆ†å¸ƒå¼ç‰¹æ€§Redis Sentinel æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œ ä½ å¯ä»¥åœ¨ä¸€ä¸ªæ¶æ„ä¸­è¿è¡Œå¤šä¸ª Sentinel è¿›ç¨‹ï¼ˆprogressï¼‰ï¼Œ è¿™äº›è¿›ç¨‹ä½¿ç”¨æµè¨€åè®®ï¼ˆgossip protocols)æ¥æ¥æ”¶å…³äºä¸»æœåŠ¡å™¨æ˜¯å¦ä¸‹çº¿çš„ä¿¡æ¯ï¼Œ å¹¶ä½¿ç”¨æŠ•ç¥¨åè®®ï¼ˆagreement protocolsï¼‰æ¥å†³å®šæ˜¯å¦æ‰§è¡Œè‡ªåŠ¨æ•…éšœè¿ç§»ï¼Œ ä»¥åŠé€‰æ‹©å“ªä¸ªä»æœåŠ¡å™¨ä½œä¸ºæ–°çš„ä¸»æœåŠ¡å™¨ã€‚","text":"Sentinelçš„åˆ†å¸ƒå¼ç‰¹æ€§Redis Sentinel æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œ ä½ å¯ä»¥åœ¨ä¸€ä¸ªæ¶æ„ä¸­è¿è¡Œå¤šä¸ª Sentinel è¿›ç¨‹ï¼ˆprogressï¼‰ï¼Œ è¿™äº›è¿›ç¨‹ä½¿ç”¨æµè¨€åè®®ï¼ˆgossip protocols)æ¥æ¥æ”¶å…³äºä¸»æœåŠ¡å™¨æ˜¯å¦ä¸‹çº¿çš„ä¿¡æ¯ï¼Œ å¹¶ä½¿ç”¨æŠ•ç¥¨åè®®ï¼ˆagreement protocolsï¼‰æ¥å†³å®šæ˜¯å¦æ‰§è¡Œè‡ªåŠ¨æ•…éšœè¿ç§»ï¼Œ ä»¥åŠé€‰æ‹©å“ªä¸ªä»æœåŠ¡å™¨ä½œä¸ºæ–°çš„ä¸»æœåŠ¡å™¨ã€‚ å•ä¸ªsentinelè¿›ç¨‹æ¥ç›‘æ§redisé›†ç¾¤æ˜¯ä¸å¯é çš„ï¼Œå½“sentinelè¿›ç¨‹å®•æ‰å(sentinelæœ¬èº«ä¹Ÿæœ‰å•ç‚¹é—®é¢˜ï¼Œsingle-point-of-failure)æ•´ä¸ªé›†ç¾¤ç³»ç»Ÿå°†æ— æ³•æŒ‰ç…§é¢„æœŸçš„æ–¹å¼è¿è¡Œã€‚æ‰€ä»¥æœ‰å¿…è¦å°†sentinelé›†ç¾¤ï¼Œè¿™æ ·æœ‰å‡ ä¸ªå¥½å¤„ï¼š æœ‰ä¸€äº›sentinelè¿›ç¨‹å®•æ‰äº†ï¼Œä¾ç„¶å¯ä»¥è¿›è¡Œredisé›†ç¾¤çš„ä¸»å¤‡åˆ‡æ¢ï¼› å¦‚æœåªæœ‰ä¸€ä¸ªsentinelè¿›ç¨‹ï¼Œå¦‚æœè¿™ä¸ªè¿›ç¨‹è¿è¡Œå‡ºé”™ï¼Œæˆ–è€…æ˜¯ç½‘ç»œå µå¡ï¼Œé‚£ä¹ˆå°†æ— æ³•å®ç°redisé›†ç¾¤çš„ä¸»å¤‡åˆ‡æ¢ï¼ˆå•ç‚¹é—®é¢˜ï¼‰ï¼› å¦‚æœæœ‰å¤šä¸ªsentinelï¼Œredisçš„å®¢æˆ·ç«¯å¯ä»¥éšæ„åœ°è¿æ¥ä»»æ„ä¸€ä¸ªsentinelæ¥è·å¾—å…³äºredisé›†ç¾¤ä¸­çš„ä¿¡æ¯ï¼› ä¸€ä¸ªå¥å£®çš„éƒ¨ç½²è‡³å°‘éœ€è¦ä¸‰ä¸ªå“¨å…µå®ä¾‹ã€‚ä¸‰ä¸ªå“¨å…µå®ä¾‹åº”è¯¥æ”¾ç½®åœ¨å®¢æˆ·ä½¿ç”¨ç‹¬ç«‹æ–¹å¼ç¡®è®¤æ•…éšœçš„è®¡ç®—æœºæˆ–è™šæ‹Ÿæœºä¸­ã€‚ä¾‹å¦‚ä¸åŒçš„ç‰©ç†æœºæˆ–ä¸åŒå¯ç”¨åŒºåŸŸçš„è™šæ‹Ÿæœºã€‚ å¼€å§‹å‡†å¤‡ç¯å¢ƒæ­å»ºï¼šæœ¬æ¬¡åœ¨windowä¸Šæ­å»ºå“¨å…µæ¨¡å¼çš„Redisé›†ç¾¤ã€‚æŒ‰ç…§ä¸Šä¸€ç¯‡æ–‡ç« Redisä¸»ä»å¤åˆ¶çš„æŒ‡å¯¼ï¼Œå…ˆæ­å»ºå¥½Redisçš„é›†ç¾¤ï¼Œå…·ä½“æƒ…å†µå¦‚ä¸‹ï¼šåœ¨gitä¸Šä¸‹è½½å¥½windowä¸‹çš„Rediså…å®‰è£…çš„åŒ…ï¼Œè§£å‹é…ç½®å¥½ä¹‹åï¼Œå†å¤åˆ¶ä¸¤ä»½ï¼Œç«¯å£å·åˆ†åˆ«ä¸º6380å’Œ6381ï¼ŒRediså®‰è£…ç›®å½•åˆ™åˆ†åˆ«ä¸ºredis6379ã€redis6380ã€redis6381. 127.0.0.1 6379 master 127.0.0.1 6380 slave 127.0.0.1 6381 slave 127.0.0.1:26379 127.0.0.1:26380 127.0.0.1:26381 sentinel Redisçš„å¯†ç éƒ½è®¾ç½®æˆrequirepass 123456 é…ç½®Sentinelåœ¨ä¸Šè¿°ä¸‰ä¸ªRediså®‰è£…ç›®å½•ä¸‹æ–°å»ºsentinel.confæ–‡ä»¶ï¼Œåœ¨å…¶ä¸­å†™å…¥ä»¥ä¸‹å†…å®¹ï¼š 1234567891011121314# è¿™ä¸ªæ˜¯Redis6379é…ç½®å†…å®¹ï¼Œå…¶ä»–æ–‡ä»¶åŒç†æ–°å¢ç„¶åæ”¹ä¸€ä¸‹ç«¯å£å³å¯ï¼Œ26380ï¼Œå’Œ 26381ã€‚#å½“å‰SentinelæœåŠ¡è¿è¡Œçš„ç«¯å£port 26379 # å“¨å…µç›‘å¬çš„ä¸»æœåŠ¡å™¨ sentinel monitor mymaster 127.0.0.1 6379 2# 3så†…mymasteræ— å“åº”ï¼Œåˆ™è®¤ä¸ºmymasterå®•æœºäº†sentinel down-after-milliseconds mymaster 3000#å¦‚æœ10ç§’å,mysaterä»æ²¡å¯åŠ¨è¿‡æ¥ï¼Œåˆ™å¯åŠ¨failover sentinel failover-timeout mymaster 10000 # æ‰§è¡Œæ•…éšœè½¬ç§»æ—¶ï¼Œ æœ€å¤šæœ‰1ä¸ªä»æœåŠ¡å™¨åŒæ—¶å¯¹æ–°çš„ä¸»æœåŠ¡å™¨è¿›è¡ŒåŒæ­¥sentinel parallel-syncs mymaster 1# sentinel auth-pass &lt;master-name&gt; &lt;password&gt;sentinel auth-pass mymaster 123456 åœ¨å¦å¤–çš„ä¸¤ä¸ªRedisç›®å½•é‡Œé¢åˆ†åˆ«åˆ›å»ºsentinel.confï¼Œæ³¨æ„ä¿®æ”¹å…¶ä¸­portç«¯å£åˆ†26380å’Œ26381ã€‚é…ç½®æ–‡ä»¶åªéœ€è¦é…ç½®masterçš„ä¿¡æ¯å°±å¥½å•¦ï¼Œä¸ç”¨é…ç½®slaveçš„ä¿¡æ¯ï¼Œå› ä¸ºslaveèƒ½å¤Ÿè¢«è‡ªåŠ¨æ£€æµ‹åˆ°(masterèŠ‚ç‚¹ä¸­æœ‰å…³äºslaveçš„æ¶ˆæ¯)ã€‚ ä¸ºäº†æ›´æ¸…æ¥šæ¯ä¸€è¡Œé…ç½®çš„å«ä¹‰ï¼Œå¯¹æ¯ä¸ªé€‰é¡¹çš„å«ä¹‰è¿›è¡Œç®€å•ä»‹ç»ï¼š 1sentinel monitor [master-group-name] [ip] [port] [quorum] master-group-nameï¼šmasteråç§°ï¼ˆå¯ä»¥è‡ªå®šä¹‰ï¼‰ ip port : IPåœ°å€å’Œç«¯å£å· quorumï¼šç¥¨æ•°ï¼ŒSentineléœ€è¦åå•†åŒæ„masteræ˜¯å¦å¯åˆ°è¾¾çš„æ•°é‡ã€‚ ç¬¬ä¸€è¡Œé…ç½®æŒ‡ç¤º Sentinel å»ç›‘è§†ä¸€ä¸ªåä¸º mymaster çš„ä¸»æœåŠ¡å™¨ï¼Œ è¿™ä¸ªä¸»æœåŠ¡å™¨çš„ IP åœ°å€ä¸º 127.0.0.1 ï¼Œ ç«¯å£å·ä¸º 6379 ï¼Œ è€Œå°†è¿™ä¸ªä¸»æœåŠ¡å™¨åˆ¤æ–­ä¸ºå¤±æ•ˆè‡³å°‘éœ€è¦ 2 ä¸ª Sentinel åŒæ„ ï¼ˆåªè¦åŒæ„ Sentinel çš„æ•°é‡ä¸è¾¾æ ‡ï¼Œè‡ªåŠ¨æ•…éšœè¿ç§»å°±ä¸ä¼šæ‰§è¡Œï¼‰ã€‚ç¥¨æ•°åœ¨æœ¬æ–‡ä¸­ï¼šredisé›†ç¾¤ä¸­æœ‰3ä¸ªsentinelå®ä¾‹ï¼Œå…¶ä¸­masteræŒ‚æ‰å•¦ï¼Œè¿™é‡Œè®¾ç½®ç¥¨æ•°ä¸º2ï¼Œè¡¨ç¤ºæœ‰2ä¸ªsentinelè®¤ä¸ºmasteræŒ‚æ‰å•¦ï¼Œæ‰èƒ½è¢«è®¤ä¸ºæ˜¯æ­£çœŸçš„æŒ‚æ‰å•¦ã€‚ 1sentinel &lt;é€‰é¡¹çš„åå­—&gt; &lt;ä¸»æœåŠ¡å™¨çš„åå­—&gt; &lt;é€‰é¡¹çš„å€¼&gt; down-after-milliseconds é€‰é¡¹æŒ‡å®šäº† Sentinel è®¤ä¸ºæœåŠ¡å™¨å·²ç»æ–­çº¿æ‰€éœ€çš„æ¯«ç§’æ•°ã€‚ å¦‚æœæœåŠ¡å™¨åœ¨ç»™å®šçš„æ¯«ç§’æ•°ä¹‹å†…ï¼Œ æ²¡æœ‰è¿”å› Sentinel å‘é€çš„ PING å‘½ä»¤çš„å›å¤ï¼Œ æˆ–è€…è¿”å›ä¸€ä¸ªé”™è¯¯ï¼Œ é‚£ä¹ˆ Sentinel å°†è¿™ä¸ªæœåŠ¡å™¨æ ‡è®°ä¸ºä¸»è§‚ä¸‹çº¿ï¼ˆsubjectively downï¼Œç®€ç§° SDOWN ï¼‰ã€‚ä¸è¿‡åªæœ‰ä¸€ä¸ª Sentinel å°†æœåŠ¡å™¨æ ‡è®°ä¸ºä¸»è§‚ä¸‹çº¿å¹¶ä¸ä¸€å®šä¼šå¼•èµ·æœåŠ¡å™¨çš„è‡ªåŠ¨æ•…éšœè¿ç§»ï¼š åªæœ‰åœ¨è¶³å¤Ÿæ•°é‡çš„ Sentinel éƒ½å°†ä¸€ä¸ªæœåŠ¡å™¨æ ‡è®°ä¸ºä¸»è§‚ä¸‹çº¿ä¹‹åï¼Œ æœåŠ¡å™¨æ‰ä¼šè¢«æ ‡è®°ä¸ºå®¢è§‚ä¸‹çº¿ï¼ˆobjectively downï¼Œ ç®€ç§° ODOWN ï¼‰ï¼Œ è¿™æ—¶è‡ªåŠ¨æ•…éšœè¿ç§»æ‰ä¼šæ‰§è¡Œã€‚å°†æœåŠ¡å™¨æ ‡è®°ä¸ºå®¢è§‚ä¸‹çº¿æ‰€éœ€çš„ Sentinel æ•°é‡ç”±å¯¹ä¸»æœåŠ¡å™¨çš„é…ç½®å†³å®šã€‚ parallel-syncs é€‰é¡¹æŒ‡å®šäº†åœ¨æ‰§è¡Œæ•…éšœè½¬ç§»æ—¶ï¼Œ æœ€å¤šå¯ä»¥æœ‰å¤šå°‘ä¸ªä»æœåŠ¡å™¨åŒæ—¶å¯¹æ–°çš„ä¸»æœåŠ¡å™¨è¿›è¡ŒåŒæ­¥ï¼Œ è¿™ä¸ªæ•°å­—è¶Šå°ï¼Œ å®Œæˆæ•…éšœè½¬ç§»æ‰€éœ€çš„æ—¶é—´å°±è¶Šé•¿ã€‚ æ–°å¢Rediså¯åŠ¨è„šæœ¬ï¼šstartRedisServer.bat123@echo offredis-server.exe redis.conf@pause æ–°å¢Redis-Sentinelå¯åŠ¨è„šæœ¬ï¼šstartRedisSentinel.bat123@echo offredis-server.exe sentinel.conf --sentinel @pause å¦å¤–ä¸¤ä¸ªè¿›è¡ŒåŒæ ·çš„æ“ä½œï¼Œåˆ›å»ºæ–°å¢Rediså¯åŠ¨è„šæœ¬å’ŒRedis-Sentinelå¯åŠ¨è„šæœ¬ã€‚ å¼€å§‹å¯åŠ¨ç¯å¢ƒ ç‚¹å‡»startRedis.batï¼Œå¯åŠ¨Redisé›†ç¾¤ ç‚¹å‡»startRedisSentinel.batï¼Œå¯åŠ¨å“¨å…µå®ä¾‹ æ­å»ºä¸­å‡ºç°çš„é—®é¢˜ sentinelé…ç½®æ–‡ä»¶çš„é¡ºåºé—®é¢˜ 12345678[3968] 01 Mar 11:06:38.314 #*** FATAL CONFIG FILE ERROR ***[3968] 01 Mar 11:06:38.314 # Reading the configuration file, at line 10[3968] 01 Mar 11:06:38.314 # &gt;&gt;&gt; 'sentinel down-after-milliseconds mymaster 3000'[3968] 01 Mar 11:06:38.314 # No such master with specified name. è§£å†³æ–¹æ³•ï¼šå“¨å…µç›‘å¬çš„ä¸»æœåŠ¡å™¨çš„é…ç½® 1sentinel monitor mymaster 127.0.0.1 6379 2 è¦å°½é‡æ”¾åˆ°sentinelé…ç½®çš„å‰é¢ é…ç½®æ–‡ä»¶çš„ç©ºæ ¼é—®é¢˜ 1Invalid argument during startup: unknown conf file parameter : è§£å†³æ–¹æ³•ï¼šåˆ é™¤æˆ–è€…æ›´æ”¹é…ç½®æ³¨æ„ä¸è¦ç•™æœ‰ç©ºæ ¼ æœªå®Œ","categories":[],"tags":[{"name":"Windows","slug":"Windows","permalink":"https://ydstudios.gitee.io/tags/Windows/"},{"name":"Redis","slug":"Redis","permalink":"https://ydstudios.gitee.io/tags/Redis/"},{"name":"Redis-Sentinel","slug":"Redis-Sentinel","permalink":"https://ydstudios.gitee.io/tags/Redis-Sentinel/"}]},{"title":"Linuxä¸‹æ­å»ºRedisä¸»ä»å¤åˆ¶","slug":"Linuxä¸‹æ­å»ºRedisä¸»ä»å¤åˆ¶","date":"2019-02-27T23:30:02.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/c1608171.html","link":"","permalink":"https://ydstudios.gitee.io/post/c1608171.html","excerpt":"æœ€è¿‘å¿™ç€å‡†å¤‡é¢è¯•ï¼Œå°±æŠŠä¹‹å‰ç”¨åˆ°çš„Redisçš„ä¸»ä»é…ç½®å’Œå“¨å…µæ¨¡å¼é…ç½®éƒ½é‡æ–°å¤ä¹ ä¸€éã€‚è¿™ç¯‡æ–‡ç« å…ˆå¤ä¹ é…ç½®Redisçš„ä¸»ä»ï¼Œä¸‹ä¸€ç¯‡å¤ä¹ Redisçš„å“¨å…µæ¨¡å¼ã€‚Redisçš„ä¸»ä»å¤åˆ¶é…ç½®èµ·æ¥æ¯”è¾ƒç®€å•ï¼Œä¸»ä»é…ç½®æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š","text":"æœ€è¿‘å¿™ç€å‡†å¤‡é¢è¯•ï¼Œå°±æŠŠä¹‹å‰ç”¨åˆ°çš„Redisçš„ä¸»ä»é…ç½®å’Œå“¨å…µæ¨¡å¼é…ç½®éƒ½é‡æ–°å¤ä¹ ä¸€éã€‚è¿™ç¯‡æ–‡ç« å…ˆå¤ä¹ é…ç½®Redisçš„ä¸»ä»ï¼Œä¸‹ä¸€ç¯‡å¤ä¹ Redisçš„å“¨å…µæ¨¡å¼ã€‚Redisçš„ä¸»ä»å¤åˆ¶é…ç½®èµ·æ¥æ¯”è¾ƒç®€å•ï¼Œä¸»ä»é…ç½®æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š ä¸€ä¸ªMasterå¯ä»¥æœ‰å¤šä¸ªslaveä¸»æœºï¼Œæ”¯æŒé“¾å¼å¤åˆ¶ Masterä»¥éé˜»å¡æ–¹å¼åŒæ­¥æ•°æ®è‡³slaveä¸»æœº åœ¨ä¸€å°èŠ‚ç‚¹ä¸Šé…ç½®æ–‡ä»¶ä¸­å®šä¹‰è‡ªå·±æ˜¯è°çš„ä»èŠ‚ç‚¹ï¼Œå¹¶ä¸”å¯ç”¨ä¸»èŠ‚ç‚¹å¯†ç è®¤è¯å³å¯ã€‚ä¸‹é¢ä½¿ç”¨3å°ä¸»æœºé…ç½®ä¸€ä¸»ä¸¤ä»çš„ç»“æ„ï¼Œredisä½¿ç”¨ä¸€ä¸»å¤šä»çš„ç»“æ„æ—¶è¿˜å¯ä»¥å®ç°åƒmysql MHAé‚£æ ·çš„å¤åˆ¶é›†ç¾¤ï¼Œå½“masterèŠ‚ç‚¹å®•æœºåï¼Œå¯ä»¥åœ¨ä¸¤ä¸ªslaveèŠ‚ç‚¹ä¸­æ ¹æ®ä¼˜å…ˆçº§é€‰ä¸¾æ–°çš„masterã€‚ å®‰è£…Redisæœ¬æ¬¡é‡‡ç”¨æºç ç¼–è¯‘çš„æ–¹å¼å®‰è£…Redisï¼Œæ‰§è¡Œç›¸å…³çš„å‘½ä»¤å¦‚ä¸‹ï¼š123456789101112131415161718192021#ä¸‹è½½rediså®‰è£…åŒ…cd /usr/local/srcwget http://download.redis.io/releases/redis-5.0.3.tar.gz#è§£å‹å®‰è£…åŒ…tar -zxvf redis-5.0.3.tar.gz#æ‹·è´åˆ°/usr/local/redisç›®å½•mkdir -p /usr/local/redis#ç¼–è¯‘å®‰è£…make &amp; make install#rediså®‰è£…å®Œæˆåï¼Œredis-serverã€redis-cliç­‰ç¨‹åºé»˜è®¤å®‰è£…åœ¨/usr/local/redis/srcç›®å½•ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°†å®ƒå®‰è£…åˆ°ç³»ç»Ÿæœç´¢è·¯å¾„ï¼Œå¹¶å®‰è£…ä¸ºç³»ç»ŸæœåŠ¡ï¼Œæ–¹ä¾¿åœ¨ä»»ä½•ç»ˆç«¯è®¿é—®ï¼Œå¹¶ä¸”å¼€æœºè‡ªåŠ¨å¯åŠ¨ã€‚cd /usr/local/src/redis/utils./install_server.sh#é‡å¤ä¸Šè¿°å®‰è£…æ“ä½œï¼Œå®‰è£…redisåˆ°6380å’Œ6381ç«¯å£./install_server.sh ç¯å¢ƒå‡†å¤‡å¥½ä¹‹åï¼Œå…·ä½“æƒ…å†µå¦‚ä¸‹ï¼š ä¸‰ä¸ªRediså®ä¾‹åˆ†åˆ«å®‰è£…ä»¥ä¸‹IPåœ°å€å’Œç«¯å£ï¼Œè§’è‰²åˆ†åˆ«å¦‚ä¸‹ 192.168.1.103 6379 master192.168.1.103 6380 slave192.168.1.103 6381 slave é…ç½®MasterèŠ‚ç‚¹1234bind 0.0.0.0 #ç»‘å®šåœ°å€ (ç»‘å®šåœ¨127.0.0.1ï¼Œåªæœ‰æœ¬æœºå®¢æˆ·ç«¯å¯ä»¥è®¿é—®ï¼Œå…¶ä»–æœåŠ¡å™¨æ— æ³•è®¿é—®ï¼Œç»‘å®šåœ¨0.0.0.0ä¸Šï¼Œå¦‚æœæ²¡æœ‰ç«¯å£é™åˆ¶ï¼Œé‚£ä¹ˆå…¶ä»–æœåŠ¡å™¨åˆ™å¯ä»¥è¿æ¥è¯¥æœåŠ¡å™¨çš„è¯¥ç«¯å£)requirepass 123456 #å¯ç”¨å¯†ç è®¤è¯#é»˜è®¤masterèŠ‚ç‚¹ä¿®æ”¹è¿™ä¸¤é¡¹å°±å¯ä»¥äº†ï¼Œä¹Ÿå¯ä»¥è¿›è¡Œå…¶ä»–è®¾ç½® é…ç½®SlaveèŠ‚ç‚¹ 1234567bind 0.0.0.0 #å®šä¹‰masterä¿¡æ¯slaveof 192.168.1.103 6379 #è®¤è¯masterauth 123456 #ä»èŠ‚ç‚¹ä¸Šé…ç½®è¿™ä¸‰é¡¹é¡µå°±å¯ä»¥ï¼Œå…¶ä»–å‚æ•°å¯ä»¥æ ¹æ®æƒ…å†µé€‰æ‹©è°ƒæ•´å³å¯ã€‚ ä¿®æ”¹åè®°å¾—é‡å¯æœåŠ¡ï¼Œå¯ä»¥ç™»å½•åˆ°masterèŠ‚ç‚¹æŸ¥çœ‹ä¿¡æ¯ã€‚ é¦–å…ˆä½¿ç”¨client listå‘½ä»¤æŸ¥çœ‹ 12345678910[root@192 bin]# redis-cli -p 6379 -a 123456Warning: Using a password with '-a' or '-u' option on the command line interface may not be safe.127.0.0.1:6379&gt; client listid=3 addr=127.0.0.1:44273 fd=7 name= age=2456 idle=1 flags=S db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=replconfid=4 addr=127.0.0.1:45342 fd=8 name= age=2453 idle=1 flags=S db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=replconfid=6 addr=127.0.0.1:49306 fd=9 name= age=6 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=26 qbuf-free=32742 obl=0 oll=0 omem=0 events=r cmd=client127.0.0.1:6379&gt; cmd=client è¡¨ç¤ºæ˜¯mastercmd=replconf è¡¨ç¤ºæ˜¯slave é¦–å…ˆä½¿ç”¨info replication å‘½ä»¤æŸ¥çœ‹123456789101112131415127.0.0.1:6379&gt; info replication# Replicationrole:master #è‡ªå·±çš„è§’è‰²connected_slaves:2 #ä»èŠ‚ç‚¹æ•°é‡slave0:ip=127.0.0.1,port=6380,state=online,offset=3738,lag=0 #ä»èŠ‚ç‚¹ä¿¡æ¯slave1:ip=127.0.0.1,port=6381,state=online,offset=3738,lag=1 #ä»èŠ‚ç‚¹ä¿¡æ¯master_replid:061bcdd36e3b8d9a0c38d29dc762e908445baad6master_replid2:0000000000000000000000000000000000000000master_repl_offset:3738second_repl_offset:-1repl_backlog_active:1repl_backlog_size:1048576repl_backlog_first_byte_offset:1repl_backlog_histlen:3738127.0.0.1:6379&gt; å¯ä»¥çœ‹åˆ°ä¸»ä»å·®ä¸å¤šå·²ç»é…ç½®å¥½äº†ï¼Œæ¥ä¸‹æ¥å¯ä»¥è¿›è¡Œç®€å•çš„éªŒè¯å¤åˆ¶ï¼Œåœ¨masterèŠ‚ç‚¹è®¾ç½®ä¸€ä¸ªkeyï¼Œçœ‹ä¸¤ä¸ªslaveèŠ‚ç‚¹å¤åˆ¶æƒ…å†µã€‚ MasterèŠ‚ç‚¹åˆ›å»ºä¸€ä¸ªkey: 12345[root@192 bin]# redis-cli -p 6379 -a 123456Warning: Using a password with '-a' or '-u' option on the command line interface may not be safe.127.0.0.1:6379&gt; set jobNo 123456OK127.0.0.1:6379&gt; ä»slave 6380 : 12345[root@192 bin]# redis-cli -p 6380 -a 123456Warning: Using a password with '-a' or '-u' option on the command line interface may not be safe.127.0.0.1:6380&gt; get jobNo\"123456\"127.0.0.1:6380&gt; ä»slave 6381ï¼š 12345[root@192 bin]# redis-cli -p 6381 -a 123456Warning: Using a password with '-a' or '-u' option on the command line interface may not be safe.127.0.0.1:6381&gt; get jobNo\"123456\"127.0.0.1:6381&gt; å¯ä»¥çœ‹å‡ºåœ¨masterä¸Šè®¾ç½®çš„keyå·²ç»åŒæ­¥åˆ°äº†ä¸¤ä¸ªslaveä¸Šã€‚ slaveèŠ‚ç‚¹å®šä¹‰ä¹Ÿå¯ä»¥é€šè¿‡æŒ‡ä»¤è®¾ç½®ï¼Œè®¾ç½®åç«‹å³ç”Ÿæ•ˆï¼Œå¹¶ä¸”ä¼šè¢«ä¿å­˜è‡³é…ç½®æ–‡ä»¶ä¸­ï¼ŒæŒ‡ä»¤é…ç½®æ–¹å¼å¦‚ä¸‹ï¼š #é…ç½®slaveèŠ‚ç‚¹ 12redis-cli&gt; SLAVEOF &lt;MASTER_IP&gt; &lt;MASTER_PORT&gt;redis-cli&gt; CONFIG SET masterauth &lt;PASSWORD&gt; redisä¸»ä»å¤åˆ¶ç›¸å…³é…ç½®ä¸‹é¢æ˜¯redisä¸»ä»å¤åˆ¶åœºæ™¯çš„ä¸€äº›å¯è°ƒå‚æ•°ï¼Œéœ€è¦æ ¹æ®å®é™…ç¯å¢ƒè°ƒæ•´ slave-serve-stale-data yes ï¼š æ˜¯å¦å¯ä»¥æŠŠä¸æ–°é²œçš„æ•°æ®æœåŠ¡ä¸å®¢æˆ·ç«¯ slave-read-only yes ï¼š ä»èŠ‚ç‚¹åªè¯»ï¼Œå¯ç”¨slaveofå®šä¹‰åæ‰ç”Ÿæ•ˆ repl-diskless-sync no ï¼šæ˜¯å¦åŒæ—¶å‘å¤šä¸ªä»èŠ‚ç‚¹åŒæ—¶å‘æ•°æ® repl-diskless-sync-delay 5 ï¼šå‘é€çš„å»¶è¿Ÿæ—¶é—´ repl-ping-slave-period 10 æ¢æµ‹ä»èŠ‚ç‚¹çŠ¶æ€ repl-timeout 60 æ¢æµ‹èŠ‚ç‚¹è¶…æ—¶æ—¶é—´ repl-disable-tcp-nodelay no ï¼š å¯ç”¨nodelay repl-backlog-size 1mb slave-priority 100 ï¼š ä»èŠ‚ç‚¹ä¼˜å…ˆçº§,å¤åˆ¶é›†ç¾¤ä¸­ï¼Œä¸»èŠ‚ç‚¹æ•…éšœæ—¶ï¼Œsentinelåº”ç”¨åœºæ™¯ä¸­çš„ä¸»èŠ‚ç‚¹é€‰ä¸¾æ—¶ä½¿ç”¨çš„ä¼˜å…ˆçº§ï¼›æ•°å­—è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼Œä½†0è¡¨ç¤ºä¸å‚ä¸é€‰ä¸¾ï¼› min-slaves-to-write 3ï¼šä¸»èŠ‚ç‚¹ä»…å…è®¸å…¶èƒ½å¤Ÿé€šä¿¡çš„ä»èŠ‚ç‚¹æ•°é‡å¤§äºç­‰äºæ­¤å¤„çš„å€¼æ—¶æ¥å—å†™æ“ä½œï¼› min-slaves-max-lag 10ï¼šä»èŠ‚ç‚¹å»¶è¿Ÿæ—¶é•¿è¶…å‡ºæ­¤å¤„æŒ‡å®šçš„æ—¶é•¿æ—¶ï¼Œä¸»èŠ‚ç‚¹ä¼šæ‹’ç»å†™å…¥æ“ä½œï¼› æŸ¥çœ‹åŸæ–‡","categories":[],"tags":[{"name":"linux","slug":"linux","permalink":"https://ydstudios.gitee.io/tags/linux/"},{"name":"redis","slug":"redis","permalink":"https://ydstudios.gitee.io/tags/redis/"},{"name":"ä¸»ä»å¤åˆ¶","slug":"ä¸»ä»å¤åˆ¶","permalink":"https://ydstudios.gitee.io/tags/%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/"}]},{"title":"Nginxä»£ç†æ—¶headerå¤´ä¸­å¸¦_çš„ä¿¡æ¯ä¸¢å¤±çš„é—®é¢˜","slug":"Nginxä»£ç†æ—¶headerå¤´ä¸­å¸¦-çš„ä¿¡æ¯ä¸¢å¤±çš„é—®é¢˜","date":"2019-02-01T23:28:37.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/a6b6fb0a.html","link":"","permalink":"https://ydstudios.gitee.io/post/a6b6fb0a.html","excerpt":"å¼€å‘ç½‘å…³é¡¹ç›®æ—¶ï¼Œåœ¨è¯·æ±‚æ—¶å¾€è¯·æ±‚å¤´headerä¸­æ”¾å…¥äº†ç­¾åsign_keyä¿¡æ¯ï¼Œåœ¨æ¥æ”¶è¯·æ±‚æ—¶å†ä»headerä¸­æ‹¿å‡ºï¼Œåœ¨æœ¬åœ°è°ƒè¯•æ—¶æ˜¯å¯ä»¥çš„ï¼Œä½†ä¸Šçº¿ä¹‹åé€šè¿‡Nginxä»£ç†ä¹‹åå‘ç°æ‹¿ä¸åˆ°ã€‚","text":"å¼€å‘ç½‘å…³é¡¹ç›®æ—¶ï¼Œåœ¨è¯·æ±‚æ—¶å¾€è¯·æ±‚å¤´headerä¸­æ”¾å…¥äº†ç­¾åsign_keyä¿¡æ¯ï¼Œåœ¨æ¥æ”¶è¯·æ±‚æ—¶å†ä»headerä¸­æ‹¿å‡ºï¼Œåœ¨æœ¬åœ°è°ƒè¯•æ—¶æ˜¯å¯ä»¥çš„ï¼Œä½†ä¸Šçº¿ä¹‹åé€šè¿‡Nginxä»£ç†ä¹‹åå‘ç°æ‹¿ä¸åˆ°ã€‚ 123456789101112location / &#123; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header Host $http_host; proxy_set_header X-Nginx-Proxy true; add_header Proxy-Node $upstream_addr; add_header Proxy-Status $upstream_status; proxy_http_version 1.1; proxy_pass http://tianusa; &#125; åæ¥æ‰¾åˆ°åŸå› æ˜¯å› ä¸ºNginxå¯¹headeræœ‰æ‰€é™åˆ¶ï¼Œä¸‹åˆ’çº¿ï¼ˆ_ï¼‰ä¸æ”¯æŒ 1.ä¸ç”¨ä¸‹åˆ’çº¿æŠŠä¸‹åˆ’çº¿_æ”¹æˆå…¶ä»–çš„ï¼Œå¦‚sign_keyæ”¹æˆsign-key 2.ä»æ ¹æœ¬è§£é™¤Nginxçš„é™åˆ¶Nginxé»˜è®¤requestçš„headerçš„é‚£ä¹ˆä¸­åŒ…å«â€™_â€™æ—¶ï¼Œä¼šè‡ªåŠ¨å¿½ç•¥æ‰ã€‚è§£å†³æ–¹æ³•æ˜¯ï¼šåœ¨nginxé‡Œçš„nginx.confé…ç½®æ–‡ä»¶ä¸­çš„httpéƒ¨åˆ†ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š 1underscores_in_headers on; ï¼ˆé»˜è®¤ underscores_in_headers ä¸ºoffï¼‰","categories":[],"tags":[{"name":"linux","slug":"linux","permalink":"https://ydstudios.gitee.io/tags/linux/"},{"name":"nginx","slug":"nginx","permalink":"https://ydstudios.gitee.io/tags/nginx/"}]},{"title":"Mybatis Generatoræœ€å®Œæ•´é…ç½®è¯¦è§£","slug":"Mybatis-Generatoræœ€å®Œæ•´é…ç½®è¯¦è§£","date":"2019-01-29T23:27:40.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/a9e1e2fd.html","link":"","permalink":"https://ydstudios.gitee.io/post/a9e1e2fd.html","excerpt":"è¿™æ˜¯ä¸€ä»½Mybatis Generatoræœ€å®Œæ•´é…ç½®è¯¦è§£ï¼Œå¤§å®¶å¯ä»¥å¥½å¥½çœ‹çœ‹ã€‚","text":"è¿™æ˜¯ä¸€ä»½Mybatis Generatoræœ€å®Œæ•´é…ç½®è¯¦è§£ï¼Œå¤§å®¶å¯ä»¥å¥½å¥½çœ‹çœ‹ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;!DOCTYPE generatorConfiguration PUBLIC \"-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN\"\"http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd\"&gt;&lt;!-- é…ç½®ç”Ÿæˆå™¨ --&gt;&lt;generatorConfiguration&gt;&lt;!-- å¯ä»¥ç”¨äºåŠ è½½é…ç½®é¡¹æˆ–è€…é…ç½®æ–‡ä»¶ï¼Œåœ¨æ•´ä¸ªé…ç½®æ–‡ä»¶ä¸­å°±å¯ä»¥ä½¿ç”¨$&#123;propertyKey&#125;çš„æ–¹å¼æ¥å¼•ç”¨é…ç½®é¡¹ resourceï¼šé…ç½®èµ„æºåŠ è½½åœ°å€ï¼Œä½¿ç”¨resourceï¼ŒMBGä»classpathå¼€å§‹æ‰¾ï¼Œæ¯”å¦‚com/myproject/generatorConfig.properties urlï¼šé…ç½®èµ„æºåŠ è½½åœ°è´¨ï¼Œä½¿ç”¨URLçš„æ–¹å¼ï¼Œæ¯”å¦‚file:///C:/myfolder/generatorConfig.properties. æ³¨æ„ï¼Œä¸¤ä¸ªå±æ€§åªèƒ½é€‰å€ä¸€ä¸ª; å¦å¤–ï¼Œå¦‚æœä½¿ç”¨äº†mybatis-generator-maven-pluginï¼Œé‚£ä¹ˆåœ¨pom.xmlä¸­å®šä¹‰çš„propertieséƒ½å¯ä»¥ç›´æ¥åœ¨generatorConfig.xmlä¸­ä½¿ç”¨&lt;properties resource=\"\" url=\"\" /&gt; --&gt; &lt;!-- åœ¨MBGå·¥ä½œçš„æ—¶å€™ï¼Œéœ€è¦é¢å¤–åŠ è½½çš„ä¾èµ–åŒ… locationå±æ€§æŒ‡æ˜åŠ è½½jar/zipåŒ…çš„å…¨è·¯å¾„&lt;classPathEntry location=\"/Program Files/IBM/SQLLIB/java/db2java.zip\" /&gt; --&gt; &lt;!-- context:ç”Ÿæˆä¸€ç»„å¯¹è±¡çš„ç¯å¢ƒ id:å¿…é€‰ï¼Œä¸Šä¸‹æ–‡idï¼Œç”¨äºåœ¨ç”Ÿæˆé”™è¯¯æ—¶æç¤º defaultModelType:æŒ‡å®šç”Ÿæˆå¯¹è±¡çš„æ ·å¼ 1ï¼Œconditionalï¼šç±»ä¼¼hierarchicalï¼› 2ï¼Œflatï¼šæ‰€æœ‰å†…å®¹ï¼ˆä¸»é”®ï¼Œblobï¼‰ç­‰å…¨éƒ¨ç”Ÿæˆåœ¨ä¸€ä¸ªå¯¹è±¡ä¸­ï¼› 3ï¼Œhierarchicalï¼šä¸»é”®ç”Ÿæˆä¸€ä¸ªXXKeyå¯¹è±¡(key class)ï¼ŒBlobç­‰å•ç‹¬ç”Ÿæˆä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä»–ç®€å•å±æ€§åœ¨ä¸€ä¸ªå¯¹è±¡ä¸­(record class) targetRuntime: 1ï¼ŒMyBatis3ï¼šé»˜è®¤çš„å€¼ï¼Œç”ŸæˆåŸºäºMyBatis3.xä»¥ä¸Šç‰ˆæœ¬çš„å†…å®¹ï¼ŒåŒ…æ‹¬XXXBySampleï¼› 2ï¼ŒMyBatis3Simpleï¼šç±»ä¼¼MyBatis3ï¼Œåªæ˜¯ä¸ç”ŸæˆXXXBySampleï¼› introspectedColumnImplï¼šç±»å…¨é™å®šåï¼Œç”¨äºæ‰©å±•MBG--&gt;&lt;context id=\"mysql\" defaultModelType=\"hierarchical\" targetRuntime=\"MyBatis3Simple\" &gt; &lt;!-- è‡ªåŠ¨è¯†åˆ«æ•°æ®åº“å…³é”®å­—ï¼Œé»˜è®¤falseï¼Œå¦‚æœè®¾ç½®ä¸ºtrueï¼Œæ ¹æ®SqlReservedWordsä¸­å®šä¹‰çš„å…³é”®å­—åˆ—è¡¨ï¼› ä¸€èˆ¬ä¿ç•™é»˜è®¤å€¼ï¼Œé‡åˆ°æ•°æ®åº“å…³é”®å­—ï¼ˆJavaå…³é”®å­—ï¼‰ï¼Œä½¿ç”¨columnOverrideè¦†ç›– --&gt; &lt;property name=\"autoDelimitKeywords\" value=\"false\"/&gt; &lt;!-- ç”Ÿæˆçš„Javaæ–‡ä»¶çš„ç¼–ç  --&gt; &lt;property name=\"javaFileEncoding\" value=\"UTF-8\"/&gt; &lt;!-- æ ¼å¼åŒ–javaä»£ç  --&gt; &lt;property name=\"javaFormatter\" value=\"org.mybatis.generator.api.dom.DefaultJavaFormatter\"/&gt; &lt;!-- æ ¼å¼åŒ–XMLä»£ç  --&gt; &lt;property name=\"xmlFormatter\" value=\"org.mybatis.generator.api.dom.DefaultXmlFormatter\"/&gt; &lt;!-- beginningDelimiterå’ŒendingDelimiterï¼šæŒ‡æ˜æ•°æ®åº“çš„ç”¨äºæ ‡è®°æ•°æ®åº“å¯¹è±¡åçš„ç¬¦å·ï¼Œæ¯”å¦‚ORACLEå°±æ˜¯åŒå¼•å·ï¼ŒMYSQLé»˜è®¤æ˜¯`åå¼•å·ï¼› --&gt; &lt;property name=\"beginningDelimiter\" value=\"`\"/&gt; &lt;property name=\"endingDelimiter\" value=\"`\"/&gt; &lt;!-- å¿…é¡»è¦æœ‰çš„ï¼Œä½¿ç”¨è¿™ä¸ªé…ç½®é“¾æ¥æ•°æ®åº“ @TODO:æ˜¯å¦å¯ä»¥æ‰©å±• --&gt; &lt;jdbcConnection driverClass=\"com.mysql.jdbc.Driver\" connectionURL=\"jdbc:mysql:///pss\" userId=\"root\" password=\"admin\"&gt; &lt;!-- è¿™é‡Œé¢å¯ä»¥è®¾ç½®propertyå±æ€§ï¼Œæ¯ä¸€ä¸ªpropertyå±æ€§éƒ½è®¾ç½®åˆ°é…ç½®çš„Driverä¸Š --&gt; &lt;/jdbcConnection&gt; &lt;!-- javaç±»å‹å¤„ç†å™¨ ç”¨äºå¤„ç†DBä¸­çš„ç±»å‹åˆ°Javaä¸­çš„ç±»å‹ï¼Œé»˜è®¤ä½¿ç”¨JavaTypeResolverDefaultImplï¼› æ³¨æ„ä¸€ç‚¹ï¼Œé»˜è®¤ä¼šå…ˆå°è¯•ä½¿ç”¨Integerï¼ŒLongï¼ŒShortç­‰æ¥å¯¹åº”DECIMALå’Œ NUMERICæ•°æ®ç±»å‹ï¼› --&gt; &lt;javaTypeResolver type=\"org.mybatis.generator.internal.types.JavaTypeResolverDefaultImpl\"&gt; &lt;!-- trueï¼šä½¿ç”¨BigDecimalå¯¹åº”DECIMALå’Œ NUMERICæ•°æ®ç±»å‹ falseï¼šé»˜è®¤, scale&gt;0;length&gt;18ï¼šä½¿ç”¨BigDecimal; scale=0;length[10,18]ï¼šä½¿ç”¨Longï¼› scale=0;length[5,9]ï¼šä½¿ç”¨Integerï¼› scale=0;length&lt;5ï¼šä½¿ç”¨Shortï¼› --&gt; &lt;property name=\"forceBigDecimals\" value=\"false\"/&gt; &lt;/javaTypeResolver&gt; &lt;!-- javaæ¨¡å‹åˆ›å»ºå™¨ï¼Œæ˜¯å¿…é¡»è¦çš„å…ƒç´  è´Ÿè´£ï¼š1ï¼Œkeyç±»ï¼ˆè§contextçš„defaultModelTypeï¼‰ï¼›2ï¼Œjavaç±»ï¼›3ï¼ŒæŸ¥è¯¢ç±» targetPackageï¼šç”Ÿæˆçš„ç±»è¦æ”¾çš„åŒ…ï¼ŒçœŸå®çš„åŒ…å—enableSubPackageså±æ€§æ§åˆ¶ï¼› targetProjectï¼šç›®æ ‡é¡¹ç›®ï¼ŒæŒ‡å®šä¸€ä¸ªå­˜åœ¨çš„ç›®å½•ä¸‹ï¼Œç”Ÿæˆçš„å†…å®¹ä¼šæ”¾åˆ°æŒ‡å®šç›®å½•ä¸­ï¼Œå¦‚æœç›®å½•ä¸å­˜åœ¨ï¼ŒMBGä¸ä¼šè‡ªåŠ¨å»ºç›®å½• --&gt; &lt;javaModelGenerator targetPackage=\"com._520it.mybatis.domain\" targetProject=\"src/main/java\"&gt; &lt;!-- for MyBatis3/MyBatis3Simple è‡ªåŠ¨ä¸ºæ¯ä¸€ä¸ªç”Ÿæˆçš„ç±»åˆ›å»ºä¸€ä¸ªæ„é€ æ–¹æ³•ï¼Œæ„é€ æ–¹æ³•åŒ…å«äº†æ‰€æœ‰çš„fieldï¼›è€Œä¸æ˜¯ä½¿ç”¨setterï¼› --&gt; &lt;property name=\"constructorBased\" value=\"false\"/&gt; &lt;!-- åœ¨targetPackageçš„åŸºç¡€ä¸Šï¼Œæ ¹æ®æ•°æ®åº“çš„schemaå†ç”Ÿæˆä¸€å±‚packageï¼Œæœ€ç»ˆç”Ÿæˆçš„ç±»æ”¾åœ¨è¿™ä¸ªpackageä¸‹ï¼Œé»˜è®¤ä¸ºfalse --&gt; &lt;property name=\"enableSubPackages\" value=\"true\"/&gt; &lt;!-- for MyBatis3 / MyBatis3Simple æ˜¯å¦åˆ›å»ºä¸€ä¸ªä¸å¯å˜çš„ç±»ï¼Œå¦‚æœä¸ºtrueï¼Œ é‚£ä¹ˆMBGä¼šåˆ›å»ºä¸€ä¸ªæ²¡æœ‰setteræ–¹æ³•çš„ç±»ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ç±»ä¼¼constructorBasedçš„ç±» --&gt; &lt;property name=\"immutable\" value=\"false\"/&gt; &lt;!-- è®¾ç½®ä¸€ä¸ªæ ¹å¯¹è±¡ï¼Œ å¦‚æœè®¾ç½®äº†è¿™ä¸ªæ ¹å¯¹è±¡ï¼Œé‚£ä¹ˆç”Ÿæˆçš„keyClassæˆ–è€…recordClassä¼šç»§æ‰¿è¿™ä¸ªç±»ï¼›åœ¨Tableçš„rootClasså±æ€§ä¸­å¯ä»¥è¦†ç›–è¯¥é€‰é¡¹ æ³¨æ„ï¼šå¦‚æœåœ¨key classæˆ–è€…record classä¸­æœ‰root classç›¸åŒçš„å±æ€§ï¼ŒMBGå°±ä¸ä¼šé‡æ–°ç”Ÿæˆè¿™äº›å±æ€§äº†ï¼ŒåŒ…æ‹¬ï¼š 1ï¼Œå±æ€§åç›¸åŒï¼Œç±»å‹ç›¸åŒï¼Œæœ‰ç›¸åŒçš„getter/setteræ–¹æ³•ï¼› --&gt; &lt;property name=\"rootClass\" value=\"com._520it.mybatis.domain.BaseDomain\"/&gt; &lt;!-- è®¾ç½®æ˜¯å¦åœ¨getteræ–¹æ³•ä¸­ï¼Œå¯¹Stringç±»å‹å­—æ®µè°ƒç”¨trim()æ–¹æ³• --&gt; &lt;property name=\"trimStrings\" value=\"true\"/&gt; &lt;/javaModelGenerator&gt; &lt;!-- ç”ŸæˆSQL mapçš„XMLæ–‡ä»¶ç”Ÿæˆå™¨ï¼Œ æ³¨æ„ï¼Œåœ¨Mybatis3ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨mapper.xmlæ–‡ä»¶+Mapperæ¥å£ï¼ˆæˆ–è€…ä¸ç”¨mapperæ¥å£ï¼‰ï¼Œ æˆ–è€…åªä½¿ç”¨Mapperæ¥å£+Annotationï¼Œæ‰€ä»¥ï¼Œå¦‚æœ javaClientGeneratoré…ç½®ä¸­é…ç½®äº†éœ€è¦ç”ŸæˆXMLçš„è¯ï¼Œè¿™ä¸ªå…ƒç´ å°±å¿…é¡»é…ç½® targetPackage/targetProject:åŒjavaModelGenerator --&gt; &lt;sqlMapGenerator targetPackage=\"com._520it.mybatis.mapper\" targetProject=\"src/main/resources\"&gt; &lt;!-- åœ¨targetPackageçš„åŸºç¡€ä¸Šï¼Œæ ¹æ®æ•°æ®åº“çš„schemaå†ç”Ÿæˆä¸€å±‚packageï¼Œæœ€ç»ˆç”Ÿæˆçš„ç±»æ”¾åœ¨è¿™ä¸ªpackageä¸‹ï¼Œé»˜è®¤ä¸ºfalse --&gt; &lt;property name=\"enableSubPackages\" value=\"true\"/&gt; &lt;/sqlMapGenerator&gt; &lt;!-- å¯¹äºmybatisæ¥è¯´ï¼Œå³ç”ŸæˆMapperæ¥å£ï¼Œæ³¨æ„ï¼Œå¦‚æœæ²¡æœ‰é…ç½®è¯¥å…ƒç´ ï¼Œé‚£ä¹ˆé»˜è®¤ä¸ä¼šç”ŸæˆMapperæ¥å£ targetPackage/targetProject:åŒjavaModelGenerator typeï¼šé€‰æ‹©æ€ä¹ˆç”Ÿæˆmapperæ¥å£ï¼ˆåœ¨MyBatis3/MyBatis3Simpleä¸‹ï¼‰ï¼š 1ï¼ŒANNOTATEDMAPPERï¼šä¼šç”Ÿæˆä½¿ç”¨Mapperæ¥å£+Annotationçš„æ–¹å¼åˆ›å»ºï¼ˆSQLç”Ÿæˆåœ¨annotationä¸­ï¼‰ï¼Œä¸ä¼šç”Ÿæˆå¯¹åº”çš„XMLï¼› 2ï¼ŒMIXEDMAPPERï¼šä½¿ç”¨æ··åˆé…ç½®ï¼Œä¼šç”ŸæˆMapperæ¥å£ï¼Œå¹¶é€‚å½“æ·»åŠ åˆé€‚çš„Annotationï¼Œä½†æ˜¯XMLä¼šç”Ÿæˆåœ¨XMLä¸­ï¼› 3ï¼ŒXMLMAPPERï¼šä¼šç”ŸæˆMapperæ¥å£ï¼Œæ¥å£å®Œå…¨ä¾èµ–XMLï¼› æ³¨æ„ï¼Œå¦‚æœcontextæ˜¯MyBatis3Simpleï¼šåªæ”¯æŒANNOTATEDMAPPERå’ŒXMLMAPPER --&gt; &lt;javaClientGenerator targetPackage=\"com._520it.mybatis.mapper\" type=\"ANNOTATEDMAPPER\" targetProject=\"src/main/java\"&gt; &lt;!-- åœ¨targetPackageçš„åŸºç¡€ä¸Šï¼Œæ ¹æ®æ•°æ®åº“çš„schemaå†ç”Ÿæˆä¸€å±‚packageï¼Œæœ€ç»ˆç”Ÿæˆçš„ç±»æ”¾åœ¨è¿™ä¸ªpackageä¸‹ï¼Œé»˜è®¤ä¸ºfalse --&gt; &lt;property name=\"enableSubPackages\" value=\"true\"/&gt; &lt;!-- å¯ä»¥ä¸ºæ‰€æœ‰ç”Ÿæˆçš„æ¥å£æ·»åŠ ä¸€ä¸ªçˆ¶æ¥å£ï¼Œä½†æ˜¯MBGåªè´Ÿè´£ç”Ÿæˆï¼Œä¸è´Ÿè´£æ£€æŸ¥ &lt;property name=\"rootInterface\" value=\"\"/&gt; --&gt; &lt;/javaClientGenerator&gt; &lt;!-- é€‰æ‹©ä¸€ä¸ªtableæ¥ç”Ÿæˆç›¸å…³æ–‡ä»¶ï¼Œå¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªtableï¼Œå¿…é¡»è¦æœ‰tableå…ƒç´  é€‰æ‹©çš„tableä¼šç”Ÿæˆä¸€ä¸‹æ–‡ä»¶ï¼š 1ï¼ŒSQL mapæ–‡ä»¶ 2ï¼Œç”Ÿæˆä¸€ä¸ªä¸»é”®ç±»ï¼› 3ï¼Œé™¤äº†BLOBå’Œä¸»é”®çš„å…¶ä»–å­—æ®µçš„ç±»ï¼› 4ï¼ŒåŒ…å«BLOBçš„ç±»ï¼› 5ï¼Œä¸€ä¸ªç”¨æˆ·ç”ŸæˆåŠ¨æ€æŸ¥è¯¢çš„æ¡ä»¶ç±»ï¼ˆselectByExample, deleteByExampleï¼‰ï¼Œå¯é€‰ï¼› 6ï¼ŒMapperæ¥å£ï¼ˆå¯é€‰ï¼‰ tableNameï¼ˆå¿…è¦ï¼‰ï¼šè¦ç”Ÿæˆå¯¹è±¡çš„è¡¨åï¼› æ³¨æ„ï¼šå¤§å°å†™æ•æ„Ÿé—®é¢˜ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼ŒMBGä¼šè‡ªåŠ¨çš„å»è¯†åˆ«æ•°æ®åº“æ ‡è¯†ç¬¦çš„å¤§å°å†™æ•æ„Ÿåº¦ï¼Œåœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒMBGä¼š æ ¹æ®è®¾ç½®çš„schemaï¼Œcatalogæˆ–tablenameå»æŸ¥è¯¢æ•°æ®è¡¨ï¼ŒæŒ‰ç…§ä¸‹é¢çš„æµç¨‹ï¼š 1ï¼Œå¦‚æœschemaï¼Œcatalogæˆ–tablenameä¸­æœ‰ç©ºæ ¼ï¼Œé‚£ä¹ˆè®¾ç½®çš„æ˜¯ä»€ä¹ˆæ ¼å¼ï¼Œå°±ç²¾ç¡®çš„ä½¿ç”¨æŒ‡å®šçš„å¤§å°å†™æ ¼å¼å»æŸ¥è¯¢ï¼› 2ï¼Œå¦åˆ™ï¼Œå¦‚æœæ•°æ®åº“çš„æ ‡è¯†ç¬¦ä½¿ç”¨å¤§å†™çš„ï¼Œé‚£ä¹ˆMBGè‡ªåŠ¨æŠŠè¡¨åå˜æˆå¤§å†™å†æŸ¥æ‰¾ï¼› 3ï¼Œå¦åˆ™ï¼Œå¦‚æœæ•°æ®åº“çš„æ ‡è¯†ç¬¦ä½¿ç”¨å°å†™çš„ï¼Œé‚£ä¹ˆMBGè‡ªåŠ¨æŠŠè¡¨åå˜æˆå°å†™å†æŸ¥æ‰¾ï¼› 4ï¼Œå¦åˆ™ï¼Œä½¿ç”¨æŒ‡å®šçš„å¤§å°å†™æ ¼å¼æŸ¥è¯¢ï¼› å¦å¤–çš„ï¼Œå¦‚æœåœ¨åˆ›å»ºè¡¨çš„æ—¶å€™ï¼Œä½¿ç”¨çš„\"\"æŠŠæ•°æ®åº“å¯¹è±¡è§„å®šå¤§å°å†™ï¼Œå°±ç®—æ•°æ®åº“æ ‡è¯†ç¬¦æ˜¯ä½¿ç”¨çš„å¤§å†™ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ä¹Ÿä¼šä½¿ç”¨ç»™å®šçš„å¤§å°å†™æ¥åˆ›å»ºè¡¨åï¼› è¿™ä¸ªæ—¶å€™ï¼Œè¯·è®¾ç½®delimitIdentifiers=\"true\"å³å¯ä¿ç•™å¤§å°å†™æ ¼å¼ï¼› å¯é€‰ï¼š 1ï¼Œschemaï¼šæ•°æ®åº“çš„schemaï¼› 2ï¼Œcatalogï¼šæ•°æ®åº“çš„catalogï¼› 3ï¼Œaliasï¼šä¸ºæ•°æ®è¡¨è®¾ç½®çš„åˆ«åï¼Œå¦‚æœè®¾ç½®äº†aliasï¼Œé‚£ä¹ˆç”Ÿæˆçš„æ‰€æœ‰çš„SELECT SQLè¯­å¥ä¸­ï¼Œåˆ—åä¼šå˜æˆï¼šalias_actualColumnName 4ï¼ŒdomainObjectNameï¼šç”Ÿæˆçš„domainç±»çš„åå­—ï¼Œå¦‚æœä¸è®¾ç½®ï¼Œç›´æ¥ä½¿ç”¨è¡¨åä½œä¸ºdomainç±»çš„åå­—ï¼›å¯ä»¥è®¾ç½®ä¸ºsomepck.domainNameï¼Œé‚£ä¹ˆä¼šè‡ªåŠ¨æŠŠdomainNameç±»å†æ”¾åˆ°somepckåŒ…é‡Œé¢ï¼› 5ï¼ŒenableInsertï¼ˆé»˜è®¤trueï¼‰ï¼šæŒ‡å®šæ˜¯å¦ç”Ÿæˆinsertè¯­å¥ï¼› 6ï¼ŒenableSelectByPrimaryKeyï¼ˆé»˜è®¤trueï¼‰ï¼šæŒ‡å®šæ˜¯å¦ç”ŸæˆæŒ‰ç…§ä¸»é”®æŸ¥è¯¢å¯¹è±¡çš„è¯­å¥ï¼ˆå°±æ˜¯getByIdæˆ–getï¼‰ï¼› 7ï¼ŒenableSelectByExampleï¼ˆé»˜è®¤trueï¼‰ï¼šMyBatis3Simpleä¸ºfalseï¼ŒæŒ‡å®šæ˜¯å¦ç”ŸæˆåŠ¨æ€æŸ¥è¯¢è¯­å¥ï¼› 8ï¼ŒenableUpdateByPrimaryKeyï¼ˆé»˜è®¤trueï¼‰ï¼šæŒ‡å®šæ˜¯å¦ç”ŸæˆæŒ‰ç…§ä¸»é”®ä¿®æ”¹å¯¹è±¡çš„è¯­å¥ï¼ˆå³update)ï¼› 9ï¼ŒenableDeleteByPrimaryKeyï¼ˆé»˜è®¤trueï¼‰ï¼šæŒ‡å®šæ˜¯å¦ç”ŸæˆæŒ‰ç…§ä¸»é”®åˆ é™¤å¯¹è±¡çš„è¯­å¥ï¼ˆå³deleteï¼‰ï¼› 10ï¼ŒenableDeleteByExampleï¼ˆé»˜è®¤trueï¼‰ï¼šMyBatis3Simpleä¸ºfalseï¼ŒæŒ‡å®šæ˜¯å¦ç”ŸæˆåŠ¨æ€åˆ é™¤è¯­å¥ï¼› 11ï¼ŒenableCountByExampleï¼ˆé»˜è®¤trueï¼‰ï¼šMyBatis3Simpleä¸ºfalseï¼ŒæŒ‡å®šæ˜¯å¦ç”ŸæˆåŠ¨æ€æŸ¥è¯¢æ€»æ¡æ•°è¯­å¥ï¼ˆç”¨äºåˆ†é¡µçš„æ€»æ¡æ•°æŸ¥è¯¢ï¼‰ï¼› 12ï¼ŒenableUpdateByExampleï¼ˆé»˜è®¤trueï¼‰ï¼šMyBatis3Simpleä¸ºfalseï¼ŒæŒ‡å®šæ˜¯å¦ç”ŸæˆåŠ¨æ€ä¿®æ”¹è¯­å¥ï¼ˆåªä¿®æ”¹å¯¹è±¡ä¸­ä¸ä¸ºç©ºçš„å±æ€§ï¼‰ï¼› 13ï¼ŒmodelTypeï¼šå‚è€ƒcontextå…ƒç´ çš„defaultModelTypeï¼Œç›¸å½“äºè¦†ç›–ï¼› 14ï¼ŒdelimitIdentifiersï¼šå‚è€ƒtableNameçš„è§£é‡Šï¼Œæ³¨æ„ï¼Œé»˜è®¤çš„delimitIdentifiersæ˜¯åŒå¼•å·ï¼Œå¦‚æœç±»ä¼¼MYSQLè¿™æ ·çš„æ•°æ®åº“ï¼Œä½¿ç”¨çš„æ˜¯`ï¼ˆåå¼•å·ï¼Œé‚£ä¹ˆè¿˜éœ€è¦è®¾ç½®contextçš„beginningDelimiterå’ŒendingDelimiterå±æ€§ï¼‰ 15ï¼ŒdelimitAllColumnsï¼šè®¾ç½®æ˜¯å¦æ‰€æœ‰ç”Ÿæˆçš„SQLä¸­çš„åˆ—åéƒ½ä½¿ç”¨æ ‡è¯†ç¬¦å¼•èµ·æ¥ã€‚é»˜è®¤ä¸ºfalseï¼ŒdelimitIdentifierså‚è€ƒcontextçš„å±æ€§ æ³¨æ„ï¼Œtableé‡Œé¢å¾ˆå¤šå‚æ•°éƒ½æ˜¯å¯¹javaModelGeneratorï¼Œcontextç­‰å…ƒç´ çš„é»˜è®¤å±æ€§çš„ä¸€ä¸ªå¤å†™ï¼› --&gt; &lt;table tableName=\"userinfo\" &gt; &lt;!-- å‚è€ƒ javaModelGenerator çš„ constructorBasedå±æ€§--&gt; &lt;property name=\"constructorBased\" value=\"false\"/&gt; &lt;!-- é»˜è®¤ä¸ºfalseï¼Œå¦‚æœè®¾ç½®ä¸ºtrueï¼Œåœ¨ç”Ÿæˆçš„SQLä¸­ï¼Œtableåå­—ä¸ä¼šåŠ ä¸Šcatalogæˆ–schemaï¼› --&gt; &lt;property name=\"ignoreQualifiersAtRuntime\" value=\"false\"/&gt; &lt;!-- å‚è€ƒ javaModelGenerator çš„ immutable å±æ€§ --&gt; &lt;property name=\"immutable\" value=\"false\"/&gt; &lt;!-- æŒ‡å®šæ˜¯å¦åªç”Ÿæˆdomainç±»ï¼Œå¦‚æœè®¾ç½®ä¸ºtrueï¼Œåªç”Ÿæˆdomainç±»ï¼Œå¦‚æœè¿˜é…ç½®äº†sqlMapGeneratorï¼Œé‚£ä¹ˆåœ¨mapper XMLæ–‡ä»¶ä¸­ï¼Œåªç”ŸæˆresultMapå…ƒç´  --&gt; &lt;property name=\"modelOnly\" value=\"false\"/&gt; &lt;!-- å‚è€ƒ javaModelGenerator çš„ rootClass å±æ€§ &lt;property name=\"rootClass\" value=\"\"/&gt; --&gt; &lt;!-- å‚è€ƒjavaClientGenerator çš„ rootInterface å±æ€§ &lt;property name=\"rootInterface\" value=\"\"/&gt; --&gt; &lt;!-- å¦‚æœè®¾ç½®äº†runtimeCatalogï¼Œé‚£ä¹ˆåœ¨ç”Ÿæˆçš„SQLä¸­ï¼Œä½¿ç”¨è¯¥æŒ‡å®šçš„catalogï¼Œè€Œä¸æ˜¯tableå…ƒç´ ä¸Šçš„catalog &lt;property name=\"runtimeCatalog\" value=\"\"/&gt; --&gt; &lt;!-- å¦‚æœè®¾ç½®äº†runtimeSchemaï¼Œé‚£ä¹ˆåœ¨ç”Ÿæˆçš„SQLä¸­ï¼Œä½¿ç”¨è¯¥æŒ‡å®šçš„schemaï¼Œè€Œä¸æ˜¯tableå…ƒç´ ä¸Šçš„schema &lt;property name=\"runtimeSchema\" value=\"\"/&gt; --&gt; &lt;!-- å¦‚æœè®¾ç½®äº†runtimeTableNameï¼Œé‚£ä¹ˆåœ¨ç”Ÿæˆçš„SQLä¸­ï¼Œä½¿ç”¨è¯¥æŒ‡å®šçš„tablenameï¼Œè€Œä¸æ˜¯tableå…ƒç´ ä¸Šçš„tablename &lt;property name=\"runtimeTableName\" value=\"\"/&gt; --&gt; &lt;!-- æ³¨æ„ï¼Œè¯¥å±æ€§åªé’ˆå¯¹MyBatis3Simpleæœ‰ç”¨ï¼› å¦‚æœé€‰æ‹©çš„runtimeæ˜¯MyBatis3Simpleï¼Œé‚£ä¹ˆä¼šç”Ÿæˆä¸€ä¸ªSelectAllæ–¹æ³•ï¼Œå¦‚æœæŒ‡å®šäº†selectAllOrderByClauseï¼Œé‚£ä¹ˆä¼šåœ¨è¯¥SQLä¸­æ·»åŠ æŒ‡å®šçš„è¿™ä¸ªorderæ¡ä»¶ï¼› --&gt; &lt;property name=\"selectAllOrderByClause\" value=\"age desc,username asc\"/&gt; &lt;!-- å¦‚æœè®¾ç½®ä¸ºtrueï¼Œç”Ÿæˆçš„modelç±»ä¼šç›´æ¥ä½¿ç”¨columnæœ¬èº«çš„åå­—ï¼Œè€Œä¸ä¼šå†ä½¿ç”¨é©¼å³°å‘½åæ–¹æ³•ï¼Œæ¯”å¦‚BORN_DATEï¼Œç”Ÿæˆçš„å±æ€§åå­—å°±æ˜¯BORN_DATE,è€Œä¸ä¼šæ˜¯bornDate --&gt; &lt;property name=\"useActualColumnNames\" value=\"false\"/&gt; &lt;!-- generatedKeyç”¨äºç”Ÿæˆç”Ÿæˆä¸»é”®çš„æ–¹æ³•ï¼Œ å¦‚æœè®¾ç½®äº†è¯¥å…ƒç´ ï¼ŒMBGä¼šåœ¨ç”Ÿæˆçš„&lt;insert&gt;å…ƒç´ ä¸­ç”Ÿæˆä¸€æ¡æ­£ç¡®çš„&lt;selectKey&gt;å…ƒç´ ï¼Œè¯¥å…ƒç´ å¯é€‰ column:ä¸»é”®çš„åˆ—åï¼› sqlStatementï¼šè¦ç”Ÿæˆçš„selectKeyè¯­å¥ï¼Œæœ‰ä»¥ä¸‹å¯é€‰é¡¹ï¼š Cloudscape:ç›¸å½“äºselectKeyçš„SQLä¸ºï¼š VALUES IDENTITY_VAL_LOCAL() DB2 :ç›¸å½“äºselectKeyçš„SQLä¸ºï¼š VALUES IDENTITY_VAL_LOCAL() DB2_MF :ç›¸å½“äºselectKeyçš„SQLä¸ºï¼šSELECT IDENTITY_VAL_LOCAL() FROM SYSIBM.SYSDUMMY1 Derby :ç›¸å½“äºselectKeyçš„SQLä¸ºï¼šVALUES IDENTITY_VAL_LOCAL() HSQLDB :ç›¸å½“äºselectKeyçš„SQLä¸ºï¼šCALL IDENTITY() Informix :ç›¸å½“äºselectKeyçš„SQLä¸ºï¼šselect dbinfo('sqlca.sqlerrd1') from systables where tabid=1 MySql :ç›¸å½“äºselectKeyçš„SQLä¸ºï¼šSELECT LAST_INSERT_ID() SqlServer :ç›¸å½“äºselectKeyçš„SQLä¸ºï¼šSELECT SCOPE_IDENTITY() SYBASE :ç›¸å½“äºselectKeyçš„SQLä¸ºï¼šSELECT @@IDENTITY JDBC :ç›¸å½“äºåœ¨ç”Ÿæˆçš„insertå…ƒç´ ä¸Šæ·»åŠ useGeneratedKeys=\"true\"å’ŒkeyPropertyå±æ€§ &lt;generatedKey column=\"\" sqlStatement=\"\"/&gt; --&gt; &lt;!-- è¯¥å…ƒç´ ä¼šåœ¨æ ¹æ®è¡¨ä¸­åˆ—åè®¡ç®—å¯¹è±¡å±æ€§åä¹‹å‰å…ˆé‡å‘½ååˆ—åï¼Œéå¸¸é€‚åˆç”¨äºè¡¨ä¸­çš„åˆ—éƒ½æœ‰å…¬ç”¨çš„å‰ç¼€å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œ æ¯”å¦‚åˆ—åä¸ºï¼šCUST_ID,CUST_NAME,CUST_EMAIL,CUST_ADDRESSç­‰ï¼› é‚£ä¹ˆå°±å¯ä»¥è®¾ç½®searchStringä¸º\"^CUST_\"ï¼Œå¹¶ä½¿ç”¨ç©ºç™½æ›¿æ¢ï¼Œé‚£ä¹ˆç”Ÿæˆçš„Customerå¯¹è±¡ä¸­çš„å±æ€§åç§°å°±ä¸æ˜¯ custId,custNameç­‰ï¼Œè€Œæ˜¯å…ˆè¢«æ›¿æ¢ä¸ºID,NAME,EMAIL,ç„¶åå˜æˆå±æ€§ï¼šidï¼Œnameï¼Œemailï¼› æ³¨æ„ï¼ŒMBGæ˜¯ä½¿ç”¨java.util.regex.Matcher.replaceAllæ¥æ›¿æ¢searchStringå’ŒreplaceStringçš„ï¼Œ å¦‚æœä½¿ç”¨äº†columnOverrideå…ƒç´ ï¼Œè¯¥å±æ€§æ— æ•ˆï¼› &lt;columnRenamingRule searchString=\"\" replaceString=\"\"/&gt; --&gt; &lt;!-- ç”¨æ¥ä¿®æ”¹è¡¨ä¸­æŸä¸ªåˆ—çš„å±æ€§ï¼ŒMBGä¼šä½¿ç”¨ä¿®æ”¹åçš„åˆ—æ¥ç”Ÿæˆdomainçš„å±æ€§ï¼› column:è¦é‡æ–°è®¾ç½®çš„åˆ—åï¼› æ³¨æ„ï¼Œä¸€ä¸ªtableå…ƒç´ ä¸­å¯ä»¥æœ‰å¤šä¸ªcolumnOverrideå…ƒç´ å“ˆ~ --&gt; &lt;columnOverride column=\"username\"&gt; &lt;!-- ä½¿ç”¨propertyå±æ€§æ¥æŒ‡å®šåˆ—è¦ç”Ÿæˆçš„å±æ€§åç§° --&gt; &lt;property name=\"property\" value=\"userName\"/&gt; &lt;!-- javaTypeç”¨äºæŒ‡å®šç”Ÿæˆçš„domainçš„å±æ€§ç±»å‹ï¼Œä½¿ç”¨ç±»å‹çš„å…¨é™å®šå &lt;property name=\"javaType\" value=\"\"/&gt; --&gt; &lt;!-- jdbcTypeç”¨äºæŒ‡å®šè¯¥åˆ—çš„JDBCç±»å‹ &lt;property name=\"jdbcType\" value=\"\"/&gt; --&gt; &lt;!-- typeHandler ç”¨äºæŒ‡å®šè¯¥åˆ—ä½¿ç”¨åˆ°çš„TypeHandlerï¼Œå¦‚æœè¦æŒ‡å®šï¼Œé…ç½®ç±»å‹å¤„ç†å™¨çš„å…¨é™å®šå æ³¨æ„ï¼Œmybatisä¸­ï¼Œä¸ä¼šç”Ÿæˆåˆ°mybatis-config.xmlä¸­çš„typeHandler åªä¼šç”Ÿæˆç±»ä¼¼ï¼šwhere id = #&#123;id,jdbcType=BIGINT,typeHandler=com._520it.mybatis.MyTypeHandler&#125;çš„å‚æ•°æè¿° &lt;property name=\"jdbcType\" value=\"\"/&gt; --&gt; &lt;!-- å‚è€ƒtableå…ƒç´ çš„delimitAllColumnsé…ç½®ï¼Œé»˜è®¤ä¸ºfalse &lt;property name=\"delimitedColumnName\" value=\"\"/&gt; --&gt; &lt;/columnOverride&gt; &lt;!-- ignoreColumnè®¾ç½®ä¸€ä¸ªMGBå¿½ç•¥çš„åˆ—ï¼Œå¦‚æœè®¾ç½®äº†æ”¹åˆ—ï¼Œé‚£ä¹ˆåœ¨ç”Ÿæˆçš„domainä¸­ï¼Œç”Ÿæˆçš„SQLä¸­ï¼Œéƒ½ä¸ä¼šæœ‰è¯¥åˆ—å‡ºç° column:æŒ‡å®šè¦å¿½ç•¥çš„åˆ—çš„åå­—ï¼› delimitedColumnNameï¼šå‚è€ƒtableå…ƒç´ çš„delimitAllColumnsé…ç½®ï¼Œé»˜è®¤ä¸ºfalse æ³¨æ„ï¼Œä¸€ä¸ªtableå…ƒç´ ä¸­å¯ä»¥æœ‰å¤šä¸ªignoreColumnå…ƒç´  &lt;ignoreColumn column=\"deptId\" delimitedColumnName=\"\"/&gt; --&gt; &lt;/table&gt; &lt;/context&gt;","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"},{"name":"mybatis","slug":"mybatis","permalink":"https://ydstudios.gitee.io/tags/mybatis/"}]},{"title":"Javaå®ç°äºŒåˆ†æŸ¥æ‰¾ç®—æ³•","slug":"Javaå®ç°äºŒåˆ†æŸ¥æ‰¾ç®—æ³•","date":"2019-01-25T23:26:42.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/e486e255.html","link":"","permalink":"https://ydstudios.gitee.io/post/e486e255.html","excerpt":"äºŒåˆ†æ³•æŸ¥æ‰¾ï¼Œä¹Ÿç§°ä¸ºæŠ˜åŠæ³•ï¼Œæ˜¯ä¸€ç§åœ¨æœ‰åºæ•°ç»„ä¸­æŸ¥æ‰¾ç‰¹å®šå…ƒç´ çš„æœç´¢ç®—æ³•ã€‚æ‰€ä»¥åœ¨é‡‡ç”¨äºŒåˆ†æ³•æŸ¥æ‰¾æ—¶ï¼Œæ•°æ®éœ€æ˜¯æœ‰åºä¸é‡å¤çš„ï¼Œå¦‚æœæ˜¯æ— åºçš„ä¹Ÿå¯é€šè¿‡é€‰æ‹©æ’åºã€å†’æ³¡æ’åºç­‰æ•°ç»„æ’åºæ–¹æ³•è¿›è¡Œæ’åºä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨äºŒåˆ†æ³•æŸ¥æ‰¾ã€‚ åŸºæœ¬æ€æƒ³ï¼šå‡è®¾æ•°æ®æ˜¯æŒ‰å‡åºæ’åºçš„ï¼Œå¯¹äºç»™å®šå€¼ xï¼Œä»åºåˆ—çš„ä¸­é—´ä½ç½®å¼€å§‹æ¯”è¾ƒï¼Œå¦‚æœå½“å‰ä½ç½®å€¼ç­‰äº xï¼Œåˆ™æŸ¥æ‰¾æˆåŠŸï¼›è‹¥ x å°äºå½“å‰ä½ç½®å€¼ï¼Œåˆ™åœ¨æ•°åˆ—çš„å‰åŠæ®µä¸­æŸ¥æ‰¾ï¼›è‹¥ x å¤§äºå½“å‰ä½ç½®å€¼åˆ™åœ¨æ•°åˆ—çš„ååŠæ®µä¸­ç»§ç»­æŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°ä¸ºæ­¢ï¼Œä½†æ˜¯å¦‚æœå½“å‰æ®µçš„ç´¢å¼•æœ€å¤§å€¼å°äºå½“å‰æ®µç´¢å¼•æœ€å°å€¼ï¼Œè¯´æ˜æŸ¥æ‰¾çš„å€¼ä¸å­˜åœ¨ï¼Œè¿”å›-1ï¼Œä¸ç»§ç»­æŸ¥æ‰¾ã€‚","text":"äºŒåˆ†æ³•æŸ¥æ‰¾ï¼Œä¹Ÿç§°ä¸ºæŠ˜åŠæ³•ï¼Œæ˜¯ä¸€ç§åœ¨æœ‰åºæ•°ç»„ä¸­æŸ¥æ‰¾ç‰¹å®šå…ƒç´ çš„æœç´¢ç®—æ³•ã€‚æ‰€ä»¥åœ¨é‡‡ç”¨äºŒåˆ†æ³•æŸ¥æ‰¾æ—¶ï¼Œæ•°æ®éœ€æ˜¯æœ‰åºä¸é‡å¤çš„ï¼Œå¦‚æœæ˜¯æ— åºçš„ä¹Ÿå¯é€šè¿‡é€‰æ‹©æ’åºã€å†’æ³¡æ’åºç­‰æ•°ç»„æ’åºæ–¹æ³•è¿›è¡Œæ’åºä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨äºŒåˆ†æ³•æŸ¥æ‰¾ã€‚ åŸºæœ¬æ€æƒ³ï¼šå‡è®¾æ•°æ®æ˜¯æŒ‰å‡åºæ’åºçš„ï¼Œå¯¹äºç»™å®šå€¼ xï¼Œä»åºåˆ—çš„ä¸­é—´ä½ç½®å¼€å§‹æ¯”è¾ƒï¼Œå¦‚æœå½“å‰ä½ç½®å€¼ç­‰äº xï¼Œåˆ™æŸ¥æ‰¾æˆåŠŸï¼›è‹¥ x å°äºå½“å‰ä½ç½®å€¼ï¼Œåˆ™åœ¨æ•°åˆ—çš„å‰åŠæ®µä¸­æŸ¥æ‰¾ï¼›è‹¥ x å¤§äºå½“å‰ä½ç½®å€¼åˆ™åœ¨æ•°åˆ—çš„ååŠæ®µä¸­ç»§ç»­æŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°ä¸ºæ­¢ï¼Œä½†æ˜¯å¦‚æœå½“å‰æ®µçš„ç´¢å¼•æœ€å¤§å€¼å°äºå½“å‰æ®µç´¢å¼•æœ€å°å€¼ï¼Œè¯´æ˜æŸ¥æ‰¾çš„å€¼ä¸å­˜åœ¨ï¼Œè¿”å›-1ï¼Œä¸ç»§ç»­æŸ¥æ‰¾ã€‚ ä¸‹é¢è´´å‡ºä»£ç å®ç°ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142import java.util.ArrayList;import java.util.LinkedList;import java.util.List;/** * Created by Sam on 18/12/9. */public class Test &#123; public static void main(String[] args) &#123; int[] array = &#123;1,4,7,9,12,56,78,89,120,179,180,200,290&#125;; System.out.println(\"index=\"+binarySearch(array,290)); &#125; public static int binarySearch(int[] array,int searchNumber)&#123; int minIndex = 0; int maxIndex = array.length - 1; int searchIndex = (minIndex + maxIndex) &gt;&gt; 1 ; int count = 0; while (array[searchIndex] != searchNumber)&#123; System.out.printf(\"ç¬¬æ¬¡%dæ¬¡è¿ç®—\\n\", ++count); if (array[searchIndex] &gt; searchNumber)&#123; maxIndex = searchIndex - 1 ; &#125;else &#123; minIndex = searchIndex + 1 ; &#125; if (minIndex&gt;maxIndex)&#123; return -1; &#125; searchIndex = (minIndex + maxIndex) &gt;&gt; 1 ; &#125; return searchIndex; &#125;&#125;","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"},{"name":"äºŒåˆ†æ³•","slug":"äºŒåˆ†æ³•","permalink":"https://ydstudios.gitee.io/tags/%E4%BA%8C%E5%88%86%E6%B3%95/"}]},{"title":"PowerDesignerç”ŸæˆSQLæ—¶æ³¨é‡Šä¸ºnameå’Œcommentåˆå¹¶åçš„å†…å®¹","slug":"PowerDesignerç”ŸæˆSQLæ—¶æ³¨é‡Šä¸ºnameå’Œcommentåˆå¹¶åçš„å†…å®¹","date":"2019-01-18T23:25:42.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/26129f65.html","link":"","permalink":"https://ydstudios.gitee.io/post/26129f65.html","excerpt":"PowerDesignerç”ŸæˆSQLæ—¶çš„æ³¨é‡Šé»˜è®¤æ˜¯æ²¡æœ‰nameå­—æ®µçš„ï¼Œç½‘ä¸Šè®²çš„è®¾ç½®æ–¹æ³•å¤§éƒ¨åˆ†éƒ½æ˜¯åªèƒ½ç”¨nameæˆ–è€…commentï¼Œæ— æ³•å°†ä¸¤è€…åˆå¹¶ä½¿ç”¨ã€‚ä½†æ˜¯æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦nameå’Œcommentå­—æ®µåˆå¹¶èµ·æ¥åŠ åˆ°æ³¨é‡Šä¸­ï¼Œåˆ™å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹æ³•æ¥å®ç°ã€‚","text":"PowerDesignerç”ŸæˆSQLæ—¶çš„æ³¨é‡Šé»˜è®¤æ˜¯æ²¡æœ‰nameå­—æ®µçš„ï¼Œç½‘ä¸Šè®²çš„è®¾ç½®æ–¹æ³•å¤§éƒ¨åˆ†éƒ½æ˜¯åªèƒ½ç”¨nameæˆ–è€…commentï¼Œæ— æ³•å°†ä¸¤è€…åˆå¹¶ä½¿ç”¨ã€‚ä½†æ˜¯æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦nameå’Œcommentå­—æ®µåˆå¹¶èµ·æ¥åŠ åˆ°æ³¨é‡Šä¸­ï¼Œåˆ™å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹æ³•æ¥å®ç°ã€‚ ç¬¬ä¸€æ­¥ï¼šä¿®æ”¹SQLçš„ç”Ÿæˆè„šæœ¬ é€‰æ‹©èœå•ï¼šdatabase -&gt; edit current DBMSâ€¦ é€‰æ‹©generalé€‰é¡¹å¡ï¼šscript -&gt; objects -&gt; column -&gt; columncommnet ä¿®æ”¹valueå€¼ä¸ºï¼š é‡ç‚¹å°±æ˜¯ä¸‹é¢è¿™ä¸ªè„šæœ¬äº†ï¼Œæœ¬äººå¯¹è„šæœ¬è¯­æ³•ä¸ç†Ÿæ‚‰ï¼Œç»è¿‡å„ç§å°è¯•ï¼Œæœ€ç»ˆè„šæœ¬å¦‚ä¸‹123456alter table %TABLE% modify column [%QUALIFIER%] %TABLE%.%COLUMN% %DATATYPE%[%Unsigned%? unsigned][%ZeroFill%? zerofill][.Z:[ %NOTNULL%][%R%?[%PRIMARY%]][%IDENTITY%? auto_increment:[ default %DEFAULT%]]] comment.if (%COMMENT%==%COLNNAME%) '%COLNNAME%'.else '%COLNNAME% %COMMENT%'.endif(\\n) ç¬¬äºŒæ­¥ï¼šä¿®æ”¹ç”Ÿæˆè§„åˆ™å½“ç¬¬ä¸€æ­¥çš„è„šæœ¬ä¿®æ”¹åå°±å¯ä»¥æ˜¾ç¤ºnameä¸ºæ³¨é‡Šäº†ï¼Œä½†æ˜¯commentä¸ºç©ºçš„åˆ™ä¸èƒ½ç”Ÿæˆæ³¨é‡Šï¼Œéœ€è¦ä¿®æ”¹ç”Ÿæˆè§„åˆ™ã€‚ é€‰æ‹©èœå•ï¼šdatabase -&gt; generate databaseâ€¦ é€‰æ‹©formaté€‰é¡¹å¡ï¼Œé€‰ä¸­â€generate name is empty commentâ€é€‰é¡¹ ç‚¹â€œåº”ç”¨â€æŒ‰é’®ä¿å­˜è®¾ç½® ç¬¬ä¸€æ¬¡å®ç°è¿™ç§æ•ˆæœï¼Œä¸æ˜¯é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ¢äº†æ–°çš„æœºå™¨ä¹‹åï¼Œä¹‹å‰é‚£ç§æ–¹æ³•æ‰¾ä¸åˆ°äº†ï¼Œå°±é€šè¿‡æŸ¥æ‰¾èµ„æ–™ç”¨è¿™ç§æ–¹å¼å®ç°äº†","categories":[],"tags":[{"name":"PowerDesigner","slug":"PowerDesigner","permalink":"https://ydstudios.gitee.io/tags/PowerDesigner/"}]},{"title":"Snowflakeç®—æ³•ç”Ÿæˆåˆ†å¸ƒå¼ç³»ç»Ÿå”¯ä¸€ID","slug":"Snowflakeç®—æ³•ç”Ÿæˆåˆ†å¸ƒå¼ç³»ç»Ÿå”¯ä¸€ID","date":"2019-01-06T23:23:41.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/4f74853e.html","link":"","permalink":"https://ydstudios.gitee.io/post/4f74853e.html","excerpt":"åœ¨å¤æ‚çš„ç³»ç»Ÿä¸­å”¯ä¸€IDæ˜¯æˆ‘ä»¬åœ¨è®¾è®¡çš„æ—¶å€™å¸¸å¸¸ä¼šé‡è§çš„é—®é¢˜ï¼Œç”ŸæˆIDçš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œé€‚åº”ä¸åŒçš„åœºæ™¯ã€éœ€æ±‚ä»¥åŠæ€§èƒ½è¦æ±‚ã€‚æ‰€ä»¥æœ‰äº›æ¯”è¾ƒå¤æ‚çš„ç³»ç»Ÿä¼šæœ‰å¤šä¸ªIDç”Ÿæˆçš„ç­–ç•¥ï¼Œä¸‹é¢å°±ä»‹ç»ä¸€äº›å¸¸è§çš„IDç”Ÿæˆç­–ç•¥ã€‚","text":"åœ¨å¤æ‚çš„ç³»ç»Ÿä¸­å”¯ä¸€IDæ˜¯æˆ‘ä»¬åœ¨è®¾è®¡çš„æ—¶å€™å¸¸å¸¸ä¼šé‡è§çš„é—®é¢˜ï¼Œç”ŸæˆIDçš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œé€‚åº”ä¸åŒçš„åœºæ™¯ã€éœ€æ±‚ä»¥åŠæ€§èƒ½è¦æ±‚ã€‚æ‰€ä»¥æœ‰äº›æ¯”è¾ƒå¤æ‚çš„ç³»ç»Ÿä¼šæœ‰å¤šä¸ªIDç”Ÿæˆçš„ç­–ç•¥ï¼Œä¸‹é¢å°±ä»‹ç»ä¸€äº›å¸¸è§çš„IDç”Ÿæˆç­–ç•¥ã€‚ 1. æ•°æ®åº“è‡ªå¢é•¿åºåˆ—æˆ–å­—æ®µæœ€å¸¸è§çš„æ–¹å¼ã€‚åˆ©ç”¨æ•°æ®åº“ï¼Œå…¨æ•°æ®åº“å”¯ä¸€ã€‚ ä¼˜ç‚¹ï¼š ç®€å•ï¼Œä»£ç æ–¹ä¾¿ï¼Œæ€§èƒ½å¯ä»¥æ¥å—ã€‚ æ•°å­—IDå¤©ç„¶æ’åºï¼Œå¯¹åˆ†é¡µæˆ–è€…éœ€è¦æ’åºçš„ç»“æœå¾ˆæœ‰å¸®åŠ©ã€‚ ç¼ºç‚¹ï¼š ä¸åŒæ•°æ®åº“è¯­æ³•å’Œå®ç°ä¸åŒï¼Œæ•°æ®åº“è¿ç§»çš„æ—¶å€™æˆ–å¤šæ•°æ®åº“ç‰ˆæœ¬æ”¯æŒçš„æ—¶å€™éœ€è¦å¤„ç†ã€‚ åœ¨å•ä¸ªæ•°æ®åº“æˆ–è¯»å†™åˆ†ç¦»æˆ–ä¸€ä¸»å¤šä»çš„æƒ…å†µä¸‹ï¼Œåªæœ‰ä¸€ä¸ªä¸»åº“å¯ä»¥ç”Ÿæˆã€‚æœ‰å•ç‚¹æ•…éšœçš„é£é™©ã€‚ åœ¨æ€§èƒ½è¾¾ä¸åˆ°è¦æ±‚çš„æƒ…å†µä¸‹ï¼Œæ¯”è¾ƒéš¾äºæ‰©å±•ã€‚ å¦‚æœé‡è§å¤šä¸ªç³»ç»Ÿéœ€è¦åˆå¹¶æˆ–è€…æ¶‰åŠåˆ°æ•°æ®è¿ç§»ä¼šç›¸å½“ç—›è‹¦ã€‚ ä¼˜åŒ–æ–¹æ¡ˆï¼š é’ˆå¯¹ä¸»åº“å•ç‚¹ï¼Œå¦‚æœæœ‰å¤šä¸ªMasteråº“ï¼Œåˆ™æ¯ä¸ªMasteråº“è®¾ç½®çš„èµ·å§‹æ•°å­—ä¸ä¸€æ ·ï¼Œæ­¥é•¿ä¸€æ ·ï¼Œå¯ä»¥æ˜¯Masterçš„ä¸ªæ•°ã€‚æ¯”å¦‚ï¼šMaster1 ç”Ÿæˆçš„æ˜¯ 1ï¼Œ4ï¼Œ7ï¼Œ10ï¼ŒMaster2ç”Ÿæˆçš„æ˜¯2,5,8,11 Master3ç”Ÿæˆçš„æ˜¯ 3,6,9,12ã€‚è¿™æ ·å°±å¯ä»¥æœ‰æ•ˆç”Ÿæˆé›†ç¾¤ä¸­çš„å”¯ä¸€IDï¼Œä¹Ÿå¯ä»¥å¤§å¤§é™ä½IDç”Ÿæˆæ•°æ®åº“æ“ä½œçš„è´Ÿè½½ã€‚ 2. UUID UUID(Universally Unique Identifier)çš„æ ‡å‡†å‹å¼åŒ…å«32ä¸ª16è¿›åˆ¶æ•°å­—ï¼Œä»¥è¿å­—å·åˆ†ä¸ºäº”æ®µï¼Œå½¢å¼ä¸º8-4-4-4-12çš„36ä¸ªå­—ç¬¦ï¼Œç¤ºä¾‹ï¼š550e8400-e29b-41d4-a716-446655440000ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ä¸šç•Œä¸€å…±æœ‰5ç§æ–¹å¼ç”ŸæˆUUIDã€‚ ä¼˜ç‚¹ï¼š ç®€å•ï¼Œä»£ç æ–¹ä¾¿ã€‚ ç”ŸæˆIDæ€§èƒ½éå¸¸å¥½ï¼ŒåŸºæœ¬ä¸ä¼šæœ‰æ€§èƒ½é—®é¢˜ï¼Œæœ¬åœ°ç”Ÿæˆï¼Œæ²¡æœ‰ç½‘ç»œæ¶ˆè€—ã€‚ å…¨çƒå”¯ä¸€ï¼Œåœ¨é‡è§æ•°æ®è¿ç§»ï¼Œç³»ç»Ÿæ•°æ®åˆå¹¶ï¼Œæˆ–è€…æ•°æ®åº“å˜æ›´ç­‰æƒ…å†µä¸‹ï¼Œå¯ä»¥ä»å®¹åº”å¯¹ã€‚ ç¼ºç‚¹ï¼š ä¸æ˜“äºå­˜å‚¨ï¼ŒUUIDå¤ªé•¿ï¼Œ16å­—èŠ‚128ä½ï¼Œé€šå¸¸ä»¥36é•¿åº¦çš„å­—ç¬¦ä¸²è¡¨ç¤ºï¼Œå¾ˆå¤šåœºæ™¯ä¸é€‚ç”¨ã€‚MySQLå®˜æ–¹æœ‰æ˜ç¡®çš„å»ºè®®ä¸»é”®è¦å°½é‡è¶ŠçŸ­è¶Šå¥½ ä¿¡æ¯ä¸å®‰å…¨ï¼šåŸºäºMACåœ°å€ç”ŸæˆUUIDçš„ç®—æ³•å¯èƒ½ä¼šé€ æˆMACåœ°å€æ³„éœ²ï¼Œè¿™ä¸ªæ¼æ´æ›¾è¢«ç”¨äºå¯»æ‰¾æ¢…ä¸½èç—…æ¯’çš„åˆ¶ä½œè€…ä½ç½®ã€‚ ç”ŸæˆIDæ— åºå¯¹MySQLç´¢å¼•ä¸åˆ©ï¼šå¦‚æœä½œä¸ºæ•°æ®åº“ä¸»é”®ï¼Œåœ¨InnoDBå¼•æ“ä¸‹ï¼ŒUUIDçš„æ— åºæ€§å¯èƒ½ä¼šå¼•èµ·æ•°æ®ä½ç½®é¢‘ç¹å˜åŠ¨ï¼Œä¸¥é‡å½±å“æ€§èƒ½ã€‚ 3. snowflakeæ–¹æ¡ˆå¤§è‡´æ¥è¯´æ˜¯ä¸€ç§ä»¥åˆ’åˆ†å‘½åç©ºé—´ï¼ˆUUIDä¹Ÿç®—ï¼Œç”±äºæ¯”è¾ƒå¸¸è§ï¼Œæ‰€ä»¥å•ç‹¬åˆ†æï¼‰æ¥ç”ŸæˆIDçš„ä¸€ç§ç®—æ³•ï¼Œè¿™ç§æ–¹æ¡ˆæŠŠ64-bitåˆ†åˆ«åˆ’åˆ†æˆå¤šæ®µï¼Œåˆ†å¼€æ¥æ ‡ç¤ºæœºå™¨ã€æ—¶é—´ç­‰ï¼Œæ¯”å¦‚åœ¨snowflakeä¸­çš„64-bitåˆ†åˆ«è¡¨ç¤ºå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 10 - 0000000000 0000000000 0000000000 0000000000 0 - 00000 - 00000 - 000000000000 1bit è¡¨ç¤ºç¬¦å·ä½ï¼Œè¡¨ç¤ºæ˜¯æ­£æ•°è¿˜æ˜¯è´Ÿæ•°ï¼Œè®¾ä¸ºæ­£æ•°å›ºå®šä¸º0 41bit çš„æ—¶é—´æˆ³ å¯ä»¥è¡¨ç¤º( 1L&lt;&lt;41 ) / ( 1000L * 3600 * 24 *365 )=69å¹´çš„æ—¶é—´ã€‚ 10bitæœºå™¨å¯ä»¥åˆ†åˆ«è¡¨ç¤º1024å°æœºå™¨ã€‚å¦‚æœæˆ‘ä»¬å¯¹IDCåˆ’åˆ†æœ‰éœ€æ±‚ï¼Œè¿˜å¯ä»¥å°†10bitåˆ†5bitç»™IDCï¼Œåˆ†5bitç»™å·¥ä½œæœºå™¨ã€‚è¿™æ ·å°±å¯ä»¥è¡¨ç¤º32ä¸ªIDCï¼Œæ¯ä¸ªIDCä¸‹å¯ä»¥æœ‰32å°æœºå™¨ï¼Œå¯ä»¥æ ¹æ®è‡ªèº«éœ€æ±‚å®šä¹‰ã€‚ 12bitå¯ä»¥è¡¨ç¤ºçš„æœ€å¤§æ­£æ•´æ•°æ˜¯2^12-1=4095ï¼Œå³å¯ä»¥ç”¨0ã€1ã€2ã€3ã€â€¦.4094è¿™4095ä¸ªæ•°å­—ï¼Œæ¥è¡¨ç¤ºåŒä¸€æœºå™¨åŒä¸€æ—¶é—´æˆªï¼ˆæ¯«ç§’)å†…äº§ç”Ÿçš„4095ä¸ªIDåºå·ï¼Œè¿™ç§åˆ†é…æ–¹å¼å¯ä»¥ä¿è¯åœ¨ä»»ä½•ä¸€ä¸ªIDCçš„ä»»ä½•ä¸€å°æœºå™¨åœ¨ä»»æ„æ¯«ç§’å†…ç”Ÿæˆçš„IDéƒ½æ˜¯ä¸åŒçš„ã€‚ ä¼˜ç‚¹ï¼š æ¯«ç§’æ•°åœ¨é«˜ä½ï¼Œè‡ªå¢åºåˆ—åœ¨ä½ä½ï¼Œæ•´ä¸ªIDéƒ½æ˜¯è¶‹åŠ¿é€’å¢çš„ã€‚ ä¸ä¾èµ–æ•°æ®åº“ç­‰ç¬¬ä¸‰æ–¹ç³»ç»Ÿï¼Œä»¥æœåŠ¡çš„æ–¹å¼éƒ¨ç½²ï¼Œç¨³å®šæ€§æ›´é«˜ï¼Œç”ŸæˆIDçš„æ€§èƒ½ä¹Ÿæ˜¯éå¸¸é«˜çš„ã€‚ å¯ä»¥æ ¹æ®è‡ªèº«ä¸šåŠ¡ç‰¹æ€§åˆ†é…bitä½ï¼Œéå¸¸çµæ´»ã€‚ ç¼ºç‚¹ï¼š å¼ºä¾èµ–æœºå™¨æ—¶é’Ÿï¼Œåœ¨å•æœºä¸Šæ˜¯é€’å¢çš„ï¼Œä½†æ˜¯ç”±äºæ¶‰åŠåˆ°åˆ†å¸ƒå¼ç¯å¢ƒï¼Œæ¯å°æœºå™¨ä¸Šçš„æ—¶é’Ÿä¸å¯èƒ½å®Œå…¨åŒæ­¥ï¼Œè¿˜æœ‰é—°ç§’çš„å­˜åœ¨ï¼Œä¼šå¯¼è‡´é‡å¤æˆ–è€…æœåŠ¡ä¼šå¤„äºä¸å¯ç”¨çŠ¶æ€ã€‚ é™„ä¸Šç›¸å…³çš„ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150package com.dm.tool.util;/** * é€šè¿‡ snowFlake é›ªèŠ±ç®—æ³•ç”Ÿæˆå”¯ä¸€ä¸”åœ¨æ—¶é—´æ®µå†…è¶‹åŠ¿é€’å¢çš„ * åˆ†å¸ƒå¼ID * @author Nick * @projectName dm-mt * @package com.dm.tool.util * @createDate 2019/01/17 09:17 * @updateDate 2019/01/17 09:17 */public class SnowFlake&#123; private static volatile SnowFlake instance ; /** * èµ·å§‹çš„æ—¶é—´æˆ³ * ä» 2019/01/01 00:00:00 å¼€å§‹ */ private final static long START_STMP = 1546272000000L; /** * åºåˆ—å·å ç”¨çš„ä½æ•° */ private final static long SEQUENCE_BIT = 12; /** * æœºå™¨æ ‡è¯†å ç”¨çš„ä½æ•° */ private final static long MACHINE_BIT = 5; /** * æ•°æ®ä¸­å¿ƒå ç”¨çš„ä½æ•° */ private final static long DATACENTER_BIT = 5; /** * æ¯ä¸€éƒ¨åˆ†çš„æœ€å¤§å€¼ */ private final static long MAX_DATACENTER_NUM = -1L ^ (-1L &lt;&lt; DATACENTER_BIT); private final static long MAX_MACHINE_NUM = -1L ^ (-1L &lt;&lt; MACHINE_BIT); private final static long MAX_SEQUENCE = -1L ^ (-1L &lt;&lt; SEQUENCE_BIT); /** * æ¯ä¸€éƒ¨åˆ†å‘å·¦çš„ä½ç§» */ private final static long MACHINE_LEFT = SEQUENCE_BIT; private final static long DATACENTER_LEFT = SEQUENCE_BIT + MACHINE_BIT; private final static long TIMESTMP_LEFT = DATACENTER_LEFT + DATACENTER_BIT; /** * æ•°æ®ä¸­å¿ƒ */ private long datacenterId; /** * æœºå™¨æ ‡è¯† */ private long machineId; /** * åºåˆ—å· */ private long sequence = 0L; /** * ä¸Šä¸€æ¬¡æ—¶é—´æˆ³ */ private long lastStmp = -1L; /** * * @param datacenterId æ•°æ®ä¸­å¿ƒID (0~31) * @param machineId workerId å·¥ä½œID (0~31) */ private SnowFlake(long datacenterId, long machineId) &#123; if (datacenterId &gt; MAX_DATACENTER_NUM || datacenterId &lt; 0) &#123; throw new IllegalArgumentException(String.format(\"datacenterId can't be greater than %d or less than 0\",MAX_DATACENTER_NUM)); &#125; if (machineId &gt; MAX_MACHINE_NUM || machineId &lt; 0) &#123; throw new IllegalArgumentException(String.format(\"machineId can't be greater than %d or less than 0\",MAX_MACHINE_NUM)); &#125; this.datacenterId = datacenterId; this.machineId = machineId; &#125; public static SnowFlake getInstance(long datacenterId, long machineId)&#123; if (instance == null)&#123; synchronized (SnowFlake.class)&#123; if (instance == null)&#123; instance = new SnowFlake(datacenterId,machineId); &#125; &#125; &#125; return instance; &#125; /** * äº§ç”Ÿä¸‹ä¸€ä¸ªID * * @return */ protected synchronized long nextId() &#123; long currStmp = getNewTimestamp(); if (currStmp &lt; lastStmp) &#123; String msg = String.format(\"Clock moved backwards. Refusing to generate id! currStmp=%d,lastStmp=%d\",currStmp,lastStmp); throw new RuntimeException(msg); &#125; if (currStmp == lastStmp) &#123; // ç›¸åŒæ¯«ç§’å†…ï¼Œåºåˆ—å·è‡ªå¢ sequence = (sequence + 1) &amp; MAX_SEQUENCE; // åŒä¸€æ¯«ç§’çš„åºåˆ—æ•°å·²ç»è¾¾åˆ°æœ€å¤§ if (sequence == 0L) &#123; currStmp = getNextMill(); &#125; &#125; else &#123; // ä¸åŒæ¯«ç§’å†…ï¼Œåºåˆ—å·ç½®ä¸º0 sequence = 0L; &#125; lastStmp = currStmp; // æ—¶é—´æˆ³ 41 æ•°æ®ä¸­å¿ƒ 5 æœºå™¨æ ‡è¯† 5 åºåˆ—å· 12 return (currStmp - START_STMP) &lt;&lt; TIMESTMP_LEFT | datacenterId &lt;&lt; DATACENTER_LEFT | machineId &lt;&lt; MACHINE_LEFT | sequence; &#125; private long getNextMill() &#123; long mill = getNewTimestamp(); while (mill &lt;= lastStmp) &#123; mill = getNewTimestamp(); &#125; return mill; &#125; private long getNewTimestamp() &#123; return System.currentTimeMillis(); &#125; public static long getSequenceBit() &#123; return SEQUENCE_BIT; &#125; public static long getMachineBit() &#123; return MACHINE_BIT; &#125; public static long getDatacenterBit() &#123; return DATACENTER_BIT; &#125; public static long getStartStmp() &#123; return START_STMP; &#125;&#125; å·¥å…·ç±»å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192package com.dm.tool.util;import org.apache.commons.lang.StringUtils;import java.math.BigInteger;import java.util.HashSet;import java.util.Set;/** * * snowFlakeå·¥å…·ç±» * * @author Nick * @projectName dm-mt * @package com.dm.tool.util * @createDate 2019/01/16 09:30 * @updateDate 2019/01/16 09:30 */public class SnowFlakeIDUtil &#123; private static final int radix = 2; /** * æ•°æ®ä¸­å¿ƒID 0ï¼Œæœºå™¨ID 0 * @param datacenterId * @param machineId * @return */ public static long getNextId(long datacenterId, long machineId)&#123; return SnowFlake.getInstance(datacenterId,machineId).nextId(); &#125; /** * è·å¾—è®¢å•IDç”Ÿæˆæ—¶çš„æ—¶é—´æˆ³ * @param id * @return */ public static long getIDTimestamp(long id)&#123; return (id &gt;&gt; SnowFlake.getTimestmpLeft() &amp; ~(-1L &lt;&lt; 41))+SnowFlake.getStartStmp(); &#125; /** * è·å–æ•°æ®ä¸­å¿ƒ ID * @param id * @return */ public static long getDatacenterId(long id)&#123; return id &gt;&gt; SnowFlake.getDatacenterLeft() &amp; ~(-1L &lt;&lt; SnowFlake.getDatacenterBit()); &#125; /** * è·å¾—æœºå™¨ID * @param id * @return */ public static long getMachineId(long id)&#123; return id &gt;&gt; SnowFlake.getMachineLeft() &amp; ~(-1L &lt;&lt; SnowFlake.getMachineBit()); &#125; /** * è·å–åºåˆ—ID * @param id * @return */ public static long getSequence(long id)&#123; return id &amp; ~(-1L &lt;&lt; SnowFlake.getSequenceBit()); &#125; public static void main(String[] args)&#123; MyThread thread1 = new MyThread(); MyThread thread2 = new MyThread(); MyThread thread3 = new MyThread(); MyThread thread4 = new MyThread(); thread1.start(); thread2.start(); thread3.start(); thread4.start(); &#125; static class MyThread extends Thread&#123; @Override public void run() &#123; while (true)&#123; long id = SnowFlakeIDUtil.getNextId(0,0); System.out.println(\"ID=\"+id+\"æ—¶é—´æˆ³= \"+getIDTimestamp(id)+\" DatacenterId= \"+getDatacenterId(id)+\" MachineId=\"+getMachineId(id)+\" Sequence=\"+getSequence(id)); &#125; &#125; &#125;&#125;","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"},{"name":"Snowflake","slug":"Snowflake","permalink":"https://ydstudios.gitee.io/tags/Snowflake/"}]},{"title":"ä½¿ç”¨FastJsonè¿›è¡Œå¯¹è±¡å’ŒJSONè½¬æ¢å±æ€§å‘½åè§„åˆ™ä¸ºä¸‹åˆ’çº¿å’Œé©¼å³°çš„é—®é¢˜","slug":"ä½¿ç”¨FastJsonè¿›è¡Œå¯¹è±¡å’ŒJSONè½¬æ¢å±æ€§å‘½åè§„åˆ™ä¸ºä¸‹åˆ’çº¿å’Œé©¼å³°çš„é—®é¢˜","date":"2018-12-24T23:20:33.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/ff52aa1f.html","link":"","permalink":"https://ydstudios.gitee.io/post/ff52aa1f.html","excerpt":"æœ€è¿‘åœ¨å¯¹æ¥æ”¯ä»˜å®ï¼Œåœ¨ç¼–å†™æ”¯ä»˜éœ€è¦çš„beançš„æ—¶å€™ï¼Œå‘ç°æ”¯ä»˜å®éœ€è¦ä¼ é€’çš„å‚æ•°å‘½åæ–¹å¼éƒ½æ˜¯ä¸‹åˆ’çº¿ï¼Œè‡ªå·±ideaåˆè£…äº†é˜¿é‡Œå·´å·´çš„ç¼–ç¨‹è§„çº¦ï¼Œä»£ç è€æ˜¯æœ‰é»„è‰²æç¤ºï¼Œæ˜¾å¾—ç‰¹åˆ«éš¾çœ‹ã€‚äºæ˜¯ä¹æˆ‘æŠŠå±æ€§æ”¹æˆäº†é©¼å³°çš„å‘½åæ–¹å¼ï¼Œç„¶åä¸‹æ„è¯†çš„åœ¨ä¸Šé¢åŠ äº†ä¸€ä¸ª@JsonPropertyæ³¨è§£å®ç°ç›¸äº’è½¬æ¢è¿‡ç¨‹ä¸­å±æ€§å‘½åæ–¹å¼ä¹Ÿèƒ½è‡ªåŠ¨è½¬æ¢ã€‚å¯æ˜¯æˆ‘è¿è¡Œä»£ç æ—¶å‘ç°ä»£ç æŠ¥é”™è¿è¡Œä¸èµ·æ¥äº†ã€‚ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š","text":"æœ€è¿‘åœ¨å¯¹æ¥æ”¯ä»˜å®ï¼Œåœ¨ç¼–å†™æ”¯ä»˜éœ€è¦çš„beançš„æ—¶å€™ï¼Œå‘ç°æ”¯ä»˜å®éœ€è¦ä¼ é€’çš„å‚æ•°å‘½åæ–¹å¼éƒ½æ˜¯ä¸‹åˆ’çº¿ï¼Œè‡ªå·±ideaåˆè£…äº†é˜¿é‡Œå·´å·´çš„ç¼–ç¨‹è§„çº¦ï¼Œä»£ç è€æ˜¯æœ‰é»„è‰²æç¤ºï¼Œæ˜¾å¾—ç‰¹åˆ«éš¾çœ‹ã€‚äºæ˜¯ä¹æˆ‘æŠŠå±æ€§æ”¹æˆäº†é©¼å³°çš„å‘½åæ–¹å¼ï¼Œç„¶åä¸‹æ„è¯†çš„åœ¨ä¸Šé¢åŠ äº†ä¸€ä¸ª@JsonPropertyæ³¨è§£å®ç°ç›¸äº’è½¬æ¢è¿‡ç¨‹ä¸­å±æ€§å‘½åæ–¹å¼ä¹Ÿèƒ½è‡ªåŠ¨è½¬æ¢ã€‚å¯æ˜¯æˆ‘è¿è¡Œä»£ç æ—¶å‘ç°ä»£ç æŠ¥é”™è¿è¡Œä¸èµ·æ¥äº†ã€‚ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728public class AliPayParam &#123; @JsonProperty(name=\"out_trade_no\") private String outTradeNo; @JsonProperty(name=\"total_amount\") private String totalAmount; /** * å…¬å…±å›ä¼ å‚æ•° */ @JsonProperty(name=\"passback_params\") private String passbackParams; private String subject; private String body; @JsonProperty(name=\"product_code\") private String productCode; /** * è¯¥å‚æ•°åœ¨è¯·æ±‚åˆ°æ”¯ä»˜å®æ—¶å¼€å§‹è®¡æ—¶,è¯¥ç¬”è®¢å•å…è®¸çš„æœ€æ™šä»˜æ¬¾æ—¶é—´ï¼Œé€¾æœŸå°†å…³é—­äº¤æ˜“ã€‚ * å–å€¼èŒƒå›´ï¼š1mï½15dã€‚m-åˆ†é’Ÿï¼Œh-å°æ—¶ï¼Œd-å¤©ï¼Œ1c-å½“å¤© * ï¼ˆ1c-å½“å¤©çš„æƒ…å†µä¸‹ï¼Œæ— è®ºäº¤æ˜“ä½•æ—¶åˆ›å»ºï¼Œéƒ½åœ¨0ç‚¹å…³é—­ï¼‰ã€‚ * è¯¥å‚æ•°æ•°å€¼ä¸æ¥å—å°æ•°ç‚¹ï¼Œ å¦‚ 1.5hï¼Œå¯è½¬æ¢ä¸º 90mã€‚ */ @JsonProperty(name=\"timeout_express\") private String timeoutExpress; ï½ çªç„¶å‘ç°è¿™ä¸ª@JsonPropertyæ³¨è§£æ˜¯Springæ¡†æ¶è‡ªå¸¦jacksonçš„æ³¨è§£ï¼Œä¸æ˜¯é˜¿é‡ŒFastJsonçš„æ³¨è§£ï¼Œäºæ˜¯ä¹æˆ‘çœ‹äº†çœ‹æ‰¾åˆ°äº†ä¸‹é¢çš„è¿™ä¸ªæ³¨è§£ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253public @interface JSONField &#123; /** * config encode/decode ordinal * @since 1.1.42 * @return */ // é…ç½®åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„é¡ºåºï¼Œ1.1.42ç‰ˆæœ¬ä¹‹åæ‰æ”¯æŒ int ordinal() default 0; // æŒ‡å®šå­—æ®µçš„åç§° String name() default \"\"; // æŒ‡å®šå­—æ®µçš„æ ¼å¼ï¼Œå¯¹æ—¥æœŸæ ¼å¼æœ‰ç”¨ String format() default \"\"; // æ˜¯å¦åºåˆ—åŒ– boolean serialize() default true; // æ˜¯å¦ååºåˆ—åŒ– boolean deserialize() default true; SerializerFeature[] serialzeFeatures() default &#123;&#125;; Feature[] parseFeatures() default &#123;&#125;; String label() default \"\"; /** * @since 1.2.12 */ boolean jsonDirect() default false; /** * Serializer class to use for serializing associated value. * * @since 1.2.16 */ Class&lt;?&gt; serializeUsing() default Void.class; /** * Deserializer class to use for deserializing associated value. * * @since 1.2.16 */ Class&lt;?&gt; deserializeUsing() default Void.class; /** * @since 1.2.21 * @return the alternative names of the field when it is deserialized */ String[] alternateNames() default &#123;&#125;; /** * @since 1.2.31 */ boolean unwrapped() default false;&#125; çŸ¥é“è¿™ä¸ªæ³¨è§£ä¹‹åï¼ŒæŠŠ@JsonPropertyæ›¿æ¢æˆ@JSONFieldæ³¨è§£å°±è¡Œäº†ï¼Œè½¬æ¢æˆJsonå±æ€§åå°±ä¼šä»outTradeNoå˜æˆout_trade_no","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"},{"name":"fastJson","slug":"fastJson","permalink":"https://ydstudios.gitee.io/tags/fastJson/"}]},{"title":"è°ˆè°ˆJavaé›†åˆArrayListæ‰©å®¹","slug":"è°ˆè°ˆJavaé›†åˆArrayListæ‰©å®¹","date":"2018-12-13T23:19:26.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/3d08b907.html","link":"","permalink":"https://ydstudios.gitee.io/post/3d08b907.html","excerpt":"ä¸€ å…ˆä» ArrayList çš„æ„é€ å‡½æ•°è¯´èµ·ArrayListæœ‰ä¸‰ç§æ–¹å¼æ¥åˆå§‹åŒ–ï¼Œæ„é€ æ–¹æ³•æºç å¦‚ä¸‹ï¼š","text":"ä¸€ å…ˆä» ArrayList çš„æ„é€ å‡½æ•°è¯´èµ·ArrayListæœ‰ä¸‰ç§æ–¹å¼æ¥åˆå§‹åŒ–ï¼Œæ„é€ æ–¹æ³•æºç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647/** * é»˜è®¤åˆå§‹å®¹é‡å¤§å° */ private static final int DEFAULT_CAPACITY = 10; private static final Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = &#123;&#125;; /** *é»˜è®¤æ„é€ å‡½æ•°ï¼Œä½¿ç”¨åˆå§‹å®¹é‡10æ„é€ ä¸€ä¸ªç©ºåˆ—è¡¨(æ— å‚æ•°æ„é€ ) */ public ArrayList() &#123; this.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA; &#125; /** * å¸¦åˆå§‹å®¹é‡å‚æ•°çš„æ„é€ å‡½æ•°ã€‚ï¼ˆç”¨æˆ·è‡ªå·±æŒ‡å®šå®¹é‡ï¼‰ */ public ArrayList(int initialCapacity) &#123; if (initialCapacity &gt; 0) &#123;//åˆå§‹å®¹é‡å¤§äº0 //åˆ›å»ºinitialCapacityå¤§å°çš„æ•°ç»„ this.elementData = new Object[initialCapacity]; &#125; else if (initialCapacity == 0) &#123;//åˆå§‹å®¹é‡ç­‰äº0 //åˆ›å»ºç©ºæ•°ç»„ this.elementData = EMPTY_ELEMENTDATA; &#125; else &#123;//åˆå§‹å®¹é‡å°äº0ï¼ŒæŠ›å‡ºå¼‚å¸¸ throw new IllegalArgumentException(\"Illegal Capacity: \"+ initialCapacity); &#125; &#125;/** *æ„é€ åŒ…å«æŒ‡å®šcollectionå…ƒç´ çš„åˆ—è¡¨ï¼Œè¿™äº›å…ƒç´ åˆ©ç”¨è¯¥é›†åˆçš„è¿­ä»£å™¨æŒ‰é¡ºåºè¿”å› *å¦‚æœæŒ‡å®šçš„é›†åˆä¸ºnullï¼Œthrows NullPointerExceptionã€‚ */ public ArrayList(Collection&lt;? extends E&gt; c) &#123; elementData = c.toArray(); if ((size = elementData.length) != 0) &#123; // c.toArray might (incorrectly) not return Object[] (see 6260652) if (elementData.getClass() != Object[].class) elementData = Arrays.copyOf(elementData, size, Object[].class); &#125; else &#123; // replace with empty array. this.elementData = EMPTY_ELEMENTDATA; &#125; &#125; ç»†å¿ƒçš„åŒå­¦ä¸€å®šä¼šå‘ç° ï¼šä»¥æ— å‚æ•°æ„é€ æ–¹æ³•åˆ›å»º ArrayList æ—¶ï¼Œå®é™…ä¸Šåˆå§‹åŒ–èµ‹å€¼çš„æ˜¯ä¸€ä¸ªç©ºæ•°ç»„ã€‚å½“çœŸæ­£å¯¹æ•°ç»„è¿›è¡Œæ·»åŠ å…ƒç´ æ“ä½œæ—¶ï¼Œæ‰çœŸæ­£åˆ†é…å®¹é‡ã€‚å³å‘æ•°ç»„ä¸­æ·»åŠ ç¬¬ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œæ•°ç»„å®¹é‡æ‰©ä¸º10ã€‚ ä¸‹é¢åœ¨æˆ‘ä»¬åˆ†æ ArrayList æ‰©å®¹æ—¶ä¼šé™åˆ°è¿™ä¸€ç‚¹å†…å®¹ï¼ äºŒ ä¸€æ­¥ä¸€æ­¥åˆ†æ ArrayList æ‰©å®¹æœºåˆ¶è¿™é‡Œä»¥æ— å‚æ„é€ å‡½æ•°åˆ›å»ºçš„ ArrayList ä¸ºä¾‹åˆ†æ 1. å…ˆæ¥çœ‹ add æ–¹æ³•12345678910 /** * å°†æŒ‡å®šçš„å…ƒç´ è¿½åŠ åˆ°æ­¤åˆ—è¡¨çš„æœ«å°¾ã€‚ */ public boolean add(E e) &#123;//æ·»åŠ å…ƒç´ ä¹‹å‰ï¼Œå…ˆè°ƒç”¨ensureCapacityInternalæ–¹æ³• ensureCapacityInternal(size + 1); // Increments modCount!! //è¿™é‡Œçœ‹åˆ°ArrayListæ·»åŠ å…ƒç´ çš„å®è´¨å°±ç›¸å½“äºä¸ºæ•°ç»„èµ‹å€¼ elementData[size++] = e; return true; &#125; 2. å†æ¥çœ‹çœ‹ ensureCapacityInternal() æ–¹æ³•å¯ä»¥çœ‹åˆ° add æ–¹æ³• é¦–å…ˆè°ƒç”¨äº†ensureCapacityInternal(size + 1) 123456789//å¾—åˆ°æœ€å°æ‰©å®¹é‡ private void ensureCapacityInternal(int minCapacity) &#123; if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123; // è·å–é»˜è®¤çš„å®¹é‡å’Œä¼ å…¥å‚æ•°çš„è¾ƒå¤§å€¼ minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity); &#125; ensureExplicitCapacity(minCapacity); &#125; å½“ è¦ add è¿›ç¬¬1ä¸ªå…ƒç´ æ—¶ï¼ŒminCapacityä¸º1ï¼Œåœ¨Math.max()æ–¹æ³•æ¯”è¾ƒåï¼ŒminCapacity ä¸º10ã€‚ 3. ensureExplicitCapacity() æ–¹æ³•å¦‚æœè°ƒç”¨ ensureCapacityInternal() æ–¹æ³•å°±ä¸€å®šä¼šè¿›è¿‡ï¼ˆæ‰§è¡Œï¼‰è¿™ä¸ªæ–¹æ³•ï¼Œä¸‹é¢æˆ‘ä»¬æ¥ç ”ç©¶ä¸€ä¸‹è¿™ä¸ªæ–¹æ³•çš„æºç ï¼ 123456789//åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹ private void ensureExplicitCapacity(int minCapacity) &#123; modCount++; // overflow-conscious code if (minCapacity - elementData.length &gt; 0) //è°ƒç”¨growæ–¹æ³•è¿›è¡Œæ‰©å®¹ï¼Œè°ƒç”¨æ­¤æ–¹æ³•ä»£è¡¨å·²ç»å¼€å§‹æ‰©å®¹äº† grow(minCapacity); &#125; æˆ‘ä»¬æ¥ä»”ç»†åˆ†æä¸€ä¸‹ï¼š å½“æˆ‘ä»¬è¦ add è¿›ç¬¬1ä¸ªå…ƒç´ åˆ° ArrayList æ—¶ï¼ŒelementData.length ä¸º0 ï¼ˆå› ä¸ºè¿˜æ˜¯ä¸€ä¸ªç©ºçš„ listï¼‰ï¼Œå› ä¸ºæ‰§è¡Œäº† ensureCapacityInternal() æ–¹æ³• ï¼Œæ‰€ä»¥ minCapacity æ­¤æ—¶ä¸º10ã€‚æ­¤æ—¶ï¼ŒminCapacity - elementData.length &gt; 0æˆç«‹ï¼Œæ‰€ä»¥ä¼šè¿›å…¥ grow(minCapacity) æ–¹æ³•ã€‚ å½“addç¬¬2ä¸ªå…ƒç´ æ—¶ï¼ŒminCapacity ä¸º2ï¼Œæ­¤æ—¶e lementData.length(å®¹é‡)åœ¨æ·»åŠ ç¬¬ä¸€ä¸ªå…ƒç´ åæ‰©å®¹æˆ 10 äº†ã€‚æ­¤æ—¶ï¼ŒminCapacity - elementData.length &gt; 0 ä¸æˆç«‹ï¼Œæ‰€ä»¥ä¸ä¼šè¿›å…¥ ï¼ˆæ‰§è¡Œï¼‰grow(minCapacity) æ–¹æ³•ã€‚ æ·»åŠ ç¬¬3ã€4Â·Â·Â·åˆ°ç¬¬10ä¸ªå…ƒç´ æ—¶ï¼Œä¾ç„¶ä¸ä¼šæ‰§è¡Œgrowæ–¹æ³•ï¼Œæ•°ç»„å®¹é‡éƒ½ä¸º10ã€‚ ç›´åˆ°æ·»åŠ ç¬¬11ä¸ªå…ƒç´ ï¼ŒminCapacity(ä¸º11)æ¯”elementData.lengthï¼ˆä¸º10ï¼‰è¦å¤§ã€‚è¿›å…¥growæ–¹æ³•è¿›è¡Œæ‰©å®¹ã€‚ 4. grow() æ–¹æ³•123456789101112131415161718192021222324/** * è¦åˆ†é…çš„æœ€å¤§æ•°ç»„å¤§å° */private static final int MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8;/** * ArrayListæ‰©å®¹çš„æ ¸å¿ƒæ–¹æ³•ã€‚ */private void grow(int minCapacity) &#123; // oldCapacityä¸ºæ—§å®¹é‡ï¼ŒnewCapacityä¸ºæ–°å®¹é‡ int oldCapacity = elementData.length; //å°†oldCapacity å³ç§»ä¸€ä½ï¼Œå…¶æ•ˆæœç›¸å½“äºoldCapacity /2ï¼Œ //æˆ‘ä»¬çŸ¥é“ä½è¿ç®—çš„é€Ÿåº¦è¿œè¿œå¿«äºæ•´é™¤è¿ç®—ï¼Œæ•´å¥è¿ç®—å¼çš„ç»“æœå°±æ˜¯å°†æ–°å®¹é‡æ›´æ–°ä¸ºæ—§å®¹é‡çš„1.5å€ï¼Œ int newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1); //ç„¶åæ£€æŸ¥æ–°å®¹é‡æ˜¯å¦å¤§äºæœ€å°éœ€è¦å®¹é‡ï¼Œè‹¥è¿˜æ˜¯å°äºæœ€å°éœ€è¦å®¹é‡ï¼Œé‚£ä¹ˆå°±æŠŠæœ€å°éœ€è¦å®¹é‡å½“ä½œæ•°ç»„çš„æ–°å®¹é‡ï¼Œ if (newCapacity - minCapacity &lt; 0) newCapacity = minCapacity; // å¦‚æœæ–°å®¹é‡å¤§äº MAX_ARRAY_SIZE,è¿›å…¥(æ‰§è¡Œ) `hugeCapacity()` æ–¹æ³•æ¥æ¯”è¾ƒ minCapacity å’Œ MAX_ARRAY_SIZEï¼Œ //å¦‚æœminCapacityå¤§äºæœ€å¤§å®¹é‡ï¼Œåˆ™æ–°å®¹é‡åˆ™ä¸º`Integer.MAX_VALUE`ï¼Œå¦åˆ™ï¼Œæ–°å®¹é‡å¤§å°åˆ™ä¸º MAX_ARRAY_SIZE å³ä¸º `Integer.MAX_VALUE - 8`ã€‚ if (newCapacity - MAX_ARRAY_SIZE &gt; 0) newCapacity = hugeCapacity(minCapacity); // minCapacity is usually close to size, so this is a win: elementData = Arrays.copyOf(elementData, newCapacity);&#125; int newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1),æ‰€ä»¥ ArrayList æ¯æ¬¡æ‰©å®¹ä¹‹åå®¹é‡éƒ½ä¼šå˜ä¸ºåŸæ¥çš„ 1.5 å€ï¼ è®°æ¸…æ¥šäº†ï¼ä¸æ˜¯ç½‘ä¸Šå¾ˆå¤šäººè¯´çš„ 1.5 å€+1ï¼ â€œ&gt;&gt;â€ï¼ˆç§»ä½è¿ç®—ç¬¦ï¼‰ï¼š&gt;&gt;1 å³ç§»ä¸€ä½ç›¸å½“äºé™¤2ï¼Œå³ç§»nä½ç›¸å½“äºé™¤ä»¥ 2 çš„ n æ¬¡æ–¹ã€‚è¿™é‡Œ oldCapacity æ˜æ˜¾å³ç§»äº†1ä½æ‰€ä»¥ç›¸å½“äºoldCapacity /2ã€‚å¯¹äºå¤§æ•°æ®çš„2è¿›åˆ¶è¿ç®—,ä½ç§»è¿ç®—ç¬¦æ¯”é‚£äº›æ™®é€šè¿ç®—ç¬¦çš„è¿ç®—è¦å¿«å¾ˆå¤š,å› ä¸ºç¨‹åºä»…ä»…ç§»åŠ¨ä¸€ä¸‹è€Œå·²,ä¸å»è®¡ç®—,è¿™æ ·æé«˜äº†æ•ˆç‡,èŠ‚çœäº†èµ„æº æˆ‘ä»¬å†æ¥é€šè¿‡ä¾‹å­æ¢ç©¶ä¸€ä¸‹grow() æ–¹æ³• ï¼š å½“addç¬¬1ä¸ªå…ƒç´ æ—¶ï¼ŒoldCapacity ä¸º0ï¼Œç»æ¯”è¾ƒåç¬¬ä¸€ä¸ªifåˆ¤æ–­æˆç«‹ï¼ŒnewCapacity = minCapacity(ä¸º10)ã€‚ä½†æ˜¯ç¬¬äºŒä¸ªifåˆ¤æ–­ä¸ä¼šæˆç«‹ï¼Œå³newCapacity ä¸æ¯” MAX_ARRAY_SIZEå¤§ï¼Œåˆ™ä¸ä¼šè¿›å…¥ hugeCapacity æ–¹æ³•ã€‚æ•°ç»„å®¹é‡ä¸º10ï¼Œaddæ–¹æ³•ä¸­ return true,sizeå¢ä¸º1ã€‚ å½“addç¬¬11ä¸ªå…ƒç´ è¿›å…¥growæ–¹æ³•æ—¶ï¼ŒnewCapacityä¸º15ï¼Œæ¯”minCapacityï¼ˆä¸º11ï¼‰å¤§ï¼Œç¬¬ä¸€ä¸ªifåˆ¤æ–­ä¸æˆç«‹ã€‚æ–°å®¹é‡æ²¡æœ‰å¤§äºæ•°ç»„æœ€å¤§sizeï¼Œä¸ä¼šè¿›å…¥hugeCapacityæ–¹æ³•ã€‚æ•°ç»„å®¹é‡æ‰©ä¸º15ï¼Œaddæ–¹æ³•ä¸­return true,sizeå¢ä¸º11ã€‚ ä»¥æ­¤ç±»æ¨Â·Â·Â·Â·Â·Â· è¿™é‡Œè¡¥å……ä¸€ç‚¹æ¯”è¾ƒé‡è¦ï¼Œä½†æ˜¯å®¹æ˜“è¢«å¿½è§†æ‰çš„çŸ¥è¯†ç‚¹ï¼š java ä¸­çš„ lengthå±æ€§æ˜¯é’ˆå¯¹æ•°ç»„è¯´çš„,æ¯”å¦‚è¯´ä½ å£°æ˜äº†ä¸€ä¸ªæ•°ç»„,æƒ³çŸ¥é“è¿™ä¸ªæ•°ç»„çš„é•¿åº¦åˆ™ç”¨åˆ°äº† length è¿™ä¸ªå±æ€§. java ä¸­çš„ length() æ–¹æ³•æ˜¯é’ˆå¯¹å­—ç¬¦ä¸²è¯´çš„,å¦‚æœæƒ³çœ‹è¿™ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦åˆ™ç”¨åˆ° length() è¿™ä¸ªæ–¹æ³•. java ä¸­çš„ size() æ–¹æ³•æ˜¯é’ˆå¯¹æ³›å‹é›†åˆè¯´çš„,å¦‚æœæƒ³çœ‹è¿™ä¸ªæ³›å‹æœ‰å¤šå°‘ä¸ªå…ƒç´ ,å°±è°ƒç”¨æ­¤æ–¹æ³•æ¥æŸ¥çœ‹! 5. hugeCapacity() æ–¹æ³•ã€‚ä»ä¸Šé¢ grow() æ–¹æ³•æºç æˆ‘ä»¬çŸ¥é“ï¼š å¦‚æœæ–°å®¹é‡å¤§äº MAX_ARRAY_SIZE,è¿›å…¥(æ‰§è¡Œ) hugeCapacity() æ–¹æ³•æ¥æ¯”è¾ƒ minCapacity å’Œ MAX_ARRAY_SIZEï¼Œå¦‚æœminCapacityå¤§äºæœ€å¤§å®¹é‡ï¼Œåˆ™æ–°å®¹é‡åˆ™ä¸ºInteger.MAX_VALUEï¼Œå¦åˆ™ï¼Œæ–°å®¹é‡å¤§å°åˆ™ä¸º MAX_ARRAY_SIZE å³ä¸º Integer.MAX_VALUE - 8ã€‚ 1234567891011private static int hugeCapacity(int minCapacity) &#123; if (minCapacity &lt; 0) // overflow throw new OutOfMemoryError(); //å¯¹minCapacityå’ŒMAX_ARRAY_SIZEè¿›è¡Œæ¯”è¾ƒ //è‹¥minCapacityå¤§ï¼Œå°†Integer.MAX_VALUEä½œä¸ºæ–°æ•°ç»„çš„å¤§å° //è‹¥MAX_ARRAY_SIZEå¤§ï¼Œå°†MAX_ARRAY_SIZEä½œä¸ºæ–°æ•°ç»„çš„å¤§å° //MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8; return (minCapacity &gt; MAX_ARRAY_SIZE) ? Integer.MAX_VALUE : MAX_ARRAY_SIZE;&#125; ä¸‰ System.arraycopy() å’Œ Arrays.copyOf()æ–¹æ³•é˜…è¯»æºç çš„è¯ï¼Œæˆ‘ä»¬å°±ä¼šå‘ç° ArrayList ä¸­å¤§é‡è°ƒç”¨äº†è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚æ¯”å¦‚ï¼šæˆ‘ä»¬ä¸Šé¢è®²çš„æ‰©å®¹æ“ä½œä»¥åŠadd(int index, E element)ã€toArray() ç­‰æ–¹æ³•ä¸­éƒ½ç”¨åˆ°äº†è¯¥æ–¹æ³•ï¼ 3.1 System.arraycopy() æ–¹æ³•123456789101112131415/** * åœ¨æ­¤åˆ—è¡¨ä¸­çš„æŒ‡å®šä½ç½®æ’å…¥æŒ‡å®šçš„å…ƒç´ ã€‚ *å…ˆè°ƒç”¨ rangeCheckForAdd å¯¹indexè¿›è¡Œç•Œé™æ£€æŸ¥ï¼›ç„¶åè°ƒç”¨ ensureCapacityInternal æ–¹æ³•ä¿è¯capacityè¶³å¤Ÿå¤§ï¼› *å†å°†ä»indexå¼€å§‹ä¹‹åçš„æ‰€æœ‰æˆå‘˜åç§»ä¸€ä¸ªä½ç½®ï¼›å°†elementæ’å…¥indexä½ç½®ï¼›æœ€åsizeåŠ 1ã€‚ */public void add(int index, E element) &#123; rangeCheckForAdd(index); ensureCapacityInternal(size + 1); // Increments modCount!! //arraycopy()æ–¹æ³•å®ç°æ•°ç»„è‡ªå·±å¤åˆ¶è‡ªå·± //elementData:æºæ•°ç»„;index:æºæ•°ç»„ä¸­çš„èµ·å§‹ä½ç½®;elementDataï¼šç›®æ ‡æ•°ç»„ï¼›index + 1ï¼šç›®æ ‡æ•°ç»„ä¸­çš„èµ·å§‹ä½ç½®ï¼› size - indexï¼šè¦å¤åˆ¶çš„æ•°ç»„å…ƒç´ çš„æ•°é‡ï¼› System.arraycopy(elementData, index, elementData, index + 1, size - index); elementData[index] = element; size++;&#125; æˆ‘ä»¬å†™ä¸€ä¸ªç®€å•çš„æ–¹æ³•æµ‹è¯•ä»¥ä¸‹ï¼š 1234567891011121314151617public class ArraycopyTest &#123; public static void main(String[] args) &#123; // TODO Auto-generated method stub int[] a = new int[10]; a[0] = 0; a[1] = 1; a[2] = 2; a[3] = 3; System.arraycopy(a, 2, a, 3, 3); a[2]=99; for (int i = 0; i &lt; a.length; i++) &#123; System.out.println(a[i]); &#125; &#125;&#125; ç»“æœï¼š 10 1 99 2 3 0 0 0 0 0 3.2 Arrays.copyOf()æ–¹æ³•1234567/** ä»¥æ­£ç¡®çš„é¡ºåºè¿”å›ä¸€ä¸ªåŒ…å«æ­¤åˆ—è¡¨ä¸­æ‰€æœ‰å…ƒç´ çš„æ•°ç»„ï¼ˆä»ç¬¬ä¸€ä¸ªåˆ°æœ€åä¸€ä¸ªå…ƒç´ ï¼‰; è¿”å›çš„æ•°ç»„çš„è¿è¡Œæ—¶ç±»å‹æ˜¯æŒ‡å®šæ•°ç»„çš„è¿è¡Œæ—¶ç±»å‹ã€‚ */ public Object[] toArray() &#123; //elementDataï¼šè¦å¤åˆ¶çš„æ•°ç»„ï¼›sizeï¼šè¦å¤åˆ¶çš„é•¿åº¦ return Arrays.copyOf(elementData, size); &#125; ä¸ªäººè§‰å¾—ä½¿ç”¨ Arrays.copyOf()æ–¹æ³•ä¸»è¦æ˜¯ä¸ºäº†ç»™åŸæœ‰æ•°ç»„æ‰©å®¹ï¼Œæµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š 1234567891011public class ArrayscopyOfTest &#123; public static void main(String[] args) &#123; int[] a = new int[3]; a[0] = 0; a[1] = 1; a[2] = 2; int[] b = Arrays.copyOf(a, 10); System.out.println(\"b.length\"+b.length); &#125;&#125; ç»“æœï¼š 110 3.3 ä¸¤è€…è”ç³»å’ŒåŒºåˆ«è”ç³»ï¼š çœ‹ä¸¤è€…æºä»£ç å¯ä»¥å‘ç° copyOf() å†…éƒ¨å®é™…è°ƒç”¨äº† System.arraycopy() æ–¹æ³• åŒºåˆ«ï¼š arraycopy() éœ€è¦ç›®æ ‡æ•°ç»„ï¼Œå°†åŸæ•°ç»„æ‹·è´åˆ°ä½ è‡ªå·±å®šä¹‰çš„æ•°ç»„é‡Œæˆ–è€…åŸæ•°ç»„ï¼Œè€Œä¸”å¯ä»¥é€‰æ‹©æ‹·è´çš„èµ·ç‚¹å’Œé•¿åº¦ä»¥åŠæ”¾å…¥æ–°æ•°ç»„ä¸­çš„ä½ç½® copyOf() æ˜¯ç³»ç»Ÿè‡ªåŠ¨åœ¨å†…éƒ¨æ–°å»ºä¸€ä¸ªæ•°ç»„ï¼Œå¹¶è¿”å›è¯¥æ•°ç»„ã€‚ å›› ensureCapacityæ–¹æ³•ArrayList æºç ä¸­æœ‰ä¸€ä¸ª ensureCapacity æ–¹æ³•ä¸çŸ¥é“å¤§å®¶æ³¨æ„åˆ°æ²¡æœ‰ï¼Œè¿™ä¸ªæ–¹æ³• ArrayList å†…éƒ¨æ²¡æœ‰è¢«è°ƒç”¨è¿‡ï¼Œæ‰€ä»¥å¾ˆæ˜¾ç„¶æ˜¯æä¾›ç»™ç”¨æˆ·è°ƒç”¨çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ³•æœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿ 1234567891011121314151617/**å¦‚æœ‰å¿…è¦ï¼Œå¢åŠ æ­¤ ArrayList å®ä¾‹çš„å®¹é‡ï¼Œä»¥ç¡®ä¿å®ƒè‡³å°‘å¯ä»¥å®¹çº³ç”±minimum capacityå‚æ•°æŒ‡å®šçš„å…ƒç´ æ•°ã€‚ * * @param minCapacity æ‰€éœ€çš„æœ€å°å®¹é‡ */public void ensureCapacity(int minCapacity) &#123; int minExpand = (elementData != DEFAULTCAPACITY_EMPTY_ELEMENTDATA) // any size if not default element table ? 0 // larger than default for default empty table. It's already // supposed to be at default size. : DEFAULT_CAPACITY; if (minCapacity &gt; minExpand) &#123; ensureExplicitCapacity(minCapacity); &#125;&#125; æœ€å¥½åœ¨ add å¤§é‡å…ƒç´ ä¹‹å‰ç”¨ ensureCapacity æ–¹æ³•ï¼Œä»¥å‡å°‘å¢é‡ä»æ–°åˆ†é…çš„æ¬¡æ•° æˆ‘ä»¬é€šè¿‡ä¸‹é¢çš„ä»£ç å®é™…æµ‹è¯•ä»¥ä¸‹è¿™ä¸ªæ–¹æ³•çš„æ•ˆæœï¼š 123456789101112131415161718192021public class EnsureCapacityTest &#123; public static void main(String[] args) &#123; ArrayList&lt;Object&gt; list = new ArrayList&lt;Object&gt;(); final int N = 10000000; long startTime = System.currentTimeMillis(); for (int i = 0; i &lt; N; i++) &#123; list.add(i); &#125; long endTime = System.currentTimeMillis(); System.out.println(\"ä½¿ç”¨ensureCapacityæ–¹æ³•å‰ï¼š\"+(endTime - startTime)); list = new ArrayList&lt;Object&gt;(); long startTime1 = System.currentTimeMillis(); list.ensureCapacity(N); for (int i = 0; i &lt; N; i++) &#123; list.add(i); &#125; long endTime1 = System.currentTimeMillis(); System.out.println(\"ä½¿ç”¨ensureCapacityæ–¹æ³•åï¼š\"+(endTime1 - startTime1)); &#125;&#125; è¿è¡Œç»“æœï¼š 12ä½¿ç”¨ensureCapacityæ–¹æ³•å‰ï¼š4637ä½¿ç”¨ensureCapacityæ–¹æ³•åï¼š241 é€šè¿‡è¿è¡Œç»“æœï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ˜æ˜¾çš„çœ‹å‡ºå‘ ArrayList æ·»åŠ å¤§é‡å…ƒç´ ä¹‹å‰æœ€å¥½å…ˆä½¿ç”¨ensureCapacity æ–¹æ³•ï¼Œä»¥å‡å°‘å¢é‡ä»æ–°åˆ†é…çš„æ¬¡æ•° æŸ¥çœ‹åŸæ–‡","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"},{"name":"arrayList","slug":"arrayList","permalink":"https://ydstudios.gitee.io/tags/arrayList/"}]},{"title":"è°ˆè°ˆJavaé›†åˆArrayList","slug":"è°ˆè°ˆJavaé›†åˆArrayList","date":"2018-11-30T23:17:57.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/e6d29090.html","link":"","permalink":"https://ydstudios.gitee.io/post/e6d29090.html","excerpt":"ArrayListç®€ä»‹ ArrayListæ ¸å¿ƒæºç  ArrayListæºç åˆ†æ System.arraycopy()å’ŒArrays.copyOf()æ–¹æ³• ä¸¤è€…è”ç³»ä¸åŒºåˆ« ArrayListæ ¸å¿ƒæ‰©å®¹æŠ€æœ¯ å†…éƒ¨ç±» ArrayListç»å…¸Demo ArrayListç®€ä»‹ ArrayList çš„åº•å±‚æ˜¯æ•°ç»„é˜Ÿåˆ—ï¼Œç›¸å½“äºåŠ¨æ€æ•°ç»„ã€‚ä¸ Java ä¸­çš„æ•°ç»„ç›¸æ¯”ï¼Œå®ƒçš„å®¹é‡èƒ½åŠ¨æ€å¢é•¿ã€‚åœ¨æ·»åŠ å¤§é‡å…ƒç´ å‰ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨ensureCapacityæ“ä½œæ¥å¢åŠ  ArrayList å®ä¾‹çš„å®¹é‡ã€‚è¿™å¯ä»¥å‡å°‘é€’å¢å¼å†åˆ†é…çš„æ•°é‡ã€‚","text":"ArrayListç®€ä»‹ ArrayListæ ¸å¿ƒæºç  ArrayListæºç åˆ†æ System.arraycopy()å’ŒArrays.copyOf()æ–¹æ³• ä¸¤è€…è”ç³»ä¸åŒºåˆ« ArrayListæ ¸å¿ƒæ‰©å®¹æŠ€æœ¯ å†…éƒ¨ç±» ArrayListç»å…¸Demo ArrayListç®€ä»‹ ArrayList çš„åº•å±‚æ˜¯æ•°ç»„é˜Ÿåˆ—ï¼Œç›¸å½“äºåŠ¨æ€æ•°ç»„ã€‚ä¸ Java ä¸­çš„æ•°ç»„ç›¸æ¯”ï¼Œå®ƒçš„å®¹é‡èƒ½åŠ¨æ€å¢é•¿ã€‚åœ¨æ·»åŠ å¤§é‡å…ƒç´ å‰ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨ensureCapacityæ“ä½œæ¥å¢åŠ  ArrayList å®ä¾‹çš„å®¹é‡ã€‚è¿™å¯ä»¥å‡å°‘é€’å¢å¼å†åˆ†é…çš„æ•°é‡ã€‚ å®ƒç»§æ‰¿äº AbstractListï¼Œå®ç°äº† List, RandomAccess, Cloneable, java.io.Serializable è¿™äº›æ¥å£ã€‚ åœ¨æˆ‘ä»¬å­¦æ•°æ®ç»“æ„çš„æ—¶å€™å°±çŸ¥é“äº†çº¿æ€§è¡¨çš„é¡ºåºå­˜å‚¨ï¼Œæ’å…¥åˆ é™¤å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦ä¸ºOï¼ˆnï¼‰,æ±‚è¡¨é•¿ä»¥åŠå¢åŠ å…ƒç´ ï¼Œå–ç¬¬ i å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦ä¸ºOï¼ˆ1ï¼‰ ArrayList ç»§æ‰¿äº†AbstractListï¼Œå®ç°äº†Listã€‚å®ƒæ˜¯ä¸€ä¸ªæ•°ç»„é˜Ÿåˆ—ï¼Œæä¾›äº†ç›¸å…³çš„æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹ã€éå†ç­‰åŠŸèƒ½ã€‚ ArrayList å®ç°äº†RandomAccess æ¥å£ï¼Œå³æä¾›äº†éšæœºè®¿é—®åŠŸèƒ½ã€‚RandomAccess æ˜¯ Java ä¸­ç”¨æ¥è¢« List å®ç°ï¼Œä¸º List æä¾›å¿«é€Ÿè®¿é—®åŠŸèƒ½çš„ã€‚åœ¨ ArrayList ä¸­ï¼Œæˆ‘ä»¬å³å¯ä»¥é€šè¿‡å…ƒç´ çš„åºå·å¿«é€Ÿè·å–å…ƒç´ å¯¹è±¡ï¼Œè¿™å°±æ˜¯å¿«é€Ÿéšæœºè®¿é—®ã€‚ ArrayList å®ç°äº†Cloneable æ¥å£ï¼Œå³è¦†ç›–äº†å‡½æ•° clone()ï¼Œèƒ½è¢«å…‹éš†ã€‚ ArrayList å®ç°java.io.Serializable æ¥å£ï¼Œè¿™æ„å‘³ç€ArrayListæ”¯æŒåºåˆ—åŒ–ï¼Œèƒ½é€šè¿‡åºåˆ—åŒ–å»ä¼ è¾“ã€‚ å’Œ Vector ä¸åŒï¼ŒArrayList ä¸­çš„æ“ä½œä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼æ‰€ä»¥ï¼Œå»ºè®®åœ¨å•çº¿ç¨‹ä¸­æ‰ä½¿ç”¨ ArrayListï¼Œè€Œåœ¨å¤šçº¿ç¨‹ä¸­å¯ä»¥é€‰æ‹© Vector æˆ–è€… CopyOnWriteArrayListã€‚ ArrayListæ ¸å¿ƒæºç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476477478479480481482483484485486487488489490491492493494495496497498package java.util;import java.util.function.Consumer;import java.util.function.Predicate;import java.util.function.UnaryOperator;public class ArrayList&lt;E&gt; extends AbstractList&lt;E&gt; implements List&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable&#123; private static final long serialVersionUID = 8683452581122892189L; /** * é»˜è®¤åˆå§‹å®¹é‡å¤§å° */ private static final int DEFAULT_CAPACITY = 10; /** * ç©ºæ•°ç»„ï¼ˆç”¨äºç©ºå®ä¾‹ï¼‰ã€‚ */ private static final Object[] EMPTY_ELEMENTDATA = &#123;&#125;; //ç”¨äºé»˜è®¤å¤§å°ç©ºå®ä¾‹çš„å…±äº«ç©ºæ•°ç»„å®ä¾‹ã€‚ //æˆ‘ä»¬æŠŠå®ƒä»EMPTY_ELEMENTDATAæ•°ç»„ä¸­åŒºåˆ†å‡ºæ¥ï¼Œä»¥çŸ¥é“åœ¨æ·»åŠ ç¬¬ä¸€ä¸ªå…ƒç´ æ—¶å®¹é‡éœ€è¦å¢åŠ å¤šå°‘ã€‚ private static final Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = &#123;&#125;; /** * ä¿å­˜ArrayListæ•°æ®çš„æ•°ç»„ */ transient Object[] elementData; // non-private to simplify nested class access /** * ArrayList æ‰€åŒ…å«çš„å…ƒç´ ä¸ªæ•° */ private int size; /** * å¸¦åˆå§‹å®¹é‡å‚æ•°çš„æ„é€ å‡½æ•°ã€‚ï¼ˆç”¨æˆ·è‡ªå·±æŒ‡å®šå®¹é‡ï¼‰ */ public ArrayList(int initialCapacity) &#123; if (initialCapacity &gt; 0) &#123; //åˆ›å»ºinitialCapacityå¤§å°çš„æ•°ç»„ this.elementData = new Object[initialCapacity]; &#125; else if (initialCapacity == 0) &#123; //åˆ›å»ºç©ºæ•°ç»„ this.elementData = EMPTY_ELEMENTDATA; &#125; else &#123; throw new IllegalArgumentException(\"Illegal Capacity: \"+ initialCapacity); &#125; &#125; /** *é»˜è®¤æ„é€ å‡½æ•°ï¼Œå…¶é»˜è®¤åˆå§‹å®¹é‡ä¸º10 */ public ArrayList() &#123; this.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA; &#125; /** * æ„é€ ä¸€ä¸ªåŒ…å«æŒ‡å®šé›†åˆçš„å…ƒç´ çš„åˆ—è¡¨ï¼ŒæŒ‰ç…§å®ƒä»¬ç”±é›†åˆçš„è¿­ä»£å™¨è¿”å›çš„é¡ºåºã€‚ */ public ArrayList(Collection&lt;? extends E&gt; c) &#123; // elementData = c.toArray(); //å¦‚æœæŒ‡å®šé›†åˆå…ƒç´ ä¸ªæ•°ä¸ä¸º0 if ((size = elementData.length) != 0) &#123; // c.toArray å¯èƒ½è¿”å›çš„ä¸æ˜¯Objectç±»å‹çš„æ•°ç»„æ‰€ä»¥åŠ ä¸Šä¸‹é¢çš„è¯­å¥ç”¨äºåˆ¤æ–­ï¼Œ //è¿™é‡Œç”¨åˆ°äº†åå°„é‡Œé¢çš„getClass()æ–¹æ³• if (elementData.getClass() != Object[].class) elementData = Arrays.copyOf(elementData, size, Object[].class); &#125; else &#123; // ç”¨ç©ºæ•°ç»„ä»£æ›¿ this.elementData = EMPTY_ELEMENTDATA; &#125; &#125; /** * ä¿®æ”¹è¿™ä¸ªArrayListå®ä¾‹çš„å®¹é‡æ˜¯åˆ—è¡¨çš„å½“å‰å¤§å°ã€‚ åº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨æ­¤æ“ä½œæ¥æœ€å°åŒ–ArrayListå®ä¾‹çš„å­˜å‚¨ã€‚ */ public void trimToSize() &#123; modCount++; if (size &lt; elementData.length) &#123; elementData = (size == 0) ? EMPTY_ELEMENTDATA : Arrays.copyOf(elementData, size); &#125; &#125;//ä¸‹é¢æ˜¯ArrayListçš„æ‰©å®¹æœºåˆ¶//ArrayListçš„æ‰©å®¹æœºåˆ¶æé«˜äº†æ€§èƒ½ï¼Œå¦‚æœæ¯æ¬¡åªæ‰©å……ä¸€ä¸ªï¼Œ//é‚£ä¹ˆé¢‘ç¹çš„æ’å…¥ä¼šå¯¼è‡´é¢‘ç¹çš„æ‹·è´ï¼Œé™ä½æ€§èƒ½ï¼Œè€ŒArrayListçš„æ‰©å®¹æœºåˆ¶é¿å…äº†è¿™ç§æƒ…å†µã€‚ /** * å¦‚æœ‰å¿…è¦ï¼Œå¢åŠ æ­¤ArrayListå®ä¾‹çš„å®¹é‡ï¼Œä»¥ç¡®ä¿å®ƒè‡³å°‘èƒ½å®¹çº³å…ƒç´ çš„æ•°é‡ * @param minCapacity æ‰€éœ€çš„æœ€å°å®¹é‡ */ public void ensureCapacity(int minCapacity) &#123; int minExpand = (elementData != DEFAULTCAPACITY_EMPTY_ELEMENTDATA) // any size if not default element table ? 0 // larger than default for default empty table. It's already // supposed to be at default size. : DEFAULT_CAPACITY; if (minCapacity &gt; minExpand) &#123; ensureExplicitCapacity(minCapacity); &#125; &#125; //å¾—åˆ°æœ€å°æ‰©å®¹é‡ private void ensureCapacityInternal(int minCapacity) &#123; if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123; // è·å–é»˜è®¤çš„å®¹é‡å’Œä¼ å…¥å‚æ•°çš„è¾ƒå¤§å€¼ minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity); &#125; ensureExplicitCapacity(minCapacity); &#125; //åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹ private void ensureExplicitCapacity(int minCapacity) &#123; modCount++; // overflow-conscious code if (minCapacity - elementData.length &gt; 0) //è°ƒç”¨growæ–¹æ³•è¿›è¡Œæ‰©å®¹ï¼Œè°ƒç”¨æ­¤æ–¹æ³•ä»£è¡¨å·²ç»å¼€å§‹æ‰©å®¹äº† grow(minCapacity); &#125; /** * è¦åˆ†é…çš„æœ€å¤§æ•°ç»„å¤§å° */ private static final int MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8; /** * ArrayListæ‰©å®¹çš„æ ¸å¿ƒæ–¹æ³•ã€‚ */ private void grow(int minCapacity) &#123; // oldCapacityä¸ºæ—§å®¹é‡ï¼ŒnewCapacityä¸ºæ–°å®¹é‡ int oldCapacity = elementData.length; //å°†oldCapacity å³ç§»ä¸€ä½ï¼Œå…¶æ•ˆæœç›¸å½“äºoldCapacity /2ï¼Œ //æˆ‘ä»¬çŸ¥é“ä½è¿ç®—çš„é€Ÿåº¦è¿œè¿œå¿«äºæ•´é™¤è¿ç®—ï¼Œæ•´å¥è¿ç®—å¼çš„ç»“æœå°±æ˜¯å°†æ–°å®¹é‡æ›´æ–°ä¸ºæ—§å®¹é‡çš„1.5å€ï¼Œ int newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1); //ç„¶åæ£€æŸ¥æ–°å®¹é‡æ˜¯å¦å¤§äºæœ€å°éœ€è¦å®¹é‡ï¼Œè‹¥è¿˜æ˜¯å°äºæœ€å°éœ€è¦å®¹é‡ï¼Œé‚£ä¹ˆå°±æŠŠæœ€å°éœ€è¦å®¹é‡å½“ä½œæ•°ç»„çš„æ–°å®¹é‡ï¼Œ if (newCapacity - minCapacity &lt; 0) newCapacity = minCapacity; //å†æ£€æŸ¥æ–°å®¹é‡æ˜¯å¦è¶…å‡ºäº†ArrayListæ‰€å®šä¹‰çš„æœ€å¤§å®¹é‡ï¼Œ //è‹¥è¶…å‡ºäº†ï¼Œåˆ™è°ƒç”¨hugeCapacity()æ¥æ¯”è¾ƒminCapacityå’Œ MAX_ARRAY_SIZEï¼Œ //å¦‚æœminCapacityå¤§äºæœ€å¤§å®¹é‡ï¼Œåˆ™æ–°å®¹é‡åˆ™ä¸ºArrayListå®šä¹‰çš„æœ€å¤§å®¹é‡ï¼Œå¦åˆ™ï¼Œæ–°å®¹é‡å¤§å°åˆ™ä¸º minCapacityã€‚ if (newCapacity - MAX_ARRAY_SIZE &gt; 0) newCapacity = hugeCapacity(minCapacity); // minCapacity is usually close to size, so this is a win: elementData = Arrays.copyOf(elementData, newCapacity); &#125; //æ¯”è¾ƒminCapacityå’Œ MAX_ARRAY_SIZE private static int hugeCapacity(int minCapacity) &#123; if (minCapacity &lt; 0) // overflow throw new OutOfMemoryError(); return (minCapacity &gt; MAX_ARRAY_SIZE) ? Integer.MAX_VALUE : MAX_ARRAY_SIZE; &#125; /** *è¿”å›æ­¤åˆ—è¡¨ä¸­çš„å…ƒç´ æ•°ã€‚ */ public int size() &#123; return size; &#125; /** * å¦‚æœæ­¤åˆ—è¡¨ä¸åŒ…å«å…ƒç´ ï¼Œåˆ™è¿”å› true ã€‚ */ public boolean isEmpty() &#123; //æ³¨æ„=å’Œ==çš„åŒºåˆ« return size == 0; &#125; /** * å¦‚æœæ­¤åˆ—è¡¨åŒ…å«æŒ‡å®šçš„å…ƒç´ ï¼Œåˆ™è¿”å›true ã€‚ */ public boolean contains(Object o) &#123; //indexOf()æ–¹æ³•ï¼šè¿”å›æ­¤åˆ—è¡¨ä¸­æŒ‡å®šå…ƒç´ çš„é¦–æ¬¡å‡ºç°çš„ç´¢å¼•ï¼Œå¦‚æœæ­¤åˆ—è¡¨ä¸åŒ…å«æ­¤å…ƒç´ ï¼Œåˆ™ä¸º-1 return indexOf(o) &gt;= 0; &#125; /** *è¿”å›æ­¤åˆ—è¡¨ä¸­æŒ‡å®šå…ƒç´ çš„é¦–æ¬¡å‡ºç°çš„ç´¢å¼•ï¼Œå¦‚æœæ­¤åˆ—è¡¨ä¸åŒ…å«æ­¤å…ƒç´ ï¼Œåˆ™ä¸º-1 */ public int indexOf(Object o) &#123; if (o == null) &#123; for (int i = 0; i &lt; size; i++) if (elementData[i]==null) return i; &#125; else &#123; for (int i = 0; i &lt; size; i++) //equals()æ–¹æ³•æ¯”è¾ƒ if (o.equals(elementData[i])) return i; &#125; return -1; &#125; /** * è¿”å›æ­¤åˆ—è¡¨ä¸­æŒ‡å®šå…ƒç´ çš„æœ€åä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ï¼Œå¦‚æœæ­¤åˆ—è¡¨ä¸åŒ…å«å…ƒç´ ï¼Œåˆ™è¿”å›-1ã€‚. */ public int lastIndexOf(Object o) &#123; if (o == null) &#123; for (int i = size-1; i &gt;= 0; i--) if (elementData[i]==null) return i; &#125; else &#123; for (int i = size-1; i &gt;= 0; i--) if (o.equals(elementData[i])) return i; &#125; return -1; &#125; /** * è¿”å›æ­¤ArrayListå®ä¾‹çš„æµ…æ‹·è´ã€‚ ï¼ˆå…ƒç´ æœ¬èº«ä¸è¢«å¤åˆ¶ã€‚ï¼‰ */ public Object clone() &#123; try &#123; ArrayList&lt;?&gt; v = (ArrayList&lt;?&gt;) super.clone(); //Arrays.copyOfåŠŸèƒ½æ˜¯å®ç°æ•°ç»„çš„å¤åˆ¶ï¼Œè¿”å›å¤åˆ¶åçš„æ•°ç»„ã€‚å‚æ•°æ˜¯è¢«å¤åˆ¶çš„æ•°ç»„å’Œå¤åˆ¶çš„é•¿åº¦ v.elementData = Arrays.copyOf(elementData, size); v.modCount = 0; return v; &#125; catch (CloneNotSupportedException e) &#123; // è¿™ä¸åº”è¯¥å‘ç”Ÿï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯å¯ä»¥å…‹éš†çš„ throw new InternalError(e); &#125; &#125; /** *ä»¥æ­£ç¡®çš„é¡ºåºï¼ˆä»ç¬¬ä¸€ä¸ªåˆ°æœ€åä¸€ä¸ªå…ƒç´ ï¼‰è¿”å›ä¸€ä¸ªåŒ…å«æ­¤åˆ—è¡¨ä¸­æ‰€æœ‰å…ƒç´ çš„æ•°ç»„ã€‚ *è¿”å›çš„æ•°ç»„å°†æ˜¯â€œå®‰å…¨çš„â€ï¼Œå› ä¸ºè¯¥åˆ—è¡¨ä¸ä¿ç•™å¯¹å®ƒçš„å¼•ç”¨ã€‚ ï¼ˆæ¢å¥è¯è¯´ï¼Œè¿™ä¸ªæ–¹æ³•å¿…é¡»åˆ†é…ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼‰ã€‚ *å› æ­¤ï¼Œè°ƒç”¨è€…å¯ä»¥è‡ªç”±åœ°ä¿®æ”¹è¿”å›çš„æ•°ç»„ã€‚ æ­¤æ–¹æ³•å……å½“åŸºäºé˜µåˆ—å’ŒåŸºäºé›†åˆçš„APIä¹‹é—´çš„æ¡¥æ¢ã€‚ */ public Object[] toArray() &#123; return Arrays.copyOf(elementData, size); &#125; /** * ä»¥æ­£ç¡®çš„é¡ºåºè¿”å›ä¸€ä¸ªåŒ…å«æ­¤åˆ—è¡¨ä¸­æ‰€æœ‰å…ƒç´ çš„æ•°ç»„ï¼ˆä»ç¬¬ä¸€ä¸ªåˆ°æœ€åä¸€ä¸ªå…ƒç´ ï¼‰; *è¿”å›çš„æ•°ç»„çš„è¿è¡Œæ—¶ç±»å‹æ˜¯æŒ‡å®šæ•°ç»„çš„è¿è¡Œæ—¶ç±»å‹ã€‚ å¦‚æœåˆ—è¡¨é€‚åˆæŒ‡å®šçš„æ•°ç»„ï¼Œåˆ™è¿”å›å…¶ä¸­ã€‚ *å¦åˆ™ï¼Œå°†ä¸ºæŒ‡å®šæ•°ç»„çš„è¿è¡Œæ—¶ç±»å‹å’Œæ­¤åˆ—è¡¨çš„å¤§å°åˆ†é…ä¸€ä¸ªæ–°æ•°ç»„ã€‚ *å¦‚æœåˆ—è¡¨é€‚ç”¨äºæŒ‡å®šçš„æ•°ç»„ï¼Œå…¶ä½™ç©ºé—´ï¼ˆå³æ•°ç»„çš„åˆ—è¡¨æ•°é‡å¤šäºæ­¤å…ƒç´ ï¼‰ï¼Œåˆ™ç´§è·Ÿåœ¨é›†åˆç»“æŸåçš„æ•°ç»„ä¸­çš„å…ƒç´ è®¾ç½®ä¸ºnull ã€‚ *ï¼ˆè¿™ä»…åœ¨è°ƒç”¨è€…çŸ¥é“åˆ—è¡¨ä¸åŒ…å«ä»»ä½•ç©ºå…ƒç´ çš„æƒ…å†µä¸‹æ‰èƒ½ç¡®å®šåˆ—è¡¨çš„é•¿åº¦ã€‚ï¼‰ */ @SuppressWarnings(\"unchecked\") public &lt;T&gt; T[] toArray(T[] a) &#123; if (a.length &lt; size) // æ–°å»ºä¸€ä¸ªè¿è¡Œæ—¶ç±»å‹çš„æ•°ç»„ï¼Œä½†æ˜¯ArrayListæ•°ç»„çš„å†…å®¹ return (T[]) Arrays.copyOf(elementData, size, a.getClass()); //è°ƒç”¨Systemæä¾›çš„arraycopy()æ–¹æ³•å®ç°æ•°ç»„ä¹‹é—´çš„å¤åˆ¶ System.arraycopy(elementData, 0, a, 0, size); if (a.length &gt; size) a[size] = null; return a; &#125; // Positional Access Operations @SuppressWarnings(\"unchecked\") E elementData(int index) &#123; return (E) elementData[index]; &#125; /** * è¿”å›æ­¤åˆ—è¡¨ä¸­æŒ‡å®šä½ç½®çš„å…ƒç´ ã€‚ */ public E get(int index) &#123; rangeCheck(index); return elementData(index); &#125; /** * ç”¨æŒ‡å®šçš„å…ƒç´ æ›¿æ¢æ­¤åˆ—è¡¨ä¸­æŒ‡å®šä½ç½®çš„å…ƒç´ ã€‚ */ public E set(int index, E element) &#123; //å¯¹indexè¿›è¡Œç•Œé™æ£€æŸ¥ rangeCheck(index); E oldValue = elementData(index); elementData[index] = element; //è¿”å›åŸæ¥åœ¨è¿™ä¸ªä½ç½®çš„å…ƒç´  return oldValue; &#125; /** * å°†æŒ‡å®šçš„å…ƒç´ è¿½åŠ åˆ°æ­¤åˆ—è¡¨çš„æœ«å°¾ã€‚ */ public boolean add(E e) &#123; ensureCapacityInternal(size + 1); // Increments modCount!! //è¿™é‡Œçœ‹åˆ°ArrayListæ·»åŠ å…ƒç´ çš„å®è´¨å°±ç›¸å½“äºä¸ºæ•°ç»„èµ‹å€¼ elementData[size++] = e; return true; &#125; /** * åœ¨æ­¤åˆ—è¡¨ä¸­çš„æŒ‡å®šä½ç½®æ’å…¥æŒ‡å®šçš„å…ƒç´ ã€‚ *å…ˆè°ƒç”¨ rangeCheckForAdd å¯¹indexè¿›è¡Œç•Œé™æ£€æŸ¥ï¼›ç„¶åè°ƒç”¨ ensureCapacityInternal æ–¹æ³•ä¿è¯capacityè¶³å¤Ÿå¤§ï¼› *å†å°†ä»indexå¼€å§‹ä¹‹åçš„æ‰€æœ‰æˆå‘˜åç§»ä¸€ä¸ªä½ç½®(æœ¬äººä¿®æ”¹ï¼Œç§»åŠ¨æˆå‘˜åŒ…æ‹¬indexæ‰€åœ¨å…ƒç´ )ï¼›å°†elementæ’å…¥indexä½ç½®ï¼›æœ€åsizeåŠ 1ã€‚ */ public void add(int index, E element) &#123; rangeCheckForAdd(index); ensureCapacityInternal(size + 1); // Increments modCount!! //arraycopy()è¿™ä¸ªå®ç°æ•°ç»„ä¹‹é—´å¤åˆ¶çš„æ–¹æ³•ä¸€å®šè¦çœ‹ä¸€ä¸‹ï¼Œä¸‹é¢å°±ç”¨åˆ°äº†arraycopy()æ–¹æ³•å®ç°æ•°ç»„è‡ªå·±å¤åˆ¶è‡ªå·± System.arraycopy(elementData, index, elementData, index + 1, size - index); elementData[index] = element; size++; &#125; /** * åˆ é™¤è¯¥åˆ—è¡¨ä¸­æŒ‡å®šä½ç½®çš„å…ƒç´ ã€‚ å°†ä»»ä½•åç»­å…ƒç´ ç§»åŠ¨åˆ°å·¦ä¾§ï¼ˆä»å…¶ç´¢å¼•ä¸­å‡å»ä¸€ä¸ªå…ƒç´ ï¼‰ã€‚ */ public E remove(int index) &#123; rangeCheck(index); modCount++; E oldValue = elementData(index); int numMoved = size - index - 1; if (numMoved &gt; 0) System.arraycopy(elementData, index+1, elementData, index, numMoved); elementData[--size] = null; // clear to let GC do its work //ä»åˆ—è¡¨ä¸­åˆ é™¤çš„å…ƒç´  return oldValue; &#125; /** * ä»åˆ—è¡¨ä¸­åˆ é™¤æŒ‡å®šå…ƒç´ çš„ç¬¬ä¸€ä¸ªå‡ºç°ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ã€‚ å¦‚æœåˆ—è¡¨ä¸åŒ…å«è¯¥å…ƒç´ ï¼Œåˆ™å®ƒä¸ä¼šæ›´æ”¹ã€‚ *è¿”å›trueï¼Œå¦‚æœæ­¤åˆ—è¡¨åŒ…å«æŒ‡å®šçš„å…ƒç´  */ public boolean remove(Object o) &#123; if (o == null) &#123; for (int index = 0; index &lt; size; index++) if (elementData[index] == null) &#123; fastRemove(index); return true; &#125; &#125; else &#123; for (int index = 0; index &lt; size; index++) if (o.equals(elementData[index])) &#123; fastRemove(index); return true; &#125; &#125; return false; &#125; /* * Private remove method that skips bounds checking and does not * return the value removed. */ private void fastRemove(int index) &#123; modCount++; int numMoved = size - index - 1; if (numMoved &gt; 0) System.arraycopy(elementData, index+1, elementData, index, numMoved); elementData[--size] = null; // clear to let GC do its work &#125; /** * ä»åˆ—è¡¨ä¸­åˆ é™¤æ‰€æœ‰å…ƒç´ ã€‚ */ public void clear() &#123; modCount++; // æŠŠæ•°ç»„ä¸­æ‰€æœ‰çš„å…ƒç´ çš„å€¼è®¾ä¸ºnull for (int i = 0; i &lt; size; i++) elementData[i] = null; size = 0; &#125; /** * æŒ‰æŒ‡å®šé›†åˆçš„Iteratorè¿”å›çš„é¡ºåºå°†æŒ‡å®šé›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ è¿½åŠ åˆ°æ­¤åˆ—è¡¨çš„æœ«å°¾ã€‚ */ public boolean addAll(Collection&lt;? extends E&gt; c) &#123; Object[] a = c.toArray(); int numNew = a.length; ensureCapacityInternal(size + numNew); // Increments modCount System.arraycopy(a, 0, elementData, size, numNew); size += numNew; return numNew != 0; &#125; /** * å°†æŒ‡å®šé›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ æ’å…¥åˆ°æ­¤åˆ—è¡¨ä¸­ï¼Œä»æŒ‡å®šçš„ä½ç½®å¼€å§‹ã€‚ */ public boolean addAll(int index, Collection&lt;? extends E&gt; c) &#123; rangeCheckForAdd(index); Object[] a = c.toArray(); int numNew = a.length; ensureCapacityInternal(size + numNew); // Increments modCount int numMoved = size - index; if (numMoved &gt; 0) System.arraycopy(elementData, index, elementData, index + numNew, numMoved); System.arraycopy(a, 0, elementData, index, numNew); size += numNew; return numNew != 0; &#125; /** * ä»æ­¤åˆ—è¡¨ä¸­åˆ é™¤æ‰€æœ‰ç´¢å¼•ä¸ºfromIndex ï¼ˆå«ï¼‰å’ŒtoIndexä¹‹é—´çš„å…ƒç´ ã€‚ *å°†ä»»ä½•åç»­å…ƒç´ ç§»åŠ¨åˆ°å·¦ä¾§ï¼ˆå‡å°‘å…¶ç´¢å¼•ï¼‰ã€‚ */ protected void removeRange(int fromIndex, int toIndex) &#123; modCount++; int numMoved = size - toIndex; System.arraycopy(elementData, toIndex, elementData, fromIndex, numMoved); // clear to let GC do its work int newSize = size - (toIndex-fromIndex); for (int i = newSize; i &lt; size; i++) &#123; elementData[i] = null; &#125; size = newSize; &#125; /** * æ£€æŸ¥ç»™å®šçš„ç´¢å¼•æ˜¯å¦åœ¨èŒƒå›´å†…ã€‚ */ private void rangeCheck(int index) &#123; if (index &gt;= size) throw new IndexOutOfBoundsException(outOfBoundsMsg(index)); &#125; /** * addå’ŒaddAllä½¿ç”¨çš„rangeCheckçš„ä¸€ä¸ªç‰ˆæœ¬ */ private void rangeCheckForAdd(int index) &#123; if (index &gt; size || index &lt; 0) throw new IndexOutOfBoundsException(outOfBoundsMsg(index)); &#125; /** * è¿”å›IndexOutOfBoundsExceptionç»†èŠ‚ä¿¡æ¯ */ private String outOfBoundsMsg(int index) &#123; return \"Index: \"+index+\", Size: \"+size; &#125; /** * ä»æ­¤åˆ—è¡¨ä¸­åˆ é™¤æŒ‡å®šé›†åˆä¸­åŒ…å«çš„æ‰€æœ‰å…ƒç´ ã€‚ */ public boolean removeAll(Collection&lt;?&gt; c) &#123; Objects.requireNonNull(c); //å¦‚æœæ­¤åˆ—è¡¨è¢«ä¿®æ”¹åˆ™è¿”å›true return batchRemove(c, false); &#125; /** * ä»…ä¿ç•™æ­¤åˆ—è¡¨ä¸­åŒ…å«åœ¨æŒ‡å®šé›†åˆä¸­çš„å…ƒç´ ã€‚ *æ¢å¥è¯è¯´ï¼Œä»æ­¤åˆ—è¡¨ä¸­åˆ é™¤å…¶ä¸­ä¸åŒ…å«åœ¨æŒ‡å®šé›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚ */ public boolean retainAll(Collection&lt;?&gt; c) &#123; Objects.requireNonNull(c); return batchRemove(c, true); &#125; /** * ä»åˆ—è¡¨ä¸­çš„æŒ‡å®šä½ç½®å¼€å§‹ï¼Œè¿”å›åˆ—è¡¨ä¸­çš„å…ƒç´ ï¼ˆæŒ‰æ­£ç¡®é¡ºåºï¼‰çš„åˆ—è¡¨è¿­ä»£å™¨ã€‚ *æŒ‡å®šçš„ç´¢å¼•è¡¨ç¤ºåˆå§‹è°ƒç”¨å°†è¿”å›çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºnext ã€‚ åˆå§‹è°ƒç”¨previouså°†è¿”å›æŒ‡å®šç´¢å¼•å‡1çš„å…ƒç´ ã€‚ *è¿”å›çš„åˆ—è¡¨è¿­ä»£å™¨æ˜¯fail-fast ã€‚ */ public ListIterator&lt;E&gt; listIterator(int index) &#123; if (index &lt; 0 || index &gt; size) throw new IndexOutOfBoundsException(\"Index: \"+index); return new ListItr(index); &#125; /** *è¿”å›åˆ—è¡¨ä¸­çš„åˆ—è¡¨è¿­ä»£å™¨ï¼ˆæŒ‰é€‚å½“çš„é¡ºåºï¼‰ã€‚ *è¿”å›çš„åˆ—è¡¨è¿­ä»£å™¨æ˜¯fail-fast ã€‚ */ public ListIterator&lt;E&gt; listIterator() &#123; return new ListItr(0); &#125; /** *ä»¥æ­£ç¡®çš„é¡ºåºè¿”å›è¯¥åˆ—è¡¨ä¸­çš„å…ƒç´ çš„è¿­ä»£å™¨ã€‚ *è¿”å›çš„è¿­ä»£å™¨æ˜¯fail-fast ã€‚ */ public Iterator&lt;E&gt; iterator() &#123; return new Itr(); &#125; ArrayListæºç åˆ†æSystem.arraycopy()å’ŒArrays.copyOf()æ–¹æ³• é€šè¿‡ä¸Šé¢æºç æˆ‘ä»¬å‘ç°è¿™ä¸¤ä¸ªå®ç°æ•°ç»„å¤åˆ¶çš„æ–¹æ³•è¢«å¹¿æ³›ä½¿ç”¨è€Œä¸”å¾ˆå¤šåœ°æ–¹éƒ½ç‰¹åˆ«å·§å¦™ã€‚æ¯”å¦‚ä¸‹é¢add(int index, E element)æ–¹æ³•å°±å¾ˆå·§å¦™çš„ç”¨åˆ°äº†arraycopy()æ–¹æ³•è®©æ•°ç»„è‡ªå·±å¤åˆ¶è‡ªå·±å®ç°è®©indexå¼€å§‹ä¹‹åçš„æ‰€æœ‰æˆå‘˜åç§»ä¸€ä¸ªä½ç½®: 123456789101112131415/** * åœ¨æ­¤åˆ—è¡¨ä¸­çš„æŒ‡å®šä½ç½®æ’å…¥æŒ‡å®šçš„å…ƒç´ ã€‚ *å…ˆè°ƒç”¨ rangeCheckForAdd å¯¹indexè¿›è¡Œç•Œé™æ£€æŸ¥ï¼›ç„¶åè°ƒç”¨ ensureCapacityInternal æ–¹æ³•ä¿è¯capacityè¶³å¤Ÿå¤§ï¼› *å†å°†ä»indexå¼€å§‹ä¹‹åçš„æ‰€æœ‰æˆå‘˜åç§»ä¸€ä¸ªä½ç½®ï¼›å°†elementæ’å…¥indexä½ç½®ï¼›æœ€åsizeåŠ 1ã€‚ */public void add(int index, E element) &#123; rangeCheckForAdd(index); ensureCapacityInternal(size + 1); // Increments modCount!! //arraycopy()æ–¹æ³•å®ç°æ•°ç»„è‡ªå·±å¤åˆ¶è‡ªå·± //elementData:æºæ•°ç»„;index:æºæ•°ç»„ä¸­çš„èµ·å§‹ä½ç½®;elementDataï¼šç›®æ ‡æ•°ç»„ï¼›index + 1ï¼šç›®æ ‡æ•°ç»„ä¸­çš„èµ·å§‹ä½ç½®ï¼› size - indexï¼šè¦å¤åˆ¶çš„æ•°ç»„å…ƒç´ çš„æ•°é‡ï¼› System.arraycopy(elementData, index, elementData, index + 1, size - index); elementData[index] = element; size++;&#125; åˆå¦‚toArray()æ–¹æ³•ä¸­ç”¨åˆ°äº†copyOf()æ–¹æ³• 12345678910/** *ä»¥æ­£ç¡®çš„é¡ºåºï¼ˆä»ç¬¬ä¸€ä¸ªåˆ°æœ€åä¸€ä¸ªå…ƒç´ ï¼‰è¿”å›ä¸€ä¸ªåŒ…å«æ­¤åˆ—è¡¨ä¸­æ‰€æœ‰å…ƒç´ çš„æ•°ç»„ã€‚ *è¿”å›çš„æ•°ç»„å°†æ˜¯â€œå®‰å…¨çš„â€ï¼Œå› ä¸ºè¯¥åˆ—è¡¨ä¸ä¿ç•™å¯¹å®ƒçš„å¼•ç”¨ã€‚ ï¼ˆæ¢å¥è¯è¯´ï¼Œè¿™ä¸ªæ–¹æ³•å¿…é¡»åˆ†é…ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼‰ã€‚ *å› æ­¤ï¼Œè°ƒç”¨è€…å¯ä»¥è‡ªç”±åœ°ä¿®æ”¹è¿”å›çš„æ•°ç»„ã€‚ æ­¤æ–¹æ³•å……å½“åŸºäºé˜µåˆ—å’ŒåŸºäºé›†åˆçš„APIä¹‹é—´çš„æ¡¥æ¢ã€‚ */public Object[] toArray() &#123;//elementDataï¼šè¦å¤åˆ¶çš„æ•°ç»„ï¼›sizeï¼šè¦å¤åˆ¶çš„é•¿åº¦ return Arrays.copyOf(elementData, size);&#125; ä¸¤è€…è”ç³»ä¸åŒºåˆ«è”ç³»ï¼šçœ‹ä¸¤è€…æºä»£ç å¯ä»¥å‘ç°copyOf()å†…éƒ¨è°ƒç”¨äº†System.arraycopy()æ–¹æ³•åŒºåˆ«ï¼š arraycopy()éœ€è¦ç›®æ ‡æ•°ç»„ï¼Œå°†åŸæ•°ç»„æ‹·è´åˆ°ä½ è‡ªå·±å®šä¹‰çš„æ•°ç»„é‡Œï¼Œè€Œä¸”å¯ä»¥é€‰æ‹©æ‹·è´çš„èµ·ç‚¹å’Œé•¿åº¦ä»¥åŠæ”¾å…¥æ–°æ•°ç»„ä¸­çš„ä½ç½® copyOf()æ˜¯ç³»ç»Ÿè‡ªåŠ¨åœ¨å†…éƒ¨æ–°å»ºä¸€ä¸ªæ•°ç»„ï¼Œå¹¶è¿”å›è¯¥æ•°ç»„ã€‚ArrayList æ ¸å¿ƒæ‰©å®¹æŠ€æœ¯1234567891011121314151617181920212223242526272829303132333435363738//ä¸‹é¢æ˜¯ArrayListçš„æ‰©å®¹æœºåˆ¶//ArrayListçš„æ‰©å®¹æœºåˆ¶æé«˜äº†æ€§èƒ½ï¼Œå¦‚æœæ¯æ¬¡åªæ‰©å……ä¸€ä¸ªï¼Œ//é‚£ä¹ˆé¢‘ç¹çš„æ’å…¥ä¼šå¯¼è‡´é¢‘ç¹çš„æ‹·è´ï¼Œé™ä½æ€§èƒ½ï¼Œè€ŒArrayListçš„æ‰©å®¹æœºåˆ¶é¿å…äº†è¿™ç§æƒ…å†µã€‚ /** * å¦‚æœ‰å¿…è¦ï¼Œå¢åŠ æ­¤ArrayListå®ä¾‹çš„å®¹é‡ï¼Œä»¥ç¡®ä¿å®ƒè‡³å°‘èƒ½å®¹çº³å…ƒç´ çš„æ•°é‡ * @param minCapacity æ‰€éœ€çš„æœ€å°å®¹é‡ */ public void ensureCapacity(int minCapacity) &#123; int minExpand = (elementData != DEFAULTCAPACITY_EMPTY_ELEMENTDATA) // any size if not default element table ? 0 // larger than default for default empty table. It's already // supposed to be at default size. : DEFAULT_CAPACITY; if (minCapacity &gt; minExpand) &#123; ensureExplicitCapacity(minCapacity); &#125; &#125; //å¾—åˆ°æœ€å°æ‰©å®¹é‡ private void ensureCapacityInternal(int minCapacity) &#123; if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123; // è·å–é»˜è®¤çš„å®¹é‡å’Œä¼ å…¥å‚æ•°çš„è¾ƒå¤§å€¼ minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity); &#125; ensureExplicitCapacity(minCapacity); &#125; //åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹,ä¸Šé¢ä¸¤ä¸ªæ–¹æ³•éƒ½è¦è°ƒç”¨ private void ensureExplicitCapacity(int minCapacity) &#123; modCount++; // å¦‚æœè¯´minCapacityä¹Ÿå°±æ˜¯æ‰€éœ€çš„æœ€å°å®¹é‡å¤§äºä¿å­˜ArrayListæ•°æ®çš„æ•°ç»„çš„é•¿åº¦çš„è¯ï¼Œå°±éœ€è¦è°ƒç”¨grow(minCapacity)æ–¹æ³•æ‰©å®¹ã€‚ //è¿™ä¸ªminCapacityåˆ°åº•ä¸ºå¤šå°‘å‘¢ï¼Ÿä¸¾ä¸ªä¾‹å­åœ¨æ·»åŠ å…ƒç´ (add)æ–¹æ³•ä¸­è¿™ä¸ªminCapacityçš„å¤§å°å°±ä¸ºç°åœ¨æ•°ç»„çš„é•¿åº¦åŠ 1 if (minCapacity - elementData.length &gt; 0) //è°ƒç”¨growæ–¹æ³•è¿›è¡Œæ‰©å®¹ï¼Œè°ƒç”¨æ­¤æ–¹æ³•ä»£è¡¨å·²ç»å¼€å§‹æ‰©å®¹äº† grow(minCapacity); &#125; 12345678910111213141516171819202122/** * ArrayListæ‰©å®¹çš„æ ¸å¿ƒæ–¹æ³•ã€‚ */private void grow(int minCapacity) &#123; //elementDataä¸ºä¿å­˜ArrayListæ•°æ®çš„æ•°ç»„ ///elementData.lengthæ±‚æ•°ç»„é•¿åº¦elementData.sizeæ˜¯æ±‚æ•°ç»„ä¸­çš„å…ƒç´ ä¸ªæ•° // oldCapacityä¸ºæ—§å®¹é‡ï¼ŒnewCapacityä¸ºæ–°å®¹é‡ int oldCapacity = elementData.length; //å°†oldCapacity å³ç§»ä¸€ä½ï¼Œå…¶æ•ˆæœç›¸å½“äºoldCapacity /2ï¼Œ //æˆ‘ä»¬çŸ¥é“ä½è¿ç®—çš„é€Ÿåº¦è¿œè¿œå¿«äºæ•´é™¤è¿ç®—ï¼Œæ•´å¥è¿ç®—å¼çš„ç»“æœå°±æ˜¯å°†æ–°å®¹é‡æ›´æ–°ä¸ºæ—§å®¹é‡çš„1.5å€ï¼Œ int newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1); //ç„¶åæ£€æŸ¥æ–°å®¹é‡æ˜¯å¦å¤§äºæœ€å°éœ€è¦å®¹é‡ï¼Œè‹¥è¿˜æ˜¯å°äºæœ€å°éœ€è¦å®¹é‡ï¼Œé‚£ä¹ˆå°±æŠŠæœ€å°éœ€è¦å®¹é‡å½“ä½œæ•°ç»„çš„æ–°å®¹é‡ï¼Œ if (newCapacity - minCapacity &lt; 0) newCapacity = minCapacity; //å†æ£€æŸ¥æ–°å®¹é‡æ˜¯å¦è¶…å‡ºäº†ArrayListæ‰€å®šä¹‰çš„æœ€å¤§å®¹é‡ï¼Œ //è‹¥è¶…å‡ºäº†ï¼Œåˆ™è°ƒç”¨hugeCapacity()æ¥æ¯”è¾ƒminCapacityå’Œ MAX_ARRAY_SIZEï¼Œ //å¦‚æœminCapacityå¤§äºæœ€å¤§å®¹é‡ï¼Œåˆ™æ–°å®¹é‡åˆ™ä¸ºArrayListå®šä¹‰çš„æœ€å¤§å®¹é‡ï¼Œå¦åˆ™ï¼Œæ–°å®¹é‡å¤§å°åˆ™ä¸º minCapacityã€‚ if (newCapacity - MAX_ARRAY_SIZE &gt; 0) newCapacity = hugeCapacity(minCapacity); // minCapacity is usually close to size, so this is a win: elementData = Arrays.copyOf(elementData, newCapacity);&#125; æ‰©å®¹æœºåˆ¶ä»£ç å·²ç»åšäº†è¯¦ç»†çš„è§£é‡Šã€‚å¦å¤–å€¼å¾—æ³¨æ„çš„æ˜¯å¤§å®¶å¾ˆå®¹æ˜“å¿½ç•¥çš„ä¸€ä¸ªè¿ç®—ç¬¦ï¼šç§»ä½è¿ç®—ç¬¦ ç®€ä»‹ï¼šç§»ä½è¿ç®—ç¬¦å°±æ˜¯åœ¨äºŒè¿›åˆ¶çš„åŸºç¡€ä¸Šå¯¹æ•°å­—è¿›è¡Œå¹³ç§»ã€‚æŒ‰ç…§å¹³ç§»çš„æ–¹å‘å’Œå¡«å……æ•°å­—çš„è§„åˆ™åˆ†ä¸ºä¸‰ç§:&lt;&lt;(å·¦ç§»)ã€&gt;&gt;(å¸¦ç¬¦å·å³ç§»)å’Œ&gt;&gt;&gt;(æ— ç¬¦å·å³ç§»)ã€‚ ä½œç”¨ï¼šå¯¹äºå¤§æ•°æ®çš„2è¿›åˆ¶è¿ç®—,ä½ç§»è¿ç®—ç¬¦æ¯”é‚£äº›æ™®é€šè¿ç®—ç¬¦çš„è¿ç®—è¦å¿«å¾ˆå¤š,å› ä¸ºç¨‹åºä»…ä»…ç§»åŠ¨ä¸€ä¸‹è€Œå·²,ä¸å»è®¡ç®—,è¿™æ ·æé«˜äº†æ•ˆç‡,èŠ‚çœäº†èµ„æº æ¯”å¦‚è¿™é‡Œï¼šint newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1);å³ç§»ä¸€ä½ç›¸å½“äºé™¤2ï¼Œå³ç§»nä½ç›¸å½“äºé™¤ä»¥ 2 çš„ n æ¬¡æ–¹ã€‚è¿™é‡Œ oldCapacity æ˜æ˜¾å³ç§»äº†1ä½æ‰€ä»¥ç›¸å½“äºoldCapacity /2ã€‚ å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼š java ä¸­çš„length å±æ€§æ˜¯é’ˆå¯¹æ•°ç»„è¯´çš„,æ¯”å¦‚è¯´ä½ å£°æ˜äº†ä¸€ä¸ªæ•°ç»„,æƒ³çŸ¥é“è¿™ä¸ªæ•°ç»„çš„é•¿åº¦åˆ™ç”¨åˆ°äº† length è¿™ä¸ªå±æ€§. java ä¸­çš„length()æ–¹æ³•æ˜¯é’ˆå¯¹å­— ç¬¦ä¸²Stringè¯´çš„,å¦‚æœæƒ³çœ‹è¿™ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦åˆ™ç”¨åˆ° length()è¿™ä¸ªæ–¹æ³•. .java ä¸­çš„size()æ–¹æ³•æ˜¯é’ˆå¯¹æ³›å‹é›†åˆè¯´çš„,å¦‚æœæƒ³çœ‹è¿™ä¸ªæ³›å‹æœ‰å¤šå°‘ä¸ªå…ƒç´ ,å°±è°ƒç”¨æ­¤æ–¹æ³•æ¥æŸ¥çœ‹! å†…éƒ¨ç±»123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778 (1)private class Itr implements Iterator&lt;E&gt; (2)private class ListItr extends Itr implements ListIterator&lt;E&gt; (3)private class SubList extends AbstractList&lt;E&gt; implements RandomAccess (4)static final class ArrayListSpliterator&lt;E&gt; implements Spliterator&lt;E&gt; ``` ArrayListæœ‰å››ä¸ªå†…éƒ¨ç±»ï¼Œå…¶ä¸­çš„**Itræ˜¯å®ç°äº†Iteratoræ¥å£**ï¼ŒåŒæ—¶é‡å†™äº†é‡Œé¢çš„**hasNext()**ï¼Œ**next()**ï¼Œ**remove()**ç­‰æ–¹æ³•ï¼›å…¶ä¸­çš„**ListItr**ç»§æ‰¿**Itr**ï¼Œå®ç°äº†**ListIteratoræ¥å£**ï¼ŒåŒæ—¶é‡å†™äº†**hasPrevious()**ï¼Œ**nextIndex()**ï¼Œ**previousIndex()**ï¼Œ**previous()**ï¼Œ**set(E e)**ï¼Œ**add(E e)**ç­‰æ–¹æ³•ï¼Œæ‰€ä»¥è¿™ä¹Ÿå¯ä»¥çœ‹å‡ºäº†**Iteratorå’ŒListIteratorçš„åŒºåˆ«:**ListIteratoråœ¨Iteratorçš„åŸºç¡€ä¸Šå¢åŠ äº†æ·»åŠ å¯¹è±¡ï¼Œä¿®æ”¹å¯¹è±¡ï¼Œé€†å‘éå†ç­‰æ–¹æ³•ï¼Œè¿™äº›æ˜¯Iteratorä¸èƒ½å®ç°çš„ã€‚### ArrayListç»å…¸Demo```javapackage list;import java.util.ArrayList;import java.util.Iterator;public class ArrayListDemo &#123; public static void main(String[] srgs)&#123; ArrayList&lt;Integer&gt; arrayList = new ArrayList&lt;Integer&gt;(); System.out.printf(\"Before add:arrayList.size() = %d\\n\",arrayList.size()); arrayList.add(1); arrayList.add(3); arrayList.add(5); arrayList.add(7); arrayList.add(9); System.out.printf(\"After add:arrayList.size() = %d\\n\",arrayList.size()); System.out.println(\"Printing elements of arrayList\"); // ä¸‰ç§éå†æ–¹å¼æ‰“å°å…ƒç´  // ç¬¬ä¸€ç§ï¼šé€šè¿‡è¿­ä»£å™¨éå† System.out.print(\"é€šè¿‡è¿­ä»£å™¨éå†:\"); Iterator&lt;Integer&gt; it = arrayList.iterator(); while(it.hasNext())&#123; System.out.print(it.next() + \" \"); &#125; System.out.println(); // ç¬¬äºŒç§ï¼šé€šè¿‡ç´¢å¼•å€¼éå† System.out.print(\"é€šè¿‡ç´¢å¼•å€¼éå†:\"); for(int i = 0; i &lt; arrayList.size(); i++)&#123; System.out.print(arrayList.get(i) + \" \"); &#125; System.out.println(); // ç¬¬ä¸‰ç§ï¼šforå¾ªç¯éå† System.out.print(\"forå¾ªç¯éå†:\"); for(Integer number : arrayList)&#123; System.out.print(number + \" \"); &#125; // toArrayç”¨æ³• // ç¬¬ä¸€ç§æ–¹å¼(æœ€å¸¸ç”¨) Integer[] integer = arrayList.toArray(new Integer[0]); // ç¬¬äºŒç§æ–¹å¼(å®¹æ˜“ç†è§£) Integer[] integer1 = new Integer[arrayList.size()]; arrayList.toArray(integer1); // æŠ›å‡ºå¼‚å¸¸ï¼Œjavaä¸æ”¯æŒå‘ä¸‹è½¬å‹ //Integer[] integer2 = new Integer[arrayList.size()]; //integer2 = arrayList.toArray(); System.out.println(); // åœ¨æŒ‡å®šä½ç½®æ·»åŠ å…ƒç´  arrayList.add(2,2); // åˆ é™¤æŒ‡å®šä½ç½®ä¸Šçš„å…ƒç´  arrayList.remove(2); // åˆ é™¤æŒ‡å®šå…ƒç´  arrayList.remove((Object)3); // åˆ¤æ–­arrayListæ˜¯å¦åŒ…å«5 System.out.println(\"ArrayList contains 5 is: \" + arrayList.contains(5)); // æ¸…ç©ºArrayList arrayList.clear(); // åˆ¤æ–­ArrayListæ˜¯å¦ä¸ºç©º System.out.println(\"ArrayList is empty: \" + arrayList.isEmpty()); &#125;&#125; æŸ¥çœ‹åŸæ–‡","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"},{"name":"arrayList","slug":"arrayList","permalink":"https://ydstudios.gitee.io/tags/arrayList/"}]},{"title":"ä½¿ç”¨Nginxåšåå‘ä»£ç†,è®¾ç½®è¯·æ±‚è¿”å›æ—¶å¸¦ä¸Šè¢«ä»£ç†æœºå™¨çš„ä¿¡æ¯","slug":"ä½¿ç”¨Nginxåšåå‘ä»£ç†-è®¾ç½®è¯·æ±‚è¿”å›æ—¶å¸¦ä¸Šè¢«ä»£ç†æœºå™¨çš„ä¿¡æ¯","date":"2018-11-08T23:16:02.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/8f4c3efa.html","link":"","permalink":"https://ydstudios.gitee.io/post/8f4c3efa.html","excerpt":"ç°åœ¨çš„å¤§å®¶ç»å¸¸ä½¿ç”¨Nginxåšä»£ç†ï¼Œä¾‹å¦‚ç”¨Nginxå»ä»£ç†Nodeã€‚å¦‚æœä»£ç†çš„Nodeè¿‡å¤šï¼ŒNodeä¸€æ—¦å‡ºç°é—®é¢˜æˆ‘ä»¬æ€ä¹ˆçŸ¥é“åˆ°åº•æ˜¯å“ªä¸ªå‡ºäº†é—®é¢˜å‘¢ï¼Ÿäºæ˜¯å°±æœ‰äº†ä»Šå¤©çš„æ–‡ç« ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®è¯·æ±‚è¿”å›æ—¶å¸¦ä¸Šè¢«ä»£ç†æœºå™¨çš„ä¸€äº›ä¿¡æ¯ã€‚","text":"ç°åœ¨çš„å¤§å®¶ç»å¸¸ä½¿ç”¨Nginxåšä»£ç†ï¼Œä¾‹å¦‚ç”¨Nginxå»ä»£ç†Nodeã€‚å¦‚æœä»£ç†çš„Nodeè¿‡å¤šï¼ŒNodeä¸€æ—¦å‡ºç°é—®é¢˜æˆ‘ä»¬æ€ä¹ˆçŸ¥é“åˆ°åº•æ˜¯å“ªä¸ªå‡ºäº†é—®é¢˜å‘¢ï¼Ÿäºæ˜¯å°±æœ‰äº†ä»Šå¤©çš„æ–‡ç« ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®è¯·æ±‚è¿”å›æ—¶å¸¦ä¸Šè¢«ä»£ç†æœºå™¨çš„ä¸€äº›ä¿¡æ¯ã€‚ Nginxçš„é…ç½®123456789101112131415161718192021222324upstream usa &#123; server 127.0.0.1:3001; &#125;server &#123; listen 80 ; server_name xxx.com ; error_log /var/log/nginx/tianxingusa_error.log error; access_log /var/log/nginx/tianxingusa_accss.log main; location / &#123; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header Host $http_host; proxy_set_header X-Nginx-Proxy true; add_header Proxy-Node $upstream_addr; add_header Proxy-Status $upstream_status; proxy_http_version 1.1; proxy_pass http://usa; &#125; #çœç•¥éƒ¨åˆ†ä¿¡æ¯&#125; ä¸Šé¢é…ç½®ä¸­12add_header Proxy-Node $upstream_addr;add_header Proxy-Status $upstream_status; è®¾ç½®äº†Proxy-Nodeå’ŒProxy-Statusä¸¤ä¸ªheaderï¼ŒProxy-Nodeæ˜¾ç¤ºçš„æ˜¯è¢«ä»£ç†çš„èŠ‚ç‚¹ï¼ŒProxy-Statusæ˜¾ç¤ºçš„æ˜¯è¢«ä»£ç†èŠ‚ç‚¹çš„çŠ¶æ€ï¼Œé…ç½®å¥½ä¹‹åé‡è½½Nginxçš„é…ç½®æ–‡ä»¶ã€‚æˆ‘ä»¬å°±å¯ä»¥åœ¨ Response Headers ä¸­çœ‹åˆ°ç›¸å…³çš„ä¿¡æ¯ï¼š12345678910111213HTTP/1.1 200 OKServer: nginxDate: Fri, 09 Nov 2018 03:07:55 GMTContent-Type: text/html; charset=UTF-8Content-Length: 1227Connection: keep-aliveX-Powered-By: ExpressAccept-Ranges: bytesCache-Control: public, max-age=0Last-Modified: Fri, 26 Oct 2018 10:11:49 GMTETag: W/\"4cb-166afdbcd67\"Proxy-Node: 127.0.0.1:3001Proxy-Status: 200","categories":[],"tags":[{"name":"nginx","slug":"nginx","permalink":"https://ydstudios.gitee.io/tags/nginx/"},{"name":"proxy","slug":"proxy","permalink":"https://ydstudios.gitee.io/tags/proxy/"}]},{"title":"Spring Boot 1.x ä¸­æ•´åˆSharding-JDBCå®ç°è¯»å†™åˆ†ç¦»","slug":"Spring-Boot-1-x-ä¸­æ•´åˆSharding-JDBCå®ç°è¯»å†™åˆ†ç¦»","date":"2018-10-06T23:14:30.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/6d3d362b.html","link":"","permalink":"https://ydstudios.gitee.io/post/6d3d362b.html","excerpt":"å›½åº†æœŸé—´ç ”ç©¶äº†æ•°æ®åº“ä¸­é—´ä»¶ä¾‹å¦‚Mycatå’ŒSharding JDBCï¼ŒSharding-jdbcå’ŒMycatä½¿ç”¨ä¸åŒçš„ç†å¿µï¼ŒSharding-jdbcç›®å‰æ˜¯åŸºäºJdbcé©±åŠ¨ï¼Œæ— éœ€é¢å¤–çš„proxyï¼Œå› æ­¤ä¹Ÿæ— éœ€å…³æ³¨proxyæœ¬èº«çš„é«˜å¯ç”¨ã€‚Mycat æ˜¯åŸºäº Proxyï¼Œå®ƒå¤å†™äº† MySQL åè®®ï¼Œå°† Mycat Server ä¼ªè£…æˆä¸€ä¸ª MySQL æ•°æ®åº“ï¼Œè€Œ Sharding-JDBC æ˜¯åŸºäº JDBC æ¥å£çš„æ‰©å±•ï¼Œæ˜¯ä»¥jaråŒ…çš„å½¢å¼æä¾›è½»é‡çº§æœåŠ¡çš„ã€‚","text":"å›½åº†æœŸé—´ç ”ç©¶äº†æ•°æ®åº“ä¸­é—´ä»¶ä¾‹å¦‚Mycatå’ŒSharding JDBCï¼ŒSharding-jdbcå’ŒMycatä½¿ç”¨ä¸åŒçš„ç†å¿µï¼ŒSharding-jdbcç›®å‰æ˜¯åŸºäºJdbcé©±åŠ¨ï¼Œæ— éœ€é¢å¤–çš„proxyï¼Œå› æ­¤ä¹Ÿæ— éœ€å…³æ³¨proxyæœ¬èº«çš„é«˜å¯ç”¨ã€‚Mycat æ˜¯åŸºäº Proxyï¼Œå®ƒå¤å†™äº† MySQL åè®®ï¼Œå°† Mycat Server ä¼ªè£…æˆä¸€ä¸ª MySQL æ•°æ®åº“ï¼Œè€Œ Sharding-JDBC æ˜¯åŸºäº JDBC æ¥å£çš„æ‰©å±•ï¼Œæ˜¯ä»¥jaråŒ…çš„å½¢å¼æä¾›è½»é‡çº§æœåŠ¡çš„ã€‚ å…ˆä»‹ç»ä¸€ä¸‹æ•´åˆè¿‡ç¨‹ä¸­ç”¨åˆ°çš„ä¸»è¦è½¯ä»¶çš„ç‰ˆæœ¬ï¼š 12Spring Boot: 1.5.8.RELEASESharding-JDBC: 2.0.3 æ³¨æ„ï¼š å®ç°è¯»å†™åˆ†ç¦»æˆ‘ä»¬è‡ªå·±è¦å…ˆé…ç½®å¥½MySQLçš„ä¸»ä»å¤åˆ¶ï¼Œæˆ‘è‡ªå·±å·²ç»é…ç½®å¥½äº†ä¸€ä¸»ä¸¤ä»ã€‚é…ç½®çš„æ­¥éª¤å¯ä»¥å‚è€ƒã€å®ç°MySQLä¸»ä»å¤åˆ¶ã€‘ pom.xml ä¾èµ–123456789101112131415161718192021222324252627282930313233&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;io.shardingjdbc&lt;/groupId&gt; &lt;artifactId&gt;sharding-jdbc-core-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;2.0.3&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid&lt;/artifactId&gt; &lt;version&gt;1.1.2&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;1.3.2&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt; applicationé…ç½®æ–‡ä»¶1234567891011121314151617181920212223242526272829303132333435363738server.port=8080sharding.jdbc.datasource.names=ds_master,ds_slave_1,ds_slave_2# ä¸»æ•°æ®æºsharding.jdbc.datasource.ds_master.type=com.alibaba.druid.pool.DruidDataSourcesharding.jdbc.datasource.ds_master.driver-class-name=com.mysql.jdbc.Driversharding.jdbc.datasource.ds_master.url=jdbc:mysql://localhost:3306/db1?characterEncoding=utf-8sharding.jdbc.datasource.ds_master.username=rootsharding.jdbc.datasource.ds_master.password=123456sharding.jdbc.datasource.ds_master.maxPoolSize=20# ä»æ•°æ®æº ds_slave_1sharding.jdbc.datasource.ds_slave_1.type=com.alibaba.druid.pool.DruidDataSourcesharding.jdbc.datasource.ds_slave_1.driver-class-name=com.mysql.jdbc.Driversharding.jdbc.datasource.ds_slave_1.url=jdbc:mysql://localhost:3307/db1?characterEncoding=utf-8sharding.jdbc.datasource.ds_slave_1.username=rootsharding.jdbc.datasource.ds_slave_1.password=123456sharding.jdbc.datasource.ds_slave_1.maxPoolSize=20# ä»æ•°æ®æº ds_slave_2sharding.jdbc.datasource.ds_slave_2.type=com.alibaba.druid.pool.DruidDataSourcesharding.jdbc.datasource.ds_slave_2.driver-class-name=com.mysql.jdbc.Driversharding.jdbc.datasource.ds_slave_2.url=jdbc:mysql://localhost:3308/db1?characterEncoding=utf-8sharding.jdbc.datasource.ds_slave_2.username=rootsharding.jdbc.datasource.ds_slave_2.password=123456sharding.jdbc.datasource.ds_slave_2.maxPoolSize=20# è¯»å†™åˆ†ç¦»é…ç½®sharding.jdbc.config.masterslave.load-balance-algorithm-type=round_robinsharding.jdbc.config.masterslave.name=dataSourcesharding.jdbc.config.masterslave.master-data-source-name=ds_mastersharding.jdbc.config.masterslave.slave-data-source-names=ds_slave_1,ds_slave_2mybatis.config-location=classpath:mybatis-config.xmlmybatis.mapper-locations=classpath:mapper/*.xmlmybatis.typeAliasesPackage=net.ydstuio.shardingjdbc.repository sharding.jdbc.config.masterslave.load-balance-algorithm-typeæŸ¥è¯¢æ—¶çš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œç›®å‰æœ‰2ç§ç®—æ³•ï¼Œround_robinï¼ˆè½®è¯¢ï¼‰å’Œrandomï¼ˆéšæœºï¼‰ã€‚ ç®—æ³•æ¥å£æ˜¯ï¼šio.shardingjdbc.core.api.algorithm.masterslave.MasterSlaveLoadBalanceAlgorithmã€‚ å®ç°ç±»æœ‰RandomMasterSlaveLoadBalanceAlgorithmå’ŒRoundRobinMasterSlaveLoadBalanceAlgorithmã€‚ sharding.jdbc.config.masterslave.master-data-source-name ä¸»æ•°æ®æºåç§°ã€‚ sharding.jdbc.config.masterslave.slave-data-source-names ä»æ•°æ®æºåç§°ï¼Œå¤šä¸ªç”¨é€—å·éš”å¼€ã€‚ åˆ°æ­¤ï¼ŒSharing-Jdbcçš„è¯»å†™åˆ†ç¦»å°±å·²ç»å°±é…ç½®å¥½äº†ï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯å¾ˆç®€å•ã€‚å¦‚æœå¯¹æ•°æ®çš„åŠæ—¶æ€§è¦æ±‚å¾ˆé«˜ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ä»£ç ï¼Œä½¿å¾—è¯»å–ä¹Ÿè½åˆ°ä¸»åº“ä¸Šã€‚ 12// å¼ºåˆ¶è·¯ç”±ä¸»åº“HintManager.getInstance().setMasterRouteOnly();","categories":[],"tags":[{"name":"spring boot","slug":"spring-boot","permalink":"https://ydstudios.gitee.io/tags/spring-boot/"},{"name":"sharding-jdbc","slug":"sharding-jdbc","permalink":"https://ydstudios.gitee.io/tags/sharding-jdbc/"}]},{"title":"Spring Boot 1.5.8æ•´åˆDubbo","slug":"Spring-Boot-1-5-8æ•´åˆDubbo","date":"2018-10-06T23:06:57.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/53410e91.html","link":"","permalink":"https://ydstudios.gitee.io/post/53410e91.html","excerpt":"åºŸè¯ä¸å¤šè¯´ï¼Œä»Šå¤©è¯´è¯´Spring Bootå’ŒDubboçš„æ•´åˆ,æ³¨å†ŒæœåŠ¡ä¸­å¿ƒç”¨çš„æ˜¯Zookeeperï¼Œè‡³äºDubboã€Zookeeperä¸ºä½•ç‰©æˆ‘åœ¨æ­¤ä¸å†å¤šè¨€ï¼Œä¸çŸ¥é“æ˜¯ä»€ä¹ˆè‡ªå·±å»ç™¾åº¦ï¼Œæœ¬æ–‡é€‚ç”¨äºå¯¹å¾®æœåŠ¡æˆ–è€…RPCäº†è§£çš„äººå‡†å¤‡çš„ï¼","text":"åºŸè¯ä¸å¤šè¯´ï¼Œä»Šå¤©è¯´è¯´Spring Bootå’ŒDubboçš„æ•´åˆ,æ³¨å†ŒæœåŠ¡ä¸­å¿ƒç”¨çš„æ˜¯Zookeeperï¼Œè‡³äºDubboã€Zookeeperä¸ºä½•ç‰©æˆ‘åœ¨æ­¤ä¸å†å¤šè¨€ï¼Œä¸çŸ¥é“æ˜¯ä»€ä¹ˆè‡ªå·±å»ç™¾åº¦ï¼Œæœ¬æ–‡é€‚ç”¨äºå¯¹å¾®æœåŠ¡æˆ–è€…RPCäº†è§£çš„äººå‡†å¤‡çš„ï¼ å…ˆä»‹ç»ä¸€ä¸‹æ•´åˆè¿‡ç¨‹ä¸­ç”¨åˆ°çš„ä¸»è¦è½¯ä»¶çš„ç‰ˆæœ¬ï¼š 1234Spring Boot: 1.5.8.RELEASEDubbo: dubbo-spring-boot-starter 0.1.1Zookeeper: 3.4.10dubbo-adminï¼š2.5.4 å…¶ä¸­dubbo-adminä½¿ç”¨çš„æ˜¯è€ç‰ˆæœ¬çš„ï¼Œæ–°ç‰ˆæœ¬çš„å¤§å®¶å¯ä»¥åˆ°githubä¸Šå»æœç´¢ï¼Œè¿™é‡Œç»™å‡ºè¿™ä¸ªç‰ˆæœ¬çš„ä¸‹è½½åœ°å€ï¼Œæˆ‘ä¸ä¿è¯ä»»ä½•æ—¶å€™éƒ½å¯ä»¥ä½¿ç”¨dubbo-admin-2.5.4Dubboä½¿ç”¨çš„æ˜¯alibabaå®˜æ–¹æä¾›çš„starter ï¼š 12345&lt;dependency&gt; &lt;groupId&gt;com.alibaba.boot&lt;/groupId&gt; &lt;artifactId&gt;dubbo-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;0.1.1&lt;/version&gt;&lt;/dependency&gt; å¦‚æœæ‚¨çš„å·¥ç¨‹é‡åˆ°äº†ä¾èµ–é—®é¢˜, è¯·å°è¯•æ·»åŠ å¦‚ä¸‹ Maven å‚è€ƒåˆ°å·¥ç¨‹çš„ pom.xml æ–‡ä»¶ä¸­ï¼š 123456789101112&lt;repositories&gt; &lt;repository&gt; &lt;id&gt;sonatype-nexus-snapshots&lt;/id&gt; &lt;url&gt;https://oss.sonatype.org/content/repositories/snapshots&lt;/url&gt; &lt;releases&gt; &lt;enabled&gt;false&lt;/enabled&gt; &lt;/releases&gt; &lt;snapshots&gt; &lt;enabled&gt;true&lt;/enabled&gt; &lt;/snapshots&gt; &lt;/repository&gt;&lt;/repositories&gt; ä»ç°åœ¨å¼€å§‹, dubbo-spring-boot-project å°†åœ¨æ¯ä¸ªå‘å¸ƒä¸­å‘è¡Œä¸¤ä¸ªç‰ˆæœ¬ : 0.2.x æ˜¯æ”¯æŒ Spring Boot 2.x çš„ä¸»è¦ç‰ˆæœ¬ï¼ˆæ¨èï¼Œé•¿æœŸç»´æŠ¤ï¼‰ 0.1.x æ˜¯æ”¯æŒ Spring Boot 1.x çš„ç»´æŠ¤ç‰ˆæœ¬ï¼ˆå…¼å®¹ï¼ŒçŸ­æœŸç»´æŠ¤ï¼‰123ç‰ˆæœ¬ Java Spring Boot Dubbo0.2.0 1.8+ 2.0.x 2.6.2+0.1.1 1.7+ 1.5.x 2.6.2+ ä»¥ä¸Šç‰µæ¶‰åˆ°éœ€è¦å®‰è£…çš„è½¯ä»¶ï¼Œéœ€è¦å¤§å®¶è‡ªè¡Œå‡†å¤‡ï¼Œæœ¬æ–‡çš„é‡ç‚¹ä¸åœ¨äºæ­¤ï¼å‹æƒ…æç¤º,ä½¿ç”¨ä¸Šé¢ç‰ˆæœ¬çš„dubbo-adminæ˜¯ä¸ªwaråŒ…å¯ä»¥ä¹‹å‰éƒ¨ç½²åœ¨Tomcatä¸­ï¼Œæ³¨æ„å…¶ä¸­é…ç½®æ–‡ä»¶ä¸­çš„Zookeeperçš„åœ°å€ï¼Œè¯·ä¿®æ”¹æˆè‡ªå·±å¯ç”¨çš„Zookeeperåœ°å€ï¼ æˆ‘ä¹‹å‰å†™è¿‡ä¸€ä¸ªåŸºäºSpring Bootå’ŒSpring Cloudçš„BTæœç´¢é¡¹ç›®ï¼Œæˆ‘ä¸»è¦æ˜¯æƒ³ç”¨è¿™ä¸ªé¡¹ç›®ç»ƒæ‰‹Spring Cloudï¼Œå…¶ä¸­ç”¨äº†Zuulã€Feginã€Ribbonã€Spring Configã€Hystrixã€Eurekaç­‰ç»„ä»¶ã€‚ä¸‹é¢å¼€å§‹æ­£å¼çš„ç¼–ç ï¼ŒSpring Bootå’ŒDubboçš„æ•´åˆã€‚å…¶ä¸­é—®é¢˜æœ‰å¾ˆå¤šï¼Œæµªè´¹äº†æˆ‘å›½åº†å‡æœŸä¸­çš„ä¸€å¤©ï¼Œå…¶å®æœ€åå‘ç°é—®é¢˜è§£å†³å¾ˆç®€å•ã€‚ ####ç”±æœåŠ¡æä¾›æ–¹ä¸ºæœåŠ¡æ¶ˆè´¹æ–¹æš´éœ²æ¥å£ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253package net.ydstudio.dubbo.search.api.service;import net.ydstudio.dubbo.search.api.document.BtSearchDocument;import net.ydstudio.dubbo.search.api.model.EsSearchHotResult;import java.io.IOException;/** * Created by Sam on 18/7/7. */public interface BtSearchService &#123; /** * åˆ›å»ºç´¢å¼• * @return * @throws IOException */ Boolean createIndex() throws IOException; /** * é€šè¿‡wordæŸ¥è¯¢ æ–‡æ¡£ * @param word * @return * @throws IOException */ BtSearchDocument findOne(String word) throws IOException; /** * æ ¹æ®idåˆ é™¤æ–‡æ¡£ * @param word * @throws IOException * @return */ Boolean delete(String word) throws IOException; /** * ä¿å­˜ document * @param word * @throws IOException * @return true or false */ Boolean save(String word) throws IOException; /** * åˆ é™¤ç´¢å¼• * @return * @throws IOException */ Boolean deleteIndex() throws IOException; /** * çƒ­æœè¯ * @return */ EsSearchHotResult hotWordList();&#125; ####æœåŠ¡æä¾›æ–¹ pom.xmlä¸­çš„ä¾èµ–123456789101112131415161718192021222324 &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;net.ydstudio.dubbo&lt;/groupId&gt; &lt;artifactId&gt;search-api&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba.boot&lt;/groupId&gt; &lt;artifactId&gt;dubbo-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;0.1.1&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; å®ç°æš´éœ²çš„æ¥å£123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139package net.ydstudio.dubbo.search.service;import com.alibaba.dubbo.config.annotation.Service;import io.searchbox.client.JestClient;import io.searchbox.client.JestResult;import io.searchbox.core.Search;import net.ydstudio.dubbo.search.api.document.BtSearchDocument;import net.ydstudio.dubbo.search.api.model.EsSearchHotResult;import net.ydstudio.dubbo.search.api.service.BtSearchService;import net.ydstudio.dubbo.search.util.Md5Util;import org.elasticsearch.index.query.BoolQueryBuilder;import org.elasticsearch.index.query.QueryBuilder;import org.elasticsearch.index.query.QueryBuilders;import org.elasticsearch.search.builder.SearchSourceBuilder;import org.elasticsearch.search.sort.FieldSortBuilder;import org.elasticsearch.search.sort.SortBuilders;import org.elasticsearch.search.sort.SortOrder;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.beans.factory.annotation.Value;import org.springframework.core.io.Resource;import org.springframework.util.StringUtils;import java.io.IOException;import java.text.SimpleDateFormat;import java.util.Date;import java.util.List;/** * Created by Sam on 18/7/7. */@Servicepublic class BtSearchServiceImpl implements BtSearchService,EsSearchService&lt;BtSearchDocument&gt; &#123; /** * ç´¢å¼• */ public static final String INDEX_NAME = \"search\"; /** * ç´¢å¼•ç±»å‹ */ public static final String TYPE = \"searchWord\"; @Value(\"classpath:mapping/searchMapping.json\") private Resource mappingFile; @Autowired private JestClient jestClient; @Override public Boolean createIndex() throws IOException &#123; return createESIndex(jestClient, mappingFile, INDEX_NAME, TYPE); &#125; @Override public BtSearchDocument findOne(String word) throws IOException &#123; String id = Md5Util.md5(word); return findDocument(jestClient, INDEX_NAME, TYPE, id, BtSearchDocument.class); &#125; @Override public Boolean delete(String word) throws IOException &#123; String id = Md5Util.md5(word); return deleteDocument(jestClient, INDEX_NAME, TYPE, id); &#125; @Override public Boolean save(String word) throws IOException &#123; String id = Md5Util.md5(word); BtSearchDocument document = this.findOne(id); SimpleDateFormat format = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\"); Date date = new Date(); if (StringUtils.isEmpty(document))&#123; document = new BtSearchDocument(); document.setId(id); document.setCreated(format.format(date)); document.setNum(1); document.setWord(word); &#125;else &#123; document.setNum(document.getNum()+1); &#125; document.setUpdated(format.format(date)); return saveDocument(jestClient, INDEX_NAME, TYPE, id, document); &#125; @Override public Boolean deleteIndex() throws IOException &#123; return deleteESIndex(jestClient, INDEX_NAME); &#125; @Override public EsSearchHotResult hotWordList() &#123; // match_all BoolQueryBuilder boolQuery = QueryBuilders.boolQuery(); SearchSourceBuilder searchSourceBuilder = new SearchSourceBuilder(); QueryBuilder queryBuilder = QueryBuilders.matchAllQuery(); boolQuery.must(queryBuilder); FieldSortBuilder sortBuilder = SortBuilders.fieldSort(\"num\"); sortBuilder.order(SortOrder.DESC); searchSourceBuilder.query(boolQuery); searchSourceBuilder.sort(sortBuilder); // æ„å»ºSearchå¯¹è±¡ Search search = new Search.Builder(searchSourceBuilder.toString()) .addIndex(INDEX_NAME) .addType(TYPE) .build(); EsSearchHotResult esSearchHotResult = new EsSearchHotResult(); try &#123; JestResult result = jestClient.execute(search); List&lt;BtSearchDocument&gt; list = result.getSourceAsObjectList(BtSearchDocument.class); esSearchHotResult.setTook(result.getValue(\"took\").toString()); esSearchHotResult.setDocumentList(list); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; return esSearchHotResult; &#125;&#125; searchæœåŠ¡æä¾›æ–¹çš„applicationçš„é…ç½®ä¿¡æ¯ï¼š 123456789101112131415161718dubbo: application: id: search-provider name: search-provider protocosl: id: dubbo name: dubbo port: 20880 scan: basePackages: net.ydstudio.dubbo.search.service registry: id: my-registry address: zookeeper://xx.xx.xxx.xxx:xxx parameters: max-active: 8 max-wait: -1 max-idle: 8 min-idle: 0 æ³¨æ„ basePackagesé¡¹é…ç½®çš„åŒ…è·¯å¾„ï¼Œä»–å¯¹åº”çš„æ˜¯è®¾ç½®æ‰«æè·¯å¾„å³è¢«æ³¨è§£@serviceå’Œ@Referenceæè¿°çš„æ¥å£ï¼ˆæˆ–è€…è¯´æ˜¯æš´éœ²æ¥å£çš„å®ç°ç±»çš„åŒ…è·¯å¾„ï¼Œè¿™ä¸ªå¾ˆé‡è¦ï¼Œæˆ‘åœ¨æ­¤å¤„è€½æäº†å¾ˆä¹…ï¼‰,è¿™ä¸ªé…ç½®å¯ä»¥ä½¿ç”¨ @EnableDubbo æ³¨è§£æ›¿ä»£ï¼ˆåŠ åœ¨å¯åŠ¨ç±»ä¸Šï¼‰ ####æœåŠ¡æ¶ˆè´¹æ–¹#####pom.xmlä¸­çš„ä¾èµ– 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;net.ydstudio.dubbo&lt;/groupId&gt; &lt;artifactId&gt;bt-model&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;net.ydstudio.dubbo&lt;/groupId&gt; &lt;artifactId&gt;search-api&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba.boot&lt;/groupId&gt; &lt;artifactId&gt;dubbo-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;0.1.1&lt;/version&gt; &lt;/dependency&gt; &lt;!--thymeleaf--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;net.sourceforge.nekohtml&lt;/groupId&gt; &lt;artifactId&gt;nekohtml&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt; &lt;artifactId&gt;mybatis-generator-core&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt; &lt;artifactId&gt;mybatis-generator&lt;/artifactId&gt; &lt;type&gt;pom&lt;/type&gt; &lt;/dependency&gt; &lt;/dependencies&gt; é…ç½®æ–‡ä»¶123456789101112131415161718dubbo: application: id: bt-search name: bt-search protocosl: id: dubbo name: dubbo port: 20880 scan: basePackages: net.ydstudio.dubbo.bt registry: id: my-registry address: zookeeper://xx.xx.xxx.xxx:xxx parameters: max-active: 8 max-wait: -1 max-idle: 8 min-idle: 0 æ³¨æ„ basePackages è®¾ç½®æ‰«æè·¯å¾„,æ‰«æè¢«æ³¨è§£@serviceå’Œ@Referenceçš„æ¥å£ RPCè°ƒç”¨12@Referenceprivate BtSearchService btSearchService; ä½¿ç”¨com.alibaba.dubbo.config.annotation.Referenceä¸­çš„ @Referenceæ³¨è§£ä¿®é¥°æ¥å£BtSearchService ï¼Œç„¶ååƒæ™®é€šçš„beanä½¿ç”¨å³å¯ã€‚ æ•´åˆæ€»ç»“ç”±äºè½¯ä»¶æ›´æ–°çš„å¿«ï¼Œæˆ–è€…è½¯ä»¶é¡¹ç›®çš„ç”Ÿå­˜å‘¨æœŸå¤ªçŸ­ï¼Œè½¯ä»¶å¯¹åº”çš„è¯´æ˜æ–‡æ¡£ä¼šè·Ÿä¸ä¸Šã€‚Dubboç°åœ¨å·²ç»æçŒ®ç»™äº†Apacheï¼Œè¿™ä¸€æ–¹é¢å¯èƒ½ä¼šå¥½ä¸€ç‚¹ã€‚å¤§å®¶åœ¨å¼€å‘çš„æ—¶å€™æ³¨æ„ç»†å¿ƒä¸€ç‚¹ï¼Œå¤šå»çœ‹çœ‹GitHubï¼Œä¸ç„¶é—®é¢˜ä¼šå¾ˆå¤šï¼ é™„æ³¨å‚è€ƒèµ„æ–™ã€å®˜æ–¹Dubboå’ŒSpring Bootæ•´åˆçš„GitHubåœ°å€ã€‘","categories":[],"tags":[{"name":"dubbo","slug":"dubbo","permalink":"https://ydstudios.gitee.io/tags/dubbo/"},{"name":"spring boot","slug":"spring-boot","permalink":"https://ydstudios.gitee.io/tags/spring-boot/"}]},{"title":"Mycat æ•°æ®åº“åˆ†åº“åˆ†è¡¨ä¸­é—´ä»¶çš„åˆ†åº“é…ç½®","slug":"Mycat-æ•°æ®åº“åˆ†åº“åˆ†è¡¨ä¸­é—´ä»¶çš„åˆ†åº“é…ç½®","date":"2018-10-03T23:04:44.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/dcd836f7.html","link":"","permalink":"https://ydstudios.gitee.io/post/dcd836f7.html","excerpt":"æœ¬æ–‡æ˜¯Mycat æ•°æ®åº“åˆ†åº“åˆ†è¡¨ä¸­é—´ä»¶ç³»åˆ—æ–‡ç« çš„ç¬¬ä¸‰ç¯‡ï¼Œå¹³æ—¶å·¥ä½œå¤ªå¿™ï¼ŒåŠ ä¸Šåˆå¿™ç€ä»PHPè½¬Javaï¼Œå¹³æ—¥çš„ç©ºé—²æ—¶é—´éƒ½å»ç ”ç©¶Javaäº†ã€‚ä»€ä¹ˆSpring MVCã€Spring Bootã€Spring Cloudã€Dubboï¼Œä¸œè¥¿çœŸå°¼ç›çš„å¤šï¼æ­£å¥½å›½åº†ä¸€äººæ²¡äº‹å¹²ï¼Œå†æ¬¡æ‹¾èµ·æ¥Mycatçš„ç ”ç©¶ã€‚","text":"æœ¬æ–‡æ˜¯Mycat æ•°æ®åº“åˆ†åº“åˆ†è¡¨ä¸­é—´ä»¶ç³»åˆ—æ–‡ç« çš„ç¬¬ä¸‰ç¯‡ï¼Œå¹³æ—¶å·¥ä½œå¤ªå¿™ï¼ŒåŠ ä¸Šåˆå¿™ç€ä»PHPè½¬Javaï¼Œå¹³æ—¥çš„ç©ºé—²æ—¶é—´éƒ½å»ç ”ç©¶Javaäº†ã€‚ä»€ä¹ˆSpring MVCã€Spring Bootã€Spring Cloudã€Dubboï¼Œä¸œè¥¿çœŸå°¼ç›çš„å¤šï¼æ­£å¥½å›½åº†ä¸€äººæ²¡äº‹å¹²ï¼Œå†æ¬¡æ‹¾èµ·æ¥Mycatçš„ç ”ç©¶ã€‚ é¦–å…ˆï¼Œå…ˆæŒ‰ç…§ å®ç°MySQLä¸»ä»å¤åˆ¶ ä¸Šçš„æ­¥éª¤é…ç½®ä¸€ä¸ªç®€å•çš„MySQLä¸»ä»ç¯å¢ƒï¼Œå…ˆè´´ä¸€ä¸‹ç›¸å…³çš„é…ç½®ä¿¡æ¯ï¼šMySQLä¸­Masterçš„é…ç½®ï¼š 123456789101112131415161718192021[client]port=3306[mysql]default-character-set=utf8[mysqld]port=3306basedir=\"C:/phpStudy/MySQL/\"datadir=\"C:/phpStudy/MySQL/data/\"character-set-server=utf8collation-server=utf8_general_ci default-storage-engine=MyISAM### addserver-id=1log-bin =mysql-binbinlog-format = mixedbinlog-do-db=db1 #æ­¤å‚æ•°è¡¨ç¤ºåªè®°å½•æŒ‡å®šæ•°æ®åº“çš„äºŒè¿›åˆ¶æ—¥å¿—ã€‚binlog-do-db=db2binlog-do-db=db3#binlog-ignore-db=api,mysql,performance_schema #æ­¤å‚æ•°è¡¨ç¤ºå¿½ç•¥æŒ‡å®šçš„æ•°æ®åº“çš„äºŒè¿›åˆ¶æ—¥å¿—ã€‚#å…¶ä»–é…ç½®çœç•¥ MySQLä¸­slaveçš„é…ç½®ï¼š 12345678910111213141516171819[client]port=3307[mysql]default-character-set=utf8[mysqld]port=3307basedir=\"C:/phpStudy/MySQL3307/\"datadir=\"C:/phpStudy/MySQL3307/data/\"character-set-server=utf8collation-server=utf8_general_ci default-storage-engine=MyISAMserver-id=3307log-bin = mysql-binbinlog-format =mixedrelay-log=mysql-relayslave-skip-errors=all #è·³è¿‡æ‰€æœ‰é”™è¯¯#å…¶ä»–é…ç½®çœç•¥ åœ¨masterä¸Šåˆ›å»ºç”¨äºåŒæ­¥æ•°æ®çš„è´¦æˆ·ï¼š 123grant replication client,replication slave on *.* to slave3307@'%' identified by 'slave3307';#åˆ·æ–°æƒé™ï¼Œç«‹å³ç”Ÿæ•ˆflush privileges; åœ¨Masteræ‰§è¡Œå‘½ä»¤æŸ¥çœ‹log_poså’Œlog_file 1234567show master status; +------------------+----------+--------------+------------------+ | File | Position | Binlog_Do_DB | Binlog_Ignore_DB | +------------------+----------+--------------+------------------+ | mysql-bin.000062 | 8233| | | +------------------+----------+--------------+------------------+ æ³¨æ„ æ‰§è¡Œå®Œæ­¤æ­¥éª¤åä¸è¦å†æ“ä½œä¸»æœåŠ¡å™¨MYSQLï¼Œé˜²æ­¢ä¸»æœåŠ¡å™¨çŠ¶æ€å€¼å˜åŒ– åœ¨slaveä¸Šæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œè®²masterå’Œslaveå…³è”èµ·æ¥ï¼š 12345hange master to master_host='127.0.0.1',master_port=3306,master_user='slave3307',master_password='slave3307',master_log_file='mysql-bin.000062',master_log_pos=8233;start slave #å¯åŠ¨ä»æœåŠ¡å™¨å¤åˆ¶åŠŸèƒ½show slave status\\G å…¶ä¸­ Slave_IO_Running å’Œ Slave_SQL_Running ä¸¤åˆ—çš„å€¼éƒ½ä¸º â€œYesâ€ï¼Œè¡¨æ˜ Slave çš„ I/O å’Œ SQL çº¿ç¨‹éƒ½åœ¨æ­£å¸¸è¿è¡Œã€‚æ­£å¸¸çš„è¡¨ç°å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758mysql&gt; show slave status\\G*************************** 1. row *************************** Slave_IO_State: Waiting for master to send event Master_Host: 127.0.0.1 Master_User: slave3307 Master_Port: 3306 Connect_Retry: 60 Master_Log_File: mysql-bin.000007 Read_Master_Log_Pos: 24536 Relay_Log_File: mysql-relay.000005 Relay_Log_Pos: 24699 Relay_Master_Log_File: mysql-bin.000007 Slave_IO_Running: Yes Slave_SQL_Running: Yes Replicate_Do_DB: Replicate_Ignore_DB: Replicate_Do_Table: Replicate_Ignore_Table: Replicate_Wild_Do_Table: Replicate_Wild_Ignore_Table: Last_Errno: 0 Last_Error: Skip_Counter: 0 Exec_Master_Log_Pos: 24536 Relay_Log_Space: 25318 Until_Condition: None Until_Log_File: Until_Log_Pos: 0 Master_SSL_Allowed: No Master_SSL_CA_File: Master_SSL_CA_Path: Master_SSL_Cert: Master_SSL_Cipher: Master_SSL_Key: Seconds_Behind_Master: 0Master_SSL_Verify_Server_Cert: No Last_IO_Errno: 0 Last_IO_Error: Last_SQL_Errno: 0 Last_SQL_Error: Replicate_Ignore_Server_Ids: Master_Server_Id: 1 Master_UUID: fe1b230d-6ee9-11e8-b0c6-9c5c8e103115 Master_Info_File: C:\\phpStudy\\MySQL3307\\data\\master.info SQL_Delay: 0 SQL_Remaining_Delay: NULL Slave_SQL_Running_State: Slave has read all relay log; waiting for the slave I/O thread to update it Master_Retry_Count: 86400 Master_Bind: Last_IO_Error_Timestamp: Last_SQL_Error_Timestamp: Master_SSL_Crl: Master_SSL_Crlpath: Retrieved_Gtid_Set: Executed_Gtid_Set: Auto_Position: 01 row in set (0.00 sec) å‹æƒ…æç¤ºï¼šå¦‚æœæ˜¯ç›´æ¥å¤åˆ¶MySQLçš„å®‰è£…ç›®å½•é…ç½®çš„ä¸»ä»ï¼Œæ³¨æ„MySQL5.6å¼€å§‹çš„UUIDçš„é—®é¢˜ã€‚ä¸‹é¢å¼€å§‹Mycatçš„é…ç½®ï¼ŒMycatä¸­æœ‰ä¸‰ä¸ªé‡è¦çš„é…ç½®æ–‡ä»¶ï¼šserver.xmlã€schema.xmlã€rule.xmlï¼Œä¸‹é¢å°±åˆ†åˆ«è´´ä¸€ä¸‹å¯¹åº”çš„é…ç½®ä¿¡æ¯ï¼šserver.xmlä¸­çš„é…ç½®ä¿¡æ¯ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;!DOCTYPE mycat:server SYSTEM \"server.dtd\"&gt;&lt;mycat:server xmlns:mycat=\"http://io.mycat/\"&gt; &lt;system&gt; &lt;property name=\"useSqlStat\"&gt;0&lt;/property&gt; &lt;!-- 1ä¸ºå¼€å¯å®æ—¶ç»Ÿè®¡ã€0ä¸ºå…³é—­ --&gt; &lt;property name=\"useGlobleTableCheck\"&gt;0&lt;/property&gt; &lt;!-- 1ä¸ºå¼€å¯å…¨åŠ ç­ä¸€è‡´æ€§æ£€æµ‹ã€0ä¸ºå…³é—­ --&gt; &lt;property name=\"sequnceHandlerType\"&gt;2&lt;/property&gt; &lt;!--é»˜è®¤ä¸ºtype 0: DirectByteBufferPool | type 1 ByteBufferArena--&gt; &lt;property name=\"processorBufferPoolType\"&gt;0&lt;/property&gt; &lt;!--åˆ†å¸ƒå¼äº‹åŠ¡å¼€å…³ï¼Œ0ä¸ºä¸è¿‡æ»¤åˆ†å¸ƒå¼äº‹åŠ¡ï¼Œ1ä¸ºè¿‡æ»¤åˆ†å¸ƒå¼äº‹åŠ¡ï¼ˆå¦‚æœåˆ†å¸ƒå¼äº‹åŠ¡å†…åªæ¶‰åŠå…¨å±€è¡¨ï¼Œåˆ™ä¸è¿‡æ»¤ï¼‰ï¼Œ2ä¸ºä¸è¿‡æ»¤åˆ†å¸ƒå¼äº‹åŠ¡,ä½†æ˜¯è®°å½•åˆ†å¸ƒå¼äº‹åŠ¡æ—¥å¿—--&gt; &lt;property name=\"handleDistributedTransactions\"&gt;0&lt;/property&gt; &lt;!--off heap for merge/order/group/limit 1å¼€å¯ 0å…³é—­--&gt; &lt;property name=\"useOffHeapForMerge\"&gt;1&lt;/property&gt; &lt;!--å•ä½ä¸ºm--&gt; &lt;property name=\"memoryPageSize\"&gt;1m&lt;/property&gt; &lt;!--å•ä½ä¸ºk--&gt; &lt;property name=\"spillsFileBufferSize\"&gt;1k&lt;/property&gt; &lt;property name=\"useStreamOutput\"&gt;0&lt;/property&gt; &lt;!--å•ä½ä¸ºm--&gt; &lt;property name=\"systemReserveMemorySize\"&gt;384m&lt;/property&gt; &lt;!--æ˜¯å¦é‡‡ç”¨zookeeperåè°ƒåˆ‡æ¢ --&gt; &lt;property name=\"useZKSwitch\"&gt;true&lt;/property&gt; &lt;/system&gt; &lt;user name=\"root\"&gt; &lt;property name=\"password\"&gt;mycat&lt;/property&gt; &lt;!--å¤šä¸ªæ•°æ®åº“é€—å·éš”å¼€ --&gt; &lt;property name=\"schemas\"&gt;testdb&lt;/property&gt; &lt;/user&gt; &lt;user name=\"mycatread\"&gt; &lt;property name=\"password\"&gt;mycatread&lt;/property&gt; &lt;property name=\"schemas\"&gt;testdb&lt;/property&gt; &lt;property name=\"readOnly\"&gt;true&lt;/property&gt; &lt;/user&gt;&lt;/mycat:server&gt; schema.xmlä¸­çš„é…ç½®ä¿¡æ¯ï¼š 12345678910111213141516171819202122&lt;?xml version=\"1.0\"?&gt;&lt;!DOCTYPE mycat:schema SYSTEM \"schema.dtd\"&gt;&lt;mycat:schema xmlns:mycat=\"http://io.mycat/\"&gt; &lt;schema name=\"testdb\" checkSQLschema=\"false\" sqlMaxLimit=\"100\"&gt; &lt;table name=\"t_user\" dataNode=\"dn1,dn2,dn3\" rule=\"crc32slot\"&gt; &lt;!-- çˆ¶è¡¨ä¸ºt_userï¼Œå­è¡¨ä¸ºt_adminã€‚t_adminè¡¨ä¸­çš„å­—æ®µuser_idå¼•ç”¨t_userè¡¨ä¸­çš„idä¸»é”®å­—æ®µã€‚ --&gt; &lt;childTable name=\"t_admin\" joinKey=\"user_id\" parentKey=\"id\" /&gt; &lt;/table&gt; &lt;/schema&gt; &lt;dataNode name=\"dn1\" dataHost=\"localhost1\" database=\"db1\" /&gt; &lt;dataNode name=\"dn2\" dataHost=\"localhost1\" database=\"db2\" /&gt; &lt;dataNode name=\"dn3\" dataHost=\"localhost1\" database=\"db3\" /&gt; &lt;dataHost name=\"localhost1\" maxCon=\"1000\" minCon=\"10\" balance=\"1\" writeType=\"0\" dbType=\"mysql\" dbDriver=\"native\" switchType=\"2\" slaveThreshold=\"100\"&gt; &lt;heartbeat&gt;show slave status&lt;/heartbeat&gt; &lt;writeHost host=\"hostM1\" url=\"127.0.0.1:3306\" user=\"root\" password=\"123456\"&gt; &lt;!--&lt;readHost host=\"hostS1\" url=\"127.0.0.1:3307\" user=\"root\" password=\"123456\"/&gt;--&gt; &lt;/writeHost&gt; &lt;/dataHost&gt;&lt;/mycat:schema&gt; rule.xmlä¸­çš„é…ç½®ä¿¡æ¯ï¼š 1234&lt;function name=\"crc32slot\" class=\"io.mycat.route.function.PartitionByCRC32PreSlot\"&gt; &lt;property name=\"count\"&gt;3&lt;/property&gt;&lt;!-- è¦åˆ†ç‰‡çš„æ•°æ®åº“èŠ‚ç‚¹æ•°é‡ï¼Œå¿…é¡»æŒ‡å®šï¼Œå¦åˆ™æ²¡æ³•åˆ†ç‰‡ --&gt;&lt;/function&gt; æ³¨æ„ä¸‹é¢çš„åœ°æ–¹ï¼š 12345678&lt;!--schema.xmlä¸­--&gt;&lt;table name=\"t_user\" dataNode=\"dn1,dn2,dn3\" rule=\"crc32slot\"&gt;&lt;!--rule.xmlä¸­--&gt;&lt;function name=\"crc32slot\" class=\"io.mycat.route.function.PartitionByCRC32PreSlot\"&gt; &lt;property name=\"count\"&gt;3&lt;/property&gt;&lt;!-- è¦åˆ†ç‰‡çš„æ•°æ®åº“èŠ‚ç‚¹æ•°é‡ï¼Œå¿…é¡»æŒ‡å®šï¼Œå¦åˆ™æ²¡æ³•åˆ†ç‰‡ --&gt; &lt;/function&gt; ä½¿ç”¨crc32lotè¿›è¡Œåˆ†ç‰‡ï¼Œåˆ†ç‰‡çš„æ•°æ®åº“èŠ‚ç‚¹çš„æ•°é‡é»˜è®¤ç»™äº†2ï¼Œå¦‚æœä½ ä¿®æ”¹äº†è¿™é‡Œï¼Œè¯·ä¸€å®šè¦åˆ é™¤conf/ruledata/crc32slot_T_USER.propertiesè¿™ä¸ªæ–‡ä»¶ï¼Œå¹¶é‡æ–°å¯åŠ¨Mycatï¼Œä¸ç„¶ä½ çš„æ•°æ®æ˜¯ä¸ä¼šåˆ†åˆ°db3è¿™ä¸ªæ•°æ®åº“èŠ‚ç‚¹çš„ã€‚åˆ°è¿™é‡ŒMycatåˆ†åº“é…ç½®å°±å®Œæˆäº†ï¼Œä½ åªéœ€è¦åœ¨Mycatçš„ç®¡ç†ä¸Šæ“ä½œï¼Œå°±èƒ½åœ¨masterã€slaveä¸Šçœ‹åˆ°æ•ˆæœï¼š 123456789101112131415161718192021222324252627mysql&gt;mysql -uroot -pmycat -P8066Warning: Using a password on the command line interface can be insecure.Welcome to the MySQL monitor. Commands end with ; or \\g.Your MySQL connection id is 3Server version: 5.6.29-mycat-1.6-RELEASE-20161028204710 MyCat Server (OpenClounCopyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.mysql&gt; insert into t_user(id, name) values(1, 'aaa');Query OK, 1 row affected (0.02 sec)mysql&gt; insert into t_user(id, name) values(2, 'bbb');Query OK, 1 row affected (0.00 sec)mysql&gt; insert into t_user(id, name) values(3, 'ccc');Query OK, 1 row affected (0.00 sec)mysql&gt; insert into t_user(id, name) values(4, 'ddd');Query OK, 1 row affected (0.00 sec)mysql&gt; insert into t_user(id, name) values(5, 'eee');Query OK, 1 row affected (0.00 sec) åœ¨masterä¸Šçœ‹æ•ˆæœï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041C:\\Users\\nick&gt;mysql -uroot -p123456Warning: Using a password on the command line interface can be insecure.Welcome to the MySQL monitor. Commands end with ; or \\g.Your MySQL connection id is 10628Server version: 5.6.40-log MySQL Community Server (GPL)Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.mysql&gt; select * from db1.t_user;+----+------+-------+| id | name | _slot |+----+------+-------+| 3 | ccc | 32411 || 5 | eee | 27566 |+----+------+-------+2 rows in set (0.00 sec)mysql&gt; select * from db2.t_user;+----+------+-------+| id | name | _slot |+----+------+-------+| 1 | aaa | 44983 || 2 | bbb | 65037 |+----+------+-------+2 rows in set (0.00 sec)mysql&gt; select * from db3.t_user;+----+------+-------+| id | name | _slot |+----+------+-------+| 4 | ddd | 68408 |+----+------+-------+1 row in set (0.00 sec) åœ¨slaveä¸ŠæŸ¥çœ‹æ•°æ®ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œæ­¤å¤„å°±è´´å‡ºéƒ¨åˆ†æ•°æ®ï¼š 1234567891011121314151617181920212223C:\\Users\\nick&gt;mysql -uroot -p -P3307Enter password: ******Welcome to the MySQL monitor. Commands end with ; or \\g.Your MySQL connection id is 10412Server version: 5.6.40-log MySQL Community Server (GPL)Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.mysql&gt; select * from db1.t_user;+----+------+-------+| id | name | _slot |+----+------+-------+| 3 | ccc | 32411 || 5 | eee | 27566 |+----+------+-------+2 rows in set (0.00 sec)","categories":[],"tags":[{"name":"linux","slug":"linux","permalink":"https://ydstudios.gitee.io/tags/linux/"},{"name":"mycat","slug":"mycat","permalink":"https://ydstudios.gitee.io/tags/mycat/"}]},{"title":"Feignè°ƒç”¨è¿”å›å¤æ‚å¯¹è±¡æ—¶æŠ¥é”™java.lang.ClassCastException: java.util.LinkedHashMap cannot be cast to xxx","slug":"Feignè°ƒç”¨è¿”å›å¤æ‚å¯¹è±¡æ—¶æŠ¥é”™java-lang-ClassCastException-java-util-LinkedHashMap-cannot-be-cast-to-xxx","date":"2018-09-30T23:39:50.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/4f6a533b.html","link":"","permalink":"https://ydstudios.gitee.io/post/4f6a533b.html","excerpt":"åœ¨å…¬å¸çš„æ•°æ®ä¸­å¿ƒé¡¹ç›®é‡Œä½¿ç”¨äº†Feignï¼Œè¿›è¡Œæ¥å£çš„è°ƒç”¨ï¼Œåœ¨è¿”å›ä¸€ä¸ªå¤æ‚çš„å¯¹è±¡æ—¶å€™ï¼Œå‡ºç°ä¸‹é¢çš„ä¸€ä¸ªé”™è¯¯ï¼š 1java.lang.ClassCastException: java.util.LinkedHashMap cannot be cast to xxx","text":"åœ¨å…¬å¸çš„æ•°æ®ä¸­å¿ƒé¡¹ç›®é‡Œä½¿ç”¨äº†Feignï¼Œè¿›è¡Œæ¥å£çš„è°ƒç”¨ï¼Œåœ¨è¿”å›ä¸€ä¸ªå¤æ‚çš„å¯¹è±¡æ—¶å€™ï¼Œå‡ºç°ä¸‹é¢çš„ä¸€ä¸ªé”™è¯¯ï¼š 1java.lang.ClassCastException: java.util.LinkedHashMap cannot be cast to xxx å¤§è‡´æ„æ€å°±æ˜¯ LinkedHashMap ä¸èƒ½å¤Ÿè½¬æ¢æˆ xxx å¯¹è±¡ï¼Œæˆ‘å¾ˆå¥‡æ€ªï¼å› ä¸ºè¿™ä¸ªæ¥å£ç›¸å…³çš„åœ°æ–¹éƒ½æ²¡æœ‰ä½¿ç”¨åˆ° LinkedHashMapï¼Œä»–æ˜¯ä»å“ªé‡Œå†’å‡ºæ¥çš„ï¼Ÿæˆ‘å¼€å§‹è°ƒè¯•ä¸‹é¢çš„ä»£ç ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546@Overridepublic List&lt;EsFilterKV&gt; getFilterKV(Integer companyId, Integer appId, Long usrId, String filterName) &#123; if (StringUtils.isEmpty(filterName))&#123; return null; &#125; List&lt;CompanyDistributionFilterGroup&gt; distributionFilterGroupList = companyDistributionService.findDistributionFilterGroupList(companyId,true); List&lt;ProductDocument&gt; productDocumentList = new ArrayList&lt;ProductDocument&gt;(100); try &#123; for (CompanyDistributionFilterGroup group: distributionFilterGroupList) &#123; List&lt;FilterItem&gt; filterItemList = filterGroupFilterService.findFilterItemList(group.getFilterGroupId()); MtSearchFilterRequest request = new MtSearchFilterRequest(); request.setFilterItemList(filterItemList); MtSearchResult mtSearchResult = productSearchService.search(request); productDocumentList.addAll(mtSearchResult.getData()); &#125; &#125; catch (MtException e) &#123; e.printStackTrace(); &#125; List&lt;Long&gt; longList = productDocumentList.stream().map(p-&gt;p.getId()).distinct().collect(Collectors.toList()); if (CollectionUtils.isEmpty(longList))&#123; return null; &#125; List&lt;Map&gt; idValueList = productPackageService.findPackageIdValueList(longList,filterName,true); if (CollectionUtils.isEmpty(idValueList))&#123; return null; &#125; List&lt;EsFilterKV&gt; esFilterKVs = new ArrayList&lt;EsFilterKV&gt;(idValueList.size()); for (Map map: idValueList)&#123; EsFilterKV esFilterKV = new EsFilterKV(); esFilterKV.setName(map.get(\"name\").toString()); esFilterKV.setId(new Long(map.get(\"id\").toString())); esFilterKV.setJsonName(\"&#123;'id':\"+esFilterKV.getId()+\",'name':'\"+esFilterKV.getName()+\"'&#125;\"); esFilterKVs.add(esFilterKV); &#125; return esFilterKVs;&#125; æˆ‘å‘ç°åœ¨ productDocumentList.addAll(mtSearchResult.getData()); è¿™ä¸€è¡Œï¼ŒproductDocumentListé‡Œé¢æ”¾çš„å…¨æ˜¯LinkedHashMapï¼Œä¸æ˜¯æƒ³è±¡ä¸­çš„å¯¹è±¡åˆ—è¡¨ã€‚é€šè¿‡é¢å‘ç™¾åº¦ç¼–ç¨‹ï¼Œæˆ‘æŠŠproductSearchService.search()è¿™ä¸ªæ–¹æ³•è¿”å›çš„æ³›å‹ç»™å»æ‰äº†ï¼ŒæŒ‡å®šäº†çœŸå®çš„ç±»å‹ï¼Œä»è€Œè§£å†³äº†ä¸Šé¢çš„é—®é¢˜ï¼ é€šè¿‡ç™¾åº¦å¾—çŸ¥æœ‰ä¸å°‘äººé‡åˆ°è¿™ç§é—®é¢˜ï¼Œæœ‰ä¸ªæ„Ÿè§‰æ¯”è¾ƒé è°±çš„è§£é‡Šå¦‚ä¸‹ï¼š å› ä¸ºrpcè¿œç¨‹è°ƒç”¨åœ¨åº•å±‚è¿˜æ˜¯ä½¿ç”¨çš„HTTPClientï¼Œæ‰€ä»¥åœ¨ä¼ é€’å‚æ•°çš„æ—¶å€™ï¼Œå¿…å®šè¦æœ‰ä¸ªé¡ºåºï¼Œå½“ä½ ä¼ é€’mapçš„æ—¶å€™mapé‡Œé¢çš„å€¼ä¹Ÿè¦æœ‰é¡ºåºï¼Œä¸ç„¶æœåŠ¡å±‚åœ¨æ¥çš„æ—¶å€™å°±å‡ºé—®é¢˜äº†ï¼Œæ‰€ä»¥å®ƒæ‰ä¼šä»mapè½¬ä¸ºlinkedhashMapï¼spring æœ‰ä¸€ä¸ªç±»å«ModelMapï¼Œç»§æ‰¿äº†linkedhashMap public class ModelMap extends LinkedHashMap ,æ‰€ä»¥ä¸€ä¸ªæ¥å£è¿”å›çš„ç»“æœå°±å¯ä»¥ç›´æ¥ç”¨ModelMapæ¥æ¥ï¼Œæ³¨æ„ModelMapæ˜¯æ²¡æœ‰æ³›å‹çš„ï¼Œä¸ç®¡ä½ è¿”å›çš„ç»“æœæ˜¯ä»€ä¹ˆç±»å‹çš„mapï¼Œæ³›å‹æ˜¯å¤šå¤æ‚çš„mapï¼Œéƒ½å¯ä»¥ç›´æ¥newä¸€ä¸ªModelmapï¼Œç”¨å®ƒæ¥æ¥è¿”å›çš„ç»“æœï¼ï¼ï¼","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"},{"name":"feign","slug":"feign","permalink":"https://ydstudios.gitee.io/tags/feign/"}]},{"title":"php-fpmçš„è¿›ç¨‹æ± ç›¸å…³å‚æ•°è¯´æ˜","slug":"php-fpmçš„è¿›ç¨‹æ± ç›¸å…³å‚æ•°è¯´æ˜","date":"2018-09-17T22:59:19.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/c1dfde53.html","link":"","permalink":"https://ydstudios.gitee.io/post/c1dfde53.html","excerpt":"æœ€è¿‘å…¬å¸çš„å®˜ç½‘æ®ä¸šåŠ¡è¯´æ—¶ä¸æ—¶çš„å¡ï¼Œè€Œè´Ÿè´£ç»´æŠ¤å®˜ç½‘çš„äººè¯·å‡å»å¾·å›½è·‘é©¬æ‹‰æ¾äº†ï¼ˆps:æœ‰é’±çœŸå¥½ï¼‰ï¼Œæˆ‘åˆè‹¦é€¼çš„å¸®ä»–å¤„ç†å®˜ç½‘çš„äº‹æƒ…ã€‚ php-fpmè¿›ç¨‹æ± å¼€å¯è¿›ç¨‹æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯staticï¼Œç›´æ¥å¼€å¯æŒ‡å®šæ•°é‡çš„php-fpmè¿›ç¨‹ï¼Œä¸å†å¢åŠ æˆ–è€…å‡å°‘ï¼›å¦ä¸€ç§åˆ™æ˜¯dynamicï¼Œå¼€å§‹æ—¶å¼€å¯ä¸€å®šæ•°é‡çš„php-fpmè¿›ç¨‹ï¼Œå½“è¯·æ±‚é‡å˜å¤§æ—¶ï¼ŒåŠ¨æ€çš„å¢åŠ php-fpmè¿›ç¨‹æ•°åˆ°ä¸Šé™ï¼Œå½“ç©ºé—²æ—¶è‡ªåŠ¨é‡Šæ”¾ç©ºé—²çš„è¿›ç¨‹æ•°åˆ°ä¸€ä¸ªä¸‹é™ã€‚è¿™ä¸¤ç§ä¸åŒçš„æ‰§è¡Œæ–¹å¼ï¼Œå¯ä»¥æ ¹æ®æœåŠ¡å™¨çš„å®é™…éœ€æ±‚æ¥è¿›è¡Œè°ƒæ•´ã€‚","text":"æœ€è¿‘å…¬å¸çš„å®˜ç½‘æ®ä¸šåŠ¡è¯´æ—¶ä¸æ—¶çš„å¡ï¼Œè€Œè´Ÿè´£ç»´æŠ¤å®˜ç½‘çš„äººè¯·å‡å»å¾·å›½è·‘é©¬æ‹‰æ¾äº†ï¼ˆps:æœ‰é’±çœŸå¥½ï¼‰ï¼Œæˆ‘åˆè‹¦é€¼çš„å¸®ä»–å¤„ç†å®˜ç½‘çš„äº‹æƒ…ã€‚ php-fpmè¿›ç¨‹æ± å¼€å¯è¿›ç¨‹æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯staticï¼Œç›´æ¥å¼€å¯æŒ‡å®šæ•°é‡çš„php-fpmè¿›ç¨‹ï¼Œä¸å†å¢åŠ æˆ–è€…å‡å°‘ï¼›å¦ä¸€ç§åˆ™æ˜¯dynamicï¼Œå¼€å§‹æ—¶å¼€å¯ä¸€å®šæ•°é‡çš„php-fpmè¿›ç¨‹ï¼Œå½“è¯·æ±‚é‡å˜å¤§æ—¶ï¼ŒåŠ¨æ€çš„å¢åŠ php-fpmè¿›ç¨‹æ•°åˆ°ä¸Šé™ï¼Œå½“ç©ºé—²æ—¶è‡ªåŠ¨é‡Šæ”¾ç©ºé—²çš„è¿›ç¨‹æ•°åˆ°ä¸€ä¸ªä¸‹é™ã€‚è¿™ä¸¤ç§ä¸åŒçš„æ‰§è¡Œæ–¹å¼ï¼Œå¯ä»¥æ ¹æ®æœåŠ¡å™¨çš„å®é™…éœ€æ±‚æ¥è¿›è¡Œè°ƒæ•´ã€‚ å…¶ä¸­æ¶‰åŠåˆ°çš„ä¸€äº›å‚æ•°ï¼Œåˆ†åˆ«æ˜¯pmã€pm.max_childrenã€pm.start_serversã€pm.min_spare_serverså’Œpm.max_spare_serversã€‚pmè¡¨ç¤ºä½¿ç”¨é‚£ç§æ–¹å¼ï¼Œæœ‰ä¸¤ä¸ªå€¼å¯ä»¥é€‰æ‹©ï¼Œå°±æ˜¯staticï¼ˆé™æ€ï¼‰æˆ–è€…dynamicï¼ˆåŠ¨æ€ï¼‰ã€‚ ä¸‹é¢4ä¸ªå‚æ•°çš„æ„æ€åˆ†åˆ«ä¸ºï¼š 1234pm.max_childrenï¼šé™æ€æ–¹å¼ä¸‹å¼€å¯çš„php-fpmè¿›ç¨‹æ•°é‡ï¼Œåœ¨åŠ¨æ€æ–¹å¼ä¸‹ä»–é™å®šphp-fpmçš„æœ€å¤§è¿›ç¨‹æ•°ï¼ˆè¿™é‡Œè¦æ³¨æ„pm.max_spare_serversçš„å€¼åªèƒ½å°äºç­‰äºpm.max_childrenï¼‰pm.start_serversï¼šåŠ¨æ€æ–¹å¼ä¸‹çš„èµ·å§‹php-fpmè¿›ç¨‹æ•°é‡ã€‚pm.min_spare_serversï¼šåŠ¨æ€æ–¹å¼ç©ºé—²çŠ¶æ€ä¸‹çš„æœ€å°php-fpmè¿›ç¨‹æ•°é‡ã€‚pm.max_spare_serversï¼šåŠ¨æ€æ–¹å¼ç©ºé—²çŠ¶æ€ä¸‹çš„æœ€å¤§php-fpmè¿›ç¨‹æ•°é‡ã€‚ phpçš„é…ç½®æ–‡ä»¶é‡Œé¢ç»™å‡ºäº†pm.start_serversçš„è®¡ç®—å…¬å¼ï¼šmin_spare_servers + (max_spare_servers - min_spare_servers) / 2 å¦‚æœdmè®¾ç½®ä¸ºstaticï¼Œé‚£ä¹ˆå…¶å®åªæœ‰pm.max_childrenè¿™ä¸ªå‚æ•°ç”Ÿæ•ˆã€‚ç³»ç»Ÿä¼šå¼€å¯å‚æ•°è®¾ç½®æ•°é‡çš„php-fpmè¿›ç¨‹ã€‚ å¦‚æœdmè®¾ç½®ä¸ºdynamicï¼Œ4ä¸ªå‚æ•°éƒ½ç”Ÿæ•ˆã€‚ç³»ç»Ÿä¼šåœ¨php-fpmè¿è¡Œå¼€å§‹æ—¶å¯åŠ¨pm.start_serversä¸ªphp-fpmè¿›ç¨‹ï¼Œç„¶åæ ¹æ®ç³»ç»Ÿçš„éœ€æ±‚åŠ¨æ€åœ¨pm.min_spare_serverså’Œpm.max_spare_serversä¹‹é—´è°ƒæ•´php-fpmè¿›ç¨‹æ•°ã€‚","categories":[],"tags":[{"name":"php","slug":"php","permalink":"https://ydstudios.gitee.io/tags/php/"},{"name":"php-fpm","slug":"php-fpm","permalink":"https://ydstudios.gitee.io/tags/php-fpm/"}]},{"title":"Spring Cloud Configå®¢æˆ·ç«¯æŠ¥é”™Could not locate PropertySource: I/O error on GET request xxx","slug":"Spring-Cloud-Configå®¢æˆ·ç«¯æŠ¥é”™Could-not-locate-PropertySource-I-O-error-on-GET-request-xxx","date":"2018-09-15T23:46:48.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/29fad61b.html","link":"","permalink":"https://ydstudios.gitee.io/post/29fad61b.html","excerpt":"ä»Šå¤©åœ¨ç ”ç©¶Spring Cloud Configé…ç½®ä¸­å¿ƒï¼Œå‡ºäº†ä¸€ä¸ªå¾ˆè®©äººæ¼ç«çš„é—®é¢˜ï¼Œæˆ‘å…ˆè´´ä¸€ä¸‹æˆ‘çš„ç›¸å…³é…ç½®ä¿¡æ¯ï¼š","text":"ä»Šå¤©åœ¨ç ”ç©¶Spring Cloud Configé…ç½®ä¸­å¿ƒï¼Œå‡ºäº†ä¸€ä¸ªå¾ˆè®©äººæ¼ç«çš„é—®é¢˜ï¼Œæˆ‘å…ˆè´´ä¸€ä¸‹æˆ‘çš„ç›¸å…³é…ç½®ä¿¡æ¯ï¼š å®¢æˆ·ç«¯çš„bootstrap.ymlé…ç½®ï¼š 123456789101112131415161718192021server: port: 9009spring: application: name: admin-server profiles: active: dev cloud: config: name: admin-server-config label: master profile: dev discovery: enabled: true service-id: config-servereureka: client: service-url: defaultZone: http://Eurexxxr:xxxx-12xxx56@accp.xxx.net:8786/eureka/ å‡ºç°çš„é—®é¢˜å¦‚ä¸‹ï¼š 1Could not locate PropertySource: I/O error on GET request for \"http://config-server:9008/admin-server-config/dev/master\": Connection refused; nested exception is java.net.ConnectException: Connection refused å¤§è‡´çš„æ„æ€æ˜¯è¯´â€http://config-server:9008/admin-server-config/dev/master&quot;è¿™ä¸ªé“¾æ¥ä¸èƒ½å¤Ÿè®¿é—®ï¼Œå¯æˆ‘è¯•ç€è®¿é—®ä¸€ä¸‹ï¼Œå´æ˜¯å¯ä»¥è®¿é—®çš„ï¼Œè¿™å°±è®©æˆ‘ç™¾æ€ä¸å¾—å…¶è§£ï¼äºæ˜¯ä¹ç™¾åº¦googleèµ°èµ·ï¼Œåœ¨stackoverflowä¸Šå€’æ˜¯æ‰¾åˆ°å‡ æ¡ç›¸å…³çš„é—®é¢˜ï¼Œä½†æ˜¯é—®é¢˜çš„è§£ç­”æ–¹æ¡ˆéƒ½ä¸æ˜¯å¾ˆé è°±ï¼äºæ˜¯ä¹æ”¾å¼ƒç­”æ¡ˆçš„å¯»æ‰¾ï¼Œæˆ‘å°±å»èœå¸‚åœºä¹°èœï¼Œæ¯•ç«Ÿæ™šé¥­è¿˜æ˜¯è¦åƒçš„!é…’è¶³é¥­é¥±ä¹‹åæˆ‘åˆæ¥ç ”ç©¶è¿™ä¸ªé—®é¢˜ã€‚æŒ‰ç†è¯´æç¤ºè¿™ç§é“¾æ¥ä¸èƒ½è®¿é—®ï¼Œå°±æ˜¯hostsæ–‡ä»¶æ˜ å°„çš„é—®é¢˜ï¼ˆpsï¼šé…ç½®ä¸­å¿ƒconfig-serveræˆ‘éƒ¨ç½²åœ¨æˆ‘é˜¿é‡Œäº‘åšå®¢ä¸Šï¼‰ï¼Œå¯æ˜¯é‚£ä¸ªé“¾æ¥ç¡®å®å¯ä»¥ç›´æ¥è®¿é—®çš„â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦æˆ‘å°±è¯•ç€çœ‹çœ‹æˆ‘çš„hostsæ–‡ä»¶ï¼Œç¬¬ä¸€æ¬¡æˆ‘è¿˜æ²¡æœ‰çœ‹å‡ºé—®é¢˜ï¼Œæˆ‘ä¸æ­»å¿ƒçš„åˆçœ‹ç¬¬äºŒæ¬¡ï¼Œæ€»ç®—è®©æˆ‘å‘ç°äº†é—®é¢˜çš„æ‰€åœ¨ï¼Œä¸‹é¢æ˜¯å½“æ—¶hostsæ–‡ä»¶çš„å†…å®¹ï¼š 123456789101112131415161718192021# Host Database## localhost is used to configure the loopback interface# when the system is booting. Do not change this entry.##127.0.0.1 localhostxx.78.xx.12 config-server127.0.0.1 dev127.0.0.1 search-provider127.0.0.1 config-server127.0.0.1 work.ydstudios.com127.0.0.1 work.damei.com127.0.0.1 work.gx.com127.0.0.1 work.phpcms.com127.0.0.1 work.typecho.com127.0.0.1 work.seacms.com127.0.0.1 work.dy360.net127.0.0.1 work.btsearch.com127.0.0.1 work.search.com127.0.0.1 work.mm.com127.0.0.1 work.duowan.com ä¸çŸ¥é“å¤§å®¶çœ‹å‡ºæ¥æ²¡æœ‰ï¼Ÿæœ‰ä¸¤ä¸ªipæŒ‡å‘äº†config-serverï¼Œè€Œä¸”æˆ‘å‘ç°è¿™ç§é…ç½®ï¼Œä¸åŒæ—¶å€™èµ·ä½œç”¨çš„é…ç½®è¿˜ä¸ä¸€æ ·ï¼ç›´æ¥è®¿é—®urlåœ°å€çš„æ—¶å€™ï¼Œç¬¬ä¸€ä¸ªé…ç½®ç”Ÿæ•ˆï¼Œç¨‹åºé‡Œç¡®å®ç¬¬äºŒä¸ªé…ç½®ç”Ÿæ•ˆï¼Œå°´å°¬â€¦â€¦â€¦â€¦","categories":[],"tags":[{"name":"spring cloud","slug":"spring-cloud","permalink":"https://ydstudios.gitee.io/tags/spring-cloud/"},{"name":"spring cloud config","slug":"spring-cloud-config","permalink":"https://ydstudios.gitee.io/tags/spring-cloud-config/"}]},{"title":"Spring Cloudæ•´åˆé…ç½®ä¸­å¿ƒEurekaä¸­çš„æœåŠ¡çŠ¶æ€æ˜¾ç¤ºUNKOWN","slug":"Spring-Cloudæ•´åˆé…ç½®ä¸­å¿ƒEurekaä¸­çš„æœåŠ¡çŠ¶æ€æ˜¾ç¤ºUNKOWN","date":"2018-09-09T23:42:27.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/5e4a0e78.html","link":"","permalink":"https://ydstudios.gitee.io/post/5e4a0e78.html","excerpt":"ä»Šå¤©åœ¨ç ”ç©¶Spring Cloudçš„é…ç½®ä¸­å¿ƒçš„æ—¶å€™ï¼Œå‘ç°å°†åº”ç”¨çš„é…ç½®ç§»åˆ°gitä¸Šï¼Œå¯åŠ¨åº”ç”¨åå‘ç°ï¼Œåœ¨Eurakaæ³¨å†Œä¸­å¿ƒä¸Šè¿™ä¸ªåº”ç”¨çš„çŠ¶æ€å§‹ç»ˆä¸ºUNKOWNï¼Œå¯æ˜¯è¿™ä¸ªåº”ç”¨æ˜¯å¯ä»¥æä¾›æœåŠ¡çš„ã€‚ä¸‹é¢æ˜¯åº”ç”¨çš„bootstrapçš„é…ç½®ï¼š","text":"ä»Šå¤©åœ¨ç ”ç©¶Spring Cloudçš„é…ç½®ä¸­å¿ƒçš„æ—¶å€™ï¼Œå‘ç°å°†åº”ç”¨çš„é…ç½®ç§»åˆ°gitä¸Šï¼Œå¯åŠ¨åº”ç”¨åå‘ç°ï¼Œåœ¨Eurakaæ³¨å†Œä¸­å¿ƒä¸Šè¿™ä¸ªåº”ç”¨çš„çŠ¶æ€å§‹ç»ˆä¸ºUNKOWNï¼Œå¯æ˜¯è¿™ä¸ªåº”ç”¨æ˜¯å¯ä»¥æä¾›æœåŠ¡çš„ã€‚ä¸‹é¢æ˜¯åº”ç”¨çš„bootstrapçš„é…ç½®ï¼š 12345678910111213141516171819202122232425262728293031spring: application: name: search-provider cloud: config: name: search-config profile: dev label: master discovery: enabled: true service-id: config-servereureka: client: fetch-registry: true register-with-eureka: true healthcheck: enabled: true service-url: defaultZone: http://xxxx:xxxx@xxx.ydstudio.net:xxx/eureka/ instance: #instance-idé»˜è®¤å€¼æ˜¯ä¸»æœºåï¼šåº”ç”¨åï¼šåº”ç”¨ç«¯å£ instance-id: $&#123;spring.application.name&#125;:$&#123;random.value&#125; #instance-id: $&#123;spring.cloud.client.ipAddress&#125;:$&#123;server.port&#125; instance-id: $&#123;spring.cloud.client.ipAddress&#125;:$&#123;spring.application.name&#125;:$&#123;server.port&#125; hostname: $&#123;spring.cloud.client.ipAddress&#125; #hostname: $&#123;spring.application.name&#125; # é»˜è®¤30sï¼Œè¡¨ç¤ºeureka clientå‘é€å¿ƒè·³ç»™serverç«¯çš„é¢‘ç‡ lease-renewal-interval-in-seconds: 15 # é»˜è®¤90sï¼Œè¡¨ç¤ºeureka serverè‡³ä¸Šä¸€æ¬¡æ”¶åˆ°clientçš„å¿ƒè·³ä¹‹åï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡å¿ƒè·³çš„è¶…æ—¶æ—¶é—´ï¼Œåœ¨è¿™ä¸ªæ—¶é—´å†…è‹¥æ²¡æ”¶åˆ°ä¸‹ä¸€æ¬¡å¿ƒè·³ï¼Œåˆ™å°†ç§»é™¤è¯¥instance lease-expiration-duration-in-seconds: 25 # å°†è‡ªå·±çš„ipæ˜¾ç¤ºåˆ°EuekaServerä¸Š prefer-ip-address: true æ—¥å¿—æ‰“å°åº”ç”¨çš„çŠ¶æ€ï¼š 1StatusChangeEvent [timestamp=1536481926709, current=UNKNOWN, previous=UP] è¿™äº›é…ç½®è‚¯å®šæ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå› ä¸ºè¿™äº›é…ç½®åœ¨æ²¡æœ‰æŒªåˆ°bootstrap.ymlä¸­ä¹‹å‰éƒ½æ˜¯å¯ä»¥æ­£å¸¸ä½¿ç”¨çš„ã€‚ç°åœ¨Eurekaæ³¨å†Œä¸­å¿ƒå´ä¸èƒ½æ£€æµ‹åˆ°åº”ç”¨çš„çŠ¶æ€ï¼Œè¿™æ ·è®©æˆ‘ç™¾æ€ä¸å¾—å…¶è§£ã€‚åæ¥æˆ‘åœ¨stackoverflowä¸Šæ‰¾åˆ°äº†ç­”æ¡ˆstackoverflowåœ°å€,é—®é¢˜åªæœ‰ä¸€ä¸ªç­”æ¡ˆï¼Œå…¶ä¸­é‡è¦å†…å®¹å¦‚ä¸‹ï¼š 1eureka.client.healthcheck.enabled=true should only be set in application.yml. Setting the value in bootstrap.yml will cause undesirable side effects like registering in eureka with an UNKNOWN status. çŸ¥é“è¿™ä¸€ç‚¹åæˆ‘å°†bootstrap.ymlä¸­çš„å†…å®¹ä¿®æ”¹å¦‚ä¸‹é¢ä¸€æ ·ï¼š 123456789101112131415161718spring: application: name: search-provider cloud: config: name: search-config profile: dev label: master #uri: http://localhost:9008 discovery: enabled: true service-id: config-servereureka: client: service-url: defaultZone: http://xxxx:xxxx@xxx.ydstudio.net:xxx/eureka/ åœ¨Eurekaæ³¨å†Œä¸­å¿ƒä¸­åº”ç”¨çš„çŠ¶æ€å°±æ˜¾ç¤ºæ­£å¸¸äº†ï¼","categories":[],"tags":[{"name":"spring cloud","slug":"spring-cloud","permalink":"https://ydstudios.gitee.io/tags/spring-cloud/"},{"name":"eureka","slug":"eureka","permalink":"https://ydstudios.gitee.io/tags/eureka/"}]},{"title":"Elastic Searchæœç´¢æ•°æ®Termsèšåˆè¿”å›çš„ä¸æ­£ç¡®çš„é—®é¢˜","slug":"Elastic-Searchæœç´¢æ•°æ®Termsèšåˆè¿”å›çš„ä¸æ­£ç¡®çš„é—®é¢˜","date":"2018-08-30T23:37:03.000Z","updated":"2020-10-24T03:13:01.000Z","comments":true,"path":"post/39992895.html","link":"","permalink":"https://ydstudios.gitee.io/post/39992895.html","excerpt":"é¡¹ç›®ä¸­ä½¿ç”¨Elastic Searchåšæœç´¢ï¼Œåœ¨èšåˆäº§å“çš„æ ‡ç­¾çš„æ—¶å€™ï¼Œæˆ‘å‘ç°æ ‡ç­¾çš„ç§ç±»æœ‰å¾ˆå¤šè¶…è¿‡äº†10ä¸ªï¼ˆè¿™ä¸€ç‚¹å¾ˆé‡è¦ï¼‰ï¼Œä½†æ˜¯èšåˆæ ‡ç­¾å‡ºæ¥çš„æ•°æ®åªæœ‰10ä¸ªï¼Œç¼ºå°‘äº†å¾ˆå¤šæ ‡ç­¾ï¼ŒæŸ¥è¯¢çš„è¯­å¥å¦‚ä¸‹ï¼š","text":"é¡¹ç›®ä¸­ä½¿ç”¨Elastic Searchåšæœç´¢ï¼Œåœ¨èšåˆäº§å“çš„æ ‡ç­¾çš„æ—¶å€™ï¼Œæˆ‘å‘ç°æ ‡ç­¾çš„ç§ç±»æœ‰å¾ˆå¤šè¶…è¿‡äº†10ä¸ªï¼ˆè¿™ä¸€ç‚¹å¾ˆé‡è¦ï¼‰ï¼Œä½†æ˜¯èšåˆæ ‡ç­¾å‡ºæ¥çš„æ•°æ®åªæœ‰10ä¸ªï¼Œç¼ºå°‘äº†å¾ˆå¤šæ ‡ç­¾ï¼ŒæŸ¥è¯¢çš„è¯­å¥å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829&#123; \"from\" : 0, \"size\" : 15, \"query\" : &#123; \"bool\" : &#123; \"must\" : [ &#123; \"terms\" : &#123; \"categoryId\" : [ 1046, 1045, 1044 ] &#125; &#125;, &#123; \"terms\" : &#123; \"tagList.id\" : [ 1063, 1138, 1115, 1142 ] &#125; &#125; ] &#125; &#125;, \"aggregations\" : &#123; \"categoryId\" : &#123; \"terms\" : &#123; \"field\" : \"categoryId\" &#125; &#125;, \"tagList.tagContent\" : &#123; \"terms\" : &#123; \"field\" : \"tagList.tagContent\" &#125; &#125; &#125;&#125; ç™¾æ€ä¸å¾—å…¶è§£ï¼Œçœ‹æ–‡æ¡£å‘ç°è‡ªå·±çš„æŸ¥è¯¢å’ŒTermsçš„èšåˆä½¿ç”¨éƒ½æ˜¯æ²¡æœ‰ä»»ä½•é—®é¢˜çš„ï¼Œä½†æ˜¯å‡ºæ¥çš„æ•°æ®ä¸ºä»€ä¹ˆä¼šå°‘å‘¢ï¼Ÿäºæ˜¯æ˜¨å¤©ä¸ŠåˆèŠ±äº†å°†è¿‘ä¸€ä¸ªå°æ—¶çš„æ—¶é—´æ‰æ‰¾åˆ°é—®é¢˜çš„æ‰€åœ¨ï¼Œä¸‹é¢æ˜¯æ–‡æ¡£ä¸Šå¯¹è¿”å›æ•°æ®çš„ä¸€ä¸ªè§£é‡Šï¼šBy default, the terms aggregation will return the buckets for the top ten terms ordered by the doc_count. One can change this default behaviour by setting the size parameter. SizeThe size parameter can be set to define how many term buckets should be returned out of the overall terms list. By default, the node coordinating the search process will request each shard to provide its own top size term buckets and once all shards respond, it will reduce the results to the final list that will then be returned to the client. This means that if the number of unique terms is greater than size, the returned list is slightly off and not accurate (it could be that the term counts are slightly off and it could even be that a term that should have been in the top size buckets was not returned). åŸæ¥Elastic Searchå¯¹æ•°æ®èšåˆé»˜è®¤è¿”å›10ä¸ªï¼Œæˆ‘èšåˆçš„æ•°æ®æœ¯è¯­æ¡¶è¶…è¿‡äº†10ä¸ªï¼Œå¯ä»¥è‡ªè¡Œè®¾ç½®sizeæ¥è¿”å›ä¸åŒæ•°é‡çš„æœ¯è¯­æ¡¶ã€‚äºæ˜¯ä¹ï¼ŒæŸ¥è¯¢çš„è¯­å¥ä¿®æ”¹æˆä¸‹é¢çš„æ ·å­å°±æˆåŠŸè¿”å›äº†æ‰€æœ‰çš„æ•°æ®ï¼š 12345678910111213141516171819202122232425262728293031&#123; \"from\" : 0, \"size\" : 15, \"query\" : &#123; \"bool\" : &#123; \"must\" : [ &#123; \"terms\" : &#123; \"categoryId\" : [ 1046, 1045, 1044 ] &#125; &#125;, &#123; \"terms\" : &#123; \"tagList.id\" : [ 1063, 1138, 1115, 1142 ] &#125; &#125; ] &#125; &#125;, \"aggregations\" : &#123; \"categoryId\" : &#123; \"terms\" : &#123; \"field\" : \"categoryId\", \"size\" : 100 &#125; &#125;, \"tagList.tagContent\" : &#123; \"terms\" : &#123; \"field\" : \"tagList.tagContent\", \"size\" : 100 &#125; &#125; &#125;&#125; å…¶å®æˆ‘è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨ä½¿ç”¨RangeèŒƒå›´èšåˆçš„æ—¶å€™ï¼Œå‘ç°èšåˆçš„æ•°æ®ä¸å‡†ç¡®ï¼Œå°±æ˜¯è¯´10-20æœ¬æ¥å°±30æ¡è®°å½•ï¼Œä½†æ˜¯èšåˆæ˜¾ç¤ºè¿™ä¸ªèŒƒå›´çš„æ•°æ®åªæœ‰10ä¸ªï¼Œè¿™ä¸ªé—®é¢˜æˆ‘æš‚æ—¶è¿˜æ²¡æœ‰æ‰¾åˆ°åŸå› ï¼Œæœ‰äººçŸ¥é“çš„è¯ï¼Œæˆ‘å¾ˆé«˜å…´æœ‰äººèƒ½å‘Šè¯‰æˆ‘ï¼ 2018/10/12æ›´æ–°ï¼šå¯¹äºä¸Šé¢çš„RangeèŒƒå›´èšåˆä¸æ­£ç¡®çš„åŸå› å·²ç»æ‰¾åˆ°ï¼Œå‘ç°è¿˜æ˜¯è‡ªå·±å¤ªè¿‡ç²—å¿ƒï¼Œäººå®¶æä¾›çš„å¼€å‘æ–‡æ¡£æ²¡æœ‰ä»”ç»†çš„çœ‹ï¼Œç»ˆäºæˆ‘åœ¨2018/10/11çš„æ—¶å€™é‡æ–°çœ‹äº†ä¸€ä¸‹Elasticsearch Reference 5.5 Â» Aggregations Â» Bucket Aggregations Â» Range Aggregation,æœ€å¼€å§‹çš„ä¸€æ®µè¯å°±æ˜¯é—®é¢˜çš„ç­”æ¡ˆï¼ 1234567891011121314151617181920/*A multi-bucket value source based aggregation that enables the user to define a set of ranges - each representing a bucket. During the aggregation process, the values extracted from each document will be checked against each bucket range and \"bucket\" the relevant/matching document. Note that this aggregation includes the from value and excludes the to value for each range.Example:*/&#123; \"aggs\" : &#123; \"price_ranges\" : &#123; \"range\" : &#123; \"field\" : \"price\", \"ranges\" : [ &#123; \"to\" : 50 &#125;, &#123; \"from\" : 50, \"to\" : 100 &#125;, &#123; \"from\" : 100 &#125; ] &#125; &#125; &#125;&#125; ä¸Šé¢çš„ç»Ÿè®¡çš„å«ä¹‰æ˜¯ï¼š ç»Ÿè®¡ä»·æ ¼å°äº50çš„æ€»æ•° ç»Ÿè®¡ä»·æ ¼å¤§äºç­‰äº50ï¼Œå°äº100çš„æ€»æ•° ç»Ÿè®¡ä»·æ ¼å¤§äºç­‰äº100çš„æ€»æ•° æ€»ä¹‹ï¼Œå°±æ˜¯ç»Ÿè®¡åŒ…å«ä¸‹é™ï¼Œä¸åŒ…å«ä¸Šé™ã€‚","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"},{"name":"elasticSearch","slug":"elasticSearch","permalink":"https://ydstudios.gitee.io/tags/elasticSearch/"}]},{"title":"IntelliJ Idea å¸¸ç”¨å¿«æ·é”®åˆ—è¡¨","slug":"IntelliJ-Idea-å¸¸ç”¨å¿«æ·é”®åˆ—è¡¨","date":"2018-08-28T23:34:44.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/fea71f82.html","link":"","permalink":"https://ydstudios.gitee.io/post/fea71f82.html","excerpt":"åŠ ç²—çš„æ˜¯æˆ‘å¸¸ç”¨çš„å¿«æ·é”®","text":"åŠ ç²—çš„æ˜¯æˆ‘å¸¸ç”¨çš„å¿«æ·é”® Ctrl+Shift + Enterï¼Œè¯­å¥å®Œæˆâ€œï¼â€ï¼Œå¦å®šå®Œæˆï¼Œè¾“å…¥è¡¨è¾¾å¼æ—¶æŒ‰ â€œï¼â€é”®Ctrl+Eï¼Œæœ€è¿‘çš„æ–‡ä»¶Ctrl+Shift+Eï¼Œæœ€è¿‘æ›´æ”¹çš„æ–‡ä»¶Shift+Clickï¼Œå¯ä»¥å…³é—­æ–‡ä»¶Ctrl+[ OR ]ï¼Œå¯ä»¥è·‘åˆ°å¤§æ‹¬å·çš„å¼€å¤´ä¸ç»“å°¾Ctrl+F12ï¼Œå¯ä»¥æ˜¾ç¤ºå½“å‰æ–‡ä»¶çš„ç»“æ„Ctrl+F7ï¼Œå¯ä»¥æŸ¥è¯¢å½“å‰å…ƒç´ åœ¨å½“å‰æ–‡ä»¶ä¸­çš„å¼•ç”¨ï¼Œç„¶åæŒ‰ F3 å¯ä»¥é€‰æ‹©Ctrl+Nï¼Œå¯ä»¥å¿«é€Ÿæ‰“å¼€ç±»Ctrl+Shift+Nï¼Œå¯ä»¥å¿«é€Ÿæ‰“å¼€æ–‡ä»¶Alt+Qï¼Œå¯ä»¥çœ‹åˆ°å½“å‰æ–¹æ³•çš„å£°æ˜Ctrl+Pï¼Œå¯ä»¥æ˜¾ç¤ºå‚æ•°ä¿¡æ¯Ctrl+Shift+Insertï¼Œå¯ä»¥é€‰æ‹©å‰ªè´´æ¿å†…å®¹å¹¶æ’å…¥Alt+Insertï¼Œå¯ä»¥ç”Ÿæˆæ„é€ å™¨/Getter/Setterç­‰Ctrl+Alt+Vï¼Œå¯ä»¥å¼•å…¥å˜é‡ã€‚ä¾‹å¦‚ï¼šnew String(); è‡ªåŠ¨å¯¼å…¥å˜é‡å®šä¹‰Ctrl+Alt+Tï¼Œå¯ä»¥æŠŠä»£ç åŒ…åœ¨ä¸€ä¸ªå—å†…ï¼Œä¾‹å¦‚ï¼štry/catchCtrl+Enterï¼Œå¯¼å…¥åŒ…ï¼Œè‡ªåŠ¨ä¿®æ­£Ctrl+Alt+Lï¼Œæ ¼å¼åŒ–ä»£ç Ctrl+Alt+Iï¼Œå°†é€‰ä¸­çš„ä»£ç è¿›è¡Œè‡ªåŠ¨ç¼©è¿›ç¼–æ’ï¼Œè¿™ä¸ªåŠŸèƒ½åœ¨ç¼–è¾‘ JSP æ–‡ä»¶æ—¶ä¹Ÿå¯ä»¥å·¥ä½œCtrl+Alt+Oï¼Œä¼˜åŒ–å¯¼å…¥çš„ç±»å’ŒåŒ…Ctrl+Rï¼Œæ›¿æ¢æ–‡æœ¬Ctrl+Fï¼ŒæŸ¥æ‰¾æ–‡æœ¬Ctrl+Shift+Spaceï¼Œè‡ªåŠ¨è¡¥å…¨ä»£ç Ctrl+ç©ºæ ¼ï¼Œä»£ç æç¤ºï¼ˆä¸ç³»ç»Ÿè¾“å…¥æ³•å¿«æ·é”®å†²çªï¼‰Ctrl+Shift+Alt+Nï¼ŒæŸ¥æ‰¾ç±»ä¸­çš„æ–¹æ³•æˆ–å˜é‡Alt+Shift+Cï¼Œæœ€è¿‘çš„æ›´æ”¹Alt+Shift+Up/Downï¼Œä¸Š/ä¸‹ç§»ä¸€è¡ŒShift+F6ï¼Œé‡æ„ - é‡å‘½åCtrl+Xï¼Œåˆ é™¤è¡ŒCtrl+Dï¼Œå¤åˆ¶è¡ŒCtrl+/æˆ–Ctrl+Shift+/ï¼Œæ³¨é‡Šï¼ˆ//æˆ–è€…//ï¼‰Ctrl+Jï¼Œè‡ªåŠ¨ä»£ç ï¼ˆä¾‹å¦‚ï¼šserrï¼‰Ctrl+Alt+Jï¼Œç”¨åŠ¨æ€æ¨¡æ¿ç¯ç»•Ctrl+Hï¼Œæ˜¾ç¤ºç±»ç»“æ„å›¾ï¼ˆç±»çš„ç»§æ‰¿å±‚æ¬¡ï¼‰**Ctrl+Qï¼Œæ˜¾ç¤ºæ³¨é‡Šæ–‡æ¡£Alt+F1ï¼ŒæŸ¥æ‰¾ä»£ç æ‰€åœ¨ä½ç½®Alt+1ï¼Œå¿«é€Ÿæ‰“å¼€æˆ–éšè—å·¥ç¨‹é¢æ¿Ctrl+Alt+left/rightï¼Œè¿”å›è‡³ä¸Šæ¬¡æµè§ˆçš„ä½ç½®Alt+left/rightï¼Œåˆ‡æ¢ä»£ç è§†å›¾Alt+Up/Downï¼Œåœ¨æ–¹æ³•é—´å¿«é€Ÿç§»åŠ¨å®šä½Ctrl+Shift+Up/Downï¼Œå‘ä¸Š/ä¸‹ç§»åŠ¨è¯­å¥F2 æˆ– Shift+F2ï¼Œé«˜äº®é”™è¯¯æˆ–è­¦å‘Šå¿«é€Ÿå®šä½Tabï¼Œä»£ç æ ‡ç­¾è¾“å…¥å®Œæˆåï¼ŒæŒ‰ Tabï¼Œç”Ÿæˆä»£ç Ctrl+Shift+F7ï¼Œé«˜äº®æ˜¾ç¤ºæ‰€æœ‰è¯¥æ–‡æœ¬ï¼ŒæŒ‰ Esc é«˜äº®æ¶ˆå¤±Alt+F3ï¼Œé€ä¸ªå¾€ä¸‹æŸ¥æ‰¾ç›¸åŒæ–‡æœ¬ï¼Œå¹¶é«˜äº®æ˜¾ç¤ºCtrl+Up/Downï¼Œå…‰æ ‡ä¸­è½¬åˆ°ç¬¬ä¸€è¡Œæˆ–æœ€åä¸€è¡Œä¸‹Ctrl+B/Ctrl+Clickï¼Œå¿«é€Ÿæ‰“å¼€å…‰æ ‡å¤„çš„ç±»æˆ–æ–¹æ³•ï¼ˆè·³è½¬åˆ°å®šä¹‰å¤„ï¼‰Ctrl+Alt+Bï¼Œè·³è½¬åˆ°æ–¹æ³•å®ç°å¤„Ctrl+Shift+Backspaceï¼Œè·³è½¬åˆ°ä¸Šæ¬¡ç¼–è¾‘çš„åœ°æ–¹Ctrl+Oï¼Œé‡å†™æ–¹æ³•Ctrl+Alt+Spaceï¼Œç±»åè‡ªåŠ¨å®ŒæˆCtrl+Alt+Up/Downï¼Œå¿«é€Ÿè·³è½¬æœç´¢ç»“æœCtrl+Shift+Jï¼Œæ•´åˆä¸¤è¡ŒAlt+F8ï¼Œè®¡ç®—å˜é‡å€¼Ctrl+Shift+Vï¼Œå¯ä»¥å°†æœ€è¿‘ä½¿ç”¨çš„å‰ªè´´æ¿å†…å®¹é€‰æ‹©æ’å…¥åˆ°æ–‡æœ¬Ctrl+Alt+Shift+Vï¼Œç®€å•ç²˜è´´Shift+Escï¼Œä¸ä»…å¯ä»¥æŠŠç„¦ç‚¹ç§»åˆ°ç¼–è¾‘å™¨ä¸Šï¼Œè€Œä¸”è¿˜å¯ä»¥éšè—å½“å‰ï¼ˆæˆ–æœ€åæ´»åŠ¨çš„ï¼‰å·¥å…·çª—å£F12ï¼ŒæŠŠç„¦ç‚¹ä»ç¼–è¾‘å™¨ç§»åˆ°æœ€è¿‘ä½¿ç”¨çš„å·¥å…·çª—å£Shift+F1ï¼Œè¦æ‰“å¼€ç¼–è¾‘å™¨å…‰æ ‡å­—ç¬¦å¤„ä½¿ç”¨çš„ç±»æˆ–è€…æ–¹æ³• Java æ–‡æ¡£çš„æµè§ˆå™¨Ctrl+Wï¼Œå¯ä»¥é€‰æ‹©å•è¯ç»§è€Œè¯­å¥ç»§è€Œè¡Œç»§è€Œå‡½æ•°Ctrl+Shift+Wï¼Œå–æ¶ˆé€‰æ‹©å…‰æ ‡æ‰€åœ¨è¯Alt+F7ï¼ŒæŸ¥æ‰¾æ•´ä¸ªå·¥ç¨‹ä¸­ä½¿ç”¨åœ°æŸä¸€ä¸ªç±»ã€æ–¹æ³•æˆ–è€…å˜é‡çš„ä½ç½®Ctrl+Iï¼Œå®ç°æ–¹æ³•Ctrl+Shift+Uï¼Œå¤§å°å†™è½¬åŒ–Ctrl+Yï¼Œåˆ é™¤å½“å‰è¡ŒShift+Enterï¼Œå‘ä¸‹æ’å…¥æ–°è¡Œpsvm/soutï¼Œmain/System.out.println(); Ctrl+Jï¼ŒæŸ¥çœ‹æ›´å¤šCtrl+Shift+Fï¼Œå…¨å±€æŸ¥æ‰¾Ctrl+Fï¼ŒæŸ¥æ‰¾/Shift+F3ï¼Œå‘ä¸ŠæŸ¥æ‰¾/F3ï¼Œå‘ä¸‹æŸ¥æ‰¾Ctrl+Shift+Sï¼Œé«˜çº§æœç´¢Ctrl+Uï¼Œè½¬åˆ°çˆ¶ç±»Ctrl+Alt+Sï¼Œæ‰“å¼€è®¾ç½®å¯¹è¯æ¡†Alt+Shift+Inertï¼Œå¼€å¯/å…³é—­åˆ—é€‰æ‹©æ¨¡å¼Ctrl+Alt+Shift+Sï¼Œæ‰“å¼€å½“å‰é¡¹ç›®/æ¨¡å—å±æ€§Ctrl+Gï¼Œå®šä½è¡ŒAlt+Homeï¼Œè·³è½¬åˆ°å¯¼èˆªæ Ctrl+Enterï¼Œä¸Šæ’ä¸€è¡ŒCtrl+Backspaceï¼ŒæŒ‰å•è¯åˆ é™¤Ctrl+â€+/-â€œï¼Œå½“å‰æ–¹æ³•å±•å¼€ã€æŠ˜å Ctrl+Shift+â€+/-â€œï¼Œå…¨éƒ¨å±•å¼€ã€æŠ˜å ã€è°ƒè¯•éƒ¨åˆ†ã€ç¼–è¯‘ã€‘Ctrl+F2ï¼Œåœæ­¢Alt+Shift+F9ï¼Œé€‰æ‹© DebugAlt+Shift+F10ï¼Œé€‰æ‹© RunCtrl+Shift+F9ï¼Œç¼–è¯‘Ctrl+Shift+F10ï¼Œè¿è¡ŒCtrl+Shift+F8ï¼ŒæŸ¥çœ‹æ–­ç‚¹F8ï¼Œæ­¥è¿‡F7ï¼Œæ­¥å…¥Shift+F7ï¼Œæ™ºèƒ½æ­¥å…¥Shift+F8ï¼Œæ­¥å‡ºAlt+Shift+F8ï¼Œå¼ºåˆ¶æ­¥è¿‡Alt+Shift+F7ï¼Œå¼ºåˆ¶æ­¥å…¥Alt+F9ï¼Œè¿è¡Œè‡³å…‰æ ‡å¤„Ctrl+Alt+F9ï¼Œå¼ºåˆ¶è¿è¡Œè‡³å…‰æ ‡å¤„F9ï¼Œæ¢å¤ç¨‹åºAlt+F10ï¼Œå®šä½åˆ°æ–­ç‚¹Ctrl+F8ï¼Œåˆ‡æ¢è¡Œæ–­ç‚¹Ctrl+F9ï¼Œç”Ÿæˆé¡¹ç›®Alt+1ï¼Œé¡¹ç›®Alt+2ï¼Œæ”¶è—Alt+6ï¼ŒTODOAlt+7ï¼Œç»“æ„Ctrl+Shift+Cï¼Œå¤åˆ¶è·¯å¾„Ctrl+Alt+Shift+Cï¼Œå¤åˆ¶å¼•ç”¨ï¼Œå¿…é¡»é€‰æ‹©ç±»åCtrl+Alt+Yï¼ŒåŒæ­¥Ctrl+ï¼Œå¿«é€Ÿåˆ‡æ¢æ–¹æ¡ˆï¼ˆç•Œé¢å¤–è§‚ã€ä»£ç é£æ ¼ã€å¿«æ·é”®æ˜ å°„ç­‰èœå•ï¼‰Shift+F12ï¼Œè¿˜åŸé»˜è®¤å¸ƒå±€Ctrl+Shift+F12ï¼Œéšè—/æ¢å¤æ‰€æœ‰çª—å£Ctrl+F4ï¼Œå…³é—­Ctrl+Shift+F4ï¼Œå…³é—­æ´»åŠ¨é€‰é¡¹å¡Ctrl+Tabï¼Œè½¬åˆ°ä¸‹ä¸€ä¸ªæ‹†åˆ†å™¨Ctrl+Shift+Tabï¼Œè½¬åˆ°ä¸Šä¸€ä¸ªæ‹†åˆ†å™¨ã€é‡æ„ã€‘Ctrl+Alt+Shift+Tï¼Œå¼¹å‡ºé‡æ„èœå•Shift+F6ï¼Œé‡å‘½åF6ï¼Œç§»åŠ¨F5ï¼Œå¤åˆ¶Alt+Deleteï¼Œå®‰å…¨åˆ é™¤Ctrl+Alt+Nï¼Œå†…è”ã€æŸ¥æ‰¾ã€‘Ctrl+Fï¼ŒæŸ¥æ‰¾Ctrl+Rï¼Œæ›¿æ¢F3ï¼ŒæŸ¥æ‰¾ä¸‹ä¸€ä¸ªShift+F3ï¼ŒæŸ¥æ‰¾ä¸Šä¸€ä¸ªCtrl+Shift+Fï¼Œåœ¨è·¯å¾„ä¸­æŸ¥æ‰¾Ctrl+Shift+Rï¼Œåœ¨è·¯å¾„ä¸­æ›¿æ¢Ctrl+Shift+Sï¼Œæœç´¢ç»“æ„Ctrl+Shift+Mï¼Œæ›¿æ¢ç»“æ„Alt+F7ï¼ŒæŸ¥æ‰¾ç”¨æ³•Ctrl+Alt+F7ï¼Œæ˜¾ç¤ºç”¨æ³•Ctrl+F7ï¼Œåœ¨æ–‡ä»¶ä¸­æŸ¥æ‰¾ç”¨æ³•Ctrl+Shift+F7ï¼Œåœ¨æ–‡ä»¶ä¸­é«˜äº®æ˜¾ç¤ºç”¨æ³•ã€VCSã€‘Alt+ï¼ŒVCS æ“ä½œèœå•Ctrl+Kï¼Œæäº¤æ›´æ”¹Ctrl+Tï¼Œæ›´æ–°é¡¹ç›®Ctrl+Alt+Shift+Dï¼Œæ˜¾ç¤ºå˜åŒ–","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"},{"name":"ide","slug":"ide","permalink":"https://ydstudios.gitee.io/tags/ide/"}]},{"title":"BigDecimalè¿ç®—å‡ºç°Non-terminating decimal expansion; no exact representable decimal result","slug":"BigDecimalè¿ç®—å‡ºç°Non-terminating-decimal-expansion-no-exact-representable-decimal-result","date":"2018-08-24T23:28:55.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/77a90911.html","link":"","permalink":"https://ydstudios.gitee.io/post/77a90911.html","excerpt":"æˆ‘ä»¬éƒ½çŸ¥é“Javaæä¾›äº†ä¸¤ä¸ªé«˜ç²¾åº¦è®¡ç®—çš„ç±»:BigIntegerå’ŒBigDeciamlã€‚è™½ç„¶å®ƒä»¬å¤§ä½“ä¸Šå±äºâ€œåŒ…è£…å™¨ç±»â€çš„èŒƒç•´ï¼Œä½†ä¸¤è€…éƒ½æ²¡æœ‰å¯¹åº”çš„åŸºæœ¬ç±»å‹ã€‚BigDeciamlæ”¯æŒä»»æ„ç²¾åº¦çš„å®šç‚¹æ•°ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ç”¨å®ƒè¿›è¡Œç²¾ç¡®çš„è´§å¸è®¡ç®—ã€‚ï¼ˆä»¥ä¸Šæ‘˜è‡ªJavaç¼–ç¨‹æ€æƒ³ç¬¬4ç‰ˆï¼‰","text":"æˆ‘ä»¬éƒ½çŸ¥é“Javaæä¾›äº†ä¸¤ä¸ªé«˜ç²¾åº¦è®¡ç®—çš„ç±»:BigIntegerå’ŒBigDeciamlã€‚è™½ç„¶å®ƒä»¬å¤§ä½“ä¸Šå±äºâ€œåŒ…è£…å™¨ç±»â€çš„èŒƒç•´ï¼Œä½†ä¸¤è€…éƒ½æ²¡æœ‰å¯¹åº”çš„åŸºæœ¬ç±»å‹ã€‚BigDeciamlæ”¯æŒä»»æ„ç²¾åº¦çš„å®šç‚¹æ•°ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ç”¨å®ƒè¿›è¡Œç²¾ç¡®çš„è´§å¸è®¡ç®—ã€‚ï¼ˆä»¥ä¸Šæ‘˜è‡ªJavaç¼–ç¨‹æ€æƒ³ç¬¬4ç‰ˆï¼‰ æœ€è¿‘çš„é¡¹ç›®ä½¿ç”¨BigDeciamlï¼Œä»£ç å¦‚ä¸‹: 123456789101112131415161718/*** @param originPrice åŸå§‹è´§å¸é‡‘é¢* @param betweenCurrencyRate åŸå§‹è´§å¸å…‘æ¢ä¸­é—´è´§å¸çš„æ±‡ç‡* @param toCurrencyRate ä¸­é—´è´§å¸å…‘æ¢ç›®æ ‡è´§å¸çš„æ±‡ç‡* @return java.math.BigDecimal*/public static BigDecimal rate(BigDecimal originPrice,BigDecimal betweenCurrencyRate,BigDecimal toCurrencyRate)&#123; return originPrice.multiply(betweenCurrencyRate).divide(toCurrencyRate);&#125;BigDecimal chaoIn = exchangeRate.getChaoIn();BigDecimal cNYChaoIn = exchangeRateCNY.getChaoIn();adultPrice = RateExchangeUtil.rate(adultPrice,chaoIn,cNYChaoIn);childPrice = RateExchangeUtil.rate(childRetail.multiply(new BigDecimal(childNum)),chaoIn,cNYChaoIn);// è®¡ç®—é…’åº—é‡Œé¢æ€»ä»·hotelTotalPrice = hotelTotalPrice.add(childPrice).add(adultPrice); åœ¨ä½¿ç”¨BigDecimalåšè¿ç®—çš„æ—¶å€™ï¼Œå‡ºç°äº†ä¸‹é¢çš„å¼‚å¸¸ï¼š 1Non-terminating decimal expansion; no exact representable decimal result. åæ¥é€šè¿‡æœç´¢å¾—çŸ¥ï¼Œé€šè¿‡BigDecimalçš„divideæ–¹æ³•è¿›è¡Œé™¤æ³•æ—¶å½“ä¸æ•´é™¤ï¼Œå‡ºç°æ— é™å¾ªç¯å°æ•°æ—¶ï¼Œå°±ä¼šæŠ›å‡ºä¸Šé¢çš„å¼‚å¸¸ã€‚æˆ‘ä»¬åº”è¯¥ä½¿ç”¨divideçš„é‡è½½æ–¹æ³•ï¼š 123456789101112131415161718192021BigDecimal.divide(BigDecimal divisor, int scale, RoundingMode roundingMode) ;scaleä¸ºå°æ•°ä½æ•°ï¼›roundingModeä¸ºå°æ•°æ¨¡å¼ï¼›ROUND_CEILINGå¦‚æœ BigDecimal æ˜¯æ­£çš„ï¼Œåˆ™åš ROUND_UP æ“ä½œï¼›å¦‚æœä¸ºè´Ÿï¼Œåˆ™åš ROUND_DOWN æ“ä½œã€‚ROUND_DOWNä»ä¸åœ¨èˆå¼ƒ(å³æˆªæ–­)çš„å°æ•°ä¹‹å‰å¢åŠ æ•°å­—ã€‚ROUND_FLOORå¦‚æœ BigDecimal ä¸ºæ­£ï¼Œåˆ™ä½œ ROUND_UP ï¼›å¦‚æœä¸ºè´Ÿï¼Œåˆ™ä½œ ROUND_DOWN ã€‚ROUND_HALF_DOWNè‹¥èˆå¼ƒéƒ¨åˆ†&gt; .5ï¼Œåˆ™ä½œ ROUND_UPï¼›å¦åˆ™ï¼Œä½œ ROUND_DOWN ã€‚ROUND_HALF_EVENå¦‚æœèˆå¼ƒéƒ¨åˆ†å·¦è¾¹çš„æ•°å­—ä¸ºå¥‡æ•°ï¼Œåˆ™ä½œ ROUND_HALF_UP ï¼›å¦‚æœå®ƒä¸ºå¶æ•°ï¼Œåˆ™ä½œ ROUND_HALF_DOWN ã€‚ROUND_HALF_UPè‹¥èˆå¼ƒéƒ¨åˆ†&gt;=.5ï¼Œåˆ™ä½œ ROUND_UP ï¼›å¦åˆ™ï¼Œä½œ ROUND_DOWN ã€‚ROUND_UNNECESSARYè¯¥â€œä¼ªèˆå…¥æ¨¡å¼â€å®é™…æ˜¯æŒ‡æ˜æ‰€è¦æ±‚çš„æ“ä½œå¿…é¡»æ˜¯ç²¾ç¡®çš„ï¼Œï¼Œå› æ­¤ä¸éœ€è¦èˆå…¥æ“ä½œã€‚ROUND_UPæ€»æ˜¯åœ¨é 0 èˆå¼ƒå°æ•°(å³æˆªæ–­)ä¹‹å‰å¢åŠ æ•°å­—ã€‚ æœ€åä¿®æ­£rateæ–¹æ³•ä¸­çš„é—®é¢˜ï¼Œä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617/*** è´§å¸è½¬æ¢ ç¾å…ƒè½¬åŠ å…ƒï¼Œäººæ°‘å¸ä½œä¸ºä¸­é—´è´§å¸* ç¾å…ƒ * ç¾å…ƒå…‘æ¢äººæ°‘å¸çš„æ±‡ç‡ / äººæ°‘å¸å…‘æ¢åŠ å…ƒçš„æ±‡ç‡* å‡ºç°é—®é¢˜ Non-terminating decimal expansion; no exact representable decimal result.* è¦æŒ‡å®š divideçš„åä¸¤ä¸ªå‚æ•°* JAVAä¸­å¦‚æœç”¨BigDecimalåšé™¤æ³•çš„æ—¶å€™ä¸€å®šè¦åœ¨divideæ–¹æ³•ä¸­ä¼ é€’scaleå‚æ•°ï¼Œ* å®šä¹‰ç²¾ç¡®åˆ°å°æ•°ç‚¹åå‡ ä½ï¼Œå¦åˆ™åœ¨ä¸æ•´é™¤çš„æƒ…å†µä¸‹ï¼Œç»“æœæ˜¯æ— é™å¾ªç¯å°æ•°æ—¶ï¼Œå°±ä¼šæŠ›å‡ºä»¥ä¸Šå¼‚å¸¸ã€‚** @param originPrice åŸå§‹è´§å¸é‡‘é¢* @param betweenCurrencyRate åŸå§‹è´§å¸å…‘æ¢ä¸­é—´è´§å¸çš„æ±‡ç‡* @param toCurrencyRate ä¸­é—´è´§å¸å…‘æ¢ç›®æ ‡è´§å¸çš„æ±‡ç‡* @return java.math.BigDecimal*/public static BigDecimal rate(BigDecimal originPrice,BigDecimal betweenCurrencyRate,BigDecimal toCurrencyRate)&#123; return originPrice.multiply(betweenCurrencyRate).divide(toCurrencyRate,4,BigDecimal.ROUND_HALF_UP);&#125;","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"},{"name":"BigDecimal","slug":"BigDecimal","permalink":"https://ydstudios.gitee.io/tags/BigDecimal/"}]},{"title":"Nginxå®ç°åå‘ä»£ç† Node.js","slug":"Nginxå®ç°åå‘ä»£ç†-Node-js","date":"2018-08-07T23:25:53.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/45183e9d.html","link":"","permalink":"https://ydstudios.gitee.io/post/45183e9d.html","excerpt":"å…¬å¸æœ‰é¡¹ç›®å‰ç«¯æ˜¯ç”¨node.jsè¿›è¡ŒæœåŠ¡å™¨æ¸²æŸ“ï¼Œç„¶åå†è¿”å›ç»™æµè§ˆå™¨ï¼Œè¿›è€Œè§£å†³å•é¡µé¢çš„SEOé—®é¢˜ã€‚é¡¹ç›®éƒ¨ç½²çš„æ—¶å€™ï¼Œä½¿ç”¨Nginxåå‘ä»£ç†Node.jsã€‚å…·ä½“çš„æ­¥éª¤å¦‚ä¸‹ï¼š","text":"å…¬å¸æœ‰é¡¹ç›®å‰ç«¯æ˜¯ç”¨node.jsè¿›è¡ŒæœåŠ¡å™¨æ¸²æŸ“ï¼Œç„¶åå†è¿”å›ç»™æµè§ˆå™¨ï¼Œè¿›è€Œè§£å†³å•é¡µé¢çš„SEOé—®é¢˜ã€‚é¡¹ç›®éƒ¨ç½²çš„æ—¶å€™ï¼Œä½¿ç”¨Nginxåå‘ä»£ç†Node.jsã€‚å…·ä½“çš„æ­¥éª¤å¦‚ä¸‹ï¼š ï¼ˆNginxã€Node.jsçš„å®‰è£…å’ŒåŸºæœ¬é…ç½®ç›´æ¥è·³è¿‡ï¼‰ é¦–å…ˆæˆ‘ä»¬è¦åœ¨nginx.cnfæ–‡ä»¶ä¸­çš„httpèŠ‚ç‚¹æ‰“å¼€ä¸‹é¢çš„é…ç½®ï¼š 12345678910111213141516171819http &#123; log_format main '$remote_addr - $remote_user [$time_local] \"$request\" ' '$status $body_bytes_sent \"$http_referer\" ' '\"$http_user_agent\" \"$http_x_forwarded_for\"'; access_log /var/log/nginx/access.log main; sendfile on; tcp_nopush on; tcp_nodelay on; keepalive_timeout 65; types_hash_max_size 2048; include /etc/nginx/mime.types; default_type application/octet-stream; # æ‰“å¼€è¿™ä¸€è¡Œçš„é…ç½® include /etc/nginx/conf.d/*.conf;&#125; ç„¶åæ¯ä¸ªåŸŸåçš„é…ç½®æ–‡ä»¶å°±æ”¾åˆ°è¿™ä¸ªç›®å½•/etc/nginx/conf.d/ä¸‹ï¼Œæ–‡ä»¶åç¼€ä»¥confç»“æŸã€‚ ç¬¬ä¸€ç§æ–¹å¼ï¼Œè¿™ç§ç®€å•ï¼š 12345678910111213141516171819202122232425262728293031323334server &#123; listen 80 ; server_name localhost; root /xxx/xxx/hxxydexx/; #set $my_server_name $scheme://$server_name; #if ( $my_server_name != https://$server_name ) &#123; # rewrite ^ https://$server_name$request_uri? permanent; #&#125; error_log /var/log/nginx/hyde_error.log error; access_log /var/log/nginx/hyde_accss.log main; location / &#123; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header Host $http_host; proxy_set_header X-Nginx-Proxy true; proxy_http_version 1.1; proxy_set_header Connection &quot;&quot;; # ä¸éœ€è¦è€ƒè™‘åˆ°è´Ÿè½½çš„ï¼Œå°±æ— éœ€é…ç½®upstreamèŠ‚ç‚¹ã€‚ proxy_pass http://127.0.0.1:3000; &#125; error_page 404 /404.html; location = /xxx/xxx/40x.html &#123; &#125; error_page 500 502 503 504 /50x.html; location = /xxx/xxx/50x.html &#123; &#125;&#125; 2.ç¬¬äºŒç§æ–¹å¼ï¼Œè€ƒè™‘åˆ°è´Ÿè½½ 12345678910111213141516171819202122232425262728293031323334353637upstream node &#123; server 127.0.0.1:3000; &#125;server &#123; listen 80 ; server_name localhost; root /xxx/xxx/hxxydexx/; #set $my_server_name $scheme://$server_name; #if ( $my_server_name != https://$server_name ) &#123; # rewrite ^ https://$server_name$request_uri? permanent; #&#125; error_log /var/log/nginx/hyde_error.log error; access_log /var/log/nginx/hyde_accss.log main; location / &#123; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header Host $http_host; proxy_set_header X-Nginx-Proxy true; proxy_http_version 1.1; proxy_set_header Connection \"\"; # é…ç½®upstreamèŠ‚ç‚¹ proxy_pass http://node; &#125; error_page 404 /404.html; location = /xxx/xxx/40x.html &#123; &#125; error_page 500 502 503 504 /50x.html; location = /xxx/xxx/50x.html &#123; &#125;&#125; ç„¶åé‡å¯æˆ–è€…é‡æ–°è½½å…¥nginxçš„é…ç½®æ–‡ä»¶å³å¯ã€‚å‘½ä»¤å¦‚ä¸‹ï¼š 12345678#æ£€æŸ¥nginxé…ç½®æ–‡ä»¶ä¸­è¯­æ³•æ˜¯å¦æ­£ç¡®nginx -t#é‡å¯nginxservice nginx restart#é‡è½½é…ç½®æ–‡ä»¶nginx -s reload æ³¨æ„é—®é¢˜ï¼šä¸Šé¢å¯èƒ½ä¼šå‡ºç°ä¸‹é¢çš„é—®é¢˜ï¼š 1234567891011121314events.js:72 throw er; // Unhandled 'error' event ^Error: listen EADDRINUSE at errnoException (net.js:884:11) at Server._listen2 (net.js:1022:14) at listen (net.js:1044:10) at Server.listen (net.js:1110:5) at Object.&lt;anonymous&gt; (folderName/app.js:33:24) at Module._compile (module.js:456:26) at Object.Module._extensions..js (module.js:474:10) at Module.load (module.js:356:32) at Function.Module._load (module.js:312:12) at Function.Module.runMain (module.js:497:10) è¿™ä¸ªå…¶å®æ˜¯Node.jsæœåŠ¡å¤šå¼€ç«¯å£è¢«å ç”¨å¯¼è‡´çš„æŠ¥é”™ï¼Œå‡ºç°è¿™ç§é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨Node.jsé¡¹ç›®ç®¡ç†å·¥å…·pm2ï¼Œæˆ–è€…ä½¿ç”¨netstat -anopè¿›è¡ŒæŸ¥çœ‹ç«¯å£è¢«é‚£ä¸ªè¿›ç¨‹å ç”¨ï¼Œç„¶åæ€æ‰é‡å¯æœåŠ¡ï¼ é™„ä¸ŠNginxçš„è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼š è½®è¯¢ï¼ˆé»˜è®¤ï¼‰æ¯ä¸ªè¯·æ±‚æŒ‰æ—¶é—´é¡ºåºé€ä¸€åˆ†é…åˆ°ä¸åŒçš„åç«¯æœåŠ¡å™¨ï¼Œå¦‚æœåç«¯æœåŠ¡å™¨downæ‰ï¼Œèƒ½è‡ªåŠ¨å‰”é™¤ã€‚ 1234upstream backserver &#123; server 192.168.0.14; server 192.168.0.15; &#125; æŒ‡å®šæƒé‡æŒ‡å®šè½®è¯¢å‡ ç‡ï¼Œweightå’Œè®¿é—®æ¯”ç‡æˆæ­£æ¯”ï¼Œç”¨äºåç«¯æœåŠ¡å™¨æ€§èƒ½ä¸å‡çš„æƒ…å†µã€‚ 1234upstream backserver &#123; server 192.168.0.14 weight=10; server 192.168.0.15 weight=10; &#125; IPç»‘å®š ip_hashæ¯ä¸ªè¯·æ±‚æŒ‰è®¿é—®ipçš„hashç»“æœåˆ†é…ï¼Œè¿™æ ·æ¯ä¸ªè®¿å®¢å›ºå®šè®¿é—®ä¸€ä¸ªåç«¯æœåŠ¡å™¨ï¼Œå¯ä»¥è§£å†³sessionçš„é—®é¢˜ã€‚ 12345678910111213141516171819202122232425262728upstream backserver &#123; ip_hash; server 192.168.0.14:88; server 192.168.0.15:80; &#125; ``` - fairï¼ˆç¬¬ä¸‰æ–¹ï¼‰æŒ‰åç«¯æœåŠ¡å™¨çš„å“åº”æ—¶é—´æ¥åˆ†é…è¯·æ±‚ï¼Œå“åº”æ—¶é—´çŸ­çš„ä¼˜å…ˆåˆ†é…ã€‚```bashupstream backserver &#123; server 192.168.0.14:88; server 192.168.0.15:80; fair; &#125; ``` - url_hashï¼ˆç¬¬ä¸‰æ–¹ï¼‰æŒ‰è®¿é—®urlçš„hashç»“æœæ¥åˆ†é…è¯·æ±‚ï¼Œä½¿æ¯ä¸ªurlå®šå‘åˆ°åŒä¸€ä¸ªåç«¯æœåŠ¡å™¨ï¼Œåç«¯æœåŠ¡å™¨ä¸ºç¼“å­˜æ—¶æ¯”è¾ƒæœ‰æ•ˆã€‚ ```bashupstream backserver &#123; server squid1:3128; server squid2:3128; hash $request_uri; hash_method crc32; &#125;","categories":[],"tags":[{"name":"nginx","slug":"nginx","permalink":"https://ydstudios.gitee.io/tags/nginx/"},{"name":"proxy","slug":"proxy","permalink":"https://ydstudios.gitee.io/tags/proxy/"}]},{"title":"Javaå­¦ä¹ ç³»åˆ—æ–‡ç« ç¬¬ä¹ç¯‡ï¼šJavaä¸­æ³›å‹çš„å­¦ä¹ ","slug":"Javaå­¦ä¹ ç³»åˆ—æ–‡ç« ç¬¬ä¹ç¯‡ï¼šJavaä¸­æ³›å‹çš„å­¦ä¹ ","date":"2018-08-04T23:03:24.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/d9ad2c86.html","link":"","permalink":"https://ydstudios.gitee.io/post/d9ad2c86.html","excerpt":"ä»€ä¹ˆæ˜¯æ³›å‹Java æ³›å‹ï¼ˆgenericsï¼‰æ˜¯ JDK5 ä¸­å¼•å…¥çš„ä¸€ä¸ªæ–°ç‰¹æ€§, æ³›å‹æä¾›äº†ç¼–è¯‘æ—¶ç±»å‹å®‰å…¨æ£€æµ‹æœºåˆ¶ï¼Œè¯¥æœºåˆ¶å…è®¸ç¨‹åºå‘˜åœ¨ç¼–è¯‘æ—¶æ£€æµ‹åˆ°éæ³•çš„ç±»å‹ã€‚æ³›å‹çš„æœ¬è´¨æ˜¯å‚æ•°åŒ–ç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¯´æ‰€æ“ä½œçš„æ•°æ®ç±»å‹è¢«æŒ‡å®šä¸ºä¸€ä¸ªå‚æ•°ã€‚(PHPå°±ä¸éœ€è¦æ³›å‹ï¼Œå“ˆå“ˆ)","text":"ä»€ä¹ˆæ˜¯æ³›å‹Java æ³›å‹ï¼ˆgenericsï¼‰æ˜¯ JDK5 ä¸­å¼•å…¥çš„ä¸€ä¸ªæ–°ç‰¹æ€§, æ³›å‹æä¾›äº†ç¼–è¯‘æ—¶ç±»å‹å®‰å…¨æ£€æµ‹æœºåˆ¶ï¼Œè¯¥æœºåˆ¶å…è®¸ç¨‹åºå‘˜åœ¨ç¼–è¯‘æ—¶æ£€æµ‹åˆ°éæ³•çš„ç±»å‹ã€‚æ³›å‹çš„æœ¬è´¨æ˜¯å‚æ•°åŒ–ç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¯´æ‰€æ“ä½œçš„æ•°æ®ç±»å‹è¢«æŒ‡å®šä¸ºä¸€ä¸ªå‚æ•°ã€‚(PHPå°±ä¸éœ€è¦æ³›å‹ï¼Œå“ˆå“ˆ) ä¸‹é¢æˆ‘ä»¬çœ‹ä¸€é“å…³äºJavaæ³›å‹çš„ç»å…¸æµ‹è¯•é¢˜ï¼š 1234List&lt;String&gt; list1 = new ArrayList&lt;String&gt;();List&lt;Integer&gt; list2 = new ArrayList&lt;Integer&gt;();System.out.println(list1.getClass() == list2.getClass()); ä¸Šé¢ä»£ç æœ€ç»ˆç»“æœè¾“å‡ºçš„æ˜¯ä»€ä¹ˆï¼Ÿä¸äº†è§£æ³›å‹çš„å’Œå¾ˆç†Ÿæ‚‰æ³›å‹çš„åŒå­¦åº”è¯¥èƒ½å¤Ÿç­”å‡ºæ¥ï¼Œè€Œå¯¹æ³›å‹æœ‰æ‰€äº†è§£ï¼Œä½†æ˜¯äº†è§£ä¸æ·±å…¥çš„åŒå­¦å¯èƒ½ä¼šç­”é”™ã€‚ æ­£ç¡®ç­”æ¡ˆæ˜¯ trueã€‚ ä¸Šé¢æåˆ°äº†æ³›å‹çš„æœ¬è´¨æ˜¯ç±»å‹å‚æ•°åŒ–ï¼Œå¦‚ä½•è§£é‡Šç±»å‹å‚æ•°åŒ–å‘¢ï¼Ÿ 123456789101112public class Cache &#123; Object value; public Object getValue() &#123; return value; &#125; public void setValue(Object value) &#123; this.value = value; &#125;&#125; è¿™æ ·çš„ Cache æ˜¯èƒ½å¤Ÿå­˜å–ä»»ä½•ç±»å‹çš„å€¼ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™ä¼šæœ‰ç‚¹éº»çƒ¦ã€‚æˆ‘ä»¬è¦è·å–çœŸæ­£çš„ç±»å‹ï¼Œå°±è¦è¿›è¡Œç±»å‹çš„å¼ºåˆ¶è½¬æ¢äº†ã€‚ 12345Cache cache = new Cache();cache.setValue(134);int value = (int) cache.getValue();cache.setValue(\"hello\");String value1 = (String) cache.getValue(); è¿™æ ·çš„ç¼–ç¨‹çœŸçš„æ˜¯å¤ªéº»çƒ¦äº†ï¼Œä¸‡ä¸€å¿˜è®°äº†å­˜æ”¾å˜é‡çš„ç±»å‹ï¼Œç¨‹åºåœ¨è¿è¡Œçš„æ—¶å€™å°±ä¼šæŠ¥ç±»å‹è½¬æ¢é”™è¯¯ã€‚äºæ˜¯åœ¨JDK5 ä¸­å¼•ç”¨çš„æ³›å‹ç»™æˆ‘ä»¬å¸¦æ¥äº†å¦ä¸€ç•ªç¼–ç¨‹ä½“éªŒã€‚ 123456789101112public class Cache&lt;T&gt; &#123; T value; public Object getValue() &#123; return value; &#125; public void setValue(T value) &#123; this.value = value; &#125;&#125; è¿™å°±æ˜¯æ³›å‹ï¼Œå®ƒå°† value è¿™ä¸ªå±æ€§çš„ç±»å‹ä¹Ÿå‚æ•°åŒ–äº†ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„å‚æ•°åŒ–ç±»å‹ã€‚å†çœ‹å®ƒçš„ä½¿ç”¨æ–¹æ³•ã€‚ 1234567Cache&lt;String&gt; cache1 = new Cache&lt;String&gt;();cache1.setValue(\"123\");String value2 = cache1.getValue();Cache&lt;Integer&gt; cache2 = new Cache&lt;Integer&gt;();cache2.setValue(123);int value3 = cache2.getValue(); æœ€æ˜¾è€Œæ˜“è§çš„å¥½å¤„å°±æ˜¯å®ƒä¸å†éœ€è¦å¯¹å–å‡ºæ¥çš„ç»“æœè¿›è¡Œå¼ºåˆ¶è½¬æ¢äº†ã€‚ä½†ï¼Œè¿˜æœ‰å¦å¤–ä¸€ç‚¹ä¸åŒã€‚æ³›å‹é™¤äº†å¯ä»¥å°†ç±»å‹å‚æ•°åŒ–å¤–ï¼Œè€Œå‚æ•°ä¸€æ—¦ç¡®å®šå¥½ï¼Œå¦‚æœç±»ä¼¼ä¸åŒ¹é…ï¼Œç¼–è¯‘å™¨å°±ä¸é€šè¿‡ã€‚ç»¼åˆä¸Šé¢ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸‹é¢çš„ç»“è®º: ä¸æ™®é€šçš„ Object ä»£æ›¿ä¸€åˆ‡ç±»å‹è¿™æ ·ç®€å•ç²—æš´è€Œè¨€ï¼Œæ³›å‹ä½¿å¾—æ•°æ®çš„ç±»åˆ«å¯ä»¥åƒå‚æ•°ä¸€æ ·ç”±å¤–éƒ¨ä¼ é€’è¿›æ¥ã€‚å®ƒæä¾›äº†ä¸€ç§æ‰©å±•èƒ½åŠ›ã€‚å®ƒæ›´ç¬¦åˆé¢å‘æŠ½è±¡å¼€å‘çš„è½¯ä»¶ç¼–ç¨‹å®—æ—¨ã€‚ å½“å…·ä½“çš„ç±»å‹ç¡®å®šåï¼Œæ³›å‹åˆæä¾›äº†ä¸€ç§ç±»å‹æ£€æµ‹çš„æœºåˆ¶ï¼Œåªæœ‰ç›¸åŒ¹é…çš„æ•°æ®æ‰èƒ½æ­£å¸¸çš„èµ‹å€¼ï¼Œå¦åˆ™ç¼–è¯‘å™¨å°±ä¸é€šè¿‡ã€‚æ‰€ä»¥è¯´ï¼Œå®ƒæ˜¯ä¸€ç§ç±»å‹å®‰å…¨æ£€æµ‹æœºåˆ¶ï¼Œä¸€å®šç¨‹åº¦ä¸Šæé«˜äº†è½¯ä»¶çš„å®‰å…¨æ€§é˜²æ­¢å‡ºç°ä½çº§çš„å¤±è¯¯ã€‚ æ³›å‹æé«˜äº†ç¨‹åºä»£ç çš„å¯è¯»æ€§ï¼Œä¸å¿…è¦ç­‰åˆ°è¿è¡Œçš„æ—¶å€™æ‰å»å¼ºåˆ¶è½¬æ¢ï¼Œåœ¨å®šä¹‰æˆ–è€…å®ä¾‹åŒ–é˜¶æ®µï¼Œå› ä¸º Cache è¿™ä¸ªç±»å‹æ˜¾åŒ–çš„æ•ˆæœï¼Œç¨‹åºå‘˜èƒ½å¤Ÿä¸€ç›®äº†ç„¶çŒœæµ‹å‡ºä»£ç è¦æ“ä½œçš„æ•°æ®ç±»å‹ã€‚ æ³›å‹çš„å®šä¹‰å’Œä½¿ç”¨æ³›å‹æŒ‰ç…§ä½¿ç”¨æƒ…å†µå¯ä»¥åˆ†ä¸º 3 ç§ã€‚ æ³›å‹ç±» æ³›å‹æ–¹æ³• æ³›å‹æ¥å£ æ³›å‹ç±»é‚£å¦‚ä½•å®šä¹‰æ³›å‹ç±»å‘¢ï¼Ÿ 123public class Test&lt;T&gt; &#123; T field;&#125; å°–æ‹¬å· &lt;&gt; ä¸­çš„ T è¢«ç§°ä½œæ˜¯ç±»å‹å‚æ•°ï¼Œç”¨äºæŒ‡ä»£ä»»ä½•ç±»å‹ã€‚äº‹å®ä¸Šï¼ŒT åªæ˜¯ä¸€ç§ä¹ æƒ¯æ€§å†™æ³•ï¼Œå¦‚æœä½ æ„¿æ„ã€‚ä½ å¯ä»¥è¿™æ ·å†™ã€‚ 123public class Test&lt;TMD&gt; &#123; TMD field;&#125; ä½†å‡ºäºè§„èŒƒçš„ç›®çš„ï¼ŒJava è¿˜æ˜¯å»ºè®®æˆ‘ä»¬ç”¨å•ä¸ªå¤§å†™å­—æ¯æ¥ä»£è¡¨ç±»å‹å‚æ•°ã€‚å¸¸è§çš„å¦‚ï¼š T ä»£è¡¨ä¸€èˆ¬çš„ä»»ä½•ç±»ã€‚ E ä»£è¡¨Element çš„æ„æ€ï¼Œæˆ–è€…æ˜¯Exception å¼‚å¸¸çš„æ„æ€ K ä»£è¡¨ Key çš„æ„æ€ V ä»£è¡¨ Value çš„æ„æ€ï¼Œé€šå¸¸ä¸ K ä¸€èµ·é…åˆä½¿ç”¨ S ä»£è¡¨ Subtype çš„æ„æ€ å¦‚æœä¸€ä¸ªç±»è¢« çš„å½¢å¼å®šä¹‰ï¼Œé‚£ä¹ˆå®ƒå°±è¢«ç§°ä¸ºæ³›å‹ç±»ã€‚é‚£ä¹ˆå¯¹äºæ³›å‹ç±»æ€ä¹ˆæ ·ä½¿ç”¨å‘¢ï¼Ÿ 12Test&lt;String&gt; test1 = new Test&lt;&gt;();Test&lt;Integer&gt; test2 = new Test&lt;&gt;(); åªè¦åœ¨å¯¹æ³›å‹ç±»åˆ›å»ºå®ä¾‹çš„æ—¶å€™ï¼Œåœ¨å°–æ‹¬å·ä¸­èµ‹å€¼ç›¸åº”çš„ç±»å‹ä¾¿æ˜¯ã€‚T å°±ä¼šè¢«æ›¿æ¢æˆå¯¹åº”çš„ç±»å‹ï¼Œå¦‚ String æˆ–è€…æ˜¯ Integerã€‚ä½ å¯ä»¥ç›¸åƒä¸€ä¸‹ï¼Œå½“ä¸€ä¸ªæ³›å‹ç±»è¢«åˆ›å»ºæ—¶ï¼Œå†…éƒ¨è‡ªåŠ¨æ‰©å±•æˆä¸‹é¢çš„ä»£ç ã€‚ 123public class Test&lt;String&gt; &#123; String field;&#125; å½“ç„¶ï¼Œæ³›å‹ç±»ä¸æ˜¯åªèƒ½æ¥å—ä¸€ä¸ªç±»å‹å‚æ•°ï¼Œå®ƒè¿˜å¯ä»¥è¿™æ ·æ¥å—å¤šä¸ªç±»å‹å‚æ•°ã€‚ 123456789101112public class MultiType &lt;E,T&gt;&#123; E value1; T value2; public E getValue1()&#123; return value1; &#125; public T getValue2()&#123; return value2; &#125;&#125; æ³›å‹æ–¹æ³•123456public class Test1 &#123; public &lt;T&gt; void testMethod(T t)&#123; &#125;&#125; æ³›å‹æ–¹æ³•ä¸æ³›å‹ç±»ç¨æœ‰ä¸åŒçš„åœ°æ–¹æ˜¯ï¼Œç±»å‹å‚æ•°ä¹Ÿå°±æ˜¯å°–æ‹¬å·é‚£ä¸€éƒ¨åˆ†æ˜¯å†™åœ¨è¿”å›å€¼å‰é¢çš„ã€‚ ä¸­çš„ T è¢«ç§°ä¸ºç±»å‹å‚æ•°ï¼Œè€Œæ–¹æ³•ä¸­çš„ T è¢«ç§°ä¸ºå‚æ•°åŒ–ç±»å‹ï¼Œå®ƒä¸æ˜¯è¿è¡Œæ—¶çœŸæ­£çš„å‚æ•°ã€‚ å½“ç„¶ï¼Œå£°æ˜çš„ç±»å‹å‚æ•°ï¼Œå…¶å®ä¹Ÿæ˜¯å¯ä»¥å½“ä½œè¿”å›å€¼çš„ç±»å‹çš„ã€‚ 123public &lt;T&gt; T testMethod1(T t)&#123; return null;&#125; æ³›å‹ç±»ä¸æ³›å‹æ–¹æ³•çš„å…±å­˜ç°è±¡: 123456789public class Test&lt;T&gt;&#123; public void testMethod(T t)&#123; System.out.println(t.getClass().getName()); &#125; public &lt;T&gt; T testMethod1(T t)&#123; return t; &#125;&#125; ä¸Šé¢ä»£ç ä¸­ï¼ŒTest1 æ˜¯æ³›å‹ç±»ï¼ŒtestMethod æ˜¯æ³›å‹ç±»ä¸­çš„æ™®é€šæ–¹æ³•ï¼Œè€Œ testMethod1 æ˜¯ä¸€ä¸ªæ³›å‹æ–¹æ³•ã€‚è€Œæ³›å‹ç±»ä¸­çš„ç±»å‹å‚æ•°ä¸æ³›å‹æ–¹æ³•ä¸­çš„ç±»å‹å‚æ•°æ˜¯æ²¡æœ‰ç›¸åº”çš„è”ç³»çš„ï¼Œæ³›å‹æ–¹æ³•å§‹ç»ˆä»¥è‡ªå·±å®šä¹‰çš„ç±»å‹å‚æ•°ä¸ºå‡†ã€‚ æ‰€ä»¥ï¼Œé’ˆå¯¹ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·ç¼–å†™æµ‹è¯•ä»£ç ã€‚ 123Test1&lt;String&gt; t = new Test1();t.testMethod(\"generic\");Integer i = t.testMethod1(new Integer(1)); æ³›å‹ç±»çš„å®é™…ç±»å‹å‚æ•°æ˜¯ Stringï¼Œè€Œä¼ é€’ç»™æ³›å‹æ–¹æ³•çš„ç±»å‹å‚æ•°æ˜¯ Integerï¼Œä¸¤è€…ä¸æƒ³å¹²ã€‚ ä½†æ˜¯ï¼Œä¸ºäº†é¿å…æ··æ·†ï¼Œå¦‚æœåœ¨ä¸€ä¸ªæ³›å‹ç±»ä¸­å­˜åœ¨æ³›å‹æ–¹æ³•ï¼Œé‚£ä¹ˆä¸¤è€…çš„ç±»å‹å‚æ•°æœ€å¥½ä¸è¦åŒåã€‚æ¯”å¦‚ï¼ŒTest ä»£ç å¯ä»¥æ›´æ”¹ä¸ºè¿™æ · 123456789public class Test1&lt;T&gt;&#123; public void testMethod(T t)&#123; System.out.println(t.getClass().getName()); &#125; public &lt;E&gt; E testMethod1(E e)&#123; return e; &#125;&#125; æ³›å‹æ¥å£æ³›å‹æ¥å£å®šä¹‰ï¼š 12public interface Iterable&lt;T&gt; &#123;&#125; é€šé…ç¬¦ ï¼Ÿé™¤äº†ç”¨ è¡¨ç¤ºæ³›å‹å¤–ï¼Œè¿˜æœ‰ è¿™ç§å½¢å¼ã€‚ï¼Ÿ è¢«ç§°ä¸ºé€šé…ç¬¦ã€‚ å¯èƒ½æœ‰åŒå­¦ä¼šæƒ³ï¼Œå·²ç»æœ‰äº† çš„å½¢å¼äº†ï¼Œä¸ºä»€ä¹ˆè¿˜è¦å¼•è¿› è¿™æ ·çš„æ¦‚å¿µå‘¢ï¼Ÿ 12345678class Base&#123;&#125;class Sub extends Base&#123;&#125;Sub sub = new Sub();Base base = sub; ä¸Šé¢ä»£ç æ˜¾ç¤ºï¼ŒBase æ˜¯ Sub çš„çˆ¶ç±»ï¼Œå®ƒä»¬ä¹‹é—´æ˜¯ç»§æ‰¿å…³ç³»ï¼Œæ‰€ä»¥ Sub çš„å®ä¾‹å¯ä»¥ç»™ä¸€ä¸ª Base å¼•ç”¨èµ‹å€¼ï¼Œé‚£ä¹ˆ 12List&lt;Sub&gt; lsub = new ArrayList&lt;Sub&gt;();List&lt;Base&gt; lbase = lsub; æœ€åä¸€è¡Œä»£ç æˆç«‹å—ï¼Ÿç¼–è¯‘ä¼šé€šè¿‡å—ï¼Ÿ ç­”æ¡ˆæ˜¯é€šè¿‡ä¸äº†ç¼–è¯‘çš„ã€‚ ç¼–è¯‘å™¨ä¸ä¼šè®©å®ƒé€šè¿‡çš„ã€‚Sub æ˜¯ Base çš„å­ç±»ï¼Œä¸ä»£è¡¨ List å’Œ List æœ‰ç»§æ‰¿å…³ç³»ã€‚ ä½†æ˜¯ï¼Œåœ¨ç°å®ç¼–ç ä¸­ï¼Œç¡®å®æœ‰è¿™æ ·çš„éœ€æ±‚ï¼Œå¸Œæœ›æ³›å‹èƒ½å¤Ÿå¤„ç†æŸä¸€èŒƒå›´å†…çš„æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚æŸä¸ªç±»å’Œå®ƒçš„å­ç±»ï¼Œå¯¹æ­¤ Java å¼•å…¥äº†é€šé…ç¬¦è¿™ä¸ªæ¦‚å¿µã€‚ æ‰€ä»¥ï¼Œé€šé…ç¬¦çš„å‡ºç°æ˜¯ä¸ºäº†æŒ‡å®šæ³›å‹ä¸­çš„ç±»å‹èŒƒå›´ã€‚ é€šé…ç¬¦æœ‰ 3 ç§å½¢å¼: &lt;?&gt; è¢«ç§°ä½œæ— é™å®šçš„é€šé…ç¬¦ &lt;? extends T&gt; è¢«ç§°ä½œæœ‰ä¸Šé™çš„é€šé…ç¬¦ &lt;? super T&gt; è¢«ç§°ä½œæœ‰ä¸‹é™çš„é€šé…ç¬¦ æ— é™å®šé€šé…ç¬¦12public void testWildCards(Collection&lt;?&gt; collection)&#123;&#125; ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæ–¹æ³•å†…çš„å‚æ•°æ˜¯è¢«æ— é™å®šé€šé…ç¬¦ä¿®é¥°çš„ Collection å¯¹è±¡ï¼Œå®ƒéšç•¥åœ°è¡¨è¾¾äº†ä¸€ä¸ªæ„å›¾æˆ–è€…å¯ä»¥è¯´æ˜¯é™å®šï¼Œé‚£å°±æ˜¯ testWidlCards() è¿™ä¸ªæ–¹æ³•å†…éƒ¨æ— éœ€å…³æ³¨ Collection ä¸­çš„çœŸå®ç±»å‹ï¼Œå› ä¸ºå®ƒæ˜¯æœªçŸ¥çš„ã€‚æ‰€ä»¥ï¼Œä½ åªèƒ½è°ƒç”¨ Collection ä¸­ä¸ç±»å‹æ— å…³çš„æ–¹æ³•ã€‚ 1234567891011121314public class TestWildCards&#123; public void testWildCards(Collection&lt;?&gt; collection)&#123; #æŠ¥é”™ collection.add(123); #æŠ¥é”™ collection.add(\"hello\"); #æŠ¥é”™ collection.add(new Object()); collection.iterator().next(); collection.size(); &#125;&#125; æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå½“ &lt;?&gt; å­˜åœ¨æ—¶ï¼ŒCollection å¯¹è±¡ä¸§å¤±äº† add() æ–¹æ³•çš„åŠŸèƒ½ï¼Œç¼–è¯‘å™¨ä¸é€šè¿‡ã€‚æˆ‘ä»¬å†çœ‹ä¸‹é¢çš„ä»£ç ï¼š 12List&lt;?&gt; wildlist = new ArrayList&lt;String&gt;();wildlist.add(123);// ç¼–è¯‘ä¸é€šè¿‡ æœ‰äººè¯´ï¼Œ&lt;?&gt; æä¾›äº†åªè¯»çš„åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯å®ƒåˆ å‡äº†å¢åŠ å…·ä½“ç±»å‹å…ƒç´ çš„èƒ½åŠ›ï¼Œåªä¿ç•™ä¸å…·ä½“ç±»å‹æ— å…³çš„åŠŸèƒ½ã€‚å®ƒä¸ç®¡è£…è½½åœ¨è¿™ä¸ªå®¹å™¨å†…çš„å…ƒç´ æ˜¯ä»€ä¹ˆç±»å‹ï¼Œå®ƒåªå…³å¿ƒå…ƒç´ çš„æ•°é‡ã€å®¹å™¨æ˜¯å¦ä¸ºç©ºï¼Ÿæˆ‘æƒ³è¿™ç§éœ€æ±‚è¿˜æ˜¯å¾ˆå¸¸è§çš„å§ã€‚ æœ‰åŒå­¦å¯èƒ½ä¼šæƒ³ï¼Œ&lt;?&gt; æ—¢ç„¶ä½œç”¨è¿™ä¹ˆæ¸ºå°ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¿˜è¦å¼•ç”¨å®ƒå‘¢ï¼Ÿ ä¸ªäººè®¤ä¸ºï¼Œæé«˜äº†ä»£ç çš„å¯è¯»æ€§ï¼Œç¨‹åºå‘˜çœ‹åˆ°è¿™æ®µä»£ç æ—¶ï¼Œå°±èƒ½å¤Ÿè¿…é€Ÿå¯¹æ­¤å»ºç«‹æç®€æ´çš„å°è±¡ï¼Œèƒ½å¤Ÿå¿«é€Ÿæ¨æ–­æºç ä½œè€…çš„æ„å›¾ã€‚ &lt;? extends T&gt;&lt;?&gt; ä»£è¡¨ç€ç±»å‹æœªçŸ¥ï¼Œä½†æ˜¯æˆ‘ä»¬çš„ç¡®éœ€è¦å¯¹äºç±»å‹çš„æè¿°å†ç²¾ç¡®ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨ä¸€ä¸ªèŒƒå›´å†…ç¡®å®šç±»åˆ«ï¼Œæ¯”å¦‚ç±»å‹ A åŠ ç±»å‹ A çš„å­ç±»éƒ½å¯ä»¥ã€‚ 123public void testSub(Collection&lt;? extends Base&gt; para)&#123;&#125; ä¸Šé¢ä»£ç ä¸­ï¼Œpara è¿™ä¸ª Collection æ¥å— Base åŠ Base çš„å­ç±»çš„ç±»å‹ã€‚ä½†æ˜¯ï¼Œå®ƒä»ç„¶ä¸§å¤±äº†å†™æ“ä½œçš„èƒ½åŠ›ã€‚ä¹Ÿå°±æ˜¯è¯´: 12para.add(new Sub());para.add(new Base()); ä»ç„¶ç¼–è¯‘ä¸é€šè¿‡ã€‚æ²¡æœ‰å…³ç³»ï¼Œæˆ‘ä»¬ä¸çŸ¥é“å…·ä½“ç±»å‹ï¼Œä½†æ˜¯æˆ‘ä»¬è‡³å°‘æ¸…æ¥šäº†ç±»å‹çš„èŒƒå›´ã€‚ &lt;? super T&gt;è¿™ä¸ªå’Œ &lt;? extends T&gt; ç›¸å¯¹åº”ï¼Œä»£è¡¨ T åŠ T çš„è¶…ç±»ã€‚ 123public void testSuper(Collection&lt;? super Sub&gt; para)&#123;&#125;` &lt;? super T&gt; ç¥å¥‡çš„åœ°æ–¹åœ¨äºï¼Œå®ƒæ‹¥æœ‰ä¸€å®šç¨‹åº¦çš„å†™æ“ä½œçš„èƒ½åŠ›ã€‚ 1234public void testSuper(Collection&lt;? super Sub&gt; para)&#123; para.add(new Sub());//ç¼–è¯‘é€šè¿‡ para.add(new Base());//ç¼–è¯‘ä¸é€šè¿‡&#125; é€šé…ç¬¦ä¸ç±»å‹å‚æ•°çš„åŒºåˆ«ä¸€èˆ¬è€Œè¨€ï¼Œé€šé…ç¬¦èƒ½å¹²çš„äº‹æƒ…éƒ½å¯ä»¥ç”¨ç±»å‹å‚æ•°æ›¿æ¢ã€‚æ¯”å¦‚: 12public void testWildCards(Collection&lt;?&gt; collection)&#123;&#125; å¯ä»¥è¢« 12public &lt;T&gt; void test(Collection&lt;T&gt; collection)&#123;&#125; å–ä»£ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœç”¨æ³›å‹æ–¹æ³•æ¥å–ä»£é€šé…ç¬¦ï¼Œé‚£ä¹ˆä¸Šé¢ä»£ç ä¸­ collection æ˜¯èƒ½å¤Ÿè¿›è¡Œå†™æ“ä½œçš„ã€‚åªä¸è¿‡è¦è¿›è¡Œå¼ºåˆ¶è½¬æ¢ã€‚ 1234public &lt;T&gt; void test(Collection&lt;T&gt; collection)&#123; collection.add((T)new Integer(12)); collection.add((T)\"123\");&#125; éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œç±»å‹å‚æ•°é€‚ç”¨äºå‚æ•°ä¹‹é—´çš„ç±»åˆ«ä¾èµ–å…³ç³»ï¼Œä¸¾ä¾‹è¯´æ˜: 123456789public class Test2 &lt;T,E extends T&gt;&#123; T value1; E value2;&#125;public &lt;D,S extends D&gt; void test(D d,S s)&#123;&#125; E ç±»å‹æ˜¯ T ç±»å‹çš„å­ç±»ï¼Œæ˜¾ç„¶è¿™ç§æƒ…å†µç±»å‹å‚æ•°æ›´é€‚åˆã€‚æœ‰ä¸€ç§æƒ…å†µæ˜¯ï¼Œé€šé…ç¬¦å’Œç±»å‹å‚æ•°ä¸€èµ·ä½¿ç”¨ã€‚ 123public &lt;T&gt; void test(T t,Collection&lt;? extends T&gt; collection)&#123;&#125; å¦‚æœä¸€ä¸ªæ–¹æ³•çš„è¿”å›ç±»å‹ä¾èµ–äºå‚æ•°çš„ç±»å‹ï¼Œé‚£ä¹ˆé€šé…ç¬¦ä¹Ÿæ— èƒ½ä¸ºåŠ›ã€‚ 123public T test1(T t)&#123; return value1;&#125; ç±»å‹æ“¦é™¤æ³›å‹æ˜¯ Java 1.5 ç‰ˆæœ¬æ‰å¼•è¿›çš„æ¦‚å¿µï¼Œåœ¨è¿™ä¹‹å‰æ˜¯æ²¡æœ‰æ³›å‹çš„æ¦‚å¿µçš„ï¼Œä½†æ˜¾ç„¶ï¼Œæ³›å‹ä»£ç èƒ½å¤Ÿå¾ˆå¥½åœ°å’Œä¹‹å‰ç‰ˆæœ¬çš„ä»£ç å¾ˆå¥½åœ°å…¼å®¹ã€‚ è¿™æ˜¯å› ä¸ºï¼Œæ³›å‹ä¿¡æ¯åªå­˜åœ¨äºä»£ç ç¼–è¯‘é˜¶æ®µï¼Œåœ¨è¿›å…¥ JVM ä¹‹å‰ï¼Œä¸æ³›å‹ç›¸å…³çš„ä¿¡æ¯ä¼šè¢«æ“¦é™¤æ‰ï¼Œä¸“ä¸šæœ¯è¯­å«åšç±»å‹æ“¦é™¤ã€‚ é€šä¿—åœ°è®²ï¼Œæ³›å‹ç±»å’Œæ™®é€šç±»åœ¨ java è™šæ‹Ÿæœºå†…æ˜¯æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„åœ°æ–¹ã€‚å›é¡¾æ–‡ç« å¼€å§‹æ—¶çš„é‚£æ®µä»£ç : 1234List&lt;String&gt; list1 = new ArrayList&lt;String&gt;();List&lt;Integer&gt; list2 = new ArrayList&lt;Integer&gt;();System.out.println(list1.getClass() == list2.getClass()); æ‰“å°çš„ç»“æœä¸º true æ˜¯å› ä¸º List å’Œ List åœ¨ jvm ä¸­çš„ Class éƒ½æ˜¯ List.classã€‚ æ³›å‹ä¿¡æ¯è¢«æ“¦é™¤äº†ã€‚ å¯èƒ½åŒå­¦ä¼šé—®ï¼Œé‚£ä¹ˆç±»å‹ String å’Œ Integer æ€ä¹ˆåŠï¼Ÿ ç­”æ¡ˆæ˜¯æ³›å‹è½¬è¯‘ã€‚ 12345678public class Erasure &lt;T&gt;&#123; T object; public Erasure(T object) &#123; this.object = object; &#125;&#125; Erasure æ˜¯ä¸€ä¸ªæ³›å‹ç±»ï¼Œæˆ‘ä»¬æŸ¥çœ‹å®ƒåœ¨è¿è¡Œæ—¶çš„çŠ¶æ€ä¿¡æ¯å¯ä»¥é€šè¿‡åå°„ã€‚ 123456Erasure&lt;String&gt; erasure = new Erasure&lt;String&gt;(\"hello\");Class eclz = erasure.getClass();System.out.println(\"erasure class is:\"+eclz.getName());#æ‰“å°çš„ç»“æœæ˜¯erasure class is:com.frank.test.Erasure Class çš„ç±»å‹ä»ç„¶æ˜¯ Erasure å¹¶ä¸æ˜¯ Erasure è¿™ç§å½¢å¼ï¼Œé‚£æˆ‘ä»¬å†çœ‹çœ‹æ³›å‹ç±»ä¸­ T çš„ç±»å‹åœ¨ jvm ä¸­æ˜¯ä»€ä¹ˆå…·ä½“ç±»å‹ã€‚ 1234567Field[] fs = eclz.getDeclaredFields();for ( Field f:fs) &#123; System.out.println(\"Field name \"+f.getName()+\" type:\"+f.getType().getName());&#125;#æ‰“å°ç»“æœæ˜¯Field name object type:java.lang.Object é‚£æˆ‘ä»¬å¯ä¸å¯ä»¥è¯´ï¼Œæ³›å‹ç±»è¢«ç±»å‹æ“¦é™¤åï¼Œç›¸åº”çš„ç±»å‹å°±è¢«æ›¿æ¢æˆ Object ç±»å‹å‘¢ï¼Ÿ è¿™ç§è¯´æ³•ï¼Œä¸å®Œå…¨æ­£ç¡®ã€‚ æˆ‘ä»¬æ›´æ”¹ä¸€ä¸‹ä»£ç ã€‚ 123456789101112public class Erasure &lt;T extends String&gt;&#123; T object; public Erasure(T object) &#123; this.object = object; &#125;&#125;#ç°åœ¨å†çœ‹æµ‹è¯•ç»“æœï¼šField name object type:java.lang.String æˆ‘ä»¬ç°åœ¨å¯ä»¥ä¸‹ç»“è®ºäº†ï¼Œåœ¨æ³›å‹ç±»è¢«ç±»å‹æ“¦é™¤çš„æ—¶å€™ï¼Œä¹‹å‰æ³›å‹ç±»ä¸­çš„ç±»å‹å‚æ•°éƒ¨åˆ†å¦‚æœæ²¡æœ‰æŒ‡å®šä¸Šé™ï¼Œå¦‚ åˆ™ä¼šè¢«è½¬è¯‘æˆæ™®é€šçš„ Object ç±»å‹ï¼Œå¦‚æœæŒ‡å®šäº†ä¸Šé™å¦‚ åˆ™ç±»å‹å‚æ•°å°±è¢«æ›¿æ¢æˆç±»å‹ä¸Šé™ã€‚ æ‰€ä»¥ï¼Œåœ¨åå°„ä¸­: 123456789101112public class Erasure &lt;T&gt;&#123; T object; public Erasure(T object) &#123; this.object = object; &#125; public void add(T object)&#123; &#125;&#125; add() è¿™ä¸ªæ–¹æ³•å¯¹åº”çš„ Method çš„ç­¾ååº”è¯¥æ˜¯ Object.classã€‚ 123456789101112Erasure&lt;String&gt; erasure = new Erasure&lt;String&gt;(\"hello\");Class eclz = erasure.getClass();System.out.println(\"erasure class is:\"+eclz.getName());Method[] methods = eclz.getDeclaredMethods();for ( Method m:methods )&#123; System.out.println(\" method:\"+m.toString());&#125;#æ‰“å°ç»“æœæ˜¯method:public void com.frank.test.Erasure.add(java.lang.Object) ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ è¦åœ¨åå°„ä¸­æ‰¾åˆ° add å¯¹åº”çš„ Methodï¼Œä½ åº”è¯¥è°ƒç”¨ getDeclaredMethod(â€œaddâ€,Object.class) å¦åˆ™ç¨‹åºä¼šæŠ¥é”™ï¼Œæç¤ºæ²¡æœ‰è¿™ä¹ˆä¸€ä¸ªæ–¹æ³•ï¼ŒåŸå› å°±æ˜¯ç±»å‹æ“¦é™¤çš„æ—¶å€™ï¼ŒT è¢«æ›¿æ¢æˆ Object ç±»å‹äº†ã€‚ æ³›å‹ä¸­å€¼å¾—æ³¨æ„çš„åœ°æ–¹æ³›å‹ç±»æˆ–è€…æ³›å‹æ–¹æ³•ä¸­ï¼Œä¸æ¥å— 8 ç§åŸºæœ¬æ•°æ®ç±»å‹ã€‚12345678// è¿™ç§æ˜¯é”™è¯¯çš„ä½¿ç”¨æ–¹å¼List&lt;int&gt; li = new ArrayList&lt;&gt;();List&lt;boolean&gt; li = new ArrayList&lt;&gt;();// éœ€è¦ä½¿ç”¨å®ƒä»¬å¯¹åº”çš„åŒ…è£…ç±»List&lt;Integer&gt; li = new ArrayList&lt;&gt;();List&lt;Boolean&gt; li1 = new ArrayList&lt;&gt;();` å¯¹æ³›å‹æ–¹æ³•çš„å›°æƒ‘123public &lt;T&gt; T test(T t)&#123; return null;&#125; æœ‰çš„åŒå­¦å¯èƒ½å¯¹äºè¿ç»­çš„ä¸¤ä¸ª T æ„Ÿåˆ°å›°æƒ‘ï¼Œå…¶å® æ˜¯ä¸ºäº†è¯´æ˜ç±»å‹å‚æ•°ï¼Œæ˜¯å£°æ˜,è€Œåé¢çš„ä¸å¸¦å°–æ‹¬å·çš„ T æ˜¯æ–¹æ³•çš„è¿”å›å€¼ç±»å‹ã€‚ä½ å¯ä»¥ç›¸åƒä¸€ä¸‹ï¼Œå¦‚æœ test() è¿™æ ·è¢«è°ƒç”¨: 123test(\"123\");// é‚£ä¹ˆå®é™…ä¸Šç›¸å½“äºpublic String test(String t); Java ä¸èƒ½åˆ›å»ºå…·ä½“ç±»å‹çš„æ³›å‹æ•°ç»„è¿™å¥è¯å¯èƒ½éš¾ä»¥ç†è§£ï¼Œç”¨ä»£ç æ¥è¯´æ˜ï¼š 12List&lt;Integer&gt;[] li2 = new ArrayList&lt;Integer&gt;[];List&lt;Boolean&gt; li3 = new ArrayList&lt;Boolean&gt;[]; è¿™ä¸¤è¡Œä»£ç æ˜¯æ— æ³•åœ¨ç¼–è¯‘å™¨ä¸­ç¼–è¯‘é€šè¿‡çš„ã€‚åŸå› è¿˜æ˜¯ç±»å‹æ“¦é™¤å¸¦æ¥çš„å½±å“ã€‚ List å’Œ List åœ¨ jvm ä¸­ç­‰åŒäºList ï¼Œæ‰€æœ‰çš„ç±»å‹ä¿¡æ¯éƒ½è¢«æ“¦é™¤ï¼Œç¨‹åºä¹Ÿæ— æ³•åˆ†è¾¨ä¸€ä¸ªæ•°ç»„ä¸­çš„å…ƒç´ ç±»å‹å…·ä½“æ˜¯ Listç±»å‹è¿˜æ˜¯ List ç±»å‹ã€‚ä½†æ˜¯ï¼Œ 123List&lt;?&gt;[] li3 = new ArrayList&lt;?&gt;[10];li3[1] = new ArrayList&lt;String&gt;();List&lt;?&gt; v = li3[1]; å€ŸåŠ©äºæ— é™å®šé€šé…ç¬¦å´å¯ä»¥ï¼Œå‰é¢è®²è¿‡ ï¼Ÿ ä»£è¡¨æœªçŸ¥ç±»å‹ï¼Œæ‰€ä»¥å®ƒæ¶‰åŠçš„æ“ä½œéƒ½åŸºæœ¬ä¸Šä¸ç±»å‹æ— å…³ï¼Œå› æ­¤ jvm ä¸éœ€è¦é’ˆå¯¹å®ƒå¯¹ç±»å‹ä½œåˆ¤æ–­ï¼Œå› æ­¤å®ƒèƒ½ç¼–è¯‘é€šè¿‡ï¼Œä½†æ˜¯ï¼Œåªæä¾›äº†æ•°ç»„ä¸­çš„å…ƒç´ å› ä¸ºé€šé…ç¬¦åŸå› ï¼Œå®ƒåªèƒ½è¯»ï¼Œä¸èƒ½å†™ã€‚æ¯”å¦‚ï¼Œä¸Šé¢çš„ v è¿™ä¸ªå±€éƒ¨å˜é‡ï¼Œå®ƒåªèƒ½è¿›è¡Œ get() æ“ä½œï¼Œä¸èƒ½è¿›è¡Œ add() æ“ä½œï¼Œè¿™ä¸ªåœ¨å‰é¢é€šé…ç¬¦çš„å†…å®¹å°èŠ‚ä¸­å·²ç»è®²è¿‡ã€‚ æ³›å‹ï¼Œå¹¶ä¸ç¥å¥‡æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ³›å‹å…¶å®å¹¶æ²¡æœ‰ä»€ä¹ˆç¥å¥‡çš„åœ°æ–¹ï¼Œæ³›å‹ä»£ç èƒ½åšçš„éæ³›å‹ä»£ç ä¹Ÿèƒ½åšã€‚ è€Œç±»å‹æ“¦é™¤ï¼Œæ˜¯æ³›å‹èƒ½å¤Ÿä¸ä¹‹å‰çš„ java ç‰ˆæœ¬ä»£ç å…¼å®¹å…±å­˜çš„åŸå› ã€‚ å¯é‡ä¹Ÿæ­£å› ä¸ºç±»å‹æ“¦é™¤å¯¼è‡´äº†ä¸€äº›éšæ‚£ä¸å±€é™ã€‚ ä½†ï¼Œæˆ‘è¿˜æ˜¯è¦å»ºè®®å¤§å®¶ä½¿ç”¨æ³›å‹ï¼Œå¦‚å®˜æ–¹æ–‡æ¡£æ‰€è¯´çš„ï¼Œå¦‚æœå¯ä»¥ä½¿ç”¨æ³›å‹çš„åœ°æ–¹ï¼Œå°½é‡ä½¿ç”¨æ³›å‹ã€‚ æ¯•ç«Ÿå®ƒæŠ½ç¦»äº†æ•°æ®ç±»å‹ä¸ä»£ç é€»è¾‘ï¼Œæœ¬æ„æ˜¯æé«˜ç¨‹åºä»£ç çš„ç®€æ´æ€§å’Œå¯è¯»æ€§ï¼Œå¹¶æä¾›å¯èƒ½çš„ç¼–è¯‘æ—¶ç±»å‹è½¬æ¢å®‰å…¨æ£€æµ‹åŠŸèƒ½ã€‚ ç±»å‹æ“¦é™¤ä¸æ˜¯æ³›å‹çš„å…¨éƒ¨ï¼Œä½†æ˜¯å®ƒå´èƒ½å¾ˆå¥½åœ°æ£€æµ‹æˆ‘ä»¬å¯¹äºæ³›å‹è¿™ä¸ªæ¦‚å¿µçš„ç†è§£ç¨‹åº¦ã€‚æ¥æºï¼šblog.csdn.net/briblue/article/details/76736356","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"}]},{"title":"Centos 6.x å®‰è£…git","slug":"Centos-6-x-å®‰è£…git","date":"2018-08-03T23:01:47.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/7226e685.html","link":"","permalink":"https://ydstudios.gitee.io/post/7226e685.html","excerpt":"åœ¨Centosä¸Šå®‰è£…è½¯ä»¶æ—¶ï¼Œæˆ‘éƒ½æ˜¯å…ˆæ›´æ–°ä¸€ä¸‹ç³»ç»Ÿçš„yumæºï¼Œä¿æŒyumæºæ˜¯æ¯”è¾ƒæ–°çš„ã€‚","text":"åœ¨Centosä¸Šå®‰è£…è½¯ä»¶æ—¶ï¼Œæˆ‘éƒ½æ˜¯å…ˆæ›´æ–°ä¸€ä¸‹ç³»ç»Ÿçš„yumæºï¼Œä¿æŒyumæºæ˜¯æ¯”è¾ƒæ–°çš„ã€‚ 1yum update ä¸‹é¢è¿›å…¥ä»Šæ—¥çš„ä¸»é¢˜ï¼Œå®‰è£…gitï¼š 1.ä¸‹è½½æºç åŒ…æŸ¥çœ‹ç³»ç»Ÿyumæºä¸­çš„gitçš„ç‰ˆæœ¬ï¼Œå‘ç°æ˜¯æ¯”è¾ƒè€çš„ç‰ˆæœ¬ï¼Œäºæ˜¯é‡‡ç”¨æºç åŒ…ç¼–è¯‘å®‰è£…ã€‚ 12cd /usr/local/srcwget https://mirrors.edge.kernel.org/pub/software/scm/git/git-2.9.0.tar.gz 2.ç¼–è¯‘å®‰è£… 123456cd /usr/local/srctar -zxvf git-2.9.0.tar.gz cd /usr/local/src/git-2.9.0#å®‰è£…åˆ° /usr/local/git./configure prefix=/usr/local/git make &amp;&amp; make instal æŠ¥é”™ 12345[root@iZbp1fuxiq5o2qp7z60ydpZ git-2.9.0]# make &amp;&amp; make install CC credential-store.oIn file included from credential-store.c:1:0:cache.h:40:18: fatal error: zlib.h: No such file or directory #include &lt;zlib.h&gt; è§£å†³æ–¹æ³•ï¼š 12#å®‰è£…ä¾èµ–yum -y install zlib zlib-devel å†æ¬¡æ‰§è¡Œmakeï¼Œä»ç„¶æŠ¥é”™ 12345/usr/bin/perl Makefile.PL PREFIX='/usr/local/git' INSTALL_BASE='' --localedir='/usr/local/git/share/locale'Can't locate ExtUtils/MakeMaker.pm in @INC (@INC contains: /usr/local/lib64/perl5 /usr/local/share/perl5 /usr/lib64/perl5/vendor_perl /usr/share/perl5/vendor_perl /usr/lib64/perl5 /usr/share/perl5 .) at Makefile.PL line 3.BEGIN failed--compilation aborted at Makefile.PL line 3.make[1]: *** [perl.mak] Error 2make: *** [perl/perl.mak] Error 2 è§£å†³åŠæ³•ï¼š 12#å®‰è£…ä¸‹é¢çš„ä¾èµ–yum install perl-ExtUtils-CBuilder perl-ExtUtils-MakeMaker cpan å†æ¬¡æ‰§è¡Œmake &amp; make installï¼Œç¼–è¯‘å®‰è£…æˆåŠŸ 3.åˆ›å»ºgitç”¨æˆ·ï¼Œå¹¶å°†/usr/local/gitæ‰€å±ç»„å’Œæ‰€å±ä¸»ä¿®æ”¹æˆgit 123useradd gitchown -R git:git /usr/local/git 4.å°†gitåŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡é‡Œé¢ 12export GIT_HOME=/usr/local/gitexport PATH=$GIT_HOME/bin:$PATH 5.åˆå§‹åŒ–ä»“åº“ 123456git init --bare mt-front.git#ä¸‹é¢æ˜¯å‡ ç§å…‹éš†æ–¹å¼git clone git@xx.xx.xx.xx:/home/git/repository/mt-front.gitgit clone ssh://git@xx.xx.xx.xx:/home/git/repository/mt-front.gitgit clone http://git@xx.xx.xx.xx:/home/git/repository/mt-front.git æœ¬åœ°cloneçš„æ—¶å€™ä¼šæŠ¥é”™ æç¤ºgit-upload-packå‘½ä»¤ä¸å­˜åœ¨123bash: git-upload-pack: command not found#è§£å†³ln -s /usr/local/git/bin/git-upload-pack /usr/bin/git-upload-pack æç¤ºgit-receive-packå‘½ä»¤ä¸å­˜åœ¨12bash: git-receive-pack: command not foundln -s /usr/local/git/bin/git-receive-pack /usr/bin/git-receive-pack 7.é…ç½®gitè®°ä½å¯†ç ï¼Œåœ¨gitçš„å…¨å±€é…ç½®æ–‡ä»¶gitconfigæ–‡ä»¶ä¸­æ·»åŠ ä¸‹é¢çš„é…ç½®ï¼š 12345[credential] helper = store[user] name = nick email = nick@da.com","categories":[],"tags":[{"name":"linux","slug":"linux","permalink":"https://ydstudios.gitee.io/tags/linux/"},{"name":"git","slug":"git","permalink":"https://ydstudios.gitee.io/tags/git/"}]},{"title":"Mavenè·³è¿‡å•å…ƒæµ‹è¯•-Dmaven.test.skipå’ŒskipTestsçš„åŒºåˆ«","slug":"Mavenè·³è¿‡å•å…ƒæµ‹è¯•-Dmaven-test-skipå’ŒskipTestsçš„åŒºåˆ«","date":"2018-08-01T22:46:25.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/64d34904.html","link":"","permalink":"https://ydstudios.gitee.io/post/64d34904.html","excerpt":"Mavenä¸­æœ‰ä¸¤ç§æ–¹å¼è·³è¿‡å•å…ƒæµ‹è¯•ï¼Œå…¶å®è¿™ä¸¤ç§æ–¹å¼æ˜¯æœ‰ä¸€ç‚¹ä¸åŒçš„ï¼Œå…¶å…·ä½“ä¸åŒå¦‚ä¸‹ï¼š -DskipTestsï¼Œä¸æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹ï¼Œä½†ç¼–è¯‘æµ‹è¯•ç”¨ä¾‹ç±»ç”Ÿæˆç›¸åº”çš„classæ–‡ä»¶è‡³target/test-classesä¸‹ã€‚-Dmaven.test.skip=trueï¼Œä¸æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹ï¼Œä¹Ÿä¸ç¼–è¯‘æµ‹è¯•ç”¨ä¾‹ç±»ã€‚","text":"Mavenä¸­æœ‰ä¸¤ç§æ–¹å¼è·³è¿‡å•å…ƒæµ‹è¯•ï¼Œå…¶å®è¿™ä¸¤ç§æ–¹å¼æ˜¯æœ‰ä¸€ç‚¹ä¸åŒçš„ï¼Œå…¶å…·ä½“ä¸åŒå¦‚ä¸‹ï¼š -DskipTestsï¼Œä¸æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹ï¼Œä½†ç¼–è¯‘æµ‹è¯•ç”¨ä¾‹ç±»ç”Ÿæˆç›¸åº”çš„classæ–‡ä»¶è‡³target/test-classesä¸‹ã€‚-Dmaven.test.skip=trueï¼Œä¸æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹ï¼Œä¹Ÿä¸ç¼–è¯‘æµ‹è¯•ç”¨ä¾‹ç±»ã€‚ ä½¿ç”¨Dmaven.test.skipï¼Œä¸ä½†è·³è¿‡å•å…ƒæµ‹è¯•çš„è¿è¡Œï¼Œä¹Ÿè·³è¿‡æµ‹è¯•ä»£ç çš„ç¼–è¯‘ã€‚1mvn package -Dmaven.test.skip=true ä¹Ÿå¯ä»¥åœ¨pom.xmlæ–‡ä»¶ä¸­ä¿®æ”¹12345678910111213141516&lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugin&lt;/groupId&gt; &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt; &lt;version&gt;2.1&lt;/version&gt; &lt;configuration&gt; &lt;skip&gt;true&lt;/skip&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt; &lt;version&gt;2.5&lt;/version&gt; &lt;configuration&gt; &lt;skip&gt;true&lt;/skip&gt; &lt;/configuration&gt; &lt;/plugin&gt; ä½¿ç”¨ mvn package -DskipTests è·³è¿‡å•å…ƒæµ‹è¯•ï¼Œä½†æ˜¯ä¼šç»§ç»­ç¼–è¯‘ï¼›å¦‚æœæ²¡æ—¶é—´ä¿®æ”¹å•å…ƒæµ‹è¯•çš„bugï¼Œæˆ–è€…å•å…ƒæµ‹è¯•ç¼–è¯‘é”™è¯¯ã€‚ä½¿ç”¨ä¸Šé¢çš„ï¼Œä¸è¦ç”¨è¿™ä¸ªã€‚12345678&lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt; &lt;version&gt;2.5&lt;/version&gt; &lt;configuration&gt; &lt;skipTests&gt;true&lt;/skipTests&gt; &lt;/configuration&gt; &lt;/plugin&gt;","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"},{"name":"maven","slug":"maven","permalink":"https://ydstudios.gitee.io/tags/maven/"}]},{"title":"Javaå­¦ä¹ ç³»åˆ—æ–‡ç« ç¬¬å…«ç¯‡ï¼šJava8ä¸­æ–¹æ³•å¼•ç”¨","slug":"Javaå­¦ä¹ ç³»åˆ—æ–‡ç« ç¬¬å…«ç¯‡ï¼šJava8ä¸­æ–¹æ³•å¼•ç”¨","date":"2018-07-30T22:15:58.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/bcbb06a2.html","link":"","permalink":"https://ydstudios.gitee.io/post/bcbb06a2.html","excerpt":"æ–¹æ³•å¼•ç”¨æä¾›äº†éå¸¸æœ‰ç”¨çš„è¯­æ³•ï¼Œå¯ä»¥ç›´æ¥å¼•ç”¨å·²æœ‰Javaç±»æˆ–å¯¹è±¡ï¼ˆå®ä¾‹ï¼‰çš„æ–¹æ³•æˆ–æ„é€ å™¨ã€‚ä¸lambdaè”åˆä½¿ç”¨ï¼Œæ–¹æ³•å¼•ç”¨å¯ä»¥ä½¿è¯­è¨€çš„æ„é€ æ›´ç´§å‡‘ç®€æ´ï¼Œå‡å°‘å†—ä½™ä»£ç ã€‚","text":"æ–¹æ³•å¼•ç”¨æä¾›äº†éå¸¸æœ‰ç”¨çš„è¯­æ³•ï¼Œå¯ä»¥ç›´æ¥å¼•ç”¨å·²æœ‰Javaç±»æˆ–å¯¹è±¡ï¼ˆå®ä¾‹ï¼‰çš„æ–¹æ³•æˆ–æ„é€ å™¨ã€‚ä¸lambdaè”åˆä½¿ç”¨ï¼Œæ–¹æ³•å¼•ç”¨å¯ä»¥ä½¿è¯­è¨€çš„æ„é€ æ›´ç´§å‡‘ç®€æ´ï¼Œå‡å°‘å†—ä½™ä»£ç ã€‚ ä¸‹é¢ï¼Œæˆ‘ä»¬ä»¥å®šä¹‰äº†4ä¸ªæ–¹æ³•çš„Carè¿™ä¸ªç±»ä½œä¸ºä¾‹å­ï¼ŒåŒºåˆ†Javaä¸­æ”¯æŒçš„4ç§ä¸åŒçš„æ–¹æ³•å¼•ç”¨ã€‚ 1234567891011121314151617public static class Car &#123; public static Car create( final Supplier&lt; Car &gt; supplier ) &#123; return supplier.get(); &#125; public static void collide( final Car car ) &#123; System.out.println( \"Collided \" + car.toString() ); &#125; public void follow( final Car another ) &#123; System.out.println( \"Following the \" + another.toString() ); &#125; public void repair() &#123; System.out.println( \"Repaired \" + this.toString() ); &#125;&#125; ç¬¬ä¸€ç§æ–¹æ³•å¼•ç”¨æ˜¯æ„é€ å™¨å¼•ç”¨ï¼Œå®ƒçš„è¯­æ³•æ˜¯Class::newï¼Œæˆ–è€…æ›´ä¸€èˆ¬çš„Class&lt; T &gt;::newã€‚è¯·æ³¨æ„æ„é€ å™¨æ²¡æœ‰å‚æ•°ã€‚ 12final Car car = Car.create( Car::new );final List&lt; Car &gt; cars = Arrays.asList( car ); ç¬¬äºŒç§æ–¹æ³•å¼•ç”¨æ˜¯é™æ€æ–¹æ³•å¼•ç”¨ï¼Œå®ƒçš„è¯­æ³•æ˜¯Class::static_methodã€‚è¯·æ³¨æ„è¿™ä¸ªæ–¹æ³•æ¥å—ä¸€ä¸ªCarç±»å‹çš„å‚æ•°ã€‚ 1cars.forEach( Car::collide ); ç¬¬ä¸‰ç§æ–¹æ³•å¼•ç”¨æ˜¯ç‰¹å®šç±»çš„ä»»æ„å¯¹è±¡çš„æ–¹æ³•å¼•ç”¨ï¼Œå®ƒçš„è¯­æ³•æ˜¯Class::methodã€‚è¯·æ³¨æ„ï¼Œè¿™ä¸ªæ–¹æ³•æ²¡æœ‰å‚æ•°ã€‚ 1cars.forEach( Car::repair ); æœ€åï¼Œç¬¬å››ç§æ–¹æ³•å¼•ç”¨æ˜¯ç‰¹å®šå¯¹è±¡çš„æ–¹æ³•å¼•ç”¨ï¼Œå®ƒçš„è¯­æ³•æ˜¯instance::methodã€‚è¯·æ³¨æ„ï¼Œè¿™ä¸ªæ–¹æ³•æ¥å—ä¸€ä¸ªCarç±»å‹çš„å‚æ•° 12final Car police = Car.create( Car::new );cars.forEach( police::follow ); è¿è¡Œä¸Šé¢çš„Javaç¨‹åºåœ¨æ§åˆ¶å°ä¸Šä¼šæœ‰ä¸‹é¢çš„è¾“å‡ºï¼ˆCarçš„å®ä¾‹å¯èƒ½ä¸ä¸€æ ·ï¼‰ï¼š 123Collided com.javacodegeeks.java8.method.references.MethodReferences$Car@7a81197dRepaired com.javacodegeeks.java8.method.references.MethodReferences$Car@7a81197dFollowing the com.javacodegeeks.java8.method.references.MethodReferences$Car@7a81197d å…³äºæ–¹æ³•å¼•ç”¨çš„æ›´å¤šè¯¦æƒ…è¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"}]},{"title":"Javaå­¦ä¹ ç³»åˆ—æ–‡ç« ç¬¬ä¸ƒç¯‡ï¼šJava8ä¸­æ¥å£çš„é»˜è®¤æ–¹æ³•ä¸é™æ€æ–¹æ³•","slug":"Javaå­¦ä¹ ç³»åˆ—æ–‡ç« ç¬¬ä¸ƒç¯‡ï¼šJava8ä¸­æ¥å£çš„é»˜è®¤æ–¹æ³•ä¸é™æ€æ–¹æ³•","date":"2018-07-30T22:04:59.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/cca5e66b.html","link":"","permalink":"https://ydstudios.gitee.io/post/cca5e66b.html","excerpt":"Java8ç”¨é»˜è®¤æ–¹æ³•ä¸é™æ€æ–¹æ³•è¿™ä¸¤ä¸ªæ–°æ¦‚å¿µæ¥æ‰©å±•æ¥å£çš„å£°æ˜ã€‚é»˜è®¤æ–¹æ³•ä½¿æ¥å£æœ‰ç‚¹åƒTraitsï¼ˆScalaä¸­ç‰¹å¾(trait)ç±»ä¼¼äºJavaä¸­çš„Interfaceï¼Œä½†å®ƒå¯ä»¥åŒ…å«å®ç°ä»£ç ï¼Œä¹Ÿå°±æ˜¯ç›®å‰Java8æ–°å¢çš„åŠŸèƒ½ã€‚PHPä¸­ä¹Ÿæœ‰traitè¿™æ ·ä¸€è¯´ï¼Œä»–æ˜¯åœ¨ä¸ç ´åç±»åŸæœ‰çš„ç»§æ‰¿ã€å®ç°å…³ç³»ï¼Œç»™ç±»æ–°åŠ ç›¸åŒçš„æ–¹æ³•ï¼‰ï¼Œä½†ä¸ä¼ ç»Ÿçš„æ¥å£åˆæœ‰äº›ä¸ä¸€æ ·ï¼Œå®ƒå…è®¸åœ¨å·²æœ‰çš„æ¥å£ä¸­æ·»åŠ æ–°æ–¹æ³•ï¼Œè€ŒåŒæ—¶åˆä¿æŒäº†ä¸æ—§ç‰ˆæœ¬ä»£ç çš„å…¼å®¹æ€§ã€‚","text":"Java8ç”¨é»˜è®¤æ–¹æ³•ä¸é™æ€æ–¹æ³•è¿™ä¸¤ä¸ªæ–°æ¦‚å¿µæ¥æ‰©å±•æ¥å£çš„å£°æ˜ã€‚é»˜è®¤æ–¹æ³•ä½¿æ¥å£æœ‰ç‚¹åƒTraitsï¼ˆScalaä¸­ç‰¹å¾(trait)ç±»ä¼¼äºJavaä¸­çš„Interfaceï¼Œä½†å®ƒå¯ä»¥åŒ…å«å®ç°ä»£ç ï¼Œä¹Ÿå°±æ˜¯ç›®å‰Java8æ–°å¢çš„åŠŸèƒ½ã€‚PHPä¸­ä¹Ÿæœ‰traitè¿™æ ·ä¸€è¯´ï¼Œä»–æ˜¯åœ¨ä¸ç ´åç±»åŸæœ‰çš„ç»§æ‰¿ã€å®ç°å…³ç³»ï¼Œç»™ç±»æ–°åŠ ç›¸åŒçš„æ–¹æ³•ï¼‰ï¼Œä½†ä¸ä¼ ç»Ÿçš„æ¥å£åˆæœ‰äº›ä¸ä¸€æ ·ï¼Œå®ƒå…è®¸åœ¨å·²æœ‰çš„æ¥å£ä¸­æ·»åŠ æ–°æ–¹æ³•ï¼Œè€ŒåŒæ—¶åˆä¿æŒäº†ä¸æ—§ç‰ˆæœ¬ä»£ç çš„å…¼å®¹æ€§ã€‚ é»˜è®¤æ–¹æ³•ä¸æŠ½è±¡æ–¹æ³•ä¸åŒä¹‹å¤„åœ¨äºæŠ½è±¡æ–¹æ³•å¿…é¡»è¦æ±‚å®ç°ï¼Œä½†æ˜¯é»˜è®¤æ–¹æ³•åˆ™æ²¡æœ‰è¿™ä¸ªè¦æ±‚ã€‚ç›¸åï¼Œæ¯ä¸ªæ¥å£éƒ½å¿…é¡»æä¾›ä¸€ä¸ªæ‰€è°“çš„é»˜è®¤å®ç°ï¼Œè¿™æ ·æ‰€æœ‰çš„æ¥å£å®ç°è€…å°†ä¼šé»˜è®¤ç»§æ‰¿å®ƒï¼ˆå¦‚æœæœ‰å¿…è¦çš„è¯ï¼Œå¯ä»¥è¦†ç›–è¿™ä¸ªé»˜è®¤å®ç°ï¼‰ã€‚è®©æˆ‘ä»¬çœ‹çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š 1234567891011121314151617private interface Defaulable &#123; // Interfaces now allow default methods, the implementer may or // may not implement (override) them. default String notRequired() &#123; return \"Default implementation\"; &#125; &#125; private static class DefaultableImpl implements Defaulable &#123;&#125; private static class OverridableImpl implements Defaulable &#123; @Override public String notRequired() &#123; return \"Overridden implementation\"; &#125;&#125; Defaulableæ¥å£ç”¨å…³é”®å­—defaultå£°æ˜äº†ä¸€ä¸ªé»˜è®¤æ–¹æ³•notRequired()ï¼ŒDefaulableæ¥å£çš„å®ç°è€…ä¹‹ä¸€DefaultableImplå®ç°äº†è¿™ä¸ªæ¥å£ï¼Œå¹¶ä¸”è®©é»˜è®¤æ–¹æ³•ä¿æŒåŸæ ·ã€‚Defaulableæ¥å£çš„å¦ä¸€ä¸ªå®ç°è€…OverridableImplç”¨è‡ªå·±çš„æ–¹æ³•è¦†ç›–äº†é»˜è®¤æ–¹æ³•ã€‚ Java8å¸¦æ¥çš„å¦ä¸€ä¸ªæœ‰è¶£çš„ç‰¹æ€§æ˜¯æ¥å£å¯ä»¥å£°æ˜ï¼ˆå¹¶ä¸”å¯ä»¥æä¾›å®ç°ï¼‰é™æ€æ–¹æ³•ã€‚ä¾‹å¦‚ï¼š 123456private interface DefaulableFactory &#123; // Interfaces now allow static methods static Defaulable create( Supplier&lt; Defaulable &gt; supplier ) &#123; return supplier.get(); &#125;&#125; ä¸‹é¢çš„ä¸€å°æ®µä»£ç ç‰‡æ®µæŠŠä¸Šé¢çš„é»˜è®¤æ–¹æ³•ä¸é™æ€æ–¹æ³•é»åˆåˆ°ä¸€èµ·ã€‚ 1234567public static void main( String[] args ) &#123; Defaulable defaulable = DefaulableFactory.create( DefaultableImpl::new ); System.out.println( defaulable.notRequired() ); defaulable = DefaulableFactory.create( OverridableImpl::new ); System.out.println( defaulable.notRequired() );&#125; è¿™ä¸ªç¨‹åºçš„æ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹ï¼š 12Default implementationOverridden implementation åœ¨JVMä¸­ï¼Œé»˜è®¤æ–¹æ³•çš„å®ç°æ˜¯éå¸¸é«˜æ•ˆçš„ï¼Œå¹¶ä¸”é€šè¿‡å­—èŠ‚ç æŒ‡ä»¤ä¸ºæ–¹æ³•è°ƒç”¨æä¾›äº†æ”¯æŒã€‚é»˜è®¤æ–¹æ³•å…è®¸ç»§ç»­ä½¿ç”¨ç°æœ‰çš„Javaæ¥å£ï¼Œè€ŒåŒæ—¶èƒ½å¤Ÿä¿éšœæ­£å¸¸çš„ç¼–è¯‘è¿‡ç¨‹ã€‚è¿™æ–¹é¢å¥½çš„ä¾‹å­æ˜¯å¤§é‡çš„æ–¹æ³•è¢«æ·»åŠ åˆ°java.util.Collectionæ¥å£ä¸­å»ï¼šstream()ï¼ŒparallelStream()ï¼ŒforEach()ï¼ŒremoveIf()ï¼Œâ€¦â€¦ å°½ç®¡é»˜è®¤æ–¹æ³•éå¸¸å¼ºå¤§ï¼Œä½†æ˜¯åœ¨ä½¿ç”¨é»˜è®¤æ–¹æ³•æ—¶æˆ‘ä»¬éœ€è¦å°å¿ƒæ³¨æ„ä¸€ä¸ªåœ°æ–¹ï¼šåœ¨å£°æ˜ä¸€ä¸ªé»˜è®¤æ–¹æ³•å‰ï¼Œè¯·ä»”ç»†æ€è€ƒæ˜¯ä¸æ˜¯çœŸçš„æœ‰å¿…è¦ä½¿ç”¨é»˜è®¤æ–¹æ³•ï¼Œå› ä¸ºé»˜è®¤æ–¹æ³•ä¼šå¸¦ç»™ç¨‹åºæ­§ä¹‰ï¼Œå¹¶ä¸”åœ¨å¤æ‚çš„ç»§æ‰¿ä½“ç³»ä¸­å®¹æ˜“äº§ç”Ÿç¼–è¯‘é”™è¯¯ã€‚æ›´å¤šè¯¦æƒ…è¯·å‚è€ƒ å®˜æ–¹æ–‡æ¡£","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"},{"name":"interface","slug":"interface","permalink":"https://ydstudios.gitee.io/tags/interface/"}]},{"title":"Mavenä¸­çš„dependencyManagementå’Œdependencies","slug":"Mavenä¸­çš„dependencyManagementå’Œdependencies","date":"2018-07-28T22:19:50.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/c65e0153.html","link":"","permalink":"https://ydstudios.gitee.io/post/c65e0153.html","excerpt":"æœ€è¿‘å…¬å¸çš„æ•°æ®ä¸­å¿ƒé¡¹ç›®æ˜¯ä½¿ç”¨Mavenè¿›è¡Œç®¡ç†ï¼Œåœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­é‡åˆ°äº†dependencyManagementå’Œdependenciesï¼Œä¸çŸ¥é“å¤§å®¶å¯¹è¿™ä¸¤ä¸ªå…ƒç´ æœ‰ä»€ä¹ˆæƒ³æ³•ï¼Ÿ Mavenä½¿ç”¨dependencyManagementå…ƒç´ æ¥æä¾›äº†ä¸€ç§ç®¡ç†ä¾èµ–ç‰ˆæœ¬å·çš„æ–¹å¼ã€‚é€šå¸¸ä¼šåœ¨ä¸€ä¸ªç»„ç»‡æˆ–è€…é¡¹ç›®çš„æœ€é¡¶å±‚çš„çˆ¶POM ä¸­çœ‹åˆ°dependencyManagement å…ƒç´ ã€‚ä½¿ç”¨pom.xmlä¸­çš„dependencyManagementå…ƒç´ èƒ½è®©æ‰€æœ‰åœ¨å­é¡¹ç›®ä¸­å¼•ç”¨ä¸€ä¸ªä¾èµ–è€Œä¸ç”¨æ˜¾å¼çš„åˆ—å‡ºç‰ˆæœ¬å·ã€‚Mavenä¼šæ²¿ç€çˆ¶å­å±‚æ¬¡å‘ä¸Šèµ°ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªæ‹¥æœ‰dependencyManagementå…ƒç´ çš„é¡¹ç›®ï¼Œç„¶åå®ƒå°±ä¼šä½¿ç”¨åœ¨è¿™ä¸ªdependencyManagement å…ƒç´ ä¸­æŒ‡å®šçš„ç‰ˆæœ¬å·ã€‚","text":"æœ€è¿‘å…¬å¸çš„æ•°æ®ä¸­å¿ƒé¡¹ç›®æ˜¯ä½¿ç”¨Mavenè¿›è¡Œç®¡ç†ï¼Œåœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­é‡åˆ°äº†dependencyManagementå’Œdependenciesï¼Œä¸çŸ¥é“å¤§å®¶å¯¹è¿™ä¸¤ä¸ªå…ƒç´ æœ‰ä»€ä¹ˆæƒ³æ³•ï¼Ÿ Mavenä½¿ç”¨dependencyManagementå…ƒç´ æ¥æä¾›äº†ä¸€ç§ç®¡ç†ä¾èµ–ç‰ˆæœ¬å·çš„æ–¹å¼ã€‚é€šå¸¸ä¼šåœ¨ä¸€ä¸ªç»„ç»‡æˆ–è€…é¡¹ç›®çš„æœ€é¡¶å±‚çš„çˆ¶POM ä¸­çœ‹åˆ°dependencyManagement å…ƒç´ ã€‚ä½¿ç”¨pom.xmlä¸­çš„dependencyManagementå…ƒç´ èƒ½è®©æ‰€æœ‰åœ¨å­é¡¹ç›®ä¸­å¼•ç”¨ä¸€ä¸ªä¾èµ–è€Œä¸ç”¨æ˜¾å¼çš„åˆ—å‡ºç‰ˆæœ¬å·ã€‚Mavenä¼šæ²¿ç€çˆ¶å­å±‚æ¬¡å‘ä¸Šèµ°ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªæ‹¥æœ‰dependencyManagementå…ƒç´ çš„é¡¹ç›®ï¼Œç„¶åå®ƒå°±ä¼šä½¿ç”¨åœ¨è¿™ä¸ªdependencyManagement å…ƒç´ ä¸­æŒ‡å®šçš„ç‰ˆæœ¬å·ã€‚ dependencyManagementä¾‹å¦‚ï¼Œåœ¨çˆ¶æ¨¡å—ä¸­çš„pomï¼š 12345678910111213141516&lt;dependencyManagement&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;com.dm&lt;/groupId&gt; &lt;artifactId&gt;mt-model&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.dm&lt;/groupId&gt; &lt;artifactId&gt;mt-tool&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;/dependency&gt; &lt;dependencies&gt; &lt;/dependencyManagement&gt; ç„¶åæˆ‘ä»¬åœ¨å­æ¨¡å—é‡Œå°±å¯ä»¥è¿™æ ·å¼•ç”¨mt-modelå’Œmt-tool: 12345678910&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;com.dm&lt;/groupId&gt; &lt;artifactId&gt;mt-model&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.dm&lt;/groupId&gt; &lt;artifactId&gt;mt-tool&lt;/artifactId&gt; &lt;/dependency&gt;&lt;/dependencies&gt; å‘ç°ä¸¤è€…æœ‰ä»€ä¹ˆåŒºåˆ«äº†ä¹ˆï¼Ÿå…¶å®å°±æ˜¯åœ¨å­æ¨¡å—ä¸­å¼•ç”¨pomæ²¡æœ‰æ·»åŠ ç‰ˆæœ¬å·ã€‚ è¿™æ ·åšçš„å¥½å¤„å°±æ˜¯ï¼šå¦‚æœæœ‰å¤šä¸ªå­é¡¹ç›®éƒ½å¼•ç”¨åŒä¸€æ ·ä¾èµ–ï¼Œåˆ™å¯ä»¥é¿å…åœ¨æ¯ä¸ªä½¿ç”¨çš„å­é¡¹ç›®é‡Œéƒ½å£°æ˜ä¸€ä¸ªç‰ˆæœ¬å·ï¼Œè¿™æ ·å½“æƒ³å‡çº§æˆ–åˆ‡æ¢åˆ°å¦ä¸€ä¸ªç‰ˆæœ¬æ—¶ï¼Œåªéœ€è¦åœ¨é¡¶å±‚çˆ¶å®¹å™¨é‡Œæ›´æ–°ï¼Œè€Œä¸éœ€è¦ä¸€ä¸ªä¸€ä¸ªå­é¡¹ç›®çš„ä¿®æ”¹ ï¼›å¦å¤–å¦‚æœæŸä¸ªå­é¡¹ç›®éœ€è¦å¦å¤–çš„ä¸€ä¸ªç‰ˆæœ¬ï¼Œåªéœ€è¦å£°æ˜versionå°±å¯ã€‚dependencyManagementé‡Œåªæ˜¯å£°æ˜ä¾èµ–ï¼Œå¹¶ä¸å®ç°å¼•å…¥ï¼Œå› æ­¤å­é¡¹ç›®éœ€è¦æ˜¾å¼çš„å£°æ˜éœ€è¦ç”¨çš„ä¾èµ–ã€‚ dependenciesç›¸å¯¹äºdependencyManagementï¼Œæ‰€æœ‰å£°æ˜åœ¨dependenciesé‡Œçš„ä¾èµ–éƒ½ä¼šè‡ªåŠ¨å¼•å…¥ï¼Œå¹¶é»˜è®¤è¢«æ‰€æœ‰çš„å­é¡¹ç›®ç»§æ‰¿ã€‚","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"},{"name":"maven","slug":"maven","permalink":"https://ydstudios.gitee.io/tags/maven/"}]},{"title":"Spring Boot 1.x ä½¿ç”¨Valueæ³¨è§£ç»™é™æ€å˜é‡èµ‹å€¼","slug":"Spring-Boot-1-x-ä½¿ç”¨Valueæ³¨è§£ç»™é™æ€å˜é‡èµ‹å€¼","date":"2018-07-18T22:18:41.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/54acd1d8.html","link":"","permalink":"https://ydstudios.gitee.io/post/54acd1d8.html","excerpt":"æ˜¨å¤©åœ¨ä½¿ç”¨@Valueæ³¨è§£ç»™é™æ€å˜é‡èµ‹å€¼çš„æ—¶å€™ï¼Œå‘ç°é™æ€å˜é‡çš„å€¼å§‹ç»ˆæ˜¯nullã€‚åæ¥æœç´¢ä¸€ä¸‹å¾—çŸ¥å…¶ä¸­åŸå› ï¼ŒSpring Boot ä¸å…è®¸/ä¸æ”¯æŒæŠŠå€¼æ³¨å…¥åˆ°é™æ€å˜é‡ä¸­ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥å˜é€šä¸€ä¸‹è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å› ä¸ºSpring Bootæ”¯æŒsetæ–¹æ³•æ³¨å…¥ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨éé™æ€setæ–¹æ³•æ³¨å…¥é™æ€å˜é‡ã€‚","text":"æ˜¨å¤©åœ¨ä½¿ç”¨@Valueæ³¨è§£ç»™é™æ€å˜é‡èµ‹å€¼çš„æ—¶å€™ï¼Œå‘ç°é™æ€å˜é‡çš„å€¼å§‹ç»ˆæ˜¯nullã€‚åæ¥æœç´¢ä¸€ä¸‹å¾—çŸ¥å…¶ä¸­åŸå› ï¼ŒSpring Boot ä¸å…è®¸/ä¸æ”¯æŒæŠŠå€¼æ³¨å…¥åˆ°é™æ€å˜é‡ä¸­ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥å˜é€šä¸€ä¸‹è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å› ä¸ºSpring Bootæ”¯æŒsetæ–¹æ³•æ³¨å…¥ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨éé™æ€setæ–¹æ³•æ³¨å…¥é™æ€å˜é‡ã€‚ åºŸè¯ä¸å¤šè¯´ï¼Œè´´ä¸Šæˆ‘æ˜¨å¤©å†™çš„ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839@Componentpublic class CoverImageUtil &#123; private static String endpoint; private static String bucketName; @Value(\"$&#123;oss.endpoint&#125;\") private void setEndpoint(String name)&#123; endpoint = name; &#125; @Value(\"$&#123;oss.bucketName&#125;\") private void setBucketName(String name)&#123; bucketName = name; &#125; public static String getImage(String path)&#123; if (StringUtils.isEmpty(path))&#123; return null; &#125; // XXXçš„å›¾ç‰‡åœ°å€ https://oss.XXX.com/uploads/8F/70/8F70879210F08AAA6F4A04A3D42F3704.jpg if (path.contains(\"oss.XXX.com\"))&#123; return path; &#125; String[] str = path.split(\",\"); // mtçš„å›¾ç‰‡åœ°å€ // key = customer/coverImg/1002,FAFA5EFEAF3CBE3B23B2748D13E629A1,418530,image/jpeg // url = https://m-t-tesing.oss-cn-hangzhou.aliyuncs.com/customer/coverImg/1002 StringBuilder url = new StringBuilder(\"https://\"); url.append(bucketName) .append(\".\") .append(endpoint) .append(\"/\") .append(str[0]); return url.toString(); &#125;&#125; æ³¨æ„ ä»£ç ä¸­éœ€è¦@Componentæ³¨è§£ setæ–¹æ³•è¦æ˜¯éé™æ€çš„","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"},{"name":"spring boot","slug":"spring-boot","permalink":"https://ydstudios.gitee.io/tags/spring-boot/"}]},{"title":"Mybatisæ–¹æ³•ä¼ å¤šä¸ªå‚æ•°ï¼ˆä¸‰ç§è§£å†³æ–¹æ¡ˆï¼‰","slug":"Mybatisæ–¹æ³•ä¼ å¤šä¸ªå‚æ•°ï¼ˆä¸‰ç§è§£å†³æ–¹æ¡ˆï¼‰","date":"2018-07-01T22:17:31.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/98398c3d.html","link":"","permalink":"https://ydstudios.gitee.io/post/98398c3d.html","excerpt":"Mybatisçš„Mapperæ¥å£çš„å‚æ•°ï¼Œä¸€èˆ¬æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä½†å¦‚æœä¸æ˜¯å¯¹è±¡ï¼Œå¹¶ä¸”æœ‰å¤šä¸ªå‚æ•°çš„æ—¶å€™æˆ‘ä»¬åº”è¯¥æ€æ ·åšå‘¢ï¼Ÿ æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªæƒ³æ³•æ˜¯æŠŠå‚æ•°å°è£…æˆä¸€ä¸ªjava.util.Mapç±»å‹ï¼Œç„¶ååœ¨æ–¹æ³•çš„æ³¨é‡Šä¸Šé¢å†™ä¸Šmapçš„keyæ˜¯ä»€ä¹ˆï¼Œä½†æ˜¯ï¼Œè¿™æ ·çš„åšæ³•æ˜æ˜¾ä¸å¤Ÿç›´è§‚ï¼Œä¸èƒ½å¤Ÿæ¸…æ¥šçš„çœ‹å‡ºæ–¹æ³•çš„å‚æ•°æ˜¯ä»€ä¹ˆï¼Œè€Œä¸”å½±å“åˆ°äº†javaçš„å¤šæ€æ€§ï¼ˆæ–¹æ³•åç›¸åŒï¼Œå‚æ•°æ•°é‡æˆ–ç±»å‹ä¸åŒï¼‰ã€‚","text":"Mybatisçš„Mapperæ¥å£çš„å‚æ•°ï¼Œä¸€èˆ¬æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä½†å¦‚æœä¸æ˜¯å¯¹è±¡ï¼Œå¹¶ä¸”æœ‰å¤šä¸ªå‚æ•°çš„æ—¶å€™æˆ‘ä»¬åº”è¯¥æ€æ ·åšå‘¢ï¼Ÿ æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªæƒ³æ³•æ˜¯æŠŠå‚æ•°å°è£…æˆä¸€ä¸ªjava.util.Mapç±»å‹ï¼Œç„¶ååœ¨æ–¹æ³•çš„æ³¨é‡Šä¸Šé¢å†™ä¸Šmapçš„keyæ˜¯ä»€ä¹ˆï¼Œä½†æ˜¯ï¼Œè¿™æ ·çš„åšæ³•æ˜æ˜¾ä¸å¤Ÿç›´è§‚ï¼Œä¸èƒ½å¤Ÿæ¸…æ¥šçš„çœ‹å‡ºæ–¹æ³•çš„å‚æ•°æ˜¯ä»€ä¹ˆï¼Œè€Œä¸”å½±å“åˆ°äº†javaçš„å¤šæ€æ€§ï¼ˆæ–¹æ³•åç›¸åŒï¼Œå‚æ•°æ•°é‡æˆ–ç±»å‹ä¸åŒï¼‰ã€‚ 1.å¤šä¸ªå½¢å‚ä¼ é€’å¤šå‚æ•°Daoå±‚çš„å‡½æ•°æ–¹æ³• 1public User selectUser(String name,String area); å¯¹åº”çš„Mapper.xmlæ–‡ä»¶ 123&lt;select id=\"selectUser\" resultMap=\"BaseResultMap\"&gt; select * from user_user where user_name = #&#123;0&#125; and user_area=#&#123;1&#125;&lt;/select&gt; å…¶ä¸­ï¼Œ#{0}ä»£è¡¨æ¥æ”¶çš„æ˜¯daoå±‚ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œ#{1}ä»£è¡¨daoå±‚ä¸­ç¬¬äºŒå‚æ•°ï¼Œæ›´å¤šå‚æ•°ä»¥æ­¤ç±»æ¨å³å¯ã€‚ 2.é‡‡ç”¨Mapä¼ é€’å¤šå‚æ•°Daoå±‚çš„å‡½æ•°æ–¹æ³• 1public User selectUser(Map paramMap); å¯¹åº”çš„Mapper.xmlæ–‡ä»¶ 123&lt;select id=\"selectUser\" resultMap=\"BaseResultMap\"&gt; select * from user_user where user_name = #&#123;userName,jdbcType=VARCHAR&#125; and user_area=#&#123;userArea,jdbcType=VARCHAR&#125;&lt;/select&gt; Serviceå±‚è°ƒç”¨ 123456private User SelectUser()&#123; Map paramMap = new hashMap(); paramMap.put(â€œuserNameâ€,â€å¯¹åº”å…·ä½“çš„å‚æ•°å€¼â€); paramMap.put(â€œuserAreaâ€,â€å¯¹åº”å…·ä½“çš„å‚æ•°å€¼â€); User user = xxx.selectUser(paramMap); &#125; è¿™ç§æ–¹æ³•ä¸å¤Ÿç›´è§‚ï¼Œçœ‹åˆ°æ¥å£æ–¹æ³•ä¸èƒ½ç›´æ¥çš„çŸ¥é“éœ€è¦ä¼ é€’çš„å‚æ•°æœ‰å“ªäº›ï¼Ÿ 3.ä½¿ç”¨@paramæ³¨è§£Daoå±‚çš„å‡½æ•°æ–¹æ³• 1public User selectUser(@Param(â€œuserNameâ€)String name,@Param(â€œuserAreaâ€)String area); å¯¹åº”çš„Mapper.xmlæ–‡ä»¶ 123&lt;select id=\"selectUser\" resultMap=\"BaseResultMap\"&gt; select * from user_user where user_name = #&#123;userNameï¼ŒjdbcType=VARCHAR&#125;and user_area=#&#123;userArea,jdbcType=VARCHAR&#125;&lt;/select&gt; è¿™ç§æ–¹æ³•æœ€å¥½ï¼Œèƒ½è®©å¼€å‘è€…çœ‹åˆ°daoå±‚æ–¹æ³•å°±çŸ¥é“è¯¥ä¼ ä»€ä¹ˆæ ·çš„å‚æ•°ï¼Œåœ¨xmlä¸­ä¹Ÿç›¸æ¯”å…¶ä»–ä¸¤ç§æ–¹æ³•æ¸…æ¥šã€‚","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"},{"name":"mybatis","slug":"mybatis","permalink":"https://ydstudios.gitee.io/tags/mybatis/"}]},{"title":"Javaå­¦ä¹ ç³»åˆ—æ–‡ç« ç¬¬å…­ç¯‡ï¼šé¡¹ç›®å¼€å‘åˆ©å™¨-Maven","slug":"Javaå­¦ä¹ ç³»åˆ—æ–‡ç« ç¬¬å…­ç¯‡ï¼šé¡¹ç›®å¼€å‘åˆ©å™¨-Maven","date":"2018-06-29T22:03:43.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/1c04f2f4.html","link":"","permalink":"https://ydstudios.gitee.io/post/1c04f2f4.html","excerpt":"ä»€ä¹ˆæ˜¯MavenMavenæ˜¯ç°åœ¨çš„Javaç¨‹åºå‘˜åº”è¯¥éƒ½ä¼šé‡åˆ°æˆ–ä½¿ç”¨çš„ä¸€ä¸ªå·¥å…·ã€‚é‚£Mavenå…·ä½“æ˜¯ä»€ä¹ˆï¼Ÿåˆ°åº•èƒ½å¹²ä»€ä¹ˆï¼Ÿ Mavenæ˜¯ä¸€ä¸ªé¡¹ç›®ç®¡ç†å·¥å…·ï¼Œç”¨æ¥ç®¡ç†é¡¹ç›®çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¦‚é¡¹ç›®ä¸­å„ä¸ªé¡¹ç›®ä¹‹é—´çš„ä¾èµ–ç®¡ç†ï¼Œé¡¹ç›®ä¸­ä½¿ç”¨åˆ°çš„jaråŒ…ä¾èµ–ç®¡ç†ï¼Œè¿˜æœ‰è®¸å¤šé¡¹ç›®æ„å»ºçš„æ’ä»¶ç­‰ã€‚ä½¿ç”¨Mavenæœ€å¤§çš„å¥½å¤„å°±æ˜¯ä¸å†éœ€è¦æˆ‘ä»¬æ‰‹å·¥ç»´æŠ¤é¡¹ç›®ä¸­çš„å„ç§jaråŒ…ï¼ŒåŠjaråŒ…éœ€è¦ä¾èµ–çš„å…¶ä»–jaråŒ…ï¼Œä¹Ÿä¸å†éœ€è¦æˆ‘ä»¬è§£å†³å„ç§jaråŒ…ä¹‹é—´çš„å†²çªï¼Œè¿™ä¸€åˆ‡mavenå¸®æˆ‘ä»¬éƒ½åšå¥½äº†ã€‚ ç›®å‰Javaå¼€å‘ä¸­æµè¡Œçš„é›†æˆå¼€å‘å·¥å…·Ideaå·²ç»é›†æˆäº†Mavenå·¥å…·ï¼Œæ‰“å¼€Ideaçš„è®¾ç½®é€‰æ‹©Mavené¡¹ï¼Œå°±å¯ä»¥çœ‹åˆ°è‡ªå¸¦çš„Mavençš„ä¸€äº›ä¿¡æ¯ã€‚æˆ‘è§‰å¾—Ideaè‡ªå¸¦çš„Mavenå°±æŒºå¥½çš„ï¼Œå°±æ²¡æœ‰å»å†å®‰è£…ä¸€ä¸ªã€‚ä½†æ˜¯ä¹‹å‰ä¸çŸ¥é“Ideaè‡ªå¸¦Mavenå·¥å…·ï¼Œä¸ºæ­¤æœ‰æ¬¡å‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å› ä¸ºä¸¤ä¸ªMavenä»“åº“çš„åŸå› ã€‚åœ¨å…¬å¸çš„ç”µè„‘ä¸Šæˆ‘è‡ªå·±è£…äº†ä¸€ä¸ªMavenï¼Œè‡ªå·±çš„ç”µè„‘ä¸Šæ²¡æœ‰è£…ï¼Œç›´æ¥ä½¿ç”¨Ideaè‡ªå¸¦çš„Mavenã€‚","text":"ä»€ä¹ˆæ˜¯MavenMavenæ˜¯ç°åœ¨çš„Javaç¨‹åºå‘˜åº”è¯¥éƒ½ä¼šé‡åˆ°æˆ–ä½¿ç”¨çš„ä¸€ä¸ªå·¥å…·ã€‚é‚£Mavenå…·ä½“æ˜¯ä»€ä¹ˆï¼Ÿåˆ°åº•èƒ½å¹²ä»€ä¹ˆï¼Ÿ Mavenæ˜¯ä¸€ä¸ªé¡¹ç›®ç®¡ç†å·¥å…·ï¼Œç”¨æ¥ç®¡ç†é¡¹ç›®çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¦‚é¡¹ç›®ä¸­å„ä¸ªé¡¹ç›®ä¹‹é—´çš„ä¾èµ–ç®¡ç†ï¼Œé¡¹ç›®ä¸­ä½¿ç”¨åˆ°çš„jaråŒ…ä¾èµ–ç®¡ç†ï¼Œè¿˜æœ‰è®¸å¤šé¡¹ç›®æ„å»ºçš„æ’ä»¶ç­‰ã€‚ä½¿ç”¨Mavenæœ€å¤§çš„å¥½å¤„å°±æ˜¯ä¸å†éœ€è¦æˆ‘ä»¬æ‰‹å·¥ç»´æŠ¤é¡¹ç›®ä¸­çš„å„ç§jaråŒ…ï¼ŒåŠjaråŒ…éœ€è¦ä¾èµ–çš„å…¶ä»–jaråŒ…ï¼Œä¹Ÿä¸å†éœ€è¦æˆ‘ä»¬è§£å†³å„ç§jaråŒ…ä¹‹é—´çš„å†²çªï¼Œè¿™ä¸€åˆ‡mavenå¸®æˆ‘ä»¬éƒ½åšå¥½äº†ã€‚ ç›®å‰Javaå¼€å‘ä¸­æµè¡Œçš„é›†æˆå¼€å‘å·¥å…·Ideaå·²ç»é›†æˆäº†Mavenå·¥å…·ï¼Œæ‰“å¼€Ideaçš„è®¾ç½®é€‰æ‹©Mavené¡¹ï¼Œå°±å¯ä»¥çœ‹åˆ°è‡ªå¸¦çš„Mavençš„ä¸€äº›ä¿¡æ¯ã€‚æˆ‘è§‰å¾—Ideaè‡ªå¸¦çš„Mavenå°±æŒºå¥½çš„ï¼Œå°±æ²¡æœ‰å»å†å®‰è£…ä¸€ä¸ªã€‚ä½†æ˜¯ä¹‹å‰ä¸çŸ¥é“Ideaè‡ªå¸¦Mavenå·¥å…·ï¼Œä¸ºæ­¤æœ‰æ¬¡å‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å› ä¸ºä¸¤ä¸ªMavenä»“åº“çš„åŸå› ã€‚åœ¨å…¬å¸çš„ç”µè„‘ä¸Šæˆ‘è‡ªå·±è£…äº†ä¸€ä¸ªMavenï¼Œè‡ªå·±çš„ç”µè„‘ä¸Šæ²¡æœ‰è£…ï¼Œç›´æ¥ä½¿ç”¨Ideaè‡ªå¸¦çš„Mavenã€‚ Mavenä»“åº“ä½¿ç”¨ Maven ç»™æˆ‘ä»¬å¸¦æ¥çš„æœ€ç›´æ¥çš„å¸®åŠ©ï¼Œå°±æ˜¯ jar åŒ…å¾—åˆ°äº†ç»Ÿä¸€ç®¡ç†ï¼Œé‚£ä¹ˆè¿™äº› jar åŒ…å­˜æ”¾åœ¨å“ªé‡Œå‘¢ï¼Ÿå®ƒä»¬å°±åœ¨æ‚¨çš„ æœ¬åœ°ä»“åº“ ä¸­ï¼Œä½äº C:\\Users\\ç”¨æˆ·å.m2 ç›®å½•ä¸‹ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥ä¿®æ”¹è¿™ä¸ªé»˜è®¤åœ°å€ï¼‰ã€‚ å®é™…ä¸Šå¯å°†æœ¬åœ°ä»“åº“ç†è§£â€œç¼“å­˜â€ï¼Œå› ä¸ºé¡¹ç›®é¦–å…ˆä¼šä»æœ¬åœ°ä»“åº“ä¸­è·å– jar åŒ…ï¼Œå½“æ— æ³•è·å–æŒ‡å®š jar åŒ…çš„æ—¶å€™ï¼Œæœ¬åœ°ä»“åº“ä¼šä» è¿œç¨‹ä»“åº“ï¼ˆæˆ– ä¸­å¤®ä»“åº“ï¼‰ ä¸­ä¸‹è½½ jar åŒ…ï¼Œå¹¶æ”¾å…¥æœ¬åœ°ä»“åº“ä¸­ä»¥å¤‡å°†æ¥ä½¿ç”¨ã€‚è¿™ä¸ªè¿œç¨‹ä»“åº“æ˜¯ Maven å®˜æ–¹æä¾›çš„ï¼Œå¯é€šè¿‡ http://search.maven.org/ æ¥è®¿é—®ã€‚è¿™æ ·ä¸€æ¥ï¼Œæœ¬åœ°ä»“åº“ä¼šéšç€é¡¹ç›®çš„ç§¯ç´¯è¶Šæ¥è¶Šå¤§ã€‚é€šè¿‡ä¸‹é¢è¿™å¼ å›¾å¯ä»¥æ¸…æ™°åœ°è¡¨è¾¾é¡¹ç›®ã€æœ¬åœ°ä»“åº“ã€è¿œç¨‹ä»“åº“ä¹‹é—´çš„å…³ç³»ã€‚ Mavenå‘½ä»¤Mavenæ‰§è¡Œå‘½ä»¤æœ‰ä¸¤ç§æ–¹å¼ï¼š Interactive Modeï¼ˆäº¤äº’æ¨¡å¼ï¼‰ Batch Modeï¼ˆæ‰¹å¤„ç†æ¨¡å¼ï¼‰ äº¤äº’æ¨¡å¼åˆ›å»ºé¡¹ç›®æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ 1mvn archetype:generate æ¥ä¸‹æ¥ä¼šå‡ºç°ä¸‹é¢çš„é€‰é¡¹ï¼š é¡¹ç›® Archetype Versionï¼ˆåŸå‹ç‰ˆæœ¬å·ï¼‰æ˜¯ä»€ä¹ˆï¼Ÿâ€”â€” å¯é€‰æ‹© 1.0 ç‰ˆæœ¬ é¡¹ç›® groupIdï¼ˆç»„ç»‡åï¼‰ æ˜¯ä»€ä¹ˆï¼Ÿâ€”â€” å¯è¾“å…¥ net.ydstudio é¡¹ç›® artifactIdï¼ˆæ„ä»¶åï¼‰æ˜¯ä»€ä¹ˆï¼Ÿâ€”â€” å¯è¾“å…¥ maven-demo é¡¹ç›® versionï¼ˆç‰ˆæœ¬å·ï¼‰æ˜¯ä»€ä¹ˆï¼Ÿâ€”â€” å¯è¾“å…¥ 1.0 é¡¹ç›® packageï¼ˆåŒ…åï¼‰æ˜¯ä»€ä¹ˆï¼Ÿâ€”â€” å¯è¾“å…¥ net.ydstudio.demo ä½¿ç”¨æ‰¹å¤„ç†æ¨¡å¼åˆ›å»ºé¡¹ç›®1mvn archetype:generate -DinteractiveMode=false -DarchetypeArtifactId=maven-archetype-webapp -DgroupId=net.ydstudio -DartifactId=maven-demo -Dversion=1.0 åˆ›å»ºé¡¹ç›®è¿™äº‹æˆ‘è§‰å¾—è¿˜æ˜¯ç”¨Ideaæ¥åšï¼Œæ–¹ä¾¿å¿«æ·ã€‚ç”¨å‘½ä»¤åˆ›å»ºçš„è¯ï¼Œå‘½ä»¤æœ‰æ—¶è®°å¾—ä¸å…¨ï¼Œä¸æ˜¯å¾ˆæ–¹ä¾¿ã€‚ åˆ›å»ºæˆåŠŸä¹‹åçš„é¡¹ç›®ä¸­ä¸€èˆ¬ä¼šæœ‰ä¸‹é¢çš„å‡ ä¸ªç›®å½•ï¼Œå¦‚æœæ²¡æœ‰çš„è¯å°±è‡ªè¡Œåˆ›å»ºã€‚ src/main/javaï¼Œä¸»è¦ä»£ç å­˜æ”¾çš„åœ°æ–¹ src/test/javaï¼Œæµ‹è¯•ä»£ç å­˜æ”¾çš„åœ°æ–¹ src/main/resourcesï¼Œé…ç½®ã€èµ„æºæ–‡ä»¶å­˜æ”¾çš„åœ°æ–¹ src/main/webapp,Webåº”ç”¨ç›¸å…³ä»£ç å­˜æ”¾çš„åœ°æ–¹ è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„æ–‡ä»¶ï¼š pom.xmlï¼›pom.xmlç§°ä¸ºProject Object Modelï¼ˆé¡¹ç›®å¯¹è±¡æ¨¡å‹ï¼‰ï¼Œå®ƒç”¨äºæè¿°æ•´ä¸ªMavené¡¹ç›®ï¼Œæ‰€ä»¥ä¹Ÿç§°ä¸ºMavenæè¿°æ–‡ä»¶ã€‚pom.xml æ‰æ˜¯ç†è§£ Maven çš„å…³é”®ç‚¹ï¼Œå¾ˆæœ‰å¿…è¦çœ‹çœ‹å®ƒåˆ°åº•é•¿ä»€ä¹ˆæ ·ã€‚ pomæ–‡ä»¶æ‰“å¼€ç”Ÿæˆçš„pomæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;net.ydstudio&lt;/groupId&gt; &lt;artifactId&gt;maven-demo&lt;/artifactId&gt; &lt;version&gt;1.0&lt;/version&gt; &lt;packaging&gt;war&lt;/packaging&gt; &lt;name&gt;maven-demo Maven Webapp&lt;/name&gt; &lt;url&gt;http://maven.apache.org&lt;/url&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;3.8.1&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;finalName&gt;maven-demo&lt;/finalName&gt; &lt;/build&gt;&lt;/project&gt; æˆ‘ä»¬æ¥è§£é‡Šä¸€ä¸‹ï¼š modelVersion:è¿™ä¸ªæ˜¯pomçš„ç‰ˆæœ¬å·ï¼Œç°åœ¨éƒ½æ˜¯4.0.0çš„ï¼Œå¿…é¡»å¾—æœ‰ï¼Œä½†ä¸éœ€è¦ä¿®æ”¹ã€‚ groupIdã€artifactIdã€versionï¼šåˆ†åˆ«è¡¨ç¤º Maven é¡¹ç›®çš„ç»„ç»‡åã€æ„ä»¶åã€ç‰ˆæœ¬å·ï¼Œå®ƒä»¬ä¸‰ä¸ªåˆèµ·æ¥å°±æ˜¯ Maven åæ ‡ï¼Œæ ¹æ®è¿™ä¸ªåæ ‡å¯ä»¥åœ¨ Maven ä»“åº“ä¸­å¯¹åº”å”¯ä¸€çš„ Maven æ„ä»¶ã€‚ packagingï¼šè¡¨ç¤ºè¯¥é¡¹ç›®çš„æ‰“åŒ…æ–¹å¼ï¼Œwar è¡¨ç¤ºæ‰“åŒ…ä¸º war æ–‡ä»¶ï¼Œé»˜è®¤ä¸º jarï¼Œè¡¨ç¤ºæ‰“åŒ…ä¸º jar æ–‡ä»¶ã€‚ nameã€urlï¼šè¡¨ç¤ºè¯¥é¡¹ç›®çš„åç§°ä¸ URL åœ°å€ï¼Œæ„ä¹‰ä¸å¤§ï¼Œå¯ä»¥çœç•¥ã€‚ dependenciesï¼šå®šä¹‰è¯¥é¡¹ç›®çš„ä¾èµ–å…³ç³»ï¼Œå…¶ä¸­æ¯ä¸€ä¸ª dependency å¯¹åº”ä¸€ä¸ª Maven é¡¹ç›®ï¼Œå¯è§ Maven åæ ‡å†æ¬¡å‡ºç°ï¼Œè¿˜å¤šäº†ä¸€ä¸ª scopeï¼Œè¡¨ç¤ºä½œç”¨åŸŸï¼ˆä¸‹é¢ä¼šæè¿°ï¼‰ã€‚ buildï¼šè¡¨ç¤ºä¸æ„å»ºç›¸å…³çš„é…ç½®ï¼Œè¿™é‡Œçš„ finalName è¡¨ç¤ºæœ€ç»ˆæ„å»ºåçš„åç§° maven-demo.warï¼Œè¿™é‡Œçš„ finalName è¿˜å¯ä»¥ä½¿ç”¨å¦ä¸€ç§æ–¹å¼æ¥å®šä¹‰ï¼ˆä¸‹é¢ä¼šæè¿°ï¼‰ã€‚ æˆ‘ä»¬å¯ä»¥åœ¨ pom.xmlä¸­å®šä¹‰ä¸€äº›åˆ—çš„é¡¹ç›®ä¾èµ–ï¼ˆæ„ä»¶åŒ…ï¼‰ï¼Œæ¯ä¸ªæ„ä»¶åŒ…éƒ½ä¼šæœ‰ä¸€ä¸ª Scopeï¼ˆä½œç”¨åŸŸï¼‰ï¼Œå®ƒè¡¨ç¤ºè¯¥æ„ä»¶åŒ…åœ¨ä»€ä¹ˆæ—¶å€™èµ·ä½œç”¨ï¼ŒåŒ…æ‹¬ä»¥ä¸‹äº”ç§ï¼š compileï¼šé»˜è®¤ä½œç”¨åŸŸï¼Œåœ¨ç¼–è¯‘ã€æµ‹è¯•ã€è¿è¡Œæ—¶æœ‰æ•ˆ testï¼šå¯¹äºæµ‹è¯•æ—¶æœ‰æ•ˆ runtimeï¼šå¯¹äºæµ‹è¯•ã€è¿è¡Œæ—¶æœ‰æ•ˆ providedï¼šå¯¹äºç¼–è¯‘ã€æµ‹è¯•æ—¶æœ‰æ•ˆï¼Œä½†åœ¨è¿è¡Œæ—¶æ— æ•ˆ systemï¼šä¸ provided ç±»ä¼¼ï¼Œä½†ä¾èµ–äºç³»ç»Ÿèµ„ Mavenå¸¸è§å‘½ä»¤å‰é¢æˆ‘ä»¬å·²ç»ä½¿ç”¨äº†å‡ ä¸ª Maven å‘½ä»¤ï¼Œä¾‹å¦‚ï¼šmvn archetype:generateï¼Œmvn tomcat7:run-war ç­‰ã€‚å…¶å®ï¼Œå¯ä½¿ç”¨ä¸¤ç§ä¸åŒçš„æ–¹å¼æ¥æ‰§è¡Œ Maven å‘½ä»¤ï¼š mvn &lt;æ’ä»¶&gt;:&lt;ç›®æ ‡&gt; [å‚æ•°] mvn &lt;é˜¶æ®µ&gt;ç°åœ¨æˆ‘ä»¬æ¥è§¦åˆ°çš„éƒ½æ˜¯ç¬¬ä¸€ç§æ–¹å¼ï¼Œè€Œç¬¬äºŒç§æ–¹å¼æ‰æ˜¯æˆ‘ä»¬æ—¥å¸¸ä¸­ä½¿ç”¨æœ€é¢‘ç¹çš„ï¼Œä¾‹å¦‚ï¼š mvn cleanï¼šæ¸…ç©ºè¾“å‡ºç›®å½•ï¼ˆå³ target ç›®å½•ï¼‰ mvn compileï¼šç¼–è¯‘æºä»£ç  mvn packageï¼šç”Ÿæˆæ„ä»¶åŒ…ï¼ˆä¸€èˆ¬ä¸º jar åŒ…æˆ– war åŒ…ï¼‰ mvn installï¼šå°†æ„ä»¶åŒ…å®‰è£…åˆ°æœ¬åœ°ä»“åº“ mvn deployï¼šå°†æ„ä»¶åŒ…éƒ¨ç½²åˆ°è¿œç¨‹ä»“åº“ æ‰§è¡Œ Maven å‘½ä»¤éœ€è¦æ³¨æ„çš„æ˜¯ï¼šå¿…é¡»åœ¨Mavené¡¹ç›®çš„æ ¹ç›®å½•å¤„æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯å½“å‰ç›®å½•ä¸‹ä¸€å®šå­˜åœ¨ä¸€ä¸ªåä¸º pom.xml çš„æ–‡ä»¶ã€‚","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"},{"name":"maven","slug":"maven","permalink":"https://ydstudios.gitee.io/tags/maven/"}]},{"title":"Javaå­¦ä¹ ç³»åˆ—æ–‡ç« ç¬¬äº”ç¯‡ï¼šè¯´è¯´Javaä¸­çš„å¼‚å¸¸","slug":"Javaå­¦ä¹ ç³»åˆ—æ–‡ç« ç¬¬äº”ç¯‡ï¼šè¯´è¯´Javaä¸­çš„å¼‚å¸¸","date":"2018-06-29T22:00:54.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/4b7e7a69.html","link":"","permalink":"https://ydstudios.gitee.io/post/4b7e7a69.html","excerpt":"åœ¨æ­£å¸¸çš„ç¨‹åºè®¾è®¡ä¸­ï¼Œç¨‹åºå¼‚å¸¸å¤„ç†æ˜¯éå¸¸å…³é”®å’Œé‡è¦çš„ä¸€éƒ¨åˆ†ã€‚è¯•æƒ³ä¸€ä¸ªé¡¹ç›®ä¸­æ²¡æœ‰ä¸€ä¸ªå¥½çš„å¼‚å¸¸å¤„ç†ï¼Œè¿™ä¸ªé¡¹ç›®ä¼šæ€ä¹ˆæ ·ï¼Ÿ","text":"åœ¨æ­£å¸¸çš„ç¨‹åºè®¾è®¡ä¸­ï¼Œç¨‹åºå¼‚å¸¸å¤„ç†æ˜¯éå¸¸å…³é”®å’Œé‡è¦çš„ä¸€éƒ¨åˆ†ã€‚è¯•æƒ³ä¸€ä¸ªé¡¹ç›®ä¸­æ²¡æœ‰ä¸€ä¸ªå¥½çš„å¼‚å¸¸å¤„ç†ï¼Œè¿™ä¸ªé¡¹ç›®ä¼šæ€ä¹ˆæ ·ï¼Ÿ ä»€ä¹ˆæ˜¯å¼‚å¸¸å¼‚å¸¸å…¶å®æ˜¯ç¨‹åºä¸Šçš„é”™è¯¯ï¼ŒåŒ…æ‹¬ç¨‹åºé€»è¾‘é”™è¯¯å’Œç³»ç»Ÿé”™è¯¯ã€‚æ¯”å¦‚æ•°ç»„ä¸‹æ ‡è¶Šç•Œã€å†…å­˜æº¢å‡ºç­‰ï¼Œè¿™äº›éƒ½æ˜¯æ„å¤–çš„æƒ…å†µï¼Œé”™è¯¯åœ¨æˆ‘ä»¬çš„ç¨‹åºçš„ç¼–å†™è¿‡ç¨‹ä¸­ä¼šç»å¸¸å‘ç”Ÿï¼ŒåŒ…æ‹¬ç¼–è¯‘æœŸé—´å’Œè¿è¡ŒæœŸé—´çš„é”™è¯¯ã€‚åœ¨ç¼–è¯‘æœŸé—´å‡ºç°çš„é”™è¯¯ç¼–è¯‘å™¨ä¼šå¸®åŠ©æˆ‘ä»¬ä¿®æ­£ï¼Œå¯æ˜¯åœ¨è¿è¡ŒæœŸé—´çš„é”™è¯¯ç¼–è¯‘å™¨å°±æ— èƒ½ä¸ºåŠ›äº†ï¼Œå¹¶ä¸”è¿è¡ŒæœŸé—´çš„é”™è¯¯å¾€å¾€æ˜¯éš¾ä»¥é¢„æ–™çš„ã€‚ ç¨‹åºå‡ºç°äº†é”™è¯¯ï¼Œæˆ‘ä»¬ä¸èƒ½ä¸å»å¤„ç†ï¼Œè¿™æ ·çš„ç¨‹åºçš„å¥å£®æ€§å¤ªå·®äº†ã€‚ä¸ºäº†æé«˜ç¨‹åºçš„å¥å£®æ€§æˆ‘ä»¬è¦åˆç†çš„è§£å†³è¿™äº›é”™è¯¯ï¼äºæ˜¯Javaä¸­æä¾›äº†å¼‚å¸¸çš„å¤„ç†æœºåˆ¶ï¼Œé€šè¿‡å¼‚å¸¸æ¥å¤„ç†ç¨‹åºè¿è¡ŒæœŸé—´ä¸­å‡ºç°çš„é”™è¯¯ã€‚é€šè¿‡è¿™ä¸€ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå¥½çš„æé«˜ç¨‹åºçš„å¥å£®æ€§ã€‚ Javaæ˜¯ä¸€ä¸ªå…¨é¢çš„é¢å‘å¯¹è±¡è¯­è¨€ï¼Œä¸åƒPHPé‚£æ ·ï¼Œæ—¢æ”¯æŒè¿‡ç¨‹å¼ç¼–ç¨‹ï¼Œä¹Ÿæ”¯æŒé¢å‘å¯¹è±¡ç¼–ç¨‹ã€‚Javaä¸­å¼‚å¸¸çš„çˆ¶ç±»æ˜¯java.lang.Throwableç±»ã€‚åœ¨Javaä¸­å®šä¹‰å¾ˆå¤šçš„çš„å¼‚å¸¸ç±»ï¼Œæ¯”å¦‚OutOfMenoryErrorã€NullPointerExceptionã€IndexOutOfBoundsExceptionç­‰ã€‚ Exception ç±»çš„å±‚æ¬¡æ‰€æœ‰çš„å¼‚å¸¸ç±»æ˜¯ä» java.lang.Exception ç±»ç»§æ‰¿çš„å­ç±»ã€‚ Exception ç±»æ˜¯ Throwableç±»çš„å­ç±»ã€‚é™¤äº†Exceptionç±»å¤–ï¼ŒThrowableè¿˜æœ‰ä¸€ä¸ªå­ç±»Error ã€‚Java ç¨‹åºé€šå¸¸ä¸æ•è·é”™è¯¯ã€‚é”™è¯¯ä¸€èˆ¬å‘ç”Ÿåœ¨ä¸¥é‡æ•…éšœæ—¶ï¼Œå®ƒä»¬åœ¨Javaç¨‹åºå¤„ç†çš„èŒƒç•´ä¹‹å¤–ã€‚ Error ç”¨æ¥æŒ‡ç¤ºè¿è¡Œæ—¶ç¯å¢ƒå‘ç”Ÿçš„é”™è¯¯ã€‚ä¾‹å¦‚ï¼ŒJVM å†…å­˜æº¢å‡ºã€‚ä¸€èˆ¬åœ°ï¼Œç¨‹åºä¸ä¼šä»é”™è¯¯ä¸­æ¢å¤ã€‚å¼‚å¸¸ç±»æœ‰ä¸¤ä¸ªä¸»è¦çš„å­ç±»ï¼šIOException ç±»å’Œ RuntimeException ç±»ã€‚ Exceptionï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç»å¸¸è§åˆ°çš„ä¸€äº›å¼‚å¸¸æƒ…å†µï¼Œä¾‹å¦‚NullPointerExceptionã€IndexOutOfBoundsExceptionç­‰ï¼Œè¿™äº›å¼‚å¸¸æ—¶æ˜¯æˆ‘ä»¬å¯ä»¥å¤„ç†çš„å¼‚å¸¸ã€‚ Exceptionç±»çš„å¼‚å¸¸åŒ…æ‹¬checked exceptionå’Œunchecked exceptionï¼ˆunchecked exceptionä¹Ÿç§°ä½œè¿è¡Œæ—¶å¼‚å¸¸RuntimeExceptionï¼ŒExceptionç±»çš„å¼‚å¸¸éƒ½æ˜¯åœ¨è¿è¡ŒæœŸé—´å‘ç”Ÿçš„ï¼‰ï¼Œå¯¹äºè¿è¡Œæ—¶å¼‚å¸¸ï¼ŒJavaç¼–è¯‘å™¨ä¸è¦æ±‚å¿…é¡»è¿›è¡Œå¼‚å¸¸å¤„ç†æ•è·å¤„ç†æˆ–è€…æŠ›å‡ºï¼Œè¿™ä¸ªç”±ç¨‹åºå‘˜è‡ªè¡Œå†³å®šã€‚ checked exceptionï¼ˆæ£€æŸ¥å¼‚å¸¸ï¼‰ï¼Œä¹Ÿç§°ä¸ºéè¿è¡Œæ—¶å¼‚å¸¸ï¼ˆè¿è¡Œæ—¶å¼‚å¸¸ä»¥å¤–çš„å¼‚å¸¸å°±æ˜¯éè¿è¡Œæ—¶å¼‚å¸¸ï¼‰ï¼ŒJavaç¼–è¯‘å™¨å¼ºåˆ¶ç¨‹åºå‘˜å¿…é¡»æ•è·å¤„ç†ï¼Œæ¯”å¦‚å¸¸è§çš„IOExceptionå’ŒSQLExceptionã€‚å¯¹äºéè¿è¡Œæ—¶å¼‚å¸¸å¦‚æœä¸è¿›è¡Œæ•è·æˆ–è€…æŠ›å‡ºå¤„ç†ï¼ŒJavaç¼–è¯‘å™¨éƒ½ä¸ä¼šé€šè¿‡ã€‚ åœ¨ç½‘ä¸Šæ‰¾äº†ä¸€ä¸ªå›¾ï¼Œèƒ½å¤Ÿå¾ˆæ¸…æ¥šçš„æè¿°åœ¨Javaä¸­ï¼Œå¼‚å¸¸ç±»çš„ç»“æ„å±‚æ¬¡ï¼ˆæœ‰äº›æ—¶å€™è¯­è¨€å°±ç•¥æ˜¾è‹ç™½ï¼Œä¸å¦‚å›¾ç‰‡æˆ–è€…è§†é¢‘è¡¨ç°åŠ›ä¸°å¯Œï¼‰ã€‚ åœ¨Javaä¸­ï¼Œæ‰€æœ‰çš„å¼‚å¸¸éƒ½æ˜¯ç»§æ‰¿è‡³java.lang.Throwableç±»ã€‚Errorç±»æ˜¯errorç±»å‹å¼‚å¸¸çš„çˆ¶ç±»ï¼ŒExceptionç±»æ˜¯exceptionç±»å‹å¼‚å¸¸çš„çˆ¶ç±»ï¼ŒRuntimeExceptionç±»æ˜¯æ‰€æœ‰è¿è¡Œæ—¶å¼‚å¸¸çš„çˆ¶ç±»ï¼ŒRuntimeExceptionä»¥å¤–çš„å¹¶ä¸”ç»§æ‰¿Exceptionçš„ç±»æ˜¯éè¿è¡Œæ—¶å¼‚å¸¸ã€‚ å…¸å‹çš„RuntimeExceptionåŒ…æ‹¬NullPointerExceptionã€IndexOutOfBoundsExceptionã€IllegalArgumentExceptionç­‰ã€‚ å…¸å‹çš„éRuntimeExceptionåŒ…æ‹¬IOExceptionã€SQLExceptionç­‰ã€‚ Javaå¦‚ä½•å¤„ç†å¼‚å¸¸åœ¨Javaä¸­å¦‚æœéœ€è¦å¤„ç†å¼‚å¸¸ï¼Œå¿…é¡»å…ˆå¯¹å¼‚å¸¸è¿›è¡Œæ•è·ï¼ˆè¿™ä¸€ç‚¹æ˜¯å’ŒPHPæ˜¯ç›¸åŒçš„ï¼‰ã€‚ä½¿ç”¨tryå’Œcatchå…³é”®å­—è¿›è¡Œå¤„ç†ã€‚å…·ä½“çš„è§„åˆ™å¦‚ä¸‹ï¼š 123456789try&#123; // ç¨‹åºä»£ç &#125;catch(å¼‚å¸¸ç±»å‹1 å¼‚å¸¸çš„å˜é‡å1)&#123; // ç¨‹åºä»£ç &#125;catch(å¼‚å¸¸ç±»å‹2 å¼‚å¸¸çš„å˜é‡å2)&#123; // ç¨‹åºä»£ç &#125;finally&#123; // ç¨‹åºä»£ç &#125; æ¥æ®µå®é™…çš„ä»£ç ï¼š 12345678910111213import java.io.*;public class ExcepTest&#123; public static void main(String args[])&#123; try &#123; File file = new File(\"/Users/sam/a.txt\"); if(!file.exists()) file.createNewFile(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125;&#125; è¢«tryå—åŒ…å›´çš„ä»£ç è¯´æ˜è¿™æ®µä»£ç å¯èƒ½ä¼šå‘ç”Ÿå¼‚å¸¸ï¼Œä¸€æ—¦å‘ç”Ÿå¼‚å¸¸ï¼Œå¼‚å¸¸ä¾¿ä¼šè¢«catchæ•è·åˆ°ï¼Œç„¶åéœ€è¦åœ¨catchå—ä¸­è¿›è¡Œå¼‚å¸¸å¤„ç†ã€‚è¿™æ˜¯ä¸€ç§å¤„ç†å¼‚å¸¸çš„æ–¹å¼ã€‚åœ¨Javaä¸­è¿˜æä¾›äº†å¦ä¸€ç§å¼‚å¸¸å¤„ç†æ–¹å¼å³æŠ›å‡ºå¼‚å¸¸ï¼Œé¡¾åæ€ä¹‰ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€æ—¦å‘ç”Ÿå¼‚å¸¸ï¼Œæˆ‘æŠŠè¿™ä¸ªå¼‚å¸¸æŠ›å‡ºå»ï¼Œè®©è°ƒç”¨è€…å»è¿›è¡Œå¤„ç†ï¼Œè‡ªå·±ä¸è¿›è¡Œå…·ä½“çš„å¤„ç†ï¼Œæ­¤æ—¶éœ€è¦ç”¨åˆ°throwå’Œthrowså…³é”®å­—ã€‚ æˆ‘ä»¬çœ‹ä¸‹é¢çš„ä»£ç ï¼š 123456789101112131415public class Main &#123; public static void main(String[] args) &#123; try &#123; createFile(); &#125; catch (Exception e) &#123; // TODO: handle exception &#125; &#125; public static void createFile() throws IOException&#123; File file = new File(\"/Users/sam/a.txt); if(!file.exists()) file.createNewFile(); &#125;&#125; è¿™æ®µä»£ç å’Œä¸Šé¢ä¸€æ®µä»£ç çš„åŒºåˆ«æ˜¯ï¼Œåœ¨å®é™…çš„createFileæ–¹æ³•ä¸­å¹¶æ²¡æœ‰æ•è·å¼‚å¸¸ï¼Œè€Œæ˜¯ç”¨throwså…³é”®å­—å£°æ˜æŠ›å‡ºå¼‚å¸¸ï¼Œå³å‘ŠçŸ¥è°ƒç”¨è€…æ­¤æ–¹æ³•å¯èƒ½ä¼šæŠ›å‡ºIOExceptionï¼Œéœ€è¦è°ƒç”¨è€…è¿›è¡Œæ•è·å¤„ç†ã€‚é‚£ä¹ˆåœ¨mainæ–¹æ³•ä¸­è°ƒç”¨createFileæ–¹æ³•çš„æ—¶å€™ï¼Œé‡‡ç”¨tryâ€¦catchå—è¿›è¡Œäº†å¼‚å¸¸æ•è·å¤„ç†ã€‚ è¿˜å¯ä»¥ä½¿ç”¨throwå…³é”®å­—è¿›è¡ŒæŠ›å‡ºå¼‚å¸¸ã€‚çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566package exception;/** * Created by Sam on 18/6/17. */public class Main &#123; public static void main(String[] args)&#123; People people = new People(\"Sam\",new Byte(\"25\")); people.sayAge(); &#125;&#125; class People &#123; private String name; private Byte age; public People(String name, Byte age) &#123; this.name = name; this.age = age; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public Byte getAge() &#123; return age; &#125; public void setAge(Byte age) &#123; this.age = age; &#125; public Byte sayAge()&#123; if (age &gt; Byte.MIN_VALUE)&#123; throw new MyException(\"å¹´é¾„å¤ªå¤§äº†\",\"100\" ); &#125; return age; &#125;&#125;public class MyException extends RuntimeException &#123; private String code; public MyException(String message, String code) &#123; super(message); this.code = code; &#125; public String getCode() &#123; return code; &#125; public void setCode(String code) &#123; this.code = code; &#125;&#125; ä¸Šé¢å°±æ˜¯åˆ©ç”¨throwå…³é”®å­—è¿›è¡Œæ‰‹åŠ¨æŠ›å‡ºå¼‚å¸¸ã€‚è°ƒç”¨è€…å¯ä»¥æ•è·å¤„ç†å¼‚å¸¸ï¼Œä¹Ÿå¯ä»¥ä¸ç”¨å¤„ç†å¼‚å¸¸ã€‚ä¸‹é¢æˆ‘ä»¬å°±ä¿®æ”¹ä¸€ä¸‹ä»£ç è¿›è¡Œæ•è·å¤„ç†ï¼š 1234567891011121314public class Main &#123; public static void main(String[] args)&#123; People people = new People(\"Sam\",new Byte(\"25\")); try &#123; people.sayAge(); &#125;catch (Exception e)&#123; System.out.println(e); &#125; &#125;&#125;ç¨‹åºè¾“å‡ºï¼šexception.MyException: å¹´é¾„å¤ªå¤§äº† ä¹Ÿå°±è¯´åœ¨Javaä¸­è¿›è¡Œå¼‚å¸¸å¤„ç†çš„è¯ï¼Œå¯¹äºå¯èƒ½ä¼šå‘ç”Ÿå¼‚å¸¸çš„ä»£ç ï¼Œå¯ä»¥é€‰æ‹©ä¸‰ç§æ–¹æ³•æ¥è¿›è¡Œå¼‚å¸¸å¤„ç†ï¼š 1ã€å¯¹ä»£ç å—ç”¨try..catchè¿›è¡Œå¼‚å¸¸æ•è·å¤„ç†ï¼› 2ã€åœ¨è¯¥ä»£ç çš„æ–¹æ³•ä½“å¤–ç”¨throwsè¿›è¡ŒæŠ›å‡ºå£°æ˜ï¼Œå‘ŠçŸ¥æ­¤æ–¹æ³•çš„è°ƒç”¨è€…è¿™æ®µä»£ç å¯èƒ½ä¼šå‡ºç°è¿™äº›å¼‚å¸¸ï¼Œä½ éœ€è¦è°¨æ…å¤„ç†ã€‚æ­¤æ—¶æœ‰ä¸¤ç§æƒ…å†µï¼š å¦‚æœå£°æ˜æŠ›å‡ºçš„å¼‚å¸¸æ˜¯éè¿è¡Œæ—¶å¼‚å¸¸ï¼Œæ­¤æ–¹æ³•çš„è°ƒç”¨è€…å¿…é¡»æ˜¾ç¤ºåœ°ç”¨try..catchå—è¿›è¡Œæ•è·æˆ–è€…ç»§ç»­å‘ä¸Šå±‚æŠ›å‡ºå¼‚å¸¸ã€‚ å¦‚æœå£°æ˜æŠ›å‡ºçš„å¼‚å¸¸æ˜¯è¿è¡Œæ—¶å¼‚å¸¸ï¼Œæ­¤æ–¹æ³•çš„è°ƒç”¨è€…å¯ä»¥é€‰æ‹©åœ°è¿›è¡Œå¼‚å¸¸æ•è·å¤„ç†ã€‚ 3ã€åœ¨ä»£ç å—ç”¨throwæ‰‹åŠ¨æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸å¯¹è±¡ï¼Œæ­¤æ—¶ä¹Ÿæœ‰ä¸¤ç§æƒ…å†µï¼Œè·Ÿ2ï¼‰ä¸­çš„ç±»ä¼¼ï¼š å¦‚æœæŠ›å‡ºçš„å¼‚å¸¸å¯¹è±¡æ˜¯éè¿è¡Œæ—¶å¼‚å¸¸ï¼Œæ­¤æ–¹æ³•çš„è°ƒç”¨è€…å¿…é¡»æ˜¾ç¤ºåœ°ç”¨try..catchå—è¿›è¡Œæ•è·æˆ–è€…ç»§ç»­å‘ä¸Šå±‚æŠ›å‡ºå¼‚å¸¸ã€‚ å¦‚æœæŠ›å‡ºçš„å¼‚å¸¸å¯¹è±¡æ˜¯è¿è¡Œæ—¶å¼‚å¸¸ï¼Œæ­¤æ–¹æ³•çš„è°ƒç”¨è€…å¯ä»¥é€‰æ‹©åœ°è¿›è¡Œå¼‚å¸¸æ•è·å¤„ç†ã€‚ï¼ˆå¦‚æœæœ€ç»ˆå°†å¼‚å¸¸æŠ›ç»™mainæ–¹æ³•ï¼Œåˆ™ç›¸å½“äºäº¤ç»™jvmè‡ªåŠ¨å¤„ç†ï¼Œæ­¤æ—¶jvmä¼šç®€å•åœ°æ‰“å°å¼‚å¸¸ä¿¡æ¯ï¼‰ å…³äºJavaçš„å¼‚å¸¸æœºåˆ¶å°±æš‚æ—¶è¯´åˆ°è¿™é‡Œã€‚","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"},{"name":"exception","slug":"exception","permalink":"https://ydstudios.gitee.io/tags/exception/"}]},{"title":"Javaå­¦ä¹ ç³»åˆ—æ–‡ç« ç¬¬å››ç¯‡ï¼šè¯´è¯´Javaçš„ä¸‰å¤§ç‰¹æ€§","slug":"Javaå­¦ä¹ ç³»åˆ—æ–‡ç« ç¬¬å››ç¯‡ï¼šè¯´è¯´Javaçš„ä¸‰å¤§ç‰¹æ€§","date":"2018-06-29T21:58:31.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/2b809338.html","link":"","permalink":"https://ydstudios.gitee.io/post/2b809338.html","excerpt":"Javaè¯­è¨€æä¾›ç±»ã€æ¥å£å’Œç»§æ‰¿ç­‰é¢å‘å¯¹è±¡çš„ç‰¹æ€§ï¼Œä¸ºäº†ç®€å•èµ·è§ï¼Œåªæ”¯æŒç±»ä¹‹é—´çš„å•ç»§æ‰¿ï¼Œä½†æ”¯æŒæ¥å£ä¹‹é—´çš„å¤šç»§æ‰¿ï¼Œå¹¶æ”¯æŒç±»ä¸æ¥å£ä¹‹é—´çš„å®ç°æœºåˆ¶ï¼ˆå…³é”®å­—ä¸ºimplementsï¼‰ã€‚Javaè¯­è¨€å…¨é¢æ”¯æŒåŠ¨æ€ç»‘å®šï¼Œè€ŒC++è¯­è¨€åªå¯¹è™šå‡½æ•°ä½¿ç”¨åŠ¨æ€ç»‘å®šã€‚æ€»ä¹‹ï¼ŒJavaè¯­è¨€æ˜¯ä¸€ä¸ªçº¯çš„é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡è¯­è¨€ã€‚","text":"Javaè¯­è¨€æä¾›ç±»ã€æ¥å£å’Œç»§æ‰¿ç­‰é¢å‘å¯¹è±¡çš„ç‰¹æ€§ï¼Œä¸ºäº†ç®€å•èµ·è§ï¼Œåªæ”¯æŒç±»ä¹‹é—´çš„å•ç»§æ‰¿ï¼Œä½†æ”¯æŒæ¥å£ä¹‹é—´çš„å¤šç»§æ‰¿ï¼Œå¹¶æ”¯æŒç±»ä¸æ¥å£ä¹‹é—´çš„å®ç°æœºåˆ¶ï¼ˆå…³é”®å­—ä¸ºimplementsï¼‰ã€‚Javaè¯­è¨€å…¨é¢æ”¯æŒåŠ¨æ€ç»‘å®šï¼Œè€ŒC++è¯­è¨€åªå¯¹è™šå‡½æ•°ä½¿ç”¨åŠ¨æ€ç»‘å®šã€‚æ€»ä¹‹ï¼ŒJavaè¯­è¨€æ˜¯ä¸€ä¸ªçº¯çš„é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡è¯­è¨€ã€‚ è¯´åˆ°é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œé‚£å°±ä¸å¾—ä¸æé¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸‰å¤§ç‰¹æ€§ï¼šç»§æ‰¿ã€å°è£…å’Œå¤šæ€ã€‚é‚£ä¸‹é¢æˆ‘ä»¬å…ˆæ¥è¯´ä¸€è¯´å°è£…ã€‚ å°è£…éšè—äº†ç±»çš„å†…éƒ¨å®ç°æœºåˆ¶ï¼Œå¯ä»¥åœ¨ä¸æƒ³å½±å“ä½¿ç”¨çš„æƒ…å†µä¸‹æ”¹å˜ç±»çš„å†…éƒ¨ç»“æ„ï¼ŒåŒæ—¶ä¹Ÿä¿æŠ¤äº†æ•°æ®ã€‚å¯¹å¤–ç•Œä¹Ÿå¯ä»¥éšè—å†…éƒ¨çš„ç»†èŠ‚ï¼Œåªæš´éœ²ç»™å¤–ç•Œè®¿é—®çš„æ–¹æ³•ã€‚ ç»§æ‰¿å¯ä»¥å¤ç”¨çˆ¶ç±»çš„ä»£ç ã€‚ä¸¤ä¸ªç±»ä¹‹é—´è‹¥å­˜åœ¨is-açš„å…³ç³»ï¼Œå°±å¯ä»¥ä½¿ç”¨ç»§æ‰¿ï¼Œä»è€Œè¾¾åˆ°ä»£ç çš„å¤ç”¨ï¼ŒåŒæ—¶ä¹Ÿç»™å¤šæ€çš„å®ç°åšäº†é“ºå«ã€‚ ä¸‹é¢æˆ‘ä»¬åªè¦è¯´è¯´é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­çš„å¤šæ€ã€‚æ‰€è°“çš„å¤šæ€å°±æ˜¯æŒ‡ç¨‹åºä¸­å®šä¹‰çš„å¼•ç”¨å˜é‡æ‰€æŒ‡å‘çš„å…·ä½“ç±»å‹å’Œé€šè¿‡è¯¥å¼•ç”¨å˜é‡å‘å‡ºçš„æ–¹æ³•è°ƒç”¨åœ¨ç¼–ç¨‹æ—¶å¹¶ä¸ç¡®å®šï¼Œè€Œæ˜¯åœ¨ç¨‹åºçš„è¿è¡ŒæœŸé—´æ‰ç¡®å®šï¼Œå³ä¸€ä¸ªå¼•ç”¨å˜é‡åˆ°åº•ä¼šæŒ‡å‘å“ªä¸ªç±»çš„å®ä¾‹å¯¹è±¡ï¼Œè¯¥å¼•ç”¨å˜é‡å‘å‡ºçš„æ–¹æ³•è°ƒç”¨åˆ°åº•æ˜¯å“ªä¸ªç±»ä¸­å®ç°çš„æ–¹æ³•ï¼Œå¿…é¡»åœ¨ç¨‹åºè¿è¡ŒæœŸé—´æ‰èƒ½ç¡®å®šï¼Œè¿™å°±æ˜¯æ‰€è°“çš„åŠ¨æ€ç»‘å®šï¼ˆdynamic bindingï¼‰ã€‚ æ—¢ç„¶å¤šæ€é‚£ä¹ˆé‡è¦ï¼Œé‚£ä¹ˆå¤šæ€åˆ°åº•æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿ å¯æ›¿æ¢æ€§ æ¶ˆé™¤ç±»å‹ä¹‹é—´çš„è€¦åˆå…³ç³» å¯æ‰©å……æ€§ æ¥å£æ€§ çµæ´»æ€§ ç®€åŒ–æ€§ Javaå®ç°å¤šæ€æœ‰ä¸‰ä¸ªå¿…è¦çš„æ¡ä»¶ï¼šç»§æ‰¿ã€é‡å†™ã€å‘ä¸Šè½¬å‹ ç»§æ‰¿ï¼šåœ¨å¤šæ€ä¸­å¿…é¡»å­˜åœ¨æœ‰ç»§æ‰¿å…³ç³»çš„å­ç±»å’Œçˆ¶ç±»ã€‚ é‡å†™ï¼šå­ç±»å¯¹çˆ¶ç±»ä¸­æŸäº›æ–¹æ³•è¿›è¡Œé‡å†™å®šä¹‰ï¼Œåœ¨è°ƒç”¨è¿™äº›æ–¹æ³•æ—¶å°±ä¼šè°ƒç”¨å­ç±»çš„æ–¹æ³•ã€‚ å‘ä¸Šè½¬å‹ï¼šåœ¨å¤šæ€ä¸­éœ€è¦å°†çˆ¶ç±»çš„å¼•ç”¨æŒ‡å‘å­ç±»ï¼Œåªæœ‰è¿™æ ·è¯¥å¼•ç”¨æ‰èƒ½å¤Ÿå…·å¤‡è°ƒç”¨çˆ¶ç±»å’Œå­ç±»çš„æ–¹æ³•ã€‚ å¤šæ€çš„å®ç°æ–¹å¼ 1. ç»§æ‰¿é‡å†™12345678910111213141516171819202122232425262728293031323334353637383940414243public abstract class Animal &#123; abstract void eat(); abstract void work();&#125;public class Cat extends Animal &#123; @Override public void eat() &#123; System.out.println(\"åƒé±¼\"); &#125; @Override public void work() &#123; System.out.println(\"æŠ“è€é¼ \"); &#125;&#125;public class Dog extends Animal &#123; @Override public void eat() &#123; System.out.println(\"åƒéª¨å¤´\"); &#125; @Override public void work() &#123; System.out.println(\"çœ‹å®¶\"); &#125;&#125;public class Test &#123; public static void main(String[] args)&#123; Animal a = new Cat(); // å‘ä¸Šè½¬å‹ a.eat(); // è°ƒç”¨çš„æ˜¯ Cat çš„ eat Animal b = new Dog(); // å‘ä¸Šè½¬å‹ b.eat(); // è°ƒç”¨çš„æ˜¯ Dog çš„ eat &#125;&#125; æ‰€ä»¥åŸºäºç»§æ‰¿å®ç°çš„å¤šæ€å¯ä»¥æ€»ç»“å¦‚ä¸‹ï¼šå¯¹äºå¼•ç”¨å­ç±»çš„çˆ¶ç±»ç±»å‹ï¼Œåœ¨å¤„ç†è¯¥å¼•ç”¨æ—¶ï¼Œå®ƒé€‚ç”¨äºç»§æ‰¿è¯¥çˆ¶ç±»çš„æ‰€æœ‰å­ç±»ï¼Œå­ç±»å¯¹è±¡çš„ä¸åŒï¼Œå¯¹æ–¹æ³•çš„å®ç°ä¹Ÿå°±ä¸åŒï¼Œæ‰§è¡Œç›¸åŒåŠ¨ä½œäº§ç”Ÿçš„è¡Œä¸ºä¹Ÿå°±ä¸åŒã€‚å¦‚æœçˆ¶ç±»æ˜¯æŠ½è±¡ç±»ï¼Œé‚£ä¹ˆå­ç±»å¿…é¡»è¦å®ç°çˆ¶ç±»ä¸­æ‰€æœ‰çš„æŠ½è±¡æ–¹æ³•ï¼Œè¿™æ ·è¯¥çˆ¶ç±»æ‰€æœ‰çš„å­ç±»ä¸€å®šå­˜åœ¨ç»Ÿä¸€çš„å¯¹å¤–æ¥å£ï¼Œä½†å…¶å†…éƒ¨çš„å…·ä½“å®ç°å¯ä»¥å„å¼‚ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨é¡¶å±‚ç±»æä¾›çš„ç»Ÿä¸€æ¥å£æ¥å¤„ç†è¯¥å±‚æ¬¡çš„æ–¹æ³•ã€‚ 2.åŸºäºæ¥å£å®ç°å¤šæ€ç»§æ‰¿æ˜¯é€šè¿‡é‡å†™çˆ¶ç±»çš„åŒä¸€æ–¹æ³•çš„å‡ ä¸ªä¸åŒå­ç±»æ¥ä½“ç°çš„ï¼Œé‚£ä¹ˆå°±å¯å°±æ˜¯é€šè¿‡å®ç°æ¥å£å¹¶è¦†ç›–æ¥å£ä¸­åŒä¸€æ–¹æ³•çš„å‡ ä¸åŒçš„ç±»ä½“ç°çš„ã€‚ åœ¨æ¥å£çš„å¤šæ€ä¸­ï¼ŒæŒ‡å‘æ¥å£çš„å¼•ç”¨å¿…é¡»æ˜¯æŒ‡å®šè¿™å®ç°äº†è¯¥æ¥å£çš„ä¸€ä¸ªç±»çš„å®ä¾‹ç¨‹åºï¼Œåœ¨è¿è¡Œæ—¶ï¼Œæ ¹æ®å¯¹è±¡å¼•ç”¨çš„å®é™…ç±»å‹æ¥æ‰§è¡Œå¯¹åº”çš„æ–¹æ³•ã€‚ ç»§æ‰¿éƒ½æ˜¯å•ç»§æ‰¿ï¼Œåªèƒ½ä¸ºä¸€ç»„ç›¸å…³çš„ç±»æä¾›ä¸€è‡´çš„æœåŠ¡æ¥å£ã€‚ä½†æ˜¯æ¥å£å¯ä»¥æ˜¯å¤šç»§æ‰¿å¤šå®ç°ï¼Œå®ƒèƒ½å¤Ÿåˆ©ç”¨ä¸€ç»„ç›¸å…³æˆ–è€…ä¸ç›¸å…³çš„æ¥å£è¿›è¡Œç»„åˆä¸æ‰©å……ï¼Œèƒ½å¤Ÿå¯¹å¤–æä¾›ä¸€è‡´çš„æœåŠ¡æ¥å£ã€‚æ‰€ä»¥å®ƒç›¸å¯¹äºç»§æ‰¿æ¥è¯´æœ‰æ›´å¥½çš„çµæ´»æ€§ã€‚","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"},{"name":"oop","slug":"oop","permalink":"https://ydstudios.gitee.io/tags/oop/"}]},{"title":"Javaå­¦ä¹ ç³»åˆ—æ–‡ç« ç¬¬ä¸‰ç¯‡ï¼šè¯´è¯´equalså’Œ==","slug":"Javaå­¦ä¹ ç³»åˆ—æ–‡ç« ç¬¬ä¸‰ç¯‡ï¼šè¯´è¯´equalså’Œ","date":"2018-06-29T21:49:25.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/28107323.html","link":"","permalink":"https://ydstudios.gitee.io/post/28107323.html","excerpt":"åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬å†™è¿‡è¿™æ ·çš„ä»£ç  123456789101112// ç›´æ¥èµ‹å€¼String str1 = \"hello world\";// æ„é€ æ–¹æ³•String str2 = new String(\"hello world\");String str3 = \"hello world\";String str4 = new String(\"hello world\");System.out.println(str1==str2);System.out.println(str1==str3);System.out.println(str2==str4); æˆ‘ä»¬ç°åœ¨éƒ½çŸ¥é“äº†å®ƒä»¬çš„è¾“å‡ºçš„ç»“æœï¼Œåˆ†åˆ«æ˜¯falseã€trueå’Œfalseã€‚","text":"åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬å†™è¿‡è¿™æ ·çš„ä»£ç  123456789101112// ç›´æ¥èµ‹å€¼String str1 = \"hello world\";// æ„é€ æ–¹æ³•String str2 = new String(\"hello world\");String str3 = \"hello world\";String str4 = new String(\"hello world\");System.out.println(str1==str2);System.out.println(str1==str3);System.out.println(str2==str4); æˆ‘ä»¬ç°åœ¨éƒ½çŸ¥é“äº†å®ƒä»¬çš„è¾“å‡ºçš„ç»“æœï¼Œåˆ†åˆ«æ˜¯falseã€trueå’Œfalseã€‚ ==æ˜¯åœ¨æ¯”è¾ƒä»€ä¹ˆåœ¨ã€Šthink in javaã€‹è¿™æœ¬ä¹¦é‡Œæœ‰è¿™æ ·çš„ä¸€å¥è¯â€œå…³ç³»æ“ä½œç¬¦ç”Ÿæˆçš„æ˜¯ä¸€ä¸ªå¸ƒå°”çš„ç»“æœï¼Œå®ƒä»¬è®¡ç®—çš„æ˜¯æ“ä½œæ•°ä¹‹é—´å€¼çš„å…³ç³»â€ã€‚ç®€å•çš„è¯´å°±æ˜¯==å·æ˜¯ç”¨æ¥æ¯”è¾ƒå€¼æ˜¯å¦ç›¸ç­‰ã€‚ 1234567891011121314151617181920public class Main &#123; public static void main(String[] args)&#123; int n = 30; int m = 30; System.out.println(n == m); String str = new String(\"hello world\"); String str1 = new String(\"hello world\"); String str2 = new String(\"hello world\"); System.out.println(str1 == str2); str1 = str; str2 = str; System.out.println(str1 == str2); &#125;&#125; ä¸Šé¢ä»£ç çš„è¾“å‡ºç»“æœå¯èƒ½å¤§å®¶éƒ½çŸ¥é“æ˜¯trueã€falseå’Œtrueã€‚ä¹Ÿè®¸ä¼šæœ‰äººä¼šæœ‰ç–‘é—®ï¼Œé‚£æˆ‘ä»¬æ¥å¥½å¥½çš„è§£é‡Šä¸€ä¸‹ï¼š n == mç»“æœä¸ºtrueï¼Œè¿™ä¸ªå¾ˆå®¹æ˜“ç†è§£ï¼Œå˜é‡nå’Œå˜é‡må­˜å‚¨çš„å€¼éƒ½ä¸º3ï¼Œè‚¯å®šæ˜¯ç›¸ç­‰çš„ã€‚è€Œä¸ºä»€ä¹ˆstr1å’Œstr2ä¸¤æ¬¡æ¯”è¾ƒçš„ç»“æœä¸åŒï¼Ÿè¦ç†è§£è¿™ä¸ªå…¶å®åªéœ€è¦ç†è§£åŸºæœ¬æ•°æ®ç±»å‹å˜é‡å’ŒéåŸºæœ¬æ•°æ®ç±»å‹å˜é‡çš„åŒºåˆ«ã€‚å¯¹äºJavaä¸­çš„8ä¸­åŸºæœ¬ç±»å‹ï¼ˆ4ç§æ•´å‹byteã€shortã€intã€longï¼Œ2ç§æµ®ç‚¹å‹floatã€doubleï¼Œä¸€ä¸ªbooleanå‹ï¼Œè¿˜æœ‰ä¸€ä¸ªå­—ç¬¦å‹charï¼‰çš„å˜é‡ï¼Œå˜é‡æœ¬èº«å­˜å‚¨çš„å°±æ˜¯å€¼ï¼Œå…³ç³»æ“ä½œç¬¦==è¿›è¡Œæ¯”è¾ƒæ—¶ï¼Œæ¯”è¾ƒçš„å°±æ˜¯å€¼æœ¬èº«ã€‚æ‰€ä»¥ä¸Šé¢çš„ n == mçš„æ¯”è¾ƒå°±æ˜¯3 == 3ï¼Œè¿™ä¸ªè‚¯å®šç»“æœæ˜¯trueå•Šï¼ å¯¹äºé‚£äº›å¼•ç”¨ç±»å‹çš„å˜é‡å¦‚str1ï¼Œå˜é‡å­˜å‚¨çš„å¹¶ä¸æ˜¯å€¼æœ¬èº«ï¼Œè€Œæ˜¯å…¶å…³è”å¯¹è±¡åœ¨å†…å­˜çš„åœ°å€ã€‚æ‰€ä»¥å˜é‡str1ä¸­å­˜å‚¨çš„æ˜¯å®ƒæŒ‡å‘çš„å¯¹è±¡åœ¨å†…å­˜ä¸­çš„å­˜å‚¨åœ°å€ï¼Œå¹¶ä¸æ˜¯â€œå€¼â€æœ¬èº«ï¼Œä¹Ÿå°±æ˜¯è¯´å¹¶ä¸æ˜¯ç›´æ¥å­˜å‚¨çš„å­—ç¬¦ä¸²â€hello worldâ€ã€‚è¿™é‡Œé¢çš„å¼•ç”¨å’ŒC/C++ä¸­çš„æŒ‡é’ˆå¾ˆç±»ä¼¼ã€‚å› æ­¤åœ¨ç”¨==å¯¹str1å’Œstr2è¿›è¡Œç¬¬ä¸€æ¬¡æ¯”è¾ƒæ—¶ï¼Œå¾—åˆ°çš„ç»“æœæ˜¯falseã€‚å› æ­¤å®ƒä»¬åˆ†åˆ«æŒ‡å‘çš„æ˜¯ä¸åŒçš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä»¬å®é™…å­˜å‚¨çš„å†…å­˜åœ°å€ä¸åŒã€‚è€Œåœ¨ç¬¬äºŒæ¬¡æ¯”è¾ƒæ—¶ï¼Œéƒ½è®©str1å’Œstr2æŒ‡å‘äº†stræŒ‡å‘çš„å¯¹è±¡ï¼Œé‚£ä¹ˆå¾—åˆ°çš„ç»“æœæ¯«æ— ç–‘é—®æ˜¯trueã€‚ equalsåˆæ˜¯åœ¨æ¯”è¾ƒä»€ä¹ˆequalsæ–¹æ³•æ˜¯åŸºç±»Objectä¸­çš„æ–¹æ³•ï¼Œå› æ­¤å¯¹äºæ‰€æœ‰ç»§æ‰¿Objectçš„ç±»éƒ½æœ‰è¯¥æ–¹æ³•ã€‚å…ˆçœ‹ä¸€ä¸‹ä¸‹é¢çš„ä»£ç ï¼ŒçŒœçŒœè¾“å‡ºçš„ç»“æœæ˜¯ä»€ä¹ˆ 12345678910111213public class Main &#123; public static void main(String[] args)&#123;; Object object1 = new Object(); Object object2 = new Object(); Object object3 = object1; System.out.println(object1.equals(object2)); System.out.println(object1.equals(object3)); &#125;&#125; ä¸Šé¢ä»£ç çš„è¾“å‡ºç»“æœæ˜¯falseã€trueã€‚æˆ‘ä»¬æ¥çœ‹çœ‹Objectç±»ä¸­equalsæºç æ˜¯ä»€ä¹ˆæ ·çš„ï¼š 123public boolean equals(Object obj) &#123; return (this == obj);&#125; åœ¨Objectç±»ä¸­çš„equalsæ–¹æ³•æ˜¯ç”¨æ¥æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„å¼•ç”¨æ˜¯å¦ç›¸ç­‰ï¼Œå³æ˜¯ä¸¤ä¸ªå˜é‡çš„å¼•ç”¨æ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚ é‚£ä¸‹é¢çš„ä»£ç è‚¯å®šä¼šæœ‰äººæœ‰ç–‘é—®äº†ï¼Œä¸ºå•¥è¾“å‡ºçš„ç»“æœæ˜¯true 123456789101112public class Main &#123; public static void main(String[] args)&#123;; String str1 = new String(\"hello\"); String str2 = new String(\"hello\"); System.out.println(str1.equals(str2)); &#125;&#125; è¦æƒ³çŸ¥é“æ˜¯ä¸ºä»€ä¹ˆï¼Œæˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹Stringç±»çš„equalsçš„æºç å°±çŸ¥é“æ˜¯æ€ä¹ˆå›äº‹äº†ï¼ 123456789101112131415161718192021public boolean equals(Object anObject) &#123; if (this == anObject) &#123; return true; &#125; if (anObject instanceof String) &#123; String anotherString = (String)anObject; int n = value.length; if (n == anotherString.value.length) &#123; char v1[] = value; char v2[] = anotherString.value; int i = 0; while (n-- != 0) &#123; if (v1[i] != v2[i]) return false; i++; &#125; return true; &#125; &#125; return false;&#125; Stringç±»å¯¹equalsæ–¹æ³•è¿›è¡Œäº†é‡å†™ï¼Œç”¨æ¥æ¯”è¾ƒæŒ‡å‘çš„å­—ç¬¦ä¸²å¯¹è±¡æ‰€å­˜å‚¨çš„å­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ã€‚ Javaä¸­å…¶ä»–çš„ç±»ä¾‹å¦‚Doubleã€Dateã€Integerç­‰ï¼Œéƒ½å¯¹equalsè¿›è¡Œé‡å†™ï¼Œæ¥æ¯”è¾ƒæŒ‡å‘çš„å¯¹è±¡å­˜å‚¨çš„å†…å®¹æ˜¯å¦ç›¸ç­‰ã€‚ æˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹ï¼š å¯¹äº==ï¼Œå¦‚æœä½œç”¨äºåŸºæœ¬æ•°æ®ç±»å‹çš„å˜é‡ï¼Œåˆ™ç›´æ¥æ¯”è¾ƒä¸¤æ“ä½œæ•°çš„å€¼æ˜¯å¦ç›¸ç­‰ï¼›å¦‚æœä½œç”¨äºå¼•ç”¨ç±»å‹çš„å˜é‡ï¼Œåˆ™æ¯”è¾ƒçš„å¼•ç”¨å˜é‡æ‰€æŒ‡å‘çš„å¯¹è±¡çš„åœ°å€ã€‚ å¯¹äºequalsï¼Œå¦‚æœç±»å¯¹equalsæ²¡æœ‰è¿›è¡Œé‡å†™ï¼Œåˆ™æ¯”è¾ƒçš„æ˜¯å¼•ç”¨ç±»å‹çš„å˜é‡æ‰€æŒ‡å‘çš„å¯¹è±¡åœ°å€ï¼›è¯¸å¦‚Stringç±»å¯¹equalsæ–¹æ³•è¿›è¡Œäº†é‡å†™ï¼Œæ¯”è¾ƒçš„åˆ™æ˜¯å¼•ç”¨å˜é‡æ‰€æŒ‡å‘çš„å¯¹è±¡çš„å†…å®¹ã€‚ æ³¨æ„equalsæ–¹æ³•ä¸èƒ½ä½œç”¨äºåŸºæœ¬æ•°æ®ç±»å‹çš„å˜é‡","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"},{"name":"String","slug":"String","permalink":"https://ydstudios.gitee.io/tags/String/"}]},{"title":"Javaå­¦ä¹ ç³»åˆ—æ–‡ç« ç¬¬ä¸€ç¯‡ï¼šåŸºæœ¬å˜é‡ç±»å‹","slug":"Javaå­¦ä¹ ç³»åˆ—æ–‡ç« ç¬¬ä¸€ç¯‡ï¼šåŸºæœ¬å˜é‡ç±»å‹","date":"2018-06-29T21:48:24.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/c4de9814.html","link":"","permalink":"https://ydstudios.gitee.io/post/c4de9814.html","excerpt":"Javaæœ‰ç€ä¸°å¯Œçš„å˜é‡ç±»å‹ï¼Œæœ‰8ç§åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä»¥åŠä»–ä»¬å¯¹åº”çš„åŒ…è£…ç±»å‹ï¼Œè¿˜æœ‰æ•°ç»„é›†åˆç­‰ä¼—å¤šå˜é‡ç±»å‹ã€‚ç›¸æ¯”ä¹‹ä¸‹PHPçš„æ•°æ®ç±»å‹å°±ç›¸å¯¹å°‘å¤šäº†ï¼ŒPHPåªæœ‰å¸ƒå°”ç±»å‹ï¼ˆBooleanï¼‰ã€æ•´å‹ï¼ˆIntegerï¼‰ã€æµ®ç‚¹å‹ï¼ˆFloatï¼‰ã€æ•°ç»„ï¼ˆArrayï¼‰ã€å­—ç¬¦ä¸²ï¼ˆStringï¼‰ã€å¯¹è±¡ï¼ˆObjectï¼‰ã€èµ„æºç±»å‹ï¼ˆResourceï¼‰å’ŒNULLã€‚æœ¬æ–‡æˆ‘ä»¬å…ˆä»¥åŸºæœ¬æ•°æ®ç±»å‹ä¸ºä¸»ï¼Œå…¶ä»–çš„ç±»å‹ä¸ºè¾…ã€‚","text":"Javaæœ‰ç€ä¸°å¯Œçš„å˜é‡ç±»å‹ï¼Œæœ‰8ç§åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä»¥åŠä»–ä»¬å¯¹åº”çš„åŒ…è£…ç±»å‹ï¼Œè¿˜æœ‰æ•°ç»„é›†åˆç­‰ä¼—å¤šå˜é‡ç±»å‹ã€‚ç›¸æ¯”ä¹‹ä¸‹PHPçš„æ•°æ®ç±»å‹å°±ç›¸å¯¹å°‘å¤šäº†ï¼ŒPHPåªæœ‰å¸ƒå°”ç±»å‹ï¼ˆBooleanï¼‰ã€æ•´å‹ï¼ˆIntegerï¼‰ã€æµ®ç‚¹å‹ï¼ˆFloatï¼‰ã€æ•°ç»„ï¼ˆArrayï¼‰ã€å­—ç¬¦ä¸²ï¼ˆStringï¼‰ã€å¯¹è±¡ï¼ˆObjectï¼‰ã€èµ„æºç±»å‹ï¼ˆResourceï¼‰å’ŒNULLã€‚æœ¬æ–‡æˆ‘ä»¬å…ˆä»¥åŸºæœ¬æ•°æ®ç±»å‹ä¸ºä¸»ï¼Œå…¶ä»–çš„ç±»å‹ä¸ºè¾…ã€‚ 12type identifier [ = value][, identifier [= value] ...] ;æ ¼å¼è¯´æ˜ï¼štypeä¸ºJavaæ•°æ®ç±»å‹ã€‚identifieræ˜¯å˜é‡åã€‚å¯ä»¥ä½¿ç”¨é€—å·éš”å¼€æ¥å£°æ˜å¤šä¸ªåŒç±»å‹å˜é‡ã€‚ ä¸‹é¢æˆ‘å°±ç®€å•çš„ä¸¾å‡ ä¸ªå˜é‡å£°æ˜çš„ä¾‹å­ï¼š 12345byte a,b,c;short e = g = 10;int f = 1000;boolean h = false;char i = 'a'; Javaçš„ä¸¤å¤§æ•°æ®ç±»å‹ï¼š å†…ç½®æ•°æ®ç±»å‹ å¼•ç”¨æ•°æ®ç±»å‹å†…ç½®æ•°æ®ç±»å‹Javaè¯­è¨€æä¾›äº†å…«ç§åŸºæœ¬æ•°æ®ç±»å‹ã€‚å…­ç§æ•°å­—ç±»å‹ï¼ˆå››ä¸ªæ•´æ•°å‹ï¼Œä¸¤ä¸ªæµ®ç‚¹å‹ï¼‰ï¼Œä¸€ç§å­—ç¬¦ç±»å‹ï¼Œè¿˜æœ‰ä¸€ç§æ˜¯å¸ƒå°”å‹ã€‚Javaä¸­çš„æ•°å­—ç±»å‹éƒ½æ˜¯æ— ç¬¦å·ï¼ˆunsignedï¼‰çš„ï¼Œä¸åƒCè¯­è¨€å’ŒC++é‚£æ ·è¿˜æä¾›æœ‰ç¬¦å·çš„ç±»å‹ã€‚åœ¨åç»­çš„MySQLå­¦ä¹ ä¸­ï¼Œä½ ä¼šå‘ç°MySQLä¸­å­—æ®µçš„ç±»å‹é‡Œé¢ä¼šæœ‰æ— ç¬¦å·è¿™ä¸ªå±æ€§ï¼Œè¿™æ ·å°±ä¼šå‡ºç°MySQLçš„å­—æ®µæ˜ å°„æˆJavaå˜é‡æ—¶ï¼Œä¼šæœ‰å–å€¼èŒƒå›´ä¸åŒçš„é—®é¢˜ã€‚byte byte å ç”¨ä¸€ä¸ªå­—èŠ‚çš„å†…å­˜ï¼› æœ€å°å€¼æ˜¯-128ï¼ˆ-2^7)ï¼Œ æœ€å¤§å€¼æ˜¯127ï¼ˆ2^7-1ï¼‰ï¼› é»˜è®¤å€¼æ˜¯0ï¼Œå¯¹åº”çš„åŒ…è£…ç±»å‹æ˜¯Byte,åŒ…è£…ç±»å‹çš„é»˜è®¤å€¼æ˜¯nullï¼› ä¾‹å­ï¼šbyte a = 10ï¼› short short å ç”¨ä¸¤ä¸ªå­—èŠ‚çš„å†…å­˜ï¼› æœ€å°å€¼æ˜¯-32768ï¼ˆ-2^15ï¼‰ï¼Œ æœ€å¤§å€¼æ˜¯32767ï¼ˆ2^15-1ï¼‰ é»˜è®¤å€¼æ˜¯0ï¼Œå¯¹åº”çš„åŒ…è£…ç±»å‹æ˜¯Short,é»˜è®¤å€¼æ˜¯nullï¼› ä¾‹å­ï¼šshort a = 1200ï¼› char char å ç”¨ä¸¤ä¸ªå­—èŠ‚çš„å†…å­˜ï¼Œé‡‡ç”¨ Unicode ç¼–ç ï¼› æœ€å°å€¼æ˜¯ \\u0000ï¼ˆå³ä¸º0ï¼‰ï¼› æœ€å¤§å€¼æ˜¯ \\uffffï¼ˆå³ä¸º65,535ï¼‰ï¼› char å¯ä»¥å‚¨å­˜ä»»ä½•å­—ç¬¦ï¼ˆéƒ¨åˆ†ç”Ÿåƒ»çš„ä¸­æ–‡å­—ç¬¦å¯èƒ½ä¸è¡Œï¼‰ï¼› ä¾‹å­ï¼šchar letter = â€˜Aâ€™;ã€‚ int int å ç”¨å››ä¸ªå­—èŠ‚çš„å†…å­˜ï¼› æœ€å°å€¼æ˜¯-2,147,483,648ï¼ˆ-2^31ï¼‰ï¼Œ æœ€å¤§å€¼æ˜¯2,147,483,6478ï¼ˆ2^31-1ï¼‰ é»˜è®¤å€¼æ˜¯0ï¼Œå¯¹åº”çš„åŒ…è£…ç±»å‹æ˜¯ Integerï¼Œé»˜è®¤å€¼æ˜¯nullï¼› ä¸€èˆ¬çš„æ•´å‹å˜é‡é»˜è®¤ä¸º int ç±»å‹ ä¾‹å­ï¼šint a = -10020ï¼› long long å ç”¨å…«ä¸ªå­—èŠ‚çš„å†…å­˜ï¼› æœ€å°å€¼æ˜¯ -9,223,372,036,854,775,808ï¼ˆ-2^63ï¼‰ï¼Œæœ€å¤§å€¼æ˜¯ 9,223,372,036,854,775,807ï¼ˆ2^63-1ï¼‰ï¼Œè¿™ç§ç±»å‹ä¸»è¦ä½¿ç”¨åœ¨éœ€è¦æ¯”è¾ƒå¤§æ•´æ•°çš„ç³»ç»Ÿä¸Šï¼› é»˜è®¤å€¼æ˜¯ 0Lï¼Œå¯¹åº”çš„åŒ…è£…ç±»å‹æ˜¯ Longï¼Œé»˜è®¤å€¼æ˜¯nullï¼› ä¾‹å­ï¼šlong a = 100000Lï¼ŒLong b = -200000Lã€‚â€œLâ€ç†è®ºä¸Šä¸åˆ†å¤§å°å†™ï¼Œä½†æ˜¯è‹¥å†™æˆâ€lâ€å®¹æ˜“ä¸æ•°å­—â€1â€æ··æ·†ï¼Œä¸å®¹æ˜“åˆ†è¾©ã€‚æ‰€ä»¥æœ€å¥½å¤§å†™ã€‚ float float å ç”¨å››ä¸ªå­—èŠ‚çš„å†…å­˜ï¼› é»˜è®¤å€¼æ˜¯ 0.0fï¼›æµ®ç‚¹æ•°ä¸èƒ½ç”¨æ¥è¡¨ç¤ºç²¾ç¡®çš„å€¼ï¼Œå¦‚è´§å¸ï¼Œå­˜å‚¨è´§å¸æ¨èä½¿ç”¨ BigDecimalï¼›å¯¹åº”çš„åŒ…è£…ç±»å‹æ˜¯Floatï¼Œé»˜è®¤å€¼æ˜¯nullï¼› ä¾‹å­ï¼šfloat f1 = 234.58fï¼› double double å ç”¨å…«ä¸ªå­—èŠ‚çš„å†…å­˜ï¼› é»˜è®¤å€¼æ˜¯ 0.0dï¼›doubleä¸èƒ½ç”¨æ¥è¡¨ç¤ºç²¾ç¡®çš„å€¼ï¼Œå¦‚è´§å¸ï¼Œå­˜å‚¨è´§å¸æ¨èä½¿ç”¨BigDecimalï¼›å¯¹åº”çš„åŒ…è£…ç±»å‹æ˜¯Doubleï¼Œé»˜è®¤å€¼æ˜¯nullï¼› ä¾‹å­ï¼šdouble d1 = 234.05dï¼›double d2 = 467.90;æ³¨æ„ï¼šä¸å¸¦ä»»ä½•æ ‡å¿—çš„æµ®ç‚¹å‹æ•°æ®ï¼Œç³»ç»Ÿé»˜è®¤æ˜¯doubleç±»å‹ã€‚ boolean boolean(JVMè§„èŒƒæ²¡æœ‰æ˜ç¡®è§„å®šå…¶æ‰€å çš„ç©ºé—´å¤§å°ï¼› åªæœ‰ä¸¤ä¸ªå–å€¼ï¼Œtrueå’Œfalse; é»˜è®¤å€¼false,å¯¹åº”çš„åŒ…è£…ç±»å‹æ˜¯Booleanï¼Œé»˜è®¤å€¼æ˜¯nullï¼› ä¾‹å­ï¼š boolean b = false; void å¯¹åº”åŒ…è£…ç±»å‹Voidï¼Œä¸å¸¸ç”¨ byteã€intã€longå’Œshortè¿˜å¯ä»¥ä½¿ç”¨16è¿›åˆ¶å’Œ8è¿›åˆ¶çš„æ–¹å¼æ ‡è¯†ï¼Œé»˜è®¤éƒ½æ˜¯ä½¿ç”¨10è¿›åˆ¶ã€‚ 123int decimal = 100;int octal = 0144;int hexa = 0x64; è‡ªåŠ¨ç±»å‹è½¬æ¢æ•´å‹å’Œå­—ç¬¦å‹æ•°æ®å¯ä»¥æ··åˆè¿ç®—ï¼Œä¸åŒçš„ç±»å‹çš„æ•°æ®å…ˆè½¬åŒ–æˆåŒä¸€ç±»å‹ï¼Œç„¶åè¿›è¡Œè®¡ç®—ã€‚ ä½â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”&gt;é«˜ byte-&gt;short,charâ€”&gt; int â€”&gt;float â€”&gt; longâ€”&gt; double æ•°æ®ç±»å‹è½¬æ¢å¿…é¡»æ»¡è¶³ä¸‹é¢çš„è§„åˆ™ï¼š ä¸èƒ½å¯¹booleanç±»å‹è¿›è¡Œç±»å‹è½¬æ¢ ä¸èƒ½æŠŠå¯¹è±¡ç±»å‹è½¬æ¢æˆä¸ç›¸å¹²ç±»çš„å¯¹è±¡ æŠŠç±»å‹èŒƒå›´å¤§çš„è½¬æ¢æˆç±»å‹èŒƒå›´å°çš„æ—¶å€™å¿…é¡»ä½¿ç”¨å¼ºåˆ¶ç±»å‹è½¬æ¢ å¼ºåˆ¶è½¬æ¢çš„è¿‡ç¨‹ä¸­ä¼šå‡ºç°æº¢å‡ºæˆ–æŸå¤±ç²¾åº¦ å¼•ç”¨ç±»å‹ åœ¨Javaä¸­å¼•ç”¨ç±»å‹å˜é‡æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ç§å˜é‡åœ¨å®šä¹‰çš„æ—¶å€™ï¼Œè¢«å£°æ˜æˆç‰¹å®šçš„ç±»å‹ï¼Œæ¯”å¦‚ Manã€Studentç­‰ã€‚å˜é‡ç±»å‹ä¸€ä½†ç¡®å®šä¹‹åç±»å‹å°±ä¸èƒ½æ”¹å˜ã€‚è¿™ä¸€ç‚¹å’ŒåŠ¨æ€è„šæœ¬è¯­è¨€PHPæœ‰ç€å¾ˆå¤§çš„ä¸åŒï¼ŒPHPä¸­çš„å˜é‡å®šä¹‰åä»èƒ½ä¿å­˜å…¶ä»–ç±»å‹çš„å˜é‡ï¼› æ‰€ç”¨å¼•ç”¨ç±»å‹çš„é»˜è®¤å€¼éƒ½æ˜¯nullï¼› å†™äºï¼š2018-06-06 14:56 ä¿®æ”¹ï¼š2018-06-06 22:56","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"},{"name":"String","slug":"String","permalink":"https://ydstudios.gitee.io/tags/String/"}]},{"title":"Javaå­¦ä¹ ç³»åˆ—æ–‡ç« ç¬¬äºŒç¯‡ï¼šå­—ç¬¦ä¸²","slug":"Javaå­¦ä¹ ç³»åˆ—æ–‡ç« ç¬¬äºŒç¯‡ï¼šå­—ç¬¦ä¸²","date":"2018-06-29T21:44:13.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/9d613e12.html","link":"","permalink":"https://ydstudios.gitee.io/post/9d613e12.html","excerpt":"åœ¨ä¼—å¤šçš„ç¼–ç¨‹è¯­è¨€é‡Œé¢ï¼Œå­—ç¬¦ä¸²éƒ½è¢«å¹¿æ³›çš„ä½¿ç”¨ã€‚åœ¨Javaä¸­å­—ç¬¦ä¸²å±äºå¯¹è±¡ï¼Œè¯­è¨€æä¾›äº†Stringç±»æ¥åˆ›å»ºå’Œæ“ä½œå­—ç¬¦ä¸²ã€‚","text":"åœ¨ä¼—å¤šçš„ç¼–ç¨‹è¯­è¨€é‡Œé¢ï¼Œå­—ç¬¦ä¸²éƒ½è¢«å¹¿æ³›çš„ä½¿ç”¨ã€‚åœ¨Javaä¸­å­—ç¬¦ä¸²å±äºå¯¹è±¡ï¼Œè¯­è¨€æä¾›äº†Stringç±»æ¥åˆ›å»ºå’Œæ“ä½œå­—ç¬¦ä¸²ã€‚ å­—ç¬¦ä¸²Stringç®€å•çŸ¥è¯†Javaæä¾›ä¸¤ç§æ–¹å¼æ¥å®šä¹‰å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼š 123456å®šä¹‰å­—ç¬¦ä½¿ç”¨å•å¼•å·ï¼Œå®šä¹‰å­—ç¬¦ä¸²ä½¿ç”¨åŒå¼•å·ï¼›// ç›´æ¥èµ‹å€¼String str1 = \"hello world\";// æ„é€ æ–¹æ³•String str2 = new String(\"hello world\"); é€šè¿‡å¯¹Stringæºç çš„æŸ¥çœ‹ï¼š 12345678910111213public final class String implements java.io.Serializable, Comparable&lt;String&gt;, CharSequence &#123; /** The value is used for character storage. */ private final char value[]; /** Cache the hash code for the string */ private int hash; // Default to 0 /** use serialVersionUID from JDK 1.0.2 for interoperability */ private static final long serialVersionUID = -6849794470754667710L; â€¦â€¦&#125; ä»ä¸Šé¢çš„ä»£ç æˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸¤ç‚¹ç»“è®ºï¼š Javaä¸­çš„Stringç±»è¢«finalä¿®é¥°ã€‚åœ¨Javaä¸­è¢«finalä¿®é¥°çš„ç±»ä¸å…è®¸è¢«ç»§æ‰¿ï¼Œå¹¶ä¸”æˆå‘˜æ–¹æ³•é»˜è®¤è¢«finalä¿®é¥°ã€‚åœ¨æ—©æœŸçš„JVMçš„ç‰ˆæœ¬ï¼Œè¢«finalä¿®é¥°çš„æ–¹æ³•ä¼šè¢«è½¬ä¸ºå†…åµŒè°ƒç”¨å€Ÿæ­¤æ¥æå‡æ‰§è¡Œæ•ˆç‡ï¼Œä½†æ˜¯ä»Java1.5/6ä¹‹åï¼Œè¿™ç§æ–¹å¼å°±è¢«å–æ¶ˆäº†ã€‚åœ¨ä¹‹åçš„ç‰ˆæœ¬é‡Œï¼Œfinalä¿®é¥°ç±»åªæ˜¯ä¸ºäº†ä¸è®©ç±»è¢«ç»§æ‰¿ã€‚ Stringç±»æ˜¯é€šè¿‡charæ•°ç»„ä¿å­˜å­—ç¬¦ä¸²çš„ã€‚ å¯¹å­—ç¬¦ä¸²çš„æ¯ä¸€æ¬¡æ“ä½œï¼Œä¾‹å¦‚è¿æ¥å­ä¸²éƒ½ä¼šé‡æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„Stringå¯¹è±¡ã€‚æˆ‘ä»¬å¯ä»¥ä»Stringä¸­çš„concatæ–¹æ³•æºç ä¸­å¯ä»¥çœ‹å‡ºè¿™ä¸€ç‚¹ï¼Œä»£ç å¦‚ä¸‹ï¼š 12345678910public String concat(String str) &#123; int otherLen = str.length(); if (otherLen == 0) &#123; return this; &#125; int len = value.length; char buf[] = Arrays.copyOf(value, len + otherLen); str.getChars(buf, len); return new String(buf, true);&#125; å½“è¢«è¿æ¥çš„å­ä¸²çš„é•¿åº¦ä¸º0æ—¶ï¼Œç›´æ¥è¿”å›è‡ªèº«ï¼Œè¿æ¥ä¸€ä¸ªé•¿åº¦ä¸ä¸º0çš„å­ä¸²ï¼Œé€šè¿‡charæ•°ç»„çš„ç³»åˆ—æ“ä½œï¼Œé‡æ–°ç”Ÿæˆä¸€ä¸ªæ–°çš„Stringå¯¹è±¡ã€‚æ‰€ä»¥åœ¨æ­¤è¦æ³¨æ„å¯¹Stringç±»å¯¹è±¡çš„ä»»ä½•æ”¹å˜éƒ½ä¸å½±å“åˆ°åŸå¯¹è±¡ï¼Œç›¸å…³çš„ä»»ä½•changeæ“ä½œéƒ½ä¼šç”Ÿæˆæ–°çš„å¯¹è±¡ã€‚ æ·±å…¥ç†è§£å­—ç¬¦ä¸²Stringä¸Šé¢å†™äº†ä¸¤ç§å®šä¹‰å­—ç¬¦ä¸²çš„æ–¹å¼ï¼Œä¸çŸ¥é“å¤§å®¶çŸ¥é“è¿™ä¸¤ç§æ–¹å¼çš„åŒºåˆ«å’Œè”ç³»ä¹ˆï¼Ÿ 123456789101112// ç›´æ¥èµ‹å€¼String str1 = \"hello world\";// æ„é€ æ–¹æ³•String str2 = new String(\"hello world\");String str3 = \"hello world\";String str4 = new String(\"hello world\");System.out.println(str1==str2);System.out.println(str1==str3);System.out.println(str2==str4); ä½ èƒ½ç›´æ¥è¯´å‡ºä¸Šé¢çš„æ‰§è¡Œç»“æœä¹ˆï¼Ÿå¦‚æœä¸èƒ½è¯·ç»§ç»­å¾€ä¸‹çœ‹ï¼Œèƒ½çš„è¯ä¹Ÿè¯·ç»§ç»­å¾€ä¸‹çœ‹ã€‚å…·ä½“çš„ç»“æœå¦‚ä¸‹ï¼š 123falsetruefalse åœ¨classæ–‡ä»¶ä¸­æœ‰ä¸€éƒ¨åˆ†æ¥å­˜å‚¨ç¼–è¯‘æœŸé—´ç”Ÿæˆçš„å­—é¢å¸¸é‡ä»¥åŠç¬¦å·å¼•ç”¨ï¼Œè¿™éƒ¨åˆ†å«åšclassæ–‡ä»¶å¸¸é‡æ± ï¼Œåœ¨è¿è¡ŒæœŸé—´å¯¹åº”ç€æ–¹æ³•åŒºçš„è¿è¡Œæ—¶å¸¸é‡æ± ã€‚åœ¨ä¸Šè¿°çš„ä»£ç ä¸­String str1 = â€œhello worldâ€;å’ŒString str2 = new String(â€œhello worldâ€);éƒ½åœ¨ç¼–è¯‘æœŸç”Ÿæˆäº†å­—é¢å¸¸é‡å’Œç¬¦å·å¼•ç”¨ï¼Œè¿è¡ŒæœŸé—´å­—é¢å¸¸é‡â€hello worldâ€éƒ½è¢«å­˜å‚¨åœ¨è¿è¡Œæ—¶å¸¸é‡æ± ã€‚JVMæ‰§è¡Œå¼•æ“ä¼šåœ¨è¿è¡Œæ—¶å¸¸é‡æ± ä¸­æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨ç›¸åŒçš„å­—é¢å¸¸é‡ï¼Œè‹¥æœ‰åˆ™ç›´æ¥å°†å¼•ç”¨æŒ‡å‘å·²ç»å­˜åœ¨çš„å­—é¢å¸¸é‡ï¼›å¦åˆ™åœ¨è¿è¡Œæ—¶å¸¸é‡æ± ä¸­å¼€è¾Ÿä¸€ä¸ªæ–°çš„ç©ºé—´æ¥å­˜å‚¨è¯¥å­—é¢é‡ï¼Œå¹¶å°†å¼•ç”¨æŒ‡å‘è¯¥å­—é¢å¸¸é‡ï¼Œé€šè¿‡è¿™ç§æ–¹å¼æ¥æŠŠStringå¯¹è±¡è·Ÿå¼•ç”¨ç»‘å®šã€‚ é€šè¿‡newå…³é”®å­—ç”Ÿæˆå¯¹è±¡è¿™ä¸ªè¿‡ç¨‹æ˜¯åœ¨å †heapä¸­è¿›è¡Œçš„ï¼Œè€Œåœ¨å †è¿›è¡Œå¯¹è±¡ç”Ÿæˆè¿‡ç¨‹ä¸­ï¼Œä¸ä¼šæœ‰æ£€æŸ¥å¯¹è±¡æ˜¯å¦å·²ç»å­˜åœ¨è¿™ä¸ªè¡Œä¸ºã€‚å› æ­¤é€šè¿‡newæ¥åˆ›å»ºå¯¹è±¡ï¼Œåˆ›å»ºå‡ºæ¥çš„ä¸€å®šæ˜¯æ–°çš„å¯¹è±¡ï¼Œå³åœ¨å†…å­˜ä¸­æœ‰ç€æ–°çš„å†…å­˜åœ°å€ï¼Œä½†å­—ç¬¦ä¸²çš„å†…å®¹æ˜¯ç›¸åŒçš„ã€‚ ä¸‹é¢æ˜¯Javaä¸­ä¸åŒå˜é‡åœ¨å†…å­˜ä¸­å­˜æ”¾çš„ä½ç½®ï¼š å˜é‡ å†…å­˜ä½ç½® newå‡ºæ¥çš„å¯¹è±¡ heap å † å±€éƒ¨å˜é‡ã€åŸºæœ¬æ•°æ®ç±»å‹ stack æ ˆ é™æ€å˜é‡ã€å­—ç¬¦ä¸²ã€å¸¸é‡ data segment æ•°æ®åŒº ä»£ç  code segment ä»£ç åŒº Stringã€StringBufferã€StringBuilderçš„åŒºåˆ«ä¸ºä»€ä¹ˆå·²ç»å­˜åœ¨äº†Stringäº†ï¼Œè¿˜ä¼šå‡ºç°StringBufferã€StringBuilderï¼Ÿå¦‚æœä¸€ä¸ªå­—ç¬¦ä¸²éœ€è¦è¿æ¥10000æ¬¡å…¶ä»–çš„å­—ç¬¦ä¸²ï¼Œå®ç°ä»£ç å¦‚ä¸‹ï¼š 1234567891011public class Main &#123; public static void main(String[] args)&#123; String string = \"\"; for(int i=0;i&lt;10000;i++)&#123; string = string.concat(\"hello\"); &#125; &#125;&#125; ä¸Šè¿°ä»£ç ä¸æ–­çš„newå­—ç¬¦ä¸²å¯¹è±¡ï¼Œå‰é¢å·²ç»è¯´äº†é‡è¦çš„ä¸€ç‚¹å¯¹Stringç±»å¯¹è±¡çš„ä»»ä½•æ”¹å˜éƒ½ä¸å½±å“åˆ°åŸå¯¹è±¡ï¼Œç›¸å…³çš„ä»»ä½•changeæ“ä½œéƒ½ä¼šç”Ÿæˆæ–°çš„å¯¹è±¡ã€‚ï¼Œè¿™ç§ä»£ç å°†ä¼šæœ‰å¤šå¤§çš„å†…å­˜æ¶ˆè€—ã€‚è¿™ä¸ªæ—¶å€™æƒ³å¿…å¤§å®¶å·²ç»æœ‰äº†ç‚¹ç­”æ¡ˆã€‚æˆ‘å°†ä¸Šè¿°çš„ä»£ç ç¨å¾®çš„ä¿®æ”¹ä¸€ä¸‹ï¼š 1234567891011public class Main &#123; public static void main(String[] args)&#123; String string = \"\"; for(int i=0;i&lt;10000;i++)&#123; string += \"hello\"; &#125; &#125;&#125; ä¸¤éƒ¨åˆ†ä»£ç çœ‹ä¼¼åªæœ‰ä¸€ç‚¹å·®å¼‚ï¼Œå…¶å®ä¸¤è€…çš„å†…å­˜æ¶ˆè€—æœ‰ç€å¤©å¤§çš„å·®åˆ«ã€‚æˆ‘ä»¬é€šè¿‡javapå‘½ä»¤æ¥åç¼–è¯‘.classæ–‡ä»¶ã€‚å…·ä½“å†…å®¹å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031D:\\work\\javaLearn\\out\\production\\javaLearn&gt;javap -c MainCompiled from \"Main.java\"public class Main &#123; public Main(); Code: 0: aload_0 1: invokespecial #1 // Method java/lang/Object.\"&lt;init&gt;\":()V 4: return public static void main(java.lang.String[]); Code: 0: ldc #2 // String 2: astore_1 3: iconst_0 4: istore_2 5: iload_2 6: sipush 10000 9: if_icmpge 38 12: new #3 // class java/lang/StringBuilder 15: dup 16: invokespecial #4 // Method java/lang/StringBuilder.\"&lt;init&gt;\":()V 19: aload_1 20: invokevirtual #5 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder; 23: ldc #6 // String hello 25: invokevirtual #5 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder; 28: invokevirtual #7 // Method java/lang/StringBuilder.toString:()Ljava/lang/String; 31: astore_1 32: iinc 2, 1 35: goto 5 38: return&#125; ä»ä¸Šé¢åç¼–è¯‘å‡ºæ¥çš„å­—èŠ‚ç ä¸­å¯ä»¥çœ‹å‡ºä¸€ç‚¹é—¨é“ï¼šstring+=â€helloâ€çš„æ“ä½œäº‹å®ä¸Šä¼šè‡ªåŠ¨è¢«JVMä¼˜åŒ–æˆStringBuilderç±»çš„appendæ“ä½œã€‚ é‚£ä¹ˆæœ‰äººä¼šé—®æ—¢ç„¶æœ‰äº†StringBuilderç±»ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦StringBufferç±»ï¼ŸæŸ¥çœ‹æºä»£ç ä¾¿ä¸€ç›®äº†ç„¶ï¼Œäº‹å®ä¸Šï¼ŒStringBuilderå’ŒStringBufferç±»æ‹¥æœ‰çš„æˆå‘˜å±æ€§ä»¥åŠæˆå‘˜æ–¹æ³•åŸºæœ¬ç›¸åŒï¼ŒåŒºåˆ«æ˜¯StringBufferç±»çš„æˆå‘˜æ–¹æ³•å‰é¢å¤šäº†ä¸€ä¸ªå…³é”®å­—ï¼šsynchronizedï¼Œä¸ç”¨å¤šè¯´ï¼Œè¿™ä¸ªå…³é”®å­—æ˜¯åœ¨å¤šçº¿ç¨‹è®¿é—®æ—¶èµ·åˆ°å®‰å…¨ä¿æŠ¤ä½œç”¨çš„,ä¹Ÿå°±æ˜¯è¯´StringBufferæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ æˆ‘ä»¬æ¥çœ‹ä¸‹é¢çš„ä»£ç ï¼š 1234567891011public class Main &#123; public static void main(String[] args)&#123; String str1 = \"I \"+\"love \"+\"you\"; String str2 = \"I \"; String str3 = \"love \"; String str4 = \"you \"; String str5 = str2 + str3 + str4; &#125;&#125; ç”¨javapå‘½ä»¤æ¥åç¼–è¯‘.classæ–‡ä»¶ï¼š 1234567891011121314151617181920212223242526272829303132D:\\work\\javaLearn\\out\\production\\javaLearn&gt;javap -c MainCompiled from \"Main.java\"public class Main &#123; public Main(); Code: 0: aload_0 1: invokespecial #1 // Method java/lang/Object.\"&lt;init&gt;\":()V 4: return public static void main(java.lang.String[]); Code: 0: ldc #2 // String I love you 2: astore_1 3: ldc #3 // String I 5: astore_2 6: ldc #4 // String love 8: astore_3 9: ldc #5 // String you 11: astore 4 13: new #6 // class java/lang/StringBuilder 16: dup 17: invokespecial #7 // Method java/lang/StringBuilder.\"&lt;init&gt;\":()V 20: aload_2 21: invokevirtual #8 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder; 24: aload_3 25: invokevirtual #8 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder; 28: aload 4 30: invokevirtual #8 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder; 33: invokevirtual #9 // Method java/lang/StringBuilder.toString:()Ljava/lang/String; 36: astore 5 38: return&#125; str1åœ¨ç¼–è¯‘ä¹‹åå°±è¢«ç›´æ¥èµ‹å€¼ä¸ºâ€I love youâ€;str5å´æ²¡æœ‰ä»€ä¹ˆæ“ä½œã€‚ç»¼ä¸Šæ‰€è¿°æˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸€äº›ç»“è®ºï¼š å¯¹äºç›´æ¥é€šè¿‡åŠ å·ç›¸è¿å­—ç¬¦ä¸²æ•ˆç‡é«˜ï¼Œå› ä¸ºç¼–è¯‘å™¨ç›´æ¥ç¡®å®šäº†å®ƒçš„å€¼ã€‚å°±åƒä¸Šé¢çš„â€I â€œ+â€love â€œ+â€youâ€;çš„å­—ç¬¦ä¸²ç›¸åŠ ï¼Œåœ¨ç¼–è¯‘æœŸé—´å°±è¢«ä¼˜åŒ–æˆäº†â€I love youâ€œã€‚ å¯¹äºé—´æ¥ç›¸åŠ çš„ï¼Œå½¢å¦‚str2 + str3 + str4;ç¼–è¯‘æœŸä¸ä¼šè¿›è¡Œä¼˜åŒ–ã€‚ å¯¹äºæ‰§è¡Œæ•ˆç‡æ¥è¯´StringBuilder &gt; StringBuffer &gt; Stringï¼Œä½†è¿™ä¸ªä¹Ÿä¸æ˜¯ç»å¯¹çš„ã€‚æ¯”å¦‚String str = â€œhelloâ€+ â€œworldâ€çš„æ•ˆç‡å°±æ¯” StringBuilder st = new StringBuilder().append(â€œhelloâ€).append(â€œworldâ€)è¦é«˜ã€‚ä½†æ˜¯ï¼Œå½“å­—ç¬¦ä¸²ç›¸åŠ çš„æ“ä½œæˆ–è€…å­—ç¬¦æ”¹åŠ¨çš„æƒ…å†µè¾ƒå°‘çš„æ—¶å€™ï¼Œé‡‡ç”¨Stringè‚¯å®šæ˜¯æ¯”è¾ƒå¥½çš„ï¼›å½“å­—ç¬¦ä¸²çš„æ“ä½œè¾ƒå¤šçš„æ—¶å€™æ¨èä½¿ç”¨StringBuilderï¼Œå¦‚æœè€ƒè™‘åˆ°çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œæ— ç–‘é‡‡ç”¨StringBufferæ˜¯æœ€åˆé€‚çš„ã€‚å¸¸è§çš„å­—ç¬¦ä¸²ç›¸å…³çš„é¢è¯•é¢˜ ä¸‹é¢çš„ä»£ç è¾“å‡ºçš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ123String a = \"hello2\"; String b = \"hello\" + 2; System.out.println((a == b)); ç»“æœæ˜¯trueï¼Œå®ƒString b = â€œhelloâ€ + 2; è¢«ç¼–è¯‘å™¨ä¼˜åŒ–æˆäº†String b = â€œhello2â€; æ‰€ä»¥è¿è¡Œæ—¶å­—ç¬¦ä¸²aå’ŒbæŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚ ä¸‹é¢çš„ä»£ç è¾“å‡ºçš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ1234String a = \"hello2\"; String b = \"hello\"; String c = b + 2; System.out.println((a == c)); è¾“å‡ºç»“æœä¸º:falseã€‚ç”±äºæœ‰ç¬¦å·å¼•ç”¨çš„å­˜åœ¨ï¼Œæ‰€ä»¥ String c = b + 2;ä¸ä¼šåœ¨ç¼–è¯‘æœŸé—´è¢«ä¼˜åŒ–ï¼Œä¸ä¼šæŠŠb+2å½“åšå­—é¢å¸¸é‡æ¥å¤„ç†çš„ï¼Œé€šè¿‡StringBuilderç”Ÿæˆäº†ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œå› æ­¤è¿™ç§æ–¹å¼ç”Ÿæˆçš„å¯¹è±¡äº‹å®ä¸Šæ˜¯ä¿å­˜åœ¨å †ä¸Šçš„ã€‚ ä¸‹é¢çš„ä»£ç è¾“å‡ºçš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ1234String a = \"hello2\";final String b = \"hello\"; String c = b + 2; System.out.println((a == c)); è¾“å‡ºç»“æœä¸ºï¼štrueã€‚å¯¹äºè¢«finalä¿®é¥°çš„å˜é‡ï¼Œä¼šåœ¨classæ–‡ä»¶å¸¸é‡æ± ä¸­ä¿å­˜ä¸€ä¸ªå‰¯æœ¬ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸ä¼šé€šè¿‡è¿æ¥è€Œè¿›è¡Œè®¿é—®ï¼Œå¯¹finalå˜é‡çš„è®¿é—®åœ¨ç¼–è¯‘æœŸé—´éƒ½ä¼šç›´æ¥è¢«æ›¿ä»£ä¸ºçœŸå®çš„å€¼ã€‚é‚£ä¹ˆString c = b + 2;åœ¨ç¼–è¯‘æœŸé—´å°±ä¼šè¢«ä¼˜åŒ–æˆï¼šString c = â€œhelloâ€ + 2; å­—ç¬¦ä¸²çš„æ•…äº‹å°±æš‚æ—¶è¯´åˆ°è¿™é‡Œï¼Œåç»­æœ‰çš„è¯å°±ç»§ç»­æ›´æ–°ã€‚","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"},{"name":"String","slug":"String","permalink":"https://ydstudios.gitee.io/tags/String/"}]},{"title":"CentOS 6.x ä¸‹å®‰è£…Zookeeper","slug":"CentOS-6-x-ä¸‹å®‰è£…Zookeeper","date":"2018-05-23T21:41:18.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/d229aadf.html","link":"","permalink":"https://ydstudios.gitee.io/post/d229aadf.html","excerpt":"ç›®å‰åœ¨ç ”ç©¶dubboè¿™ä¸ªå›½å†…æµè¡Œçš„RPCæ¡†æ¶ï¼Œå®ç°å»ä¸­å¿ƒè¯çš„å¾®æœåŠ¡éœ€è¦ç”¨åˆ°Zookeeper,æ‰€ä»¥ä»Šå¤©æ¥è¯´è¯´å¦‚ä½•å®‰è£…Zookeeperã€‚Zookeeperçš„å®˜æ–¹ä¸‹è½½åœ°å€","text":"ç›®å‰åœ¨ç ”ç©¶dubboè¿™ä¸ªå›½å†…æµè¡Œçš„RPCæ¡†æ¶ï¼Œå®ç°å»ä¸­å¿ƒè¯çš„å¾®æœåŠ¡éœ€è¦ç”¨åˆ°Zookeeper,æ‰€ä»¥ä»Šå¤©æ¥è¯´è¯´å¦‚ä½•å®‰è£…Zookeeperã€‚Zookeeperçš„å®˜æ–¹ä¸‹è½½åœ°å€ æŸ¥çœ‹Centosç‰ˆæœ¬ï¼š 12345cat /etc/issue[root@iZwz99xkrnh5xy0cqp8aofZ tomcat]# cat /etc/issueCentOS release 6.9 (Final)Kernel \\r on an \\m 1.ä¸‹è½½å®‰è£…åŒ…åˆ°/usr/local/src/ç›®å½•ä¸‹ï¼Œå¹¶åˆ›å»ºå®‰è£…ç›®å½•/usr/local/zookeeperã€‚ 1234cd /usr/local/src/#è¿™é‡Œä½¿ç”¨3.4.10ï¼Œæ²¡æœ‰ä½¿ç”¨è¾ƒé«˜çš„ç‰ˆæœ¬wget https://mirrors.tuna.tsinghua.edu.cn/apache/zookeeper/zookeeper-3.4.10/zookeeper-3.4.10.tar.gzmkdir /usr/local/zookeeper 2.è§£å‹å®‰è£…åŒ…,å¹¶å°†è§£å‹åçš„æ–‡ä»¶æ‹·è´åˆ°/usr/local/zookeeper 12tar -zxvf zookeeper-3.4.10.tar.gzcp -R /usr/local/zookeeper/zookeeper-3.4.10/* /usr/local/zookeeper 3.æ·»åŠ ç³»ç»Ÿå˜é‡åˆ°/etc/profile 123export ZOOKEEPER_HOME=/usr/local/zookeeperexport PATH=$ZOOKEEPER_HOME/bin:$PATHexport PATH æ‰§è¡Œå‘½ä»¤ source /etc/profileä½¿é…ç½®æ–‡ä»¶ç«‹å³ç”Ÿæ•ˆ 4.åˆ›å»ºzookeeperé…ç½®æ–‡ä»¶,å¹¶ä½œç›¸åº”çš„é…ç½® 1234567891011121314151617181920cd /usr/local/zookeeper/conf/cp zoo_sample.cfg zoo.cfg#é…ç½®zookeeper#æœåŠ¡å™¨ä¸å®¢æˆ·ç«¯ä¹‹é—´äº¤äº’çš„åŸºæœ¬æ—¶é—´å•å…ƒï¼ˆmsï¼‰tickTime=2000#é…ç½®ä¿å­˜æ•°æ®æ–‡ä»¶å¤¹dataDir=/usr/local/zookeeper/data#é…ç½®ä¿å­˜æ—¥å¿—æ–‡ä»¶å¤¹ï¼Œå½“æ­¤é…ç½®ä¸å­˜åœ¨æ—¶é»˜è®¤è·¯å¾„ä¸dataDirä¸€è‡´dataLogDir=/var/log/zookeeper#å®¢æˆ·ç«¯è®¿é—®zookeeperçš„ç«¯å£å·clientPort=2181 5.zookeeperç›¸å…³å‘½ä»¤ 1234å¯åŠ¨æœåŠ¡ï¼šzkServer.sh startæŸ¥çœ‹çŠ¶æ€ï¼šzkServer.sh statuså…³é—­æœåŠ¡ï¼šzkServer.sh stopé‡å¯æœåŠ¡ï¼šzkServer.sh restart è‡³æ­¤ï¼Œzookeeperå®‰è£…å®Œæˆ","categories":[],"tags":[{"name":"linux","slug":"linux","permalink":"https://ydstudios.gitee.io/tags/linux/"},{"name":"zookeeper","slug":"zookeeper","permalink":"https://ydstudios.gitee.io/tags/zookeeper/"}]},{"title":"CentOS 6.x ä¸‹yumå®‰è£…Tomcat8","slug":"CentOS-6-x-ä¸‹yumå®‰è£…Tomcat8","date":"2018-05-22T21:40:05.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/30e8c768.html","link":"","permalink":"https://ydstudios.gitee.io/post/30e8c768.html","excerpt":"åºŸè¯ä¸å¤šè¯´ï¼Œä»Šå¤©å‡†å¤‡åœ¨Centosä¸Šå®‰è£…tomcatï¼Œå­¦javaä¸ä¼štomcatï¼Œé‚£ä¸å°±æ˜¯ç™½å­¦Javaä¹ˆï¼ŸæŸ¥çœ‹Centosç‰ˆæœ¬ï¼š","text":"åºŸè¯ä¸å¤šè¯´ï¼Œä»Šå¤©å‡†å¤‡åœ¨Centosä¸Šå®‰è£…tomcatï¼Œå­¦javaä¸ä¼štomcatï¼Œé‚£ä¸å°±æ˜¯ç™½å­¦Javaä¹ˆï¼ŸæŸ¥çœ‹Centosç‰ˆæœ¬ï¼š 12345cat /etc/issue[root@iZwz99xkrnh5xy0cqp8aofZ tomcat]# cat /etc/issueCentOS release 6.9 (Final)Kernel \\r on an \\m é€šè¿‡yumå¥½å¤„å…¶å®å¾ˆå¤šï¼Œç¯å¢ƒå˜é‡ä¸ç”¨é…ç½®ï¼Œé…ç½®æ–‡ä»¶æ”¾åœ¨å¤§å®¶éƒ½ç†Ÿæ‚‰çš„åœ°æ–¹ï¼Œé€šè¿‡rpm -ql xxxå¯ä»¥çŸ¥é“å…¨éƒ¨æ–‡ä»¶çš„åœ°æ–¹ç­‰ç­‰ã€‚ 1.å®‰è£…Tomcatè‡ªå¸¦çš„yumæºé‡Œé¢çš„Tomcatç‰ˆæœ¬è¿‡ä½ï¼Œæ‰€ä»¥æˆ‘å‡†å¤‡å®‰è£…Tomcat8ã€‚ 12345678910111213cd /usr/local/src/// ä¸‹è½½è„šæœ¬# git clone https://github.com/boundlessgeo/rpm-tomcat8.git &amp;&amp; cd rpm-tomcat8// å®‰è£…rpmæ‰“åŒ…å·¥å…·# yum -y install rpmdevtools// æ‰“åŒ…rpmåŒ…# ./make_rpm.sh// å®‰è£…ä¾èµ–# yum install -y redhat-lsb-core// å®‰è£…Tomcat8# rpm -ivh rpmbuild/RPMS/noarch/boundless-server-tomcat8-8.0.47-5.noarch.rpmå¤‡æ³¨ï¼šä¸»è¦æ˜¯è¿™ä¸ªè„šæœ¬https://github.com/boundlessgeo/rpm-tomcat8ï¼Œæƒ³è¦å“ªä¸ªç‰ˆæœ¬å¯ä»¥ç›´æ¥ä¸Šå»è¿™é‡Œä¿®æ”¹æ–‡ä»¶å³å¯ã€‚ 2.è®¾ç½®å¼€æœºå¯åŠ¨ 1chkconfig tomcat8 on 3.å¸¸ç”¨çš„å‘½ä»¤ 12345678// æœåŠ¡çŠ¶æ€service tomcat8 status// æœåŠ¡å¯åŠ¨service tomcat8 start// æœåŠ¡åœæ­¢service tomcat8 stop// æœåŠ¡é‡å¯service tomcat8 restart 4.å¸è½½Tomcat 1yum -e boundless-server-tomcat8.noarch","categories":[],"tags":[{"name":"linux","slug":"linux","permalink":"https://ydstudios.gitee.io/tags/linux/"},{"name":"tomcat","slug":"tomcat","permalink":"https://ydstudios.gitee.io/tags/tomcat/"}]},{"title":"Spring Boot 1.xé›†æˆspring-boot-devtoolså¼€å‘æ—¶å®ç°çƒ­éƒ¨ç½²","slug":"Spring-Boot-1-xé›†æˆspring-boot-devtoolså¼€å‘æ—¶å®ç°çƒ­éƒ¨ç½²","date":"2018-05-13T21:38:16.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/e13b17d3.html","link":"","permalink":"https://ydstudios.gitee.io/post/e13b17d3.html","excerpt":"çƒ­éƒ¨ç½²å¤§å®¶éƒ½çŸ¥é“åœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¸¸å¸¸ä¼šæ”¹åŠ¨é¡µé¢æ•°æ®æˆ–è€…ä¿®æ”¹æ•°æ®ç»“æ„ï¼Œä¸ºäº†æ˜¾ç¤ºæ”¹åŠ¨æ•ˆæœï¼Œå¾€å¾€éœ€è¦é‡å¯åº”ç”¨æŸ¥çœ‹æ”¹å˜æ•ˆæœï¼Œå…¶å®å°±æ˜¯é‡æ–°ç¼–è¯‘ç”Ÿæˆäº†æ–°çš„Classæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶é‡Œè®°å½•ç€å’Œä»£ç ç­‰å¯¹åº”çš„å„ç§ä¿¡æ¯ï¼Œç„¶åClassæ–‡ä»¶å°†è¢«è™šæ‹Ÿæœºçš„ClassLoaderåŠ è½½ã€‚è€Œçƒ­éƒ¨ç½²æ­£æ˜¯åˆ©ç”¨äº†è¿™ä¸ªç‰¹ç‚¹ï¼Œå®ƒç›‘å¬åˆ°å¦‚æœæœ‰Classæ–‡ä»¶æ”¹åŠ¨äº†ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ClaassLoaderè¿›è¡ŒåŠ è½½è¯¥æ–‡ä»¶ï¼Œç»è¿‡ä¸€ç³»åˆ—çš„è¿‡ç¨‹ï¼Œæœ€ç»ˆå°†ç»“æœå‘ˆç°åœ¨æˆ‘ä»¬çœ¼å‰ã€‚","text":"çƒ­éƒ¨ç½²å¤§å®¶éƒ½çŸ¥é“åœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¸¸å¸¸ä¼šæ”¹åŠ¨é¡µé¢æ•°æ®æˆ–è€…ä¿®æ”¹æ•°æ®ç»“æ„ï¼Œä¸ºäº†æ˜¾ç¤ºæ”¹åŠ¨æ•ˆæœï¼Œå¾€å¾€éœ€è¦é‡å¯åº”ç”¨æŸ¥çœ‹æ”¹å˜æ•ˆæœï¼Œå…¶å®å°±æ˜¯é‡æ–°ç¼–è¯‘ç”Ÿæˆäº†æ–°çš„Classæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶é‡Œè®°å½•ç€å’Œä»£ç ç­‰å¯¹åº”çš„å„ç§ä¿¡æ¯ï¼Œç„¶åClassæ–‡ä»¶å°†è¢«è™šæ‹Ÿæœºçš„ClassLoaderåŠ è½½ã€‚è€Œçƒ­éƒ¨ç½²æ­£æ˜¯åˆ©ç”¨äº†è¿™ä¸ªç‰¹ç‚¹ï¼Œå®ƒç›‘å¬åˆ°å¦‚æœæœ‰Classæ–‡ä»¶æ”¹åŠ¨äº†ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ClaassLoaderè¿›è¡ŒåŠ è½½è¯¥æ–‡ä»¶ï¼Œç»è¿‡ä¸€ç³»åˆ—çš„è¿‡ç¨‹ï¼Œæœ€ç»ˆå°†ç»“æœå‘ˆç°åœ¨æˆ‘ä»¬çœ¼å‰ã€‚ ç±»åŠ è½½æœºåˆ¶Javaä¸­çš„ç±»ç»è¿‡ç¼–è¯‘å™¨å¯ä»¥æŠŠä»£ç ç¼–è¯‘ä¸ºå­˜å‚¨å­—èŠ‚ç çš„Classæ–‡ä»¶ï¼Œè¯¥Classæ–‡ä»¶å­˜å‚¨äº†å„ç§ä¿¡æ¯ï¼Œæœ€ç»ˆè¦åŠ è½½åˆ°è™šæ‹Ÿæœºä¸­è¿è¡Œä½¿ç”¨ã€‚ç±»åŠ è½½æœºåˆ¶ï¼ˆæ‘˜è‡ªã€Šæ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºã€‹ï¼‰è™šæ‹ŸæœºæŠŠæè¿°ç±»çš„æ•°æ®ä»Classæ–‡ä»¶åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå¹¶å¯¹æ•°æ®è¿›è¡Œæ ¡éªŒã€è½¬æ¢è§£æå’Œåˆå§‹åŒ–ï¼Œæœ€ç»ˆå½¢æˆå¯ä»¥è¢«è™šæ‹Ÿæœºç›´æ¥ä½¿ç”¨çš„Javaç±»å‹ã€‚ Spring Bootå®ç°çƒ­éƒ¨ç½²Spring Bootå®ç°çƒ­éƒ¨ç½²æœ‰å¦‚ä¸‹æ–¹å¼ï¼š ä½¿ç”¨ Spring Loaded ä½¿ç”¨ spring-boot-devtools Spring Loadedè¿™ç§æ–¹å¼æ˜¯ä»¥Mavenæ’ä»¶çš„å½¢å¼å»åŠ è½½ï¼Œæ‰€ä»¥å¯åŠ¨æ—¶ä½¿ç”¨é€šè¿‡Mavenå‘½ä»¤mvn spring-boot:runå¯åŠ¨ï¼Œè€Œé€šè¿‡Application.runæ–¹å¼å¯åŠ¨çš„ä¼šæ— æ•ˆï¼Œå› ä¸ºé€šè¿‡åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶ï¼Œå·²ç»ç»•å¼€äº†Mavenæ’ä»¶æœºåˆ¶ã€‚pomé›†æˆæ–¹å¼ï¼š 123456789101112131415&lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;springloaded&lt;/artifactId&gt; &lt;version&gt;1.2.5.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;/plugin&gt; &lt;/plugins&gt;&lt;/build&gt; spring-boot-devtoolsè¿™ç§æ–¹å¼æ— è®ºæ€ä¹ˆå¯åŠ¨åº”ç”¨ï¼Œéƒ½å¯ä»¥è¾¾åˆ°ä¿®æ”¹æ–‡ä»¶åé‡å¯åº”ç”¨ã€‚pomé›†æˆï¼š 123456&lt;!-- çƒ­éƒ¨ç½²æ¨¡å— --&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;!-- è¿™ä¸ªéœ€è¦ä¸º true çƒ­éƒ¨ç½²æ‰æœ‰æ•ˆ --&gt;&lt;/dependency&gt; é›†æˆæ³¨æ„ å¦‚æœå‘ç°æ²¡æœ‰çƒ­éƒ¨ç½²æ•ˆæœï¼Œåˆ™éœ€è¦æ£€æŸ¥IDEé…ç½®ä¸­æœ‰æ²¡æœ‰æ‰“å¼€è‡ªåŠ¨ç¼–è¯‘ã€‚ å¦‚æœä½¿ç”¨Thymeleafæ¨¡æ¿å¼•æ“ï¼Œéœ€è¦æŠŠæ¨¡æ¿é»˜è®¤ç¼“å­˜è®¾ç½®ä¸ºfalse12#ç¦æ­¢thymeleafç¼“å­˜ï¼ˆå»ºè®®ï¼šå¼€å‘ç¯å¢ƒè®¾ç½®ä¸ºfalseï¼Œç”Ÿæˆç¯å¢ƒè®¾ç½®ä¸ºtrueï¼‰spring.thymeleaf.cache=false é’ˆå¯¹devtoolsçš„å¯ä»¥æŒ‡å®šç›®å½•æˆ–è€…æ’é™¤ç›®å½•æ¥è¿›è¡Œçƒ­éƒ¨ç½²1234#æ·»åŠ é‚£ä¸ªç›®å½•çš„æ–‡ä»¶éœ€è¦restartspring.devtools.restart.additional-paths=src/main/java#æ’é™¤é‚£ä¸ªç›®å½•çš„æ–‡ä»¶ä¸éœ€è¦restartspring.devtools.restart.exclude=static/**,public/** è®¾ç½®ideaè®©ä»–å®ç°æ–‡ä»¶ä¿®æ”¹è‡ªåŠ¨é‡å¯é¡¹ç›® æ‰¾åˆ°ideaçš„Preferences -&gt; Build, Execution, Deployment -&gt; Compilerï¼Œå‹¾é€‰Build project automatically å›åˆ°ideaæ­£å¸¸ç•Œé¢ï¼ŒMacä½¿ç”¨å¿«æ·é”®shift+option+command+/ï¼Œwindowä¸Šçš„å¿«æ·é”®æ˜¯Shift+Ctrl+Alt+/ï¼Œæ‰“å¼€Registryï¼Œå‹¾é€‰compiler.automake.allow.when.app.runningcompiler.automake.allow.when.app.running é€šè¿‡ä»¥ä¸Šçš„è®¾ç½®å°±å¯ä»¥åœ¨ä¸é‡å¯æœåŠ¡çš„æƒ…å†µä¸‹åŠ è½½htmlï¼Œä½†å¦‚æœä¿®æ”¹javaæ–‡ä»¶ï¼ŒæœåŠ¡åœ¨å‡ ç§’åä¼šè‡ªåŠ¨é‡å¯ï¼Œå¦‚æœä¸å¸Œæœ›æœåŠ¡é‡å¯éœ€è¦åœ¨application.propertiesæˆ–application.ymlä¸­æ·»åŠ spring.devtools.reatart.enable=false","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"},{"name":"spring boot","slug":"spring-boot","permalink":"https://ydstudios.gitee.io/tags/spring-boot/"},{"name":"spring-boot-devtools","slug":"spring-boot-devtools","permalink":"https://ydstudios.gitee.io/tags/spring-boot-devtools/"}]},{"title":"Mavené¡¹ç›®å‡ºç°â€œè¯·ä½¿ç”¨ -source 8 æˆ–æ›´é«˜ç‰ˆæœ¬ä»¥å¯ç”¨ lambda è¡¨è¾¾å¼â€","slug":"Mavené¡¹ç›®å‡ºç°â€œè¯·ä½¿ç”¨-source-8-æˆ–æ›´é«˜ç‰ˆæœ¬ä»¥å¯ç”¨-lambda-è¡¨è¾¾å¼â€","date":"2018-05-09T21:36:34.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/db29c21a.html","link":"","permalink":"https://ydstudios.gitee.io/post/db29c21a.html","excerpt":"ä»Šå¤©åœ¨ç¼–è¯‘é¡¹ç›®çš„æ—¶å€™å‡ºç°â€œè¯·ä½¿ç”¨ -source 8 æˆ–æ›´é«˜ç‰ˆæœ¬ä»¥å¯ç”¨ lambda è¡¨è¾¾å¼â€çš„é—®é¢˜ã€‚è¿™ä¸ªé—®é¢˜æ˜¯æ€ä¹ˆå‡ºç°çš„å‘¢ï¼Ÿå…¶å®æ˜¯è‡ªå·±Mavençš„é»˜è®¤JDKçš„ç‰ˆæœ¬è¿‡ä½çš„åŸå› ï¼Œè²Œä¼¼JDKçš„ç‰ˆæœ¬é»˜è®¤ä¸ºJDK1.5ã€‚çŸ¥é“é—®é¢˜çš„æ‰€åœ¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç€æ‰‹è§£å†³äº†ã€‚","text":"ä»Šå¤©åœ¨ç¼–è¯‘é¡¹ç›®çš„æ—¶å€™å‡ºç°â€œè¯·ä½¿ç”¨ -source 8 æˆ–æ›´é«˜ç‰ˆæœ¬ä»¥å¯ç”¨ lambda è¡¨è¾¾å¼â€çš„é—®é¢˜ã€‚è¿™ä¸ªé—®é¢˜æ˜¯æ€ä¹ˆå‡ºç°çš„å‘¢ï¼Ÿå…¶å®æ˜¯è‡ªå·±Mavençš„é»˜è®¤JDKçš„ç‰ˆæœ¬è¿‡ä½çš„åŸå› ï¼Œè²Œä¼¼JDKçš„ç‰ˆæœ¬é»˜è®¤ä¸ºJDK1.5ã€‚çŸ¥é“é—®é¢˜çš„æ‰€åœ¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç€æ‰‹è§£å†³äº†ã€‚ åœ¨Mavenä¸­æŒ‡å®šJDKçš„ç‰ˆæœ¬1234567891011121314151617&lt;project xmlns=\"...\"&gt; ... &lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt; &lt;version&gt;3.3&lt;/version&gt; &lt;configuration&gt; &lt;source&gt;1.8&lt;/source&gt; &lt;target&gt;1.8&lt;/target&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt; ...&lt;/project&gt; åœ¨Mavençš„settings.xmlé‡Œé¢æŒ‡å®šå…¨å±€JDKç¼–è¯‘ç‰ˆæœ¬å³é”®ç‚¹å‡»é¡¹ç›®æ‰¾åˆ°Mavenï¼Œæ‰¾åˆ°å…³äºsettings.xmlé€‰é¡¹ï¼Œæ‰“å¼€settings.xmlæ–‡ä»¶ï¼Œå†™å…¥ä¸‹é¢çš„å†…å®¹ï¼š1234567891011121314&lt;profiles&gt; &lt;profile&gt; &lt;id&gt;jdk-1.8&lt;/id&gt; &lt;activation&gt; &lt;activeByDefault&gt;true&lt;/activeByDefault&gt; &lt;jdk&gt;1.8&lt;/jdk&gt; &lt;/activation&gt; &lt;properties&gt; &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt; &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt; &lt;maven.compiler.compilerVersion&gt;1.8&lt;/maven.compiler.compilerVersion&gt; &lt;/properties&gt; &lt;/profile&gt;&lt;/profiles&gt; ç„¶åé‡æ–°ç¼–è¯‘å°±å¯ä»¥äº†","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"},{"name":"maven","slug":"maven","permalink":"https://ydstudios.gitee.io/tags/maven/"}]},{"title":"Spring Boot 1.x æ•´åˆmybatis,å¹¶è‡ªåŠ¨ç”Ÿæˆmapperå’Œå®ä½“","slug":"Spring-Boot-1-x-æ•´åˆmybatis-å¹¶è‡ªåŠ¨ç”Ÿæˆmapperå’Œå®ä½“","date":"2018-05-07T21:35:19.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/e5912e16.html","link":"","permalink":"https://ydstudios.gitee.io/post/e5912e16.html","excerpt":"æœ€è¿‘ä¸€ç›´éƒ½åœ¨å­¦ä¹ Javaï¼Œå‘ç°ç›®å‰Javaæ‹›è˜ä¸­ï¼Œmybatiså‡ºç°çš„é¢‘ç‡æŒºé«˜çš„ï¼Œå¯èƒ½æ˜¯ç›®å‰Javaå¼€å‘ä¸­ä½¿ç”¨æ¯”è¾ƒå¤šçš„æ•°æ®åº“ORMæ¡†æ¶ã€‚äºæ˜¯æˆ‘å‡†å¤‡ç ”ç©¶ä¸‹Spring Boot 1.x å’Œmybatisçš„æ•´åˆã€‚","text":"æœ€è¿‘ä¸€ç›´éƒ½åœ¨å­¦ä¹ Javaï¼Œå‘ç°ç›®å‰Javaæ‹›è˜ä¸­ï¼Œmybatiså‡ºç°çš„é¢‘ç‡æŒºé«˜çš„ï¼Œå¯èƒ½æ˜¯ç›®å‰Javaå¼€å‘ä¸­ä½¿ç”¨æ¯”è¾ƒå¤šçš„æ•°æ®åº“ORMæ¡†æ¶ã€‚äºæ˜¯æˆ‘å‡†å¤‡ç ”ç©¶ä¸‹Spring Boot 1.x å’Œmybatisçš„æ•´åˆã€‚ 1.åœ¨pom.xmlæ–‡ä»¶ä¸­æ·»åŠ ä¸‹é¢çš„é…ç½® 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid&lt;/artifactId&gt; &lt;version&gt;1.0.29&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- è¿™ä¸ªæ˜¯å®˜æ–¹çš„mybatisä¾èµ–ï¼Œè¿™ä¸ªä½ ä¸åŠ æ²¡æ³•ç”¨å™» --&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;1.3.2&lt;/version&gt; &lt;/dependency&gt; &lt;!-- è¿™ä¸ªæ˜¯è‡ªåŠ¨ç”Ÿæˆmapperç­‰çš„ä¾èµ–ï¼Œå¿…é¡»å¾—åŠ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt; &lt;artifactId&gt;mybatis-generator&lt;/artifactId&gt; &lt;version&gt;1.3.5&lt;/version&gt; &lt;type&gt;pom&lt;/type&gt; &lt;/dependency&gt; &lt;!--è¿™ä¸ªæ˜¯è‡ªåŠ¨ç”Ÿæˆmapperç­‰çš„ä¾èµ–ï¼Œå¿…é¡»å¾—åŠ  https://mvnrepository.com/artifact/org.mybatis.generator/mybatis-generator-core --&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt; &lt;artifactId&gt;mybatis-generator-core&lt;/artifactId&gt; &lt;version&gt;1.3.5&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;plugin&gt; &lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt; &lt;artifactId&gt;mybatis-generator-maven-plugin&lt;/artifactId&gt; &lt;version&gt;1.3.2&lt;/version&gt; &lt;configuration&gt; &lt;!--é…ç½®æ–‡ä»¶å­˜æ”¾çš„åœ°å€--&gt; &lt;!--&lt;configurationFile&gt;src/main/resources/mybatis-generator/generatorConfig.xml&lt;/configurationFile&gt;--&gt; &lt;verbose&gt;true&lt;/verbose&gt; &lt;overwrite&gt;true&lt;/overwrite&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt; 2.åœ¨application.propertiesé…ç½®æ–‡ä»¶ä¸­è¿›è¡Œæ•°æ®åº“å’Œmybatisæ‰«æçš„é…ç½® 1234567891011121314151617spring.datasource.driver-class-name=com.mysql.jdbc.Driverspring.datasource.url=jdbc:mysql://localhost:3306/yddy?useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=UTCspring.datasource.username=rootspring.datasource.password=123456mybatis.config-locations=classpath:mybatis-config.xml# mapperæ–‡ä»¶mybatis.mapper-locations=classpath:mapper/*.xml #è¿™é‡Œç›´æ¥å†™*ï¼Œå¯¹åé¢è‡ªå®šä¹‰sqlï¼Œç¼–å†™xxxExt.xmlæœ‰å¥½å¤„ï¼Œè‡ªåŠ¨æ‰«æåˆ°è¿™äº›æ–‡ä»¶ï¼Œä¸ç”¨å†æ”¹é…ç½®äº†mybatis.type-aliases-package=com.dameiweb.learn.modellogging.level.com.dameiweb.learn.dao=debug#mybatis.config = mybatis é…ç½®æ–‡ä»¶åç§°#mybatis.mapperLocations = mapper xml æ–‡ä»¶åœ°å€#mybatis.typeAliasesPackage = å®ä½“ç±»åŒ…è·¯å¾„#mybatis.typeHandlersPackage = type handlers å¤„ç†å™¨åŒ…è·¯å¾„#mybatis.check-config-location = æ£€æŸ¥ mybatis é…ç½®æ˜¯å¦å­˜åœ¨ï¼Œä¸€èˆ¬å‘½åä¸º mybatis-config.xml#mybatis.executorType = æ‰§è¡Œæ¨¡å¼ã€‚é»˜è®¤æ˜¯ SIMPLE 3.mybatisçš„é…ç½®å’Œè‡ªåŠ¨ç”Ÿæˆmapperçš„é…ç½®åœ¨resourceç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªgeneratorConfig.xmlå’Œmybatis-config.xmlã€‚å†…å®¹å¦‚ä¸‹ï¼šgeneratorConfig.xmlå†…å®¹ 123456789101112131415161718192021222324252627282930313233343536373839&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;!DOCTYPE generatorConfiguration PUBLIC \"-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN\" \"http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd\"&gt;&lt;generatorConfiguration&gt; &lt;classPathEntry location=\"C:\\Users\\nick\\.m2\\repository/mysql/mysql-connector-java/5.1.46/mysql-connector-java-5.1.46.jar\"/&gt; &lt;context id=\"DB2Tables\" targetRuntime=\"MyBatis3\"&gt; &lt;commentGenerator&gt; &lt;property name=\"suppressDate\" value=\"true\"/&gt; &lt;property name=\"suppressAllComments\" value=\"true\"/&gt; &lt;/commentGenerator&gt; &lt;!--æ•°æ®åº“é“¾æ¥åœ°å€è´¦å·å¯†ç --&gt; &lt;jdbcConnection driverClass=\"com.mysql.jdbc.Driver\" connectionURL=\"jdbc:mysql://localhost:3306/yddy?useUnicode=true&amp;amp;characterEncoding=UTF-8&amp;amp;serverTimezone=UTC\" userId=\"root\" password=\"123456\"&gt; &lt;/jdbcConnection&gt; &lt;javaTypeResolver&gt; &lt;property name=\"forceBigDecimals\" value=\"false\"/&gt; &lt;/javaTypeResolver&gt; &lt;!--ç”ŸæˆModelç±»å­˜æ”¾ä½ç½®--&gt; &lt;javaModelGenerator targetPackage=\"com.dameiweb.learn.model\" targetProject=\"src/main/java\"&gt; &lt;property name=\"enableSubPackages\" value=\"true\"/&gt; &lt;!-- ä»æ•°æ®åº“è¿”å›çš„å€¼è¢«æ¸…ç†å‰åçš„ç©ºæ ¼ --&gt; &lt;property name=\"trimStrings\" value=\"false\"/&gt; &lt;/javaModelGenerator&gt; &lt;!--ç”Ÿæˆæ˜ å°„æ–‡ä»¶å­˜æ”¾ä½ç½®--&gt; &lt;sqlMapGenerator targetPackage=\"mapper\" targetProject=\"src/main/resources\"&gt; &lt;property name=\"enableSubPackages\" value=\"true\"/&gt; &lt;/sqlMapGenerator&gt; &lt;!--ç”ŸæˆDaoç±»å­˜æ”¾ä½ç½®--&gt; &lt;!-- å®¢æˆ·ç«¯ä»£ç ï¼Œç”Ÿæˆæ˜“äºä½¿ç”¨çš„é’ˆå¯¹Modelå¯¹è±¡å’ŒXMLé…ç½®æ–‡ä»¶ çš„ä»£ç  type=\"ANNOTATEDMAPPER\",ç”ŸæˆJava Model å’ŒåŸºäºæ³¨è§£çš„Mapperå¯¹è±¡ type=\"MIXEDMAPPER\",ç”ŸæˆåŸºäºæ³¨è§£çš„Java Model å’Œç›¸åº”çš„Mapperå¯¹è±¡ type=\"XMLMAPPER\",ç”ŸæˆSQLMap XMLæ–‡ä»¶å’Œç‹¬ç«‹çš„Mapperæ¥å£ --&gt; &lt;javaClientGenerator type=\"XMLMAPPER\" targetPackage=\"com.dameiweb.learn.dao\" targetProject=\"src/main/java\"&gt; &lt;property name=\"enableSubPackages\" value=\"true\"/&gt; &lt;/javaClientGenerator&gt; &lt;/context&gt;&lt;/generatorConfiguration&gt; mybatis-config.xmlçš„å†…å®¹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;&lt;!DOCTYPE configuration PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-config.dtd\"&gt;&lt;configuration&gt; &lt;settings&gt; &lt;setting name=\"callSettersOnNulls\" value=\"true\"/&gt; &lt;setting name=\"cacheEnabled\" value=\"true\"/&gt; &lt;setting name=\"lazyLoadingEnabled\" value=\"true\"/&gt; &lt;setting name=\"aggressiveLazyLoading\" value=\"true\"/&gt; &lt;setting name=\"multipleResultSetsEnabled\" value=\"true\"/&gt; &lt;setting name=\"useColumnLabel\" value=\"true\"/&gt; &lt;setting name=\"useGeneratedKeys\" value=\"false\"/&gt; &lt;setting name=\"autoMappingBehavior\" value=\"PARTIAL\"/&gt; &lt;setting name=\"defaultExecutorType\" value=\"SIMPLE\"/&gt; &lt;setting name=\"mapUnderscoreToCamelCase\" value=\"true\"/&gt; &lt;setting name=\"localCacheScope\" value=\"SESSION\"/&gt; &lt;setting name=\"jdbcTypeForNull\" value=\"NULL\"/&gt; &lt;/settings&gt; &lt;typeAliases&gt; &lt;typeAlias alias=\"Integer\" type=\"java.lang.Integer\" /&gt; &lt;typeAlias alias=\"Long\" type=\"java.lang.Long\" /&gt; &lt;typeAlias alias=\"HashMap\" type=\"java.util.HashMap\" /&gt; &lt;typeAlias alias=\"LinkedHashMap\" type=\"java.util.LinkedHashMap\" /&gt; &lt;typeAlias alias=\"ArrayList\" type=\"java.util.ArrayList\" /&gt; &lt;typeAlias alias=\"LinkedList\" type=\"java.util.LinkedList\" /&gt; &lt;/typeAliases&gt;&lt;/configuration&gt; è¿™æ ·æˆ‘ä»¬å°±é…ç½®å¥½äº†Spring Bootå’Œmybatisä¸mybatisè‡ªåŠ¨ç”Ÿæˆmapperå’Œå®ä½“çš„åŠŸèƒ½ã€‚è¿™æ ·æˆ‘ä»¬è¦ç”ŸæˆæŸä¸ªè¡¨çš„å®ä½“å’Œmapperçš„æ—¶å€™ï¼Œåªéœ€è¦åœ¨generatorConfig.xmlä¸­javaClientGeneratoræ ‡ç­¾ä¹‹åæ·»åŠ ä¸‹é¢çš„å†…å®¹å³å¯ã€‚æ­¤å¤„æˆ‘ä»¬å·²yd_moviesè¡¨ä¸ºä¾‹(ä¸»è¦æ•°æ®åº“è¡¨åå­—ä¸è¦ç”¨å¤æ•°ï¼Œè¿™ä¸ªè¡¨åè‚¯å®šæ˜¯æˆ‘ä¹‹å‰è„‘å­æŠ½äº†ï¼Œæä¸ªå¤æ•°çš„åå­—) 12345678910111213 &lt;!--ç”Ÿæˆå¯¹åº”è¡¨åŠç±»å--&gt; &lt;table tableName=\"yd_movies\" domainObjectName=\"Movie\" enableCountByExample=\"false\" enableUpdateByExample=\"false\" enableDeleteByExample=\"false\" enableSelectByExample=\"false\" selectByExampleQueryId=\"false\"&gt; &lt;columnOverride column=\"cover_photos\" javaType=\"java.lang.String\" jdbcType=\"VARCHAR\" /&gt; &lt;columnOverride column=\"cover_photos_loc\" javaType=\"java.lang.String\" jdbcType=\"VARCHAR\" /&gt; &lt;columnOverride column=\"pubdates\" javaType=\"java.lang.String\" jdbcType=\"VARCHAR\" /&gt; &lt;columnOverride column=\"photographs_origin\" javaType=\"java.lang.String\" jdbcType=\"VARCHAR\" /&gt; &lt;columnOverride column=\"photographs_origin_loc\" javaType=\"java.lang.String\" jdbcType=\"VARCHAR\" /&gt; &lt;columnOverride column=\"languages\" javaType=\"java.lang.String\" jdbcType=\"VARCHAR\" /&gt; &lt;columnOverride column=\"awards\" javaType=\"java.lang.String\" jdbcType=\"VARCHAR\" /&gt; &lt;columnOverride column=\"summary\" javaType=\"java.lang.String\" jdbcType=\"VARCHAR\" /&gt; &lt;/table&gt;&lt;!--columnOverrideä½¿ç”¨è¿™ä¸ªæ ‡ç­¾æ˜¯ä¸ºäº†é˜²æ­¢æ•°æ®åº“å­—æ®µç±»å‹ä¸ºtextæ—¶å€™ï¼Œmybatisä¼šç”ŸæˆxxxxWithBLOBsæ–‡ä»¶ã€‚--&gt; ç„¶åç‚¹å‡»ideaå³ä¾§Maven projectsï¼Œå°±å¯ä»¥çœ‹åˆ°mybatis-generateä¸‹çš„mybatis-generateï¼šgenerateï¼ŒåŒå‡»mybatis-generateï¼šgenerateå³å¯ã€‚ generator æ³¨æ„ç‚¹ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯BUGå°±æ˜¯åœ¨ç”Ÿæˆçš„æ—¶å€™ï¼Œåœ¨ç¬¬äºŒæ¬¡ç”Ÿæˆçš„æ—¶å€™ï¼Œdao å’Œentity éƒ½ä¼šç›´æ¥è¦†ç›–ï¼Œè€ŒMapper.xml ä¼šç›´æ¥è¿½åŠ ï¼Œå¯¼è‡´è¿è¡ŒæŠ¥é”™ï¼Œè€Œä¸”å¾ˆéš¾æ‰¾ã€‚ 4.mybatisè‡ªå®šä¹‰sqlå½“æˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰sqlçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸èƒ½æŠŠè¿™äº›ä¹Ÿæ”¾åˆ°mapperæ–‡ä»¶ä¸­ã€‚ä¸ç„¶ï¼Œå½“æ•°æ®åº“è¡¨çš„å­—æ®µæœ‰æ›´æ–°éœ€è¦é‡æ–°ç”Ÿæˆmapperçš„æ—¶å€™ï¼Œè¿™æ ·æˆ‘ä»¬è‡ªå®šä¹‰çš„sqlä¸å°±è¢«è¦†ç›–æ²¡äº†ä¹ˆï¼æ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨MovieMapper.xmlçš„åŒçº§ç›®å½•é‡Œï¼Œæ–°å»ºä¸€ä¸ªMovieMapperExt.xmlæ–‡ä»¶ï¼ŒæŠŠè‡ªå®šä¹‰çš„sqlæ”¾åˆ°è¿™é‡Œï¼Œä¾‹å­å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344MovieMapperExt.xmlæ–‡ä»¶å†…å®¹&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\" &gt;&lt;mapper namespace=\"com.dameiweb.learn.dao.MovieMapper\" &gt; &lt;select id=\"selectByCondition\" resultMap=\"BaseResultMap\" parameterType=\"com.dameiweb.learn.dto.MovieRequest\"&gt; SELECT yd_movies.* FROM yd_movies LEFT JOIN yd_r_movie_countries ON yd_movies.id = yd_r_movie_countries.movie_id LEFT JOIN yd_countries cou ON yd_r_movie_countries.country_id = cou.id LEFT JOIN yd_r_movie_category ON yd_movies.id = yd_r_movie_category.movie_id LEFT JOIN yd_category cat ON yd_r_movie_category.category_id = cat.id LEFT JOIN yd_r_movie_actor ON yd_movies.id = yd_r_movie_actor.movie_id LEFT JOIN yd_actors a ON yd_r_movie_actor.actor_id = a.id WHERE yd_movies.status = 1 &lt;if test=\"movieRequest.title != null\"&gt; AND yd_movies.title LIKE \"%\"#&#123;movieRequest.title&#125;\"%\" &lt;/if&gt; &lt;if test=\"movieRequest.country != null\"&gt; AND cou.id = #&#123;movieRequest.country&#125; &lt;/if&gt; &lt;if test=\"movieRequest.category != null\"&gt; AND cat.id = #&#123;movieRequest.category&#125; &lt;/if&gt; &lt;if test=\"movieRequest.year != null\"&gt; AND year = #&#123;movieRequest.year&#125; &lt;/if&gt; &lt;if test=\"movieRequest.rate != null\"&gt; AND rate &gt;= #&#123;movieRequest.rate&#125; &lt;/if&gt; &lt;if test=\"movieRequest.rate != null\"&gt; AND rate &amp;lt; (#&#123;movieRequest.rate&#125;+1) &lt;/if&gt; &lt;if test=\"movieRequest.subtype != null\"&gt; AND yd_movies.subtype = #&#123;movieRequest.subtype&#125; &lt;/if&gt; GROUP BY yd_movies.id ORDER BY updated_at DESC, year &lt;/select&gt;&lt;/mapper&gt;","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"},{"name":"spring boot","slug":"spring-boot","permalink":"https://ydstudios.gitee.io/tags/spring-boot/"}]},{"title":"Spring Bootæ¡†æ¶ä¸­è¯»å–é…ç½®çš„å‡ ç§æ–¹å¼","slug":"Spring-Bootæ¡†æ¶ä¸­è¯»å–é…ç½®çš„å‡ ç§æ–¹å¼","date":"2018-05-04T21:33:18.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/28da4df8.html","link":"","permalink":"https://ydstudios.gitee.io/post/28da4df8.html","excerpt":"ç°åœ¨å¼€å‘çš„ä¸»åŠ›è¯­è¨€å·²ç»ä»PHPè½¬å‘Javaï¼Œç›®å‰å‚ä¸æˆ–è´Ÿè´£å…¬å¸çš„å‡ ä¸ªé¡¹ç›®éƒ½æ˜¯ä½¿ç”¨Spring Bootæ¡†æ¶ã€‚ç”¨äº†Javaä¹‹åï¼Œå¯¹æ¯”PHPå°±ä¸€ä¸ªæ„Ÿè§‰ï¼šç¹çï¼ŒJavaæ¯”PHPç¹ççš„å¾ˆï¼ç”±äºè‡ªå·±å¹³æ—¶ä¹Ÿåœ¨åŠªåŠ›å­¦ä¹ Javaä¸­ï¼Œä»Šå¤©è¶ç€æœ‰ç©ºé—²æ¥æ€»ç»“ä¸€ä¸‹Spring Bootä¸­è¯»å–é…ç½®çš„å‡ ç§æ–¹å¼ï¼ŒåŠ æ·±ä¸€ä¸‹è‡ªå·±çš„å°è±¡ã€‚","text":"ç°åœ¨å¼€å‘çš„ä¸»åŠ›è¯­è¨€å·²ç»ä»PHPè½¬å‘Javaï¼Œç›®å‰å‚ä¸æˆ–è´Ÿè´£å…¬å¸çš„å‡ ä¸ªé¡¹ç›®éƒ½æ˜¯ä½¿ç”¨Spring Bootæ¡†æ¶ã€‚ç”¨äº†Javaä¹‹åï¼Œå¯¹æ¯”PHPå°±ä¸€ä¸ªæ„Ÿè§‰ï¼šç¹çï¼ŒJavaæ¯”PHPç¹ççš„å¾ˆï¼ç”±äºè‡ªå·±å¹³æ—¶ä¹Ÿåœ¨åŠªåŠ›å­¦ä¹ Javaä¸­ï¼Œä»Šå¤©è¶ç€æœ‰ç©ºé—²æ¥æ€»ç»“ä¸€ä¸‹Spring Bootä¸­è¯»å–é…ç½®çš„å‡ ç§æ–¹å¼ï¼ŒåŠ æ·±ä¸€ä¸‹è‡ªå·±çš„å°è±¡ã€‚ è¯»å–applicationæ–‡ä»¶åœ¨application.ymlæˆ–è€…propertiesæ–‡ä»¶ä¸­æ·»åŠ ï¼š 123info.address=RPCinfo.company=Springinfo.degree=high 1.@Valueæ³¨è§£è¯»å–æ–¹å¼ 123456789101112131415161718192021222324252627282930313233343536import org.springframework.beans.factory.annotation.Value;import org.springframework.stereotype.Component;@Componentpublic class InfoConfig &#123; @Value(\"$&#123;info.address&#125;\") private String address; @Value(\"$&#123;info.company&#125;\") private String company; @Value(\"$&#123;info.degree&#125;\") private String degree; public String getAddress() &#123; return address; &#125; public void setAddress(String address) &#123; this.address = address; &#125; public String getCompany() &#123; return company; &#125; public void setCompany(String company) &#123; this.company = company; &#125; public String getDegree() &#123; return degree; &#125; public void setDegree(String degree) &#123; this.degree = degree; &#125;&#125; 2.@ConfigurationPropertiesæ³¨è§£è¯»å–æ–¹å¼ 12345678910111213141516171819202122232425262728293031@Component@ConfigurationProperties(prefix = \"info\")public class InfoConfig &#123; private String address; private String company; private String degree; public String getAddress() &#123; return address; &#125; public void setAddress(String address) &#123; this.address = address; &#125; public String getCompany() &#123; return company; &#125; public void setCompany(String company) &#123; this.company = company; &#125; public String getDegree() &#123; return degree; &#125; public void setDegree(String degree) &#123; this.degree = degree; &#125;&#125; è¯»å–æŒ‡å®šæ–‡ä»¶èµ„æºç›®å½•ä¸‹å»ºç«‹config/db-config.properties: db.username=rootdb.password=123456 @PropertySource+@Valueæ³¨è§£è¯»å–æ–¹å¼ 1234567891011121314151617181920212223242526@Component@PropertySource(value = &#123; \"config/db-config.properties\"&#125;)public class DBConfig1 &#123; @Value(\"$&#123;db.username&#125;\") private String username; @Value(\"$&#123;db.password&#125;\") private String password; public String getUsername() &#123; return username; &#125; public void setUsername(String username) &#123; this.username = username; &#125; public String getPassword() &#123; return password; &#125; public void setPassword(String password) &#123; this.password = password; &#125;&#125; æ³¨æ„ï¼š@PropertySourceä¸æ”¯æŒymlæ–‡ä»¶è¯»å–ã€‚ @PropertySource+@ConfigurationPropertiesæ³¨è§£è¯»å–æ–¹å¼ 1234567891011121314151617181920212223@Component@ConfigurationProperties(prefix = \"db\")@PropertySource(value = &#123;\"config/db-config.properties\"&#125;)public class DBConfig2 &#123; private String username; private String password; public String getUsername() &#123; return username; &#125; public void setUsername(String username) &#123; this.username = username; &#125; public String getPassword() &#123; return password; &#125; public void setPassword(String password) &#123; this.password = password; &#125;&#125; Environmentè¯»å–æ–¹å¼ 1234@Autowiredprivate Environment environment;environment.getProperty(\"info.degree\"); ä»ä»¥ä¸Šç¤ºä¾‹æ¥çœ‹ï¼ŒSpring Bootå¯ä»¥é€šè¿‡@PropertySource,@Value,@Environment,@ConfigurationPropertiesçš„ç›¸äº’é…åˆæ¥è¯»å–é…ç½®æ–‡ä»¶çš„å†…å®¹ï¼Œè¯»å–å•ä¸ªçš„é…ç½®Environmentæ— ç–‘æ˜¯æœ€éœ¸é“çš„æ–¹æ³•ã€‚","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"},{"name":"spring boot","slug":"spring-boot","permalink":"https://ydstudios.gitee.io/tags/spring-boot/"}]},{"title":"è§£å†³Javaå¼‚å¸¸java.security.InvalidKeyException: Illegal key size","slug":"è§£å†³Javaå¼‚å¸¸java-security-InvalidKeyException-Illegal-key-size","date":"2018-04-26T23:41:54.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/4770bec.html","link":"","permalink":"https://ydstudios.gitee.io/post/4770bec.html","excerpt":"æœ€è¿‘å…¬å¸å‡†å¤‡å¯¹æ¥é©¬èœ‚çªçš„æ¥å£ï¼Œä»Šå¤©åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­å‡ºç°äº†ä¸‹é¢çš„é—®é¢˜ï¼š 1java.security.InvalidKeyException: Illegal key size","text":"æœ€è¿‘å…¬å¸å‡†å¤‡å¯¹æ¥é©¬èœ‚çªçš„æ¥å£ï¼Œä»Šå¤©åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­å‡ºç°äº†ä¸‹é¢çš„é—®é¢˜ï¼š 1java.security.InvalidKeyException: Illegal key size é€šè¿‡ä»”ç»†é˜…è¯»é©¬èœ‚çªçš„demoæ—¶å‘ç°ï¼Œä»–ä»¬åœ¨demoé‡Œå†™äº†ä¸‹é¢ä¸€æ®µè¯ï¼š 123456è¯´æ˜ï¼šå¼‚å¸¸java.security.InvalidKeyException:illegal Key Sizeçš„è§£å†³æ–¹æ¡ˆåœ¨å®˜æ–¹ç½‘ç«™ä¸‹è½½JCEæ— é™åˆ¶æƒé™ç­–ç•¥æ–‡ä»¶ï¼ˆJDK7çš„ä¸‹è½½åœ°å€ï¼š http://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.htmlä¸‹è½½åè§£å‹ï¼Œå¯ä»¥çœ‹åˆ°local_policy.jarå’ŒUS_export_policy.jarä»¥åŠreadme.txtå¦‚æœå®‰è£…äº†JREï¼Œå°†ä¸¤ä¸ªjaræ–‡ä»¶æ”¾åˆ°%JRE_HOME%\\lib\\securityç›®å½•ä¸‹è¦†ç›–åŸæ¥çš„æ–‡ä»¶å¦‚æœå®‰è£…äº†JDKï¼Œå°†ä¸¤ä¸ªjaræ–‡ä»¶æ”¾åˆ°%JDK_HOME%\\jre\\lib\\securityç›®å½•ä¸‹è¦†ç›–åŸæ¥æ–‡ä»¶ åæ¥ç™¾åº¦å¾—çŸ¥è¿™é‡Œé¢è¿˜æœ‰å…¶ä»–åŸå› ï¼šå¦‚æœå¯†é’¥å¤§äº128, ä¼šæŠ›å‡ºjava.security.InvalidKeyException: Illegal key size å¼‚å¸¸. å› ä¸ºå¯†é’¥é•¿åº¦æ˜¯å—é™åˆ¶çš„, javaè¿è¡Œæ—¶ç¯å¢ƒè¯»åˆ°çš„æ˜¯å—é™çš„policyæ–‡ä»¶. æ–‡ä»¶ä½äº${java_home}/jre/lib/security, è¿™ç§é™åˆ¶æ˜¯å› ä¸ºç¾å›½å¯¹è½¯ä»¶å‡ºå£çš„æ§åˆ¶. ç”±äºç°åœ¨æˆ‘ç”¨çš„æ˜¯Java8ï¼Œæ‰€ä»¥æˆ‘æŠŠè§£å†³åŠæ³•æ•´ç†å¦‚ä¸‹ï¼š 123åœ¨å®˜æ–¹ç½‘ç«™ä¸‹è½½JCEæ— é™åˆ¶æƒé™ç­–ç•¥æ–‡ä»¶JDK7çš„ä¸‹è½½åœ°å€: http://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.htmlJDK8çš„ä¸‹è½½åœ°å€: http://www.oracle.com/technetwork/java/javase/downloads/jce8-download-2133166.html ä¸‹è½½åè§£å‹ï¼Œå¯ä»¥çœ‹åˆ°local_policy.jarå’ŒUS_export_policy.jarä»¥åŠreadme.txtå¦‚æœå®‰è£…äº†JREï¼Œå°†ä¸¤ä¸ªjaræ–‡ä»¶æ”¾åˆ°%JRE_HOME%\\lib\\securityç›®å½•ä¸‹è¦†ç›–åŸæ¥çš„æ–‡ä»¶å¦‚æœå®‰è£…äº†JDKï¼Œè¿˜è¦å°†ä¸¤ä¸ªjaræ–‡ä»¶ä¹Ÿæ”¾åˆ°%JDK_HOME%\\jre\\lib\\securityç›®å½•ä¸‹è¦†ç›–åŸæ¥æ–‡ä»¶","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"}]},{"title":"ä»€ä¹ˆæ˜¯ç¼“å­˜é›ªå´©å’Œç¼“å­˜ç©¿é€","slug":"ä»€ä¹ˆæ˜¯ç¼“å­˜é›ªå´©å’Œç¼“å­˜ç©¿é€","date":"2018-03-13T23:39:32.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/d9968bcf.html","link":"","permalink":"https://ydstudios.gitee.io/post/d9968bcf.html","excerpt":"1. ç¼“å­˜é›ªå´© å¦‚æœç¼“å­˜é›†ä¸­åœ¨ä¸€æ®µæ—¶é—´å†…å¤±æ•ˆï¼Œå‘ç”Ÿå¤§é‡çš„ç¼“å­˜ç©¿é€ï¼Œæ‰€æœ‰çš„æŸ¥è¯¢éƒ½è½åœ¨æ•°æ®åº“ä¸Šï¼Œé€ æˆäº†ç¼“å­˜é›ªå´©ã€‚è¿™ä¸ªæ²¡æœ‰å®Œç¾è§£å†³åŠæ³•ï¼Œä½†å¯ä»¥åˆ†æç”¨æˆ·è¡Œä¸ºï¼Œå°½é‡è®©å¤±æ•ˆæ—¶é—´ç‚¹å‡åŒ€åˆ†å¸ƒã€‚å¤§å¤šæ•°ç³»ç»Ÿè®¾è®¡è€…è€ƒè™‘ç”¨åŠ é”æˆ–è€…é˜Ÿåˆ—çš„æ–¹å¼ä¿è¯ç¼“å­˜çš„å•çº¿ç¨‹ï¼ˆè¿›ç¨‹ï¼‰å†™ï¼Œä»è€Œé¿å…å¤±æ•ˆæ—¶å¤§é‡çš„å¹¶å‘è¯·æ±‚è½åˆ°åº•å±‚å­˜å‚¨ç³»ç»Ÿä¸Šã€‚","text":"1. ç¼“å­˜é›ªå´© å¦‚æœç¼“å­˜é›†ä¸­åœ¨ä¸€æ®µæ—¶é—´å†…å¤±æ•ˆï¼Œå‘ç”Ÿå¤§é‡çš„ç¼“å­˜ç©¿é€ï¼Œæ‰€æœ‰çš„æŸ¥è¯¢éƒ½è½åœ¨æ•°æ®åº“ä¸Šï¼Œé€ æˆäº†ç¼“å­˜é›ªå´©ã€‚è¿™ä¸ªæ²¡æœ‰å®Œç¾è§£å†³åŠæ³•ï¼Œä½†å¯ä»¥åˆ†æç”¨æˆ·è¡Œä¸ºï¼Œå°½é‡è®©å¤±æ•ˆæ—¶é—´ç‚¹å‡åŒ€åˆ†å¸ƒã€‚å¤§å¤šæ•°ç³»ç»Ÿè®¾è®¡è€…è€ƒè™‘ç”¨åŠ é”æˆ–è€…é˜Ÿåˆ—çš„æ–¹å¼ä¿è¯ç¼“å­˜çš„å•çº¿ç¨‹ï¼ˆè¿›ç¨‹ï¼‰å†™ï¼Œä»è€Œé¿å…å¤±æ•ˆæ—¶å¤§é‡çš„å¹¶å‘è¯·æ±‚è½åˆ°åº•å±‚å­˜å‚¨ç³»ç»Ÿä¸Šã€‚ è§£å†³åŠæ³• åœ¨ç¼“å­˜å¤±æ•ˆåï¼Œé€šè¿‡åŠ é”æˆ–è€…é˜Ÿåˆ—æ¥æ§åˆ¶è¯»æ•°æ®åº“å†™ç¼“å­˜çš„çº¿ç¨‹æ•°é‡ã€‚æ¯”å¦‚å¯¹æŸä¸ªkeyåªå…è®¸ä¸€ä¸ªçº¿ç¨‹æŸ¥è¯¢æ•°æ®å’Œå†™ç¼“å­˜ï¼Œå…¶ä»–çº¿ç¨‹ç­‰å¾…ã€‚ å¯ä»¥é€šè¿‡ç¼“å­˜reloadæœºåˆ¶ï¼Œé¢„å…ˆå»æ›´æ–°ç¼“å­˜ï¼Œå†å³å°†å‘ç”Ÿå¤§å¹¶å‘è®¿é—®å‰æ‰‹åŠ¨è§¦å‘åŠ è½½ç¼“å­˜ã€‚ ä¸åŒçš„keyï¼Œè®¾ç½®ä¸åŒçš„è¿‡æœŸæ—¶é—´ï¼Œè®©ç¼“å­˜å¤±æ•ˆçš„æ—¶é—´ç‚¹å°½é‡å‡åŒ€ã€‚ åšäºŒçº§ç¼“å­˜ï¼Œæˆ–è€…åŒç¼“å­˜ç­–ç•¥ã€‚A1ä¸ºåŸå§‹ç¼“å­˜ï¼ŒA2ä¸ºæ‹·è´ç¼“å­˜ï¼ŒA1å¤±æ•ˆæ—¶ï¼Œå¯ä»¥è®¿é—®A2ï¼ŒA1ç¼“å­˜å¤±æ•ˆæ—¶é—´è®¾ç½®ä¸ºçŸ­æœŸï¼ŒA2è®¾ç½®ä¸ºé•¿æœŸã€‚ 2. ç¼“å­˜ç©¿é€ ç¼“å­˜ç©¿é€æ˜¯æŒ‡æŸ¥è¯¢ä¸€ä¸ªä¸€å®šä¸å­˜åœ¨çš„æ•°æ®ï¼Œç”±äºç¼“å­˜æ˜¯ä¸å‘½ä¸­æ—¶éœ€è¦ä»æ•°æ®åº“æŸ¥è¯¢ï¼ŒæŸ¥ä¸åˆ°æ•°æ®åˆ™ä¸å†™å…¥ç¼“å­˜ï¼Œè¿™å°†å¯¼è‡´è¿™ä¸ªä¸å­˜åœ¨çš„æ•°æ®æ¯æ¬¡è¯·æ±‚éƒ½è¦åˆ°æ•°æ®åº“å»æŸ¥è¯¢ï¼Œé€ æˆç¼“å­˜ç©¿é€ã€‚ è§£å†³åŠæ³• å¯¹æ‰€æœ‰å¯èƒ½æŸ¥è¯¢çš„å‚æ•°ä»¥hashå½¢å¼å­˜å‚¨ï¼Œåœ¨æ§åˆ¶å±‚å…ˆè¿›è¡Œæ ¡éªŒï¼Œä¸ç¬¦åˆåˆ™ä¸¢å¼ƒã€‚è¿˜æœ‰æœ€å¸¸è§çš„åˆ™æ˜¯é‡‡ç”¨å¸ƒéš†è¿‡æ»¤å™¨ï¼Œå°†æ‰€æœ‰å¯èƒ½å­˜åœ¨çš„æ•°æ®å“ˆå¸Œåˆ°ä¸€ä¸ªè¶³å¤Ÿå¤§çš„bitmapä¸­ï¼Œä¸€ä¸ªä¸€å®šä¸å­˜åœ¨çš„æ•°æ®ä¼šè¢«è¿™ä¸ªbitmapæ‹¦æˆªæ‰ï¼Œä»è€Œé¿å…äº†å¯¹åº•å±‚å­˜å‚¨ç³»ç»Ÿçš„æŸ¥è¯¢å‹åŠ›ã€‚ ä¹Ÿå¯ä»¥é‡‡ç”¨ä¸€ä¸ªæ›´ä¸ºç®€å•ç²—æš´çš„æ–¹æ³•ï¼Œå¦‚æœä¸€ä¸ªæŸ¥è¯¢è¿”å›çš„æ•°æ®ä¸ºç©ºï¼ˆä¸ç®¡æ˜¯æ•°æ®ä¸å­˜åœ¨ï¼Œè¿˜æ˜¯ç³»ç»Ÿæ•…éšœï¼‰ï¼Œæˆ‘ä»¬ä»ç„¶æŠŠè¿™ä¸ªç©ºç»“æœè¿›è¡Œç¼“å­˜ï¼Œä½†å®ƒçš„è¿‡æœŸæ—¶é—´ä¼šå¾ˆçŸ­ï¼Œæœ€é•¿ä¸è¶…è¿‡äº”åˆ†é’Ÿã€‚","categories":[],"tags":[{"name":"redis","slug":"redis","permalink":"https://ydstudios.gitee.io/tags/redis/"}]},{"title":"MySQLä¸­çœŸæ­£æ„ä¹‰ä¸Šçš„UTF8ç¼–ç ","slug":"MySQLä¸­çœŸæ­£æ„ä¹‰ä¸Šçš„UTF8ç¼–ç ","date":"2018-02-22T23:37:26.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/451d6526.html","link":"","permalink":"https://ydstudios.gitee.io/post/451d6526.html","excerpt":"æ€»æ‰€å‘¨çŸ¥ï¼Œç›®å‰çš„è½¯ä»¶ä½“ç³»ä¸­è¿ç”¨æœ€å¹¿æ³›çš„æ˜¯Unicodeå­—ç¬¦é›†ï¼Œè€Œå…¶ä¸­è¿ç”¨æœ€å¤šçš„ç¼–ç è§„åˆ™å°±æ˜¯UTF-8ã€‚ç”¨UTF-8æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿç®€å•çš„æ¥è¯´æœ‰ä¸€ä¸‹å‡ ç§å¥½å¤„ï¼š ä¹±ç ä¸ä¼šæ‰©æ•£, GB2312åœ¨ä¸¢å¤±ä¸€å­—èŠ‚ç­‰æƒ…å†µä¸‹ä¼šé€ æˆåç»­æ‰€æœ‰æ–‡å­—å˜æˆä¹±ç ã€‚ ä¸ä¼šäº§ç”Ÿé”™è¯¯çš„æœç´¢ç»“æœ, GB2312åœ¨æœç´¢çš„æ—¶å€™ç›¸é‚»ä¸¤ä¸ªä¸­æ–‡ä¼šæ‹¼å‡ºä¸€ä¸ªæ–°çš„å­—ç¬¦ï¼Œå¯¼è‡´å‡ºç°é”™è¯¯çš„æœç´¢ç»“æœã€‚ æ›´å¤§çš„å­—ç¬¦é›†ã€‚ å¾ˆå¤šè¯­è¨€ç›´æ¥æ”¯æŒ UTF-8ï¼Œéƒ¨åˆ†è¯­è¨€å­˜å‚¨å­—ç¬¦ä¸²åˆ°å†…å­˜æ—¶ç›´æ¥ä½¿ç”¨UTF-8ç¼–ç ã€‚ ä¸ GB2312/GB18030ç›¸æ¯”, UTF-8æ˜¯ä¸€ä¸ªé€šç”¨è§£å†³æ–¹æ¡ˆã€‚ Unicode ä¸€ç›´æœ‰äººç»´æŠ¤ï¼Œè€Œ GB18030 ä¸‹ä¸€æ¬¡æ›´æ–°ä¸çŸ¥é“ä¼šæ˜¯ä»€ä¹ˆæ—¶å€™äº†ã€‚å¦å¯¹äºä¸­æ–‡, UTF-8å’ŒGB2312åœ¨gzipå‹ç¼©åéƒ½å·®ä¸å¤šï¼Œæ‰€ä»¥ç”¨æ¥åšç½‘é¡µå¯¹å¸¦å®½å½±å“å¾ˆå°ã€‚","text":"æ€»æ‰€å‘¨çŸ¥ï¼Œç›®å‰çš„è½¯ä»¶ä½“ç³»ä¸­è¿ç”¨æœ€å¹¿æ³›çš„æ˜¯Unicodeå­—ç¬¦é›†ï¼Œè€Œå…¶ä¸­è¿ç”¨æœ€å¤šçš„ç¼–ç è§„åˆ™å°±æ˜¯UTF-8ã€‚ç”¨UTF-8æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿç®€å•çš„æ¥è¯´æœ‰ä¸€ä¸‹å‡ ç§å¥½å¤„ï¼š ä¹±ç ä¸ä¼šæ‰©æ•£, GB2312åœ¨ä¸¢å¤±ä¸€å­—èŠ‚ç­‰æƒ…å†µä¸‹ä¼šé€ æˆåç»­æ‰€æœ‰æ–‡å­—å˜æˆä¹±ç ã€‚ ä¸ä¼šäº§ç”Ÿé”™è¯¯çš„æœç´¢ç»“æœ, GB2312åœ¨æœç´¢çš„æ—¶å€™ç›¸é‚»ä¸¤ä¸ªä¸­æ–‡ä¼šæ‹¼å‡ºä¸€ä¸ªæ–°çš„å­—ç¬¦ï¼Œå¯¼è‡´å‡ºç°é”™è¯¯çš„æœç´¢ç»“æœã€‚ æ›´å¤§çš„å­—ç¬¦é›†ã€‚ å¾ˆå¤šè¯­è¨€ç›´æ¥æ”¯æŒ UTF-8ï¼Œéƒ¨åˆ†è¯­è¨€å­˜å‚¨å­—ç¬¦ä¸²åˆ°å†…å­˜æ—¶ç›´æ¥ä½¿ç”¨UTF-8ç¼–ç ã€‚ ä¸ GB2312/GB18030ç›¸æ¯”, UTF-8æ˜¯ä¸€ä¸ªé€šç”¨è§£å†³æ–¹æ¡ˆã€‚ Unicode ä¸€ç›´æœ‰äººç»´æŠ¤ï¼Œè€Œ GB18030 ä¸‹ä¸€æ¬¡æ›´æ–°ä¸çŸ¥é“ä¼šæ˜¯ä»€ä¹ˆæ—¶å€™äº†ã€‚å¦å¯¹äºä¸­æ–‡, UTF-8å’ŒGB2312åœ¨gzipå‹ç¼©åéƒ½å·®ä¸å¤šï¼Œæ‰€ä»¥ç”¨æ¥åšç½‘é¡µå¯¹å¸¦å®½å½±å“å¾ˆå°ã€‚ MySQLä¸­ä¹Ÿæœ‰UTF-8ç¼–ç ï¼Œä»–è¿˜æœ‰å¦å¤–ä¸€ä¸ªç§°å‘¼å«åšutf8mb3ï¼Œè¯¥å­—ç¬¦é›†æ¯ä¸ªå­—ç¬¦æœ€å¤šä½¿ç”¨ä¸‰ä¸ªå­—èŠ‚ã€‚ä¸‰ä¸ªå­—èŠ‚çš„UTF-8æœ€å¤§èƒ½ç¼–ç çš„ Unicodeå­—ç¬¦æ˜¯0xffffï¼Œä¹Ÿå°±æ˜¯Unicodeä¸­çš„åŸºæœ¬å¤šæ–‡ç§å¹³é¢ï¼ˆBMPï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»»ä½•ä¸åœ¨åŸºæœ¬å¤šæ–‡æœ¬å¹³é¢çš„ Unicodeå­—ç¬¦ï¼Œéƒ½æ— æ³•ä½¿ç”¨MySQLçš„UTF-8ç¼–ç å­˜å‚¨ã€‚åŒ…æ‹¬Emojiè¡¨æƒ…ï¼ˆEmojiæ˜¯ä¸€ç§ç‰¹æ®Šçš„Unicode ç¼–ç ï¼Œå¸¸è§äºioså’Œ androidæ‰‹æœºä¸Šï¼‰ï¼Œå’Œå¾ˆå¤šä¸å¸¸ç”¨çš„æ±‰å­—ï¼Œä»¥åŠä»»ä½•æ–°å¢çš„ Unicodeå­—ç¬¦ç­‰ç­‰ã€‚è¿™æ ·çš„è¯å°±ä¼šå‡ºç°ä¸€äº›ç‰¹æ®Šå­—ç¬¦æ— æ³•ä¿å­˜åˆ°MySQLä¸­ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥è§£å†³è¿™ä¸ªç¼–ç çš„é—®é¢˜ï¼ éšç€Unicodeçš„å­—ç¬¦é›†çš„è§„èŒƒç¡®å®šï¼Œä»¥åŠä»–çš„å¹¿æ³›åº”ç”¨ï¼ŒMySQLå®˜æ–¹è‡ªå·±ä¹Ÿå‘ç°äº†è¿™ä¸ªé—®é¢˜ï¼Œäºæ˜¯ä¹å®˜æ–¹åœ¨MySQL5.5.3çš„æ—¶å€™æ¨å‡ºäº†utf8mb4ç¼–ç ï¼Œï¼ˆä»–æ‰æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„UTF-8ç¼–ç ï¼‰mb4å°±æ˜¯most bytes 4çš„æ„æ€ï¼Œä¸“é—¨ç”¨æ¥å…¼å®¹å››å­—èŠ‚çš„unicodeã€‚utf8mb4æ˜¯utf8çš„è¶…é›†ï¼Œé™¤äº†å°†ç¼–ç æ”¹ä¸ºutf8mb4å¤–ä¸éœ€è¦åšå…¶ä»–è½¬æ¢ã€‚ å¯¹äºæ–°å¢çš„utf8mb4ç¼–ç å®˜æ–¹æœ‰ä¸ªå°å»ºè®®å¦‚ä¸‹ï¼š 123Tip: To save space with utf8mb4, use VARCHAR instead of CHAR. Otherwise, MySQL must reserve four bytes for each character in a CHAR CHARACTER SET utf8mb4 column because that is the maximum possible length. For example, MySQL must reserve 40 bytes for a CHAR(10) CHARACTER SET utf8mb4 column.å¤§æ„å¦‚ä¸‹ï¼šä¸ºäº†èŠ‚çœç©ºé—´ utf8mb4ï¼Œè¯·ä½¿ç”¨ VARCHARè€Œä¸æ˜¯CHARã€‚å¦åˆ™ï¼ŒMySQLå¿…é¡»ä¸ºCHAR CHARACTER SET utf8mb4åˆ—ä¸­çš„æ¯ä¸ªå­—ç¬¦ä¿ç•™å››ä¸ªå­—èŠ‚ï¼Œå› ä¸ºè¿™æ˜¯æœ€å¤§å¯èƒ½çš„é•¿åº¦ã€‚ä¾‹å¦‚ï¼ŒMySQLå¿…é¡»ä¸ºä¸€CHAR(10) CHARACTER SET utf8mb4 åˆ—ä¿ç•™40ä¸ªå­—èŠ‚ã€‚ é‚£å¦‚ä½•è®¾ç½®MySQLçš„ç¼–ç å‘¢ï¼Ÿ æŸ¥çœ‹æ•°æ®åº“æœåŠ¡å™¨çš„ç‰ˆæœ¬ï¼Œä½äº5.5.3åˆ™ä¸æ”¯æŒutf8mb4ã€‚ 1234567select VERSION();+-----------+| VERSION() |+-----------+| 5.5.53 |+-----------+ æŸ¥çœ‹æ•°æ®åº“çš„ç¼–ç  1234567891011121314mysql&gt; show variables like &apos;character%&apos;;+--------------------------+-----------------------------------+| Variable_name | Value |+--------------------------+-----------------------------------+| character_set_client | utf8 || character_set_connection | utf8 || character_set_database | utf8 || character_set_filesystem | binary || character_set_results | utf8 || character_set_server | utf8 || character_set_system | utf8 || character_sets_dir | C:\\phpStudy\\MySQL\\share\\charsets\\ |+--------------------------+-----------------------------------+ å°†ä¸Šè¿°utf8å…¨éƒ¨ä¿®æ”¹æˆutf8mb4ï¼Œç¼–è¾‘mysqlçš„é…ç½®æ–‡ä»¶/etc/my.cnfï¼ˆå…·ä½“è¿˜å¯ä»¥å‚ç…§æ–‡ç« Centos6.9ä¸Šæ­å»ºlnmpç¯å¢ƒï¼‰ 123456789101112131415161718192021222324252627282930313233343536vi /etc/my.cnf[mysqld]character-set-server=utf8mb4 collation-server=utf8_general_ci sql_mode='NO_ENGINE_SUBSTITUTION'[mysql]default-character-set = utf8mb4[mysql.server]default-character-set = utf8mb4[mysqld_safe]default-character-set = utf8mb4[client]default-character-set = utf8mb4#é‡å¯mysqlservice mysqld restart#å†æ¬¡æŸ¥çœ‹mysql&gt; show variables like 'character%';+--------------------------+-----------------------------------+| Variable_name | Value |+--------------------------+-----------------------------------+| character_set_client | utf8mb4 || character_set_connection | utf8mb4 || character_set_database | utf8mb4 || character_set_filesystem | binary || character_set_results | utf8mb4 || character_set_server | utf8mb4 || character_set_system | utf8mb4 || character_sets_dir | C:\\phpStudy\\MySQL\\share\\charsets\\ |+--------------------------+-----------------------------------+ è¿™æ ·æˆ‘ä»¬çš„æ•°æ®åº“å°±ç¼–ç å°±å…¨éƒ½è®¾ç½®æˆäº†utf8mb4,ä¸€äº›ç‰¹æ®Šçš„ä¸­æ–‡å­—ç¬¦å’ŒEmojiè¡¨æƒ…ç¬¦å°±å¯ä»¥æˆåŠŸçš„ä¿å­˜åœ¨æ•°æ®åº“ä¸­äº†","categories":[],"tags":[{"name":"mysql","slug":"mysql","permalink":"https://ydstudios.gitee.io/tags/mysql/"}]},{"title":"PHPå¦‚ä½•é€šè¿‡å¼€å¯Opcacheæ¥æé«˜æ€§èƒ½","slug":"PHPå¦‚ä½•é€šè¿‡å¼€å¯Opcacheæ¥æé«˜æ€§èƒ½","date":"2018-02-09T23:35:09.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/924aacb8.html","link":"","permalink":"https://ydstudios.gitee.io/post/924aacb8.html","excerpt":"åœ¨å¼€å¯Opcacheä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯Opcache: 12OPcache é€šè¿‡å°† PHP è„šæœ¬é¢„ç¼–è¯‘çš„å­—èŠ‚ç å­˜å‚¨åˆ°å…±äº«å†…å­˜ä¸­æ¥æå‡ PHP çš„æ€§èƒ½ï¼Œ å­˜å‚¨é¢„ç¼–è¯‘å­—èŠ‚ç çš„å¥½å¤„å°±æ˜¯ çœå»äº†æ¯æ¬¡åŠ è½½å’Œè§£æ PHP è„šæœ¬çš„å¼€é”€ã€‚PHP 5.5.0 åŠåç»­ç‰ˆæœ¬ä¸­å·²ç»ç»‘å®šäº† OPcache æ‰©å±•ã€‚ å¯¹äº PHP 5.2ï¼Œ5.3 å’Œ 5.4 ç‰ˆæœ¬å¯ä»¥ä½¿ç”¨ Â» PECL æ‰©å±•ä¸­çš„ OPcache åº“ã€‚","text":"åœ¨å¼€å¯Opcacheä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯Opcache: 12OPcache é€šè¿‡å°† PHP è„šæœ¬é¢„ç¼–è¯‘çš„å­—èŠ‚ç å­˜å‚¨åˆ°å…±äº«å†…å­˜ä¸­æ¥æå‡ PHP çš„æ€§èƒ½ï¼Œ å­˜å‚¨é¢„ç¼–è¯‘å­—èŠ‚ç çš„å¥½å¤„å°±æ˜¯ çœå»äº†æ¯æ¬¡åŠ è½½å’Œè§£æ PHP è„šæœ¬çš„å¼€é”€ã€‚PHP 5.5.0 åŠåç»­ç‰ˆæœ¬ä¸­å·²ç»ç»‘å®šäº† OPcache æ‰©å±•ã€‚ å¯¹äº PHP 5.2ï¼Œ5.3 å’Œ 5.4 ç‰ˆæœ¬å¯ä»¥ä½¿ç”¨ Â» PECL æ‰©å±•ä¸­çš„ OPcache åº“ã€‚ ä¸‹é¢æ¥è¯´è¯´å¦‚ä½•å®‰è£…Opcache,ä¸åŒçš„PHPç‰ˆæœ¬å®‰è£…çš„æ–¹æ³•ç¨æœ‰ä¸åŒï¼š 12345OPcache åªèƒ½ç¼–è¯‘ä¸ºå…±äº«æ‰©å±•ã€‚ å¦‚æœä½ ä½¿ç”¨ --disable-all å‚æ•° ç¦ç”¨äº†é»˜è®¤æ‰©å±•çš„æ„å»ºï¼Œ é‚£ä¹ˆå¿…é¡»ä½¿ç”¨ --enable-opcache é€‰é¡¹æ¥å¼€å¯ OPcacheã€‚ç¼–è¯‘ä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨ zend_extension æŒ‡ä»¤æ¥å°† OPcache æ‰©å±•åŠ è½½åˆ° PHP ä¸­ã€‚åœ¨é Windows å¹³å°ä½¿ç”¨ zend_extension=/full/path/to/opcache.soï¼ŒWindowså¹³å°ä½¿ç”¨ zend_extension=C:\\path\\to\\php_opcache.dllPHP 5.2,5.3å’Œ 5.4ç‰ˆæœ¬ä¸­æ²¡æœ‰å’ŒPHPæ†ç»‘ï¼Œéœ€è¦è‡ªè¡Œå®‰è£…ï¼Œè¿™é‡Œä¸åšè¯´æ˜ã€‚ å®˜æ–¹å‡ºäº†ä¸€ä¸ªæ¨èé…ç½®å¦‚ä¸‹ï¼š 123456789ä½¿ç”¨ä¸‹åˆ—æ¨èè®¾ç½®æ¥è·å¾—è¾ƒå¥½çš„ æ€§èƒ½ï¼šopcache.memory_consumption=128opcache.interned_strings_buffer=8opcache.max_accelerated_files=4000opcache.revalidate_freq=60opcache.fast_shutdown=1opcache.enable_cli=1ä½ ä¹Ÿå¯ä»¥ç¦ç”¨ opcache.save_comments å¹¶ä¸”å¯ç”¨ opcache.enable_file_overrideã€‚ éœ€è¦æé†’çš„æ˜¯ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ä¸Šè¿°é…ç½®ä¹‹å‰ï¼Œå¿…é¡»ç»è¿‡ä¸¥æ ¼æµ‹è¯•ã€‚ å› ä¸ºä¸Šè¿°é…ç½®å­˜åœ¨ä¸€ä¸ªå·²çŸ¥é—®é¢˜ï¼Œå®ƒä¼šå¼•å‘ä¸€äº›æ¡†æ¶å’Œåº”ç”¨çš„å¼‚å¸¸ï¼Œ å°¤å…¶æ˜¯åœ¨å­˜åœ¨æ–‡æ¡£ä½¿ç”¨äº†å¤‡æ³¨æ³¨è§£çš„æ—¶å€™ã€‚ é…ç½®æ‰©å±•çš„æ—¶å€™æ³¨æ„ä»¥ä¸‹é—®é¢˜ 123åœ¨php.iniä¸­å¢åŠ opcacheæ—¶éœ€è¦ä½¿ç”¨zend_extensionï¼Œè€Œä¸æ˜¯extensionï¼Œä¸ç„¶ä¼šå¾—åˆ°ä»¥ä¸‹WARNINGPHP Warning: PHP Startup: Invalid library (appears to be a Zend Extension, try loading using zend_extension=opcache.so from php.ini) in Unknown on line 0 ç”±äºæˆ‘è‡ªå·±çš„æœåŠ¡å™¨å®‰è£…çš„PHP7ï¼Œå·²ç»å®‰è£…äº†Opcacheï¼Œæ‰€ä»¥æˆ‘åªéœ€åœ¨php.iniæ–‡ä»¶ä¸­é…ç½®ä»¥ä¸‹å†…å®¹ 123456789101112131415161718192021zend_extension=/usr/local/php/lib/php/extensions/no-debug-non-zts-20151012/opcache.so[opcache];å¼€å…³æ‰“å¼€opcache.enable=1;è®¾ç½®å…±äº«å†…å­˜å¤§å°, å•ä½ä¸ºï¼šMbopcache.memory_consumption=128opcache.interned_strings_buffer=8opcache.max_accelerated_files=4000opcache.revalidate_freq=60opcache.fast_shutdown=1opcache.enable_cli=1æœ¬æ¬¡æ¶‰åŠåˆ°çš„æœ‰ä¸¤ä¸ªå‚æ•°revalidate_freqï¼Œé»˜è®¤2æ£€æŸ¥è„šæœ¬æ—¶é—´æˆ³æ˜¯å¦æœ‰æ›´æ–°çš„å‘¨æœŸï¼Œä»¥ç§’ä¸ºå•ä½ã€‚ è®¾ç½®ä¸º 0 ä¼šå¯¼è‡´é’ˆå¯¹æ¯ä¸ªè¯·æ±‚ï¼Œ OPcache éƒ½ä¼šæ£€æŸ¥è„šæœ¬æ›´æ–°validate_timestampsï¼Œé»˜è®¤1å¦‚æœå¯ç”¨ï¼Œé‚£ä¹ˆ OPcache ä¼šæ¯éš” opcache.revalidate_freq è®¾å®šçš„ç§’æ•° æ£€æŸ¥è„šæœ¬æ˜¯å¦æ›´æ–°ã€‚ å¦‚æœç¦ç”¨æ­¤é€‰é¡¹ï¼Œä½ å¿…é¡»ä½¿ç”¨ opcache_reset() æˆ–è€… opcache_invalidate() å‡½æ•°æ¥æ‰‹åŠ¨é‡ç½® OPcacheï¼Œä¹Ÿå¯ä»¥ é€šè¿‡é‡å¯ Web æœåŠ¡å™¨æ¥ä½¿æ–‡ä»¶ç³»ç»Ÿæ›´æ”¹ç”Ÿæ•ˆã€‚ æœ€åé‡å¯Nginxå’ŒPHPå³å¯ ä¸‹é¢æ˜¯OPcache å¯ç”¨çš„é…ç½®æŒ‡ä»¤å®Œæ•´åˆ—è¡¨ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126; Determines if Zend OPCache is enabled;opcache.enable=0; Determines if Zend OPCache is enabled for the CLI version of PHP;opcache.enable_cli=0; The OPcache shared memory storage size.;opcache.memory_consumption=64; The amount of memory for interned strings in Mbytes.;opcache.interned_strings_buffer=4; The maximum number of keys (scripts) in the OPcache hash table.; Only numbers between 200 and 1000000 are allowed.;opcache.max_accelerated_files=2000; The maximum percentage of \"wasted\" memory until a restart is scheduled.;opcache.max_wasted_percentage=5; When this directive is enabled, the OPcache appends the current working; directory to the script key, thus eliminating possible collisions between; files with the same name (basename). Disabling the directive improves; performance, but may break existing applications.;opcache.use_cwd=1; When disabled, you must reset the OPcache manually or restart the; webserver for changes to the filesystem to take effect.;opcache.validate_timestamps=1; How often (in seconds) to check file timestamps for changes to the shared; memory storage allocation. (\"1\" means validate once per second, but only; once per request. \"0\" means always validate);opcache.revalidate_freq=2; Enables or disables file search in include_path optimization;opcache.revalidate_path=0; If disabled, all PHPDoc comments are dropped from the code to reduce the; size of the optimized code.;opcache.save_comments=1; If enabled, a fast shutdown sequence is used for the accelerated code; Depending on the used Memory Manager this may cause some incompatibilities.;opcache.fast_shutdown=0; Allow file existence override (file_exists, etc.) performance feature.;opcache.enable_file_override=0; A bitmask, where each bit enables or disables the appropriate OPcache; passes;opcache.optimization_level=0xffffffff;opcache.inherited_hack=1;opcache.dups_fix=0; The location of the OPcache blacklist file (wildcards allowed).; Each OPcache blacklist file is a text file that holds the names of files; that should not be accelerated. The file format is to add each filename; to a new line. The filename may be a full path or just a file prefix; (i.e., /var/www/x blacklists all the files and directories in /var/www; that start with 'x'). Line starting with a ; are ignored (comments).;opcache.blacklist_filename=; Allows exclusion of large files from being cached. By default all files; are cached.;opcache.max_file_size=0; Check the cache checksum each N requests.; The default value of \"0\" means that the checks are disabled.;opcache.consistency_checks=0; How long to wait (in seconds) for a scheduled restart to begin if the cache; is not being accessed.;opcache.force_restart_timeout=180; OPcache error_log file name. Empty string assumes \"stderr\".;opcache.error_log=; All OPcache errors go to the Web server log.; By default, only fatal errors (level 0) or errors (level 1) are logged.; You can also enable warnings (level 2), info messages (level 3) or; debug messages (level 4).;opcache.log_verbosity_level=1; Preferred Shared Memory back-end. Leave empty and let the system decide.;opcache.preferred_memory_model=; Protect the shared memory from unexpected writing during script execution.; Useful for internal debugging only.;opcache.protect_memory=0; Allows calling OPcache API functions only from PHP scripts which path is; started from specified string. The default \"\" means no restriction;opcache.restrict_api=; Mapping base of shared memory segments (for Windows only). All the PHP; processes have to map shared memory into the same address space. This; directive allows to manually fix the \"Unable to reattach to base address\"; errors.;opcache.mmap_base=; Enables and sets the second level cache directory.; It should improve performance when SHM memory is full, at server restart or; SHM reset. The default \"\" disables file based caching.;opcache.file_cache=; Enables or disables opcode caching in shared memory.;opcache.file_cache_only=0; Enables or disables checksum validation when script loaded from file cache.;opcache.file_cache_consistency_checks=1; Implies opcache.file_cache_only=1 for a certain process that failed to; reattach to the shared memory (for Windows only). Explicitly enabled file; cache is required.;opcache.file_cache_fallback=1; Enables or disables copying of PHP code (text segment) into HUGE PAGES.; This should improve performance, but requires appropriate OS configuration.;opcache.huge_code_pages=0; Validate cached file permissions.; opcache.validate_permission=0; Prevent name collisions in chroot'ed environment.; opcache.validate_root=0","categories":[],"tags":[{"name":"linux","slug":"linux","permalink":"https://ydstudios.gitee.io/tags/linux/"},{"name":"php","slug":"php","permalink":"https://ydstudios.gitee.io/tags/php/"}]},{"title":"Spring Bootçš„ä¸‰ç§å¯åŠ¨æ–¹å¼","slug":"Spring-Bootçš„ä¸‰ç§å¯åŠ¨æ–¹å¼","date":"2018-01-19T23:33:49.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/9de93e14.html","link":"","permalink":"https://ydstudios.gitee.io/post/9de93e14.html","excerpt":"Spring Bootæœ‰ä»¥ä¸‹ä¸‰ç§å¯åŠ¨æ–¹å¼ï¼Œæœ€åä¸€ç§æˆ‘ä»¬å¯ä»¥å¾ˆå¥½çš„è®¾ç½®ä¸åŒç¯å¢ƒä½¿ç”¨ä¸åŒçš„é…ç½®æ–‡ä»¶ã€‚ 1.IDE è¿è¡ŒApplicationè¿™ä¸ªç±»çš„mainæ–¹æ³• 123456789101112package com.dameiweb.girl;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;@SpringBootApplicationpublic class GirlApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(GirlApplication.class, args); &#125;&#125;","text":"Spring Bootæœ‰ä»¥ä¸‹ä¸‰ç§å¯åŠ¨æ–¹å¼ï¼Œæœ€åä¸€ç§æˆ‘ä»¬å¯ä»¥å¾ˆå¥½çš„è®¾ç½®ä¸åŒç¯å¢ƒä½¿ç”¨ä¸åŒçš„é…ç½®æ–‡ä»¶ã€‚ 1.IDE è¿è¡ŒApplicationè¿™ä¸ªç±»çš„mainæ–¹æ³• 123456789101112package com.dameiweb.girl;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;@SpringBootApplicationpublic class GirlApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(GirlApplication.class, args); &#125;&#125; 2.åœ¨springbootçš„åº”ç”¨çš„æ ¹ç›®å½•ä¸‹è¿è¡Œmvn spring-boot:run 12345678910111213141516171819202122232425262728293031323334$ mvn spring-boot:run[INFO] Scanning for projects...Downloading: http://maven.aliyun.com/nexus/content/groups/public/org/apache/maven/plugins/maven-help-plugin/2.2/maven-help-plugin-2.2.pomDownloaded: http://maven.aliyun.com/nexus/content/groups/public/org/apache/maven/plugins/maven-help-plugin/2.2/maven-help-plugin-2.2.pom (0 B at 0 B/s)Downloading: http://maven.aliyun.com/nexus/content/groups/public/org/apache/maven/plugins/maven-help-plugin/2.2/maven-help-plugin-2.2.jarDownloaded: http://maven.aliyun.com/nexus/content/groups/public/org/apache/maven/plugins/maven-help-plugin/2.2/maven-help-plugin-2.2.jar (0 B at 0 B/s)Downloading: http://maven.aliyun.com/nexus/content/groups/public/org/codehaus/codehaus-parent/3/codehaus-parent-3.pomDownloaded: http://maven.aliyun.com/nexus/content/groups/public/org/codehaus/codehaus-parent/3/codehaus-parent-3.pom (0 B at 0 B/s)[INFO][INFO] ------------------------------------------------------------------------[INFO] Building girl 0.0.1-SNAPSHOT[INFO] ------------------------------------------------------------------------[INFO][INFO] &gt;&gt;&gt; spring-boot-maven-plugin:1.5.9.RELEASE:run (default-cli) &gt; test-compile @ girl &gt;&gt;&gt;[INFO][INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ girl ---[INFO] Using 'UTF-8' encoding to copy filtered resources.[INFO] Copying 3 resources[INFO] Copying 0 resource[INFO][INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ girl ---[INFO] Nothing to compile - all classes are up to date[INFO][INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ girl ---[INFO] Using 'UTF-8' encoding to copy filtered resources.[INFO] skip non existing resourceDirectory D:\\work\\girl\\src\\test\\resources[INFO][INFO] --- maven-compiler-plugin:3.1:testCompile (default-testCompile) @ girl ---[INFO] Nothing to compile - all classes are up to date[INFO][INFO] &lt;&lt;&lt; spring-boot-maven-plugin:1.5.9.RELEASE:run (default-cli) &lt; test-compile @ girl &lt;&lt;&lt;[INFO][INFO][INFO] --- spring-boot-maven-plugin:1.5.9.RELEASE:run (default-cli) @ girl --- 3.åœ¨springbootçš„åº”ç”¨çš„æ ¹ç›®å½•ä¸‹ mvn install ç”Ÿæˆjaråè¿è¡Œ 123456789101112å…ˆæ‰§è¡Œ mvn installå†æ‰§è¡Œ java -jar target/girl-0.0.1-SNAPSHOT.jar --spring.profile.active=prodjava -jar target/girl-0.0.1-SNAPSHOT.jar --spring.profile.active=prod . ____ _ __ _ _ /\\\\ / ___'_ __ _ _(_)_ __ __ _ \\ \\ \\ \\( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\ \\\\/ ___)| |_)| | | | | || (_| | ) ) ) ) ' |____| .__|_| |_|_| |_\\__, | / / / / =========|_|==============|___/=/_/_/_/ :: Spring Boot :: (v1.5.9.RELEASE)","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"},{"name":"spring boot","slug":"spring-boot","permalink":"https://ydstudios.gitee.io/tags/spring-boot/"}]},{"title":"Javaé‡Œæœ‰å“ªäº›è¯­æ³•ç³–","slug":"Javaé‡Œæœ‰å“ªäº›è¯­æ³•ç³–","date":"2018-01-09T23:36:33.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/1f95052d.html","link":"","permalink":"https://ydstudios.gitee.io/post/1f95052d.html","excerpt":"è¯­æ³•ç³–ï¼ˆSyntactic Sugarï¼‰ï¼Œä¹Ÿç§°ç³–è¡£è¯­æ³•ï¼ŒæŒ‡åœ¨è®¡ç®—æœºè¯­è¨€ä¸­æ·»åŠ çš„æŸç§è¯­æ³•ï¼Œè¿™ç§è¯­æ³•å¯¹è¯­è¨€æœ¬èº«åŠŸèƒ½æ¥è¯´æ²¡æœ‰ä»€ä¹ˆå½±å“ï¼Œåªæ˜¯ä¸ºäº†æ–¹ä¾¿ç¨‹åºå‘˜çš„å¼€å‘ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚è¯´ç™½äº†ï¼Œè¯­æ³•ç³–å°±æ˜¯å¯¹ç°æœ‰è¯­æ³•çš„ä¸€ä¸ªå°è£…ã€‚","text":"è¯­æ³•ç³–ï¼ˆSyntactic Sugarï¼‰ï¼Œä¹Ÿç§°ç³–è¡£è¯­æ³•ï¼ŒæŒ‡åœ¨è®¡ç®—æœºè¯­è¨€ä¸­æ·»åŠ çš„æŸç§è¯­æ³•ï¼Œè¿™ç§è¯­æ³•å¯¹è¯­è¨€æœ¬èº«åŠŸèƒ½æ¥è¯´æ²¡æœ‰ä»€ä¹ˆå½±å“ï¼Œåªæ˜¯ä¸ºäº†æ–¹ä¾¿ç¨‹åºå‘˜çš„å¼€å‘ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚è¯´ç™½äº†ï¼Œè¯­æ³•ç³–å°±æ˜¯å¯¹ç°æœ‰è¯­æ³•çš„ä¸€ä¸ªå°è£…ã€‚ Javaä½œä¸ºä¸€ç§ä¸å¹³å°æ— å…³çš„é«˜çº§è¯­è¨€ï¼Œå½“ç„¶ä¹Ÿå«æœ‰è¯­æ³•ç³–ï¼Œè¿™äº›è¯­æ³•ç³–å¹¶ä¸è¢«è™šæ‹Ÿæœºæ‰€æ”¯æŒï¼Œåœ¨ç¼–è¯‘æˆå­—èŠ‚ç é˜¶æ®µå°±è‡ªåŠ¨è½¬æ¢æˆç®€å•å¸¸ç”¨è¯­æ³•ã€‚è¯­æ³•ç³–çš„å¤§æ¦‚æœ‰ä¸‰ä¸ªç‰¹æ€§ï¼š æé«˜ç¨‹åºå¼€å‘æ•ˆç‡ ç¨‹åºæ€§èƒ½ä¸å—å½±å“ è§„é¿coderå¯èƒ½å› æ‰‹è¯¯è€Œå‡ºç°çš„é”™è¯¯ é‚£Javaæœ‰å“ªäº›è¯­æ³•ç³–å‘¢ï¼ŸJavaå¤§æ¦‚æœ‰å¦‚ä¸‹6ä¸ªè¯­æ³•ç³–ï¼š æ³›å‹ä¸ç±»å‹æ“¦é™¤ è‡ªåŠ¨è£…ç®±ä¸æ‹†ç®± å˜é•¿å‚æ•° å¢å¼ºforå¾ªç¯ å†…éƒ¨ç±» æšä¸¾ç±»","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"}]},{"title":"Javaå‡ºç°é”™è¯¯Implicit super constructor  **  is undefined for default constructor. Must define an explicit constructor","slug":"Javaå‡ºç°é”™è¯¯Implicit-super-constructor-is-undefined-for-default-constructor-Must-define-an-explicit-constructor","date":"2018-01-05T23:32:03.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/7764f1f8.html","link":"","permalink":"https://ydstudios.gitee.io/post/7764f1f8.html","excerpt":"å…¬å¸å¼€å±•æ–°çš„é¡¹ç›®ï¼Œè¦æ±‚ä½¿ç”¨Javaï¼Œç»™ä¸€ä¸ªæœˆçš„å­¦ä¹ æ—¶é—´ã€‚(å—äº¬ä¸€äº›æ¯”è¾ƒå¤§çš„å…¬å¸ä¹Ÿå¼€å§‹è½¬å‘Javaï¼Œè¯­è¨€ç¯å¢ƒå‘äº†æ”¹å˜ï¼Œå­¦ä¹ Javaä¹Ÿæ˜¯å¤§åŠ¿æ‰€è¶‹ã€‚2018å¹´1æœˆ26æ—¥ä¿®æ”¹)ï¼Œåªå¥½å¼€å§‹å­¦ä¹ Javaï¼è¯´å¥½æœ‰ç³»ç»Ÿçš„åŸ¹è®­ï¼Œç»“æœæˆ‘ç°åœ¨åœ¨è‡ªå­¦ï¼åœ¨å­¦ä¹ javaçš„æ—¶å€™ï¼Œé‡åˆ°äº†ä¸‹é¢çš„é—®é¢˜ï¼š 1Implicit super constructor People() is undefined for default constructor. Must define an explicit constructor","text":"å…¬å¸å¼€å±•æ–°çš„é¡¹ç›®ï¼Œè¦æ±‚ä½¿ç”¨Javaï¼Œç»™ä¸€ä¸ªæœˆçš„å­¦ä¹ æ—¶é—´ã€‚(å—äº¬ä¸€äº›æ¯”è¾ƒå¤§çš„å…¬å¸ä¹Ÿå¼€å§‹è½¬å‘Javaï¼Œè¯­è¨€ç¯å¢ƒå‘äº†æ”¹å˜ï¼Œå­¦ä¹ Javaä¹Ÿæ˜¯å¤§åŠ¿æ‰€è¶‹ã€‚2018å¹´1æœˆ26æ—¥ä¿®æ”¹)ï¼Œåªå¥½å¼€å§‹å­¦ä¹ Javaï¼è¯´å¥½æœ‰ç³»ç»Ÿçš„åŸ¹è®­ï¼Œç»“æœæˆ‘ç°åœ¨åœ¨è‡ªå­¦ï¼åœ¨å­¦ä¹ javaçš„æ—¶å€™ï¼Œé‡åˆ°äº†ä¸‹é¢çš„é—®é¢˜ï¼š 1Implicit super constructor People() is undefined for default constructor. Must define an explicit constructor å¤§è‡´çš„æ„æ€æ˜¯çˆ¶ç±»æ²¡æœ‰å®šä¹‰é»˜è®¤çš„æ— å‚æ•°çš„æ„é€ æ–¹æ³•ï¼Œçˆ¶ç±»å¿…é¡»å®šä¹‰ä¸€ä¸ªæ— å‚çš„æ„é€ æ–¹æ³•ã€‚ç»è¿‡ä¸€ç•ªç ”ç©¶å¾—çŸ¥ï¼ŒJavaä¸­æœ‰ä¸€ä¸‹çš„è§„åˆ™ï¼š å› ä¸ºä½ çš„çˆ¶ç±»å·²ç»å®šä¹‰äº†ä¸€ä¸ªæœ‰å‚çš„æ„é€ å‡½æ•°å¹¶ä¸”çˆ¶ç±»ä¸­æ²¡æœ‰é»˜è®¤çš„æ— å‚æ„é€ æ–¹æ³•ï¼Œæ­¤æ—¶ç¼–è¯‘å™¨ä¸ä¼šä¸ºä½ è°ƒç”¨é»˜è®¤çš„æ„é€ å‡½æ•°ï¼Œ å½“å­ç±»ç»§æ‰¿æ—¶ï¼Œå¿…é¡»åœ¨è‡ªå·±çš„æ„é€ å‡½æ•°æ˜¾å¼è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œè‡ªå·±æ‰èƒ½ç¡®ä¿å­ç±»åœ¨åˆå§‹åŒ–å‰çˆ¶ç±»ä¼šè¢«å®ä¾‹åŒ–ï¼Œ å¦‚æœä½ çˆ¶ç±»ä¸­æœ‰æ— å‚çš„æ„é€ å‡½æ•°ï¼Œå­ç±»å°±ä¸ä¼šå¼ºåˆ¶è¦æ±‚è°ƒç”¨ï¼Œå³ä½ å†™çš„é‚£ä¸ªå°±å¯ä»¥é€šè¿‡ï¼Œ ç¼–è¯‘å™¨ä¼šé»˜è®¤å¸®ä½ è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚ ä¿®æ”¹åçš„ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253//çˆ¶ç±»package dmw;public abstract class People &#123; public String name; protected int age; protected String gender; public People()&#123;&#125; public People(int age,String name,String gender)&#123; this.age = age; this.name =name; this.gender=gender; &#125; public int getAge()&#123; return this.age; &#125; public String getGender()&#123; return this.gender; &#125; public abstract boolean setAge(int age); public abstract boolean setGender(String gender);&#125;//å­ç±»package dmw;public class Student extends People &#123; public Student(int age, String name, String gender) &#123; super(age, name, gender); // TODO Auto-generated constructor stub &#125; @Override public boolean setAge(int age) &#123; this.age = age; return false; &#125; @Override public boolean setGender(String gender) &#123; this.gender = gender; return false; &#125; &#125; eclipseçš„mavené…ç½®","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"}]},{"title":"ä½¿ç”¨javaå’Œjavacå‘½ä»¤æ¥ç¼–è¯‘è¿è¡ŒJava","slug":"ä½¿ç”¨javaå’Œjavacå‘½ä»¤æ¥ç¼–è¯‘è¿è¡ŒJava","date":"2018-01-01T23:31:03.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/5d2bd789.html","link":"","permalink":"https://ydstudios.gitee.io/post/5d2bd789.html","excerpt":"åºŸè¯ä¸å¤šè¯´ï¼Œç›´å¥”ä¸»é¢˜!","text":"åºŸè¯ä¸å¤šè¯´ï¼Œç›´å¥”ä¸»é¢˜! 1.å…ˆåˆ›å»ºä¸€ä¸ªTest.javaçš„æ–‡ä»¶ï¼Œé‡Œé¢ä¿å­˜çš„å†…å®¹å¦‚ä¸‹ï¼š 1234567class Test&#123; public static void main(String[] args)&#123; System.out.println(\"hello world!\"); &#125;&#125;` 2.ä½¿ç”¨javacç¼–è¯‘Test.javaæ–‡ä»¶ï¼Œç¼–è¯‘é€šè¿‡ä¼šç”Ÿæˆä¸€ä¸ªTest.classçš„æ–‡ä»¶ 1234C:\\Users\\nick\\Desktop&gt;javac Test.javaC:\\Users\\nick\\Desktop&gt; 3.ä½¿ç”¨java Testå‘½ä»¤æ‰§è¡ŒTest.classæ–‡ä»¶ 1234C:\\Users\\nick\\Desktop&gt;java Testhello world!C:\\Users\\nick\\Desktop&gt;","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://ydstudios.gitee.io/tags/java/"}]},{"title":"Centos6.9å®‰è£…ElasticSearch2.x","slug":"Centos6-9å®‰è£…ElasticSearch2-x","date":"2017-12-25T23:29:35.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/971cda27.html","link":"","permalink":"https://ydstudios.gitee.io/post/971cda27.html","excerpt":"æˆ‘è¿™é‡Œå®‰è£…çš„æ˜¯ElasticSearch2.xç³»åˆ—ã€‚ElasticSearchå®˜æ–¹æ–‡æ¡£1.æ£€æŸ¥ç³»ç»Ÿæ˜¯å¦å·²ç»å®‰è£…äº†jdk","text":"æˆ‘è¿™é‡Œå®‰è£…çš„æ˜¯ElasticSearch2.xç³»åˆ—ã€‚ElasticSearchå®˜æ–¹æ–‡æ¡£1.æ£€æŸ¥ç³»ç»Ÿæ˜¯å¦å·²ç»å®‰è£…äº†jdk 1yum list installed |grep java è‹¥æœ‰è‡ªå¸¦å®‰è£…çš„JDKï¼Œå¦‚ä½•å¸è½½CentOSç³»ç»Ÿè‡ªå¸¦Javaç¯å¢ƒ? 12å¸è½½JDKç›¸å…³æ–‡ä»¶è¾“å…¥ï¼šyum -y remove java-1.7.0-openjdk*å¸è½½tzdata-javaè¾“å…¥ï¼šyum -y remove tzdata-java.noarch æ³¨ï¼šâ€œ*â€è¡¨ç¤ºå¸è½½æ‰java 1.7.0çš„æ‰€æœ‰openjdkç›¸å…³æ–‡ä»¶2.æŸ¥çœ‹yumåº“ä¸­çš„Javaå®‰è£…åŒ… 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849yum -y list java*[root@iZwz99xkrnh5xy0cqp8aofZ ~]# yum -y list java*Loaded plugins: securityInstalled Packagesjava-1.8.0-openjdk.x86_64 1:1.8.0.151-1.b12.el6_9 @updatesjava-1.8.0-openjdk-debug.x86_64 1:1.8.0.151-1.b12.el6_9 @updatesjava-1.8.0-openjdk-demo.x86_64 1:1.8.0.151-1.b12.el6_9 @updatesjava-1.8.0-openjdk-demo-debug.x86_64 1:1.8.0.151-1.b12.el6_9 @updatesjava-1.8.0-openjdk-devel.x86_64 1:1.8.0.151-1.b12.el6_9 @updatesjava-1.8.0-openjdk-devel-debug.x86_64 1:1.8.0.151-1.b12.el6_9 @updatesjava-1.8.0-openjdk-headless.x86_64 1:1.8.0.151-1.b12.el6_9 @updatesjava-1.8.0-openjdk-headless-debug.x86_64 1:1.8.0.151-1.b12.el6_9 @updatesjava-1.8.0-openjdk-javadoc.noarch 1:1.8.0.151-1.b12.el6_9 @updatesjava-1.8.0-openjdk-javadoc-debug.noarch 1:1.8.0.151-1.b12.el6_9 @updatesjava-1.8.0-openjdk-src.x86_64 1:1.8.0.151-1.b12.el6_9 @updatesjava-1.8.0-openjdk-src-debug.x86_64 1:1.8.0.151-1.b12.el6_9 @updatesAvailable Packagesjava-1.5.0-gcj.x86_64 1.5.0.0-29.1.el6 base java-1.5.0-gcj-devel.x86_64 1.5.0.0-29.1.el6 base java-1.5.0-gcj-javadoc.x86_64 1.5.0.0-29.1.el6 base java-1.5.0-gcj-src.x86_64 1.5.0.0-29.1.el6 base java-1.6.0-openjdk.x86_64 1:1.6.0.41-1.13.13.1.el6_8 base java-1.6.0-openjdk-demo.x86_64 1:1.6.0.41-1.13.13.1.el6_8 base java-1.6.0-openjdk-devel.x86_64 1:1.6.0.41-1.13.13.1.el6_8 base java-1.6.0-openjdk-javadoc.x86_64 1:1.6.0.41-1.13.13.1.el6_8 base java-1.6.0-openjdk-src.x86_64 1:1.6.0.41-1.13.13.1.el6_8 base java-1.7.0-openjdk.x86_64 1:1.7.0.161-2.6.12.0.el6_9 updates java-1.7.0-openjdk-demo.x86_64 1:1.7.0.161-2.6.12.0.el6_9 updates java-1.7.0-openjdk-devel.x86_64 1:1.7.0.161-2.6.12.0.el6_9 updates java-1.7.0-openjdk-javadoc.noarch 1:1.7.0.161-2.6.12.0.el6_9 updates java-1.7.0-openjdk-src.x86_64 1:1.7.0.161-2.6.12.0.el6_9 updates java-clearsilver.i686 0.10.5-16.el6 epel java-dirq.noarch 1.4-1.el6 epel java-dirq-javadoc.noarch 1.4-1.el6 epel java-service-wrapper.x86_64 3.2.5-23.el6 epel java-service-wrapper-javadoc.noarch 3.2.5-23.el6 epel java-sleep.noarch 2.1-6.el6 epel java-sleep-javadoc.noarch 2.1-6.el6 epel java_cup.x86_64 1:0.10k-5.el6 base java_cup-javadoc.x86_64 1:0.10k-5.el6 base java_cup-manual.x86_64 1:0.10k-5.el6 base javacc.x86_64 4.1-0.5.el6 base javacc-demo.x86_64 4.1-0.5.el6 base javacc-manual.x86_64 4.1-0.5.el6 base javassist.noarch 3.9.0-6.el6 base javassist-javadoc.noarch 3.9.0-6.el6 base javastroke.x86_64 0.5.1-33.el6 epel javatar.noarch 2.5-5.el6 epel javatar-javadoc.noarch ä»¥yumåº“ä¸­çš„java-1.8ä¸ºä¾‹ï¼Œå°†java-1.8.0çš„æ‰€æœ‰ç›¸å…³Javaç¨‹åºéƒ½å®‰è£…ä¸Šã€‚ 1yum -y install java-1.8.0-openjdk* 3.æŸ¥çœ‹åˆšå®‰è£…çš„Javaç‰ˆæœ¬ä¿¡æ¯ 12345java -version å¯æŸ¥çœ‹Javaç‰ˆæœ¬[root@iZwz99xkrnh5xy0cqp8aofZ ~]# java -versionopenjdk version \"1.8.0_151\"OpenJDK Runtime Environment (build 1.8.0_151-b12)OpenJDK 64-Bit Server VM (build 25.151-b12, mixed mode) 4.é€šè¿‡rpmå®‰è£…ElasticSearch 123456789å…ˆä¸‹è½½å¹¶å®‰è£…å…¬å…±ç­¾åå¯†é’¥rpm --import https://artifacts.elastic.co/GPG-KEY-elasticsearchå†å®‰è£…rpmçš„repository[elasticsearch-2.x]name=Elasticsearch repository for 2.x packagesbaseurl=https://packages.elastic.co/elasticsearch/2.x/centosgpgcheck=1gpgkey=https://packages.elastic.co/GPG-KEY-elasticsearchenabled=1 å®‰è£…ElasticSearch 12345678910111213sudo yum install elasticsearch sudo dnf install elasticsearch sudo zypper install elasticsearchä½¿ç”¨yumåœ¨CentOSå’Œæ—§çš„åŸºäºRed Hatåˆ†å‘ä½¿ç”¨dnfçš„Fedoraå’Œå…¶ä»–æ–°çš„Red Hatåˆ†å‘ä½¿ç”¨zypperåŸºäºåˆ†å¸ƒçš„OpenSUSEå¦‚æœä½ å«Œéº»çƒ¦å¯ä»¥ä¹‹å‰ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•å®‰è£…ï¼šwget https://download.elastic.co/elasticsearch/release/org/elasticsearch/distribution/rpm/elasticsearch/2.4.2/elasticsearch-2.4.2.rpmsha1sum elasticsearch-5.6.5.rpmsudo rpm --install elasticsearch-5.6.5.rpm 5.ä½¿ç”¨chkconfigå‘½ä»¤å°†Elasticsearché…ç½®ä¸ºåœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨å¯åŠ¨ 123456sudo chkconfig --add elasticsearchä¸‹é¢çš„å‘½ä»¤å¯åŠ¨æˆ–è€…å…³é—­elasticsearchæœåŠ¡sudo -i service elasticsearch startsudo -i service elasticsearch stop 6.å¯åŠ¨elasticsearchæœåŠ¡æŠ¥é”™ 123456789[root@iZwz99xkrnh5xy0cqp8aofZ src]# service elasticsearch startStarting elasticsearch: OpenJDK 64-Bit Server VM warning: If the number of processors is expected to increase from one, then you should configure the number of parallel GC threads appropriately using -XX:ParallelGCThreads=NOpenJDK 64-Bit Server VM warning: INFO: os::commit_memory(0x0000000085330000, 2060255232, 0) failed; error='Cannot allocate memory' (errno=12)## There is insufficient memory for the Java Runtime Environment to continue.# Native memory allocation (mmap) failed to map 2060255232 bytes for committing reserved memory.# An error report file with more information is saved as:# /tmp/hs_err_pid23700.log [FAILED] è¿™æ˜¯å› ä¸ºæœºå™¨çš„å†…å­˜ä¸è¶³ï¼Œå¯ç”¨å†…å­˜å°‘äº1G,è§£å†³æ–¹æ³•å¦‚ä¸‹ï¼š 1234567vim /etc/elasticsearch/jvm.options ##å¯ç”¨å¦‚ä¸‹ä¸¤é¡¹ -Xms4g -Xmx4g##å…³é—­å¦‚ä¸‹ä¸¤é¡¹##-Xms2g ##-Xmx2g 7.é…ç½®å¤–ç½‘å¯ç”¨è®¿é—® 123ä¿®æ”¹é…ç½®æ–‡ä»¶vim/etc/elasticsearch/elasticsearch.ymlä¿®æ”¹æˆï¼šnetwork.host: 0.0.0.0 è‡³æ­¤ï¼Œelasticsearchçš„åŸºæœ¬é…ç½®å®Œæˆï¼","categories":[],"tags":[{"name":"linux","slug":"linux","permalink":"https://ydstudios.gitee.io/tags/linux/"},{"name":"elasticSearch","slug":"elasticSearch","permalink":"https://ydstudios.gitee.io/tags/elasticSearch/"}]},{"title":"Centos6å®‰è£…Mongodb","slug":"Centos6å®‰è£…Mongodb","date":"2017-12-06T23:27:40.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/ab77d2e6.html","link":"","permalink":"https://ydstudios.gitee.io/post/ab77d2e6.html","excerpt":"1.è¿è¡Œä¸‹é¢å‘½ä»¤æŸ¥çœ‹æœåŠ¡å™¨ä¸­æ˜¯å¦å­˜åœ¨Mongodbçš„æº","text":"1.è¿è¡Œä¸‹é¢å‘½ä»¤æŸ¥çœ‹æœåŠ¡å™¨ä¸­æ˜¯å¦å­˜åœ¨Mongodbçš„æº 1yum info mongo-10gen ç»“æœæç¤ºæ²¡æœ‰ç›¸å…³åŒ¹é…çš„ä¿¡æ¯ ï¼Œè¯´æ˜ç³»ç»Ÿä¸­çš„yumæºä¸åŒ…å«MongoDBçš„ç›¸å…³èµ„æºï¼Œæ‰€ä»¥è¦åœ¨ä½¿ç”¨yumå‘½ä»¤å®‰è£…MongoDBå‰éœ€è¦å¢åŠ yumæºã€‚2.é…ç½®åŒ…ç®¡ç†ç³»ç»Ÿï¼ˆyumï¼‰åˆ›å»ºä¸€ä¸ª/etc/yum.repos.d/mongodb-org-3.6.repoæ–‡ä»¶ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥ç›´æ¥ä½¿ç”¨å®‰è£…MongoDB yumã€‚å†™å…¥ä¸€ä¸‹å†…å®¹ï¼š 123456[mongodb-org-3.6]name=MongoDB Repositorybaseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.6/x86_64/gpgcheck=1enabled=1gpgkey=https://www.mongodb.org/static/pgp/server-3.6.asc 3.å®‰è£…MongoDBåŒ…è¦å®‰è£…æœ€æ–°çš„ç¨³å®šç‰ˆæœ¬çš„MongoDBï¼Œè¯·å‘å‡ºä»¥ä¸‹å‘½ä»¤ï¼š 1yum install -y mongodb-org è¦å®‰è£…ç‰¹å®šç‰ˆæœ¬çš„MongoDBï¼Œè¯·åˆ†åˆ«æŒ‡å®šæ¯ä¸ªç»„ä»¶åŒ…ï¼Œå¹¶å°†ç‰ˆæœ¬å·é™„åŠ åˆ°åŒ…åç§°ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š 1yum install -y mongodb-org-3.6.0 mongodb-org-server-3.6.0 mongodb-org-shell-3.6.0 mongodb-org-mongos-3.6.0 mongodb-org-tools-3.6.0 4.åœ¨é˜¿é‡Œäº‘ä¸Šå®‰å…¨ç»„æ·»åŠ ä¸€æ¡è§„åˆ™,å¹¶åœ¨Centosä¸­çš„iptablesæ·»åŠ ä¸€æ¡è®°å½• 12345678#é˜¿é‡Œäº‘å®‰å…¨ç»„è§„åˆ™å…è®¸ è‡ªå®šä¹‰ TCP 27017/27017 åœ°å€æ®µè®¿é—® 0.0.0.0/0#iptables-A INPUT -p tcp -m tcp --dport 27017 -j ACCEPT #é‡å¯iptables/etc/init.d/iptables restart 5.å¼€æœºè‡ªå¯åŠ¨,æ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼š 1chkconfig mongod on 6.Mongodbå¯åŠ¨ã€å…³é—­å’Œé‡å¯å‘½ä»¤ 123456#å¯åŠ¨service mongod start#å…³é—­service mongod stop#restartservice mongod restart END Mongodbå®‰è£…ç»“æŸ","categories":[],"tags":[{"name":"linux","slug":"linux","permalink":"https://ydstudios.gitee.io/tags/linux/"},{"name":"mongodb","slug":"mongodb","permalink":"https://ydstudios.gitee.io/tags/mongodb/"}]},{"title":"Nginxå‡ºç°The plain HTTP request was sent to HTTPS port","slug":"Nginxå‡ºç°The-plain-HTTP-request-was-sent-to-HTTPS-port","date":"2017-12-05T23:26:28.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/38efc407.html","link":"","permalink":"https://ydstudios.gitee.io/post/38efc407.html","excerpt":"Nginxçªç„¶å‡ºç°äº†ä¸‹é¢çš„é—®é¢˜ï¼š 1The plain HTTP request was sent to HTTPS port åœ¨åšå®¢é…ç½®sslè¯ä¹¦çš„æ—¶å€™ï¼Œåšå®¢çš„httpsåœ°å€å’Œhttpåœ°å€æ˜¯éƒ½èƒ½è®¿é—®ï¼Œä¸è¿‡ï¼Œä»Šå¤©çªç„¶å‘ç°åšå®¢è®¿é—®å‡ºç°ä¸Šé¢çš„é—®é¢˜ï¼Œç»è¿‡ç™¾åº¦æ‰¾åˆ°äº†é—®é¢˜çš„è§£å†³åŠæ³•ï¼Œåœ¨æ­¤è®°å½•ä¸€ä¸‹ã€‚","text":"Nginxçªç„¶å‡ºç°äº†ä¸‹é¢çš„é—®é¢˜ï¼š 1The plain HTTP request was sent to HTTPS port åœ¨åšå®¢é…ç½®sslè¯ä¹¦çš„æ—¶å€™ï¼Œåšå®¢çš„httpsåœ°å€å’Œhttpåœ°å€æ˜¯éƒ½èƒ½è®¿é—®ï¼Œä¸è¿‡ï¼Œä»Šå¤©çªç„¶å‘ç°åšå®¢è®¿é—®å‡ºç°ä¸Šé¢çš„é—®é¢˜ï¼Œç»è¿‡ç™¾åº¦æ‰¾åˆ°äº†é—®é¢˜çš„è§£å†³åŠæ³•ï¼Œåœ¨æ­¤è®°å½•ä¸€ä¸‹ã€‚ è§£å†³åŠæ³•ï¼š åˆ æ‰ssl on; å¹¶åœ¨ listen 443; 443ååŠ ä¸Šsslå³å¯ã€‚Nginxæœ€æ–°é…ç½®æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061server &#123; listen 80; listen 443 ssl; server_name www.ydstudio.net ydstudio.net; set $my_server_name $scheme://$server_name; root html; if ($host = 'ydstudio.net') &#123; rewrite ^ https://www.ydstudio.net$request_uri? permanent; &#125; #é˜²æ­¢ipè®¿é—®ï¼Œå¦‚http://xxx.xxx.xxx.xxxæˆ–è€…https://xxx.xxx.xxx.xxx if ( $host ~* \"\\d+\\.\\d+\\.\\d+\\.\\d+\" ) &#123; rewrite ^ https://$server_name; &#125; if ( $my_server_name != https://$server_name ) &#123; return 301 https://$server_name$request_uri; #rewrite ^ https://$server_name$request_uri? permanent; &#125; location / &#123; try_files $uri $uri/ /index.php$is_args$args; index index.php index.html index.htm; &#125; #error_page 404 /404.html; # redirect server error pages to the static page /50x.html error_page 500 502 503 504 /50x.html; location = /50x.html &#123; root /usr/share/nginx/html; &#125; # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000 location ~ \\.php$ &#123; #root html; fastcgi_pass 127.0.0.1:9000; fastcgi_index index.php; fastcgi_param SCRIPT_FILENAME html/typecho/$fastcgi_script_name; include fastcgi_params; &#125; location ~ .*\\.(gif|jpg|jpeg|png|bmp|swf)$ &#123; #expiresæŒ‡ä»¤è®¾ç½®æµè§ˆå™¨ç¼“å­˜è¿‡æœŸæ—¶é—´ #å¯ä»¥åœ¨httpã€serverã€locationä¸‰ä¸ªä½œç”¨åŸŸä¸­è®¾ç½® #ç¼“å­˜å›¾ç‰‡æˆ–è§†é¢‘30å¤© expires 30d; &#125; location ~ .*\\.(js|css)?$ &#123; #ç¼“å­˜js/css 1å°æ—¶ expires 1h; &#125; #ssl on; ssl_certificate cert/214353452860792.pem; ssl_certificate_key cert/214353452860792.key; ssl_session_timeout 5m; ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_prefer_server_ciphers on;&#125;","categories":[],"tags":[{"name":"linux","slug":"linux","permalink":"https://ydstudios.gitee.io/tags/linux/"},{"name":"nginx","slug":"nginx","permalink":"https://ydstudios.gitee.io/tags/nginx/"}]},{"title":"PHPå‡ºç°Deprecated Automatically populating  is deprecated and will be removed in a future version","slug":"PHPå‡ºç°Deprecated-Automatically-populating-is-deprecated-and-will-be-removed-in-a-future-version","date":"2017-12-05T23:24:30.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/96d1bc5c.html","link":"","permalink":"https://ydstudios.gitee.io/post/96d1bc5c.html","excerpt":"æœ¬åœ°æ–°æ­å»ºçš„PHPç¯å¢ƒï¼Œå‡ºç°ä¸‹é¢çš„é—®é¢˜ï¼š 12Deprecated Automatically populating $HTTP_RAW_POST_DATA is deprecated and will be removed in a future version. To avoid this warning set 'always_populate_raw_post_data' to '-1' in php.ini and use the php://input stream instead. in Unknown on line 0Warning: Cannot modify header information - headers already sent in Unknown on line 0","text":"æœ¬åœ°æ–°æ­å»ºçš„PHPç¯å¢ƒï¼Œå‡ºç°ä¸‹é¢çš„é—®é¢˜ï¼š 12Deprecated Automatically populating $HTTP_RAW_POST_DATA is deprecated and will be removed in a future version. To avoid this warning set 'always_populate_raw_post_data' to '-1' in php.ini and use the php://input stream instead. in Unknown on line 0Warning: Cannot modify header information - headers already sent in Unknown on line 0 è¿™ä¸ªé—®é¢˜å’ŒPHPç‰ˆæœ¬æœ‰å…³ç³»ï¼ŒPHP 5.6å·²ç»åºŸå¼ƒäº†$HTTP_RAW_POST_DATAã€‚è§£å†³æ–¹æ³•ï¼šä¿®æ”¹php.ini 1always_populate_raw_post_data = -1 é‡å¯PHPå³å¯","categories":[],"tags":[{"name":"php","slug":"php","permalink":"https://ydstudios.gitee.io/tags/php/"}]},{"title":"PHPå‡ºç°ä»¥ä¸‹é”™è¯¯Cannot find module (IP-MIB)","slug":"PHPå‡ºç°ä»¥ä¸‹é”™è¯¯Cannot-find-module-IP-MIB","date":"2017-12-05T23:22:45.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/82ed83ea.html","link":"","permalink":"https://ydstudios.gitee.io/post/82ed83ea.html","excerpt":"æŸ¥çœ‹PHPç‰ˆæœ¬çš„æ—¶å€™å‡ºç°ä¸‹é¢çš„é—®é¢˜ï¼š 1234567891011121314151617181920212223242526php -vMIB search path: c:/usr/share/snmp/mibsCannot find module (IP-MIB): At line 0 in (none)Cannot find module (IF-MIB): At line 0 in (none)Cannot find module (TCP-MIB): At line 0 in (none)Cannot find module (UDP-MIB): At line 0 in (none)Cannot find module (HOST-RESOURCES-MIB): At line 0 in (none)Cannot find module (SNMPv2-MIB): At line 0 in (none)Cannot find module (SNMPv2-SMI): At line 0 in (none)Cannot find module (NOTIFICATION-LOG-MIB): At line 0 in (none)Cannot find module (UCD-SNMP-MIB): At line 0 in (none)Cannot find module (UCD-DEMO-MIB): At line 0 in (none)Cannot find module (SNMP-TARGET-MIB): At line 0 in (none)Cannot find module (NET-SNMP-AGENT-MIB): At line 0 in (none)Cannot find module (DISMAN-EVENT-MIB): At line 0 in (none)Cannot find module (SNMP-VIEW-BASED-ACM-MIB): At line 0 in (none)Cannot find module (SNMP-COMMUNITY-MIB): At line 0 in (none)Cannot find module (SNMP-FRAMEWORK-MIB): At line 0 in (none)Cannot find module (SNMP-MPD-MIB): At line 0 in (none)Cannot find module (SNMP-USER-BASED-SM-MIB): At line 0 in (none)Cannot find module (SNMP-NOTIFICATION-MIB): At line 0 in (none)Cannot find module (SNMPv2-TM): At line 0 in (none)PHP 7.0.12 (cli) (built: Oct 13 2016 11:04:07) ( NTS )Copyright (c) 1997-2016 The PHP GroupZend Engine v3.0.0, Copyright (c) 1998-2016 Zend Technologies","text":"æŸ¥çœ‹PHPç‰ˆæœ¬çš„æ—¶å€™å‡ºç°ä¸‹é¢çš„é—®é¢˜ï¼š 1234567891011121314151617181920212223242526php -vMIB search path: c:/usr/share/snmp/mibsCannot find module (IP-MIB): At line 0 in (none)Cannot find module (IF-MIB): At line 0 in (none)Cannot find module (TCP-MIB): At line 0 in (none)Cannot find module (UDP-MIB): At line 0 in (none)Cannot find module (HOST-RESOURCES-MIB): At line 0 in (none)Cannot find module (SNMPv2-MIB): At line 0 in (none)Cannot find module (SNMPv2-SMI): At line 0 in (none)Cannot find module (NOTIFICATION-LOG-MIB): At line 0 in (none)Cannot find module (UCD-SNMP-MIB): At line 0 in (none)Cannot find module (UCD-DEMO-MIB): At line 0 in (none)Cannot find module (SNMP-TARGET-MIB): At line 0 in (none)Cannot find module (NET-SNMP-AGENT-MIB): At line 0 in (none)Cannot find module (DISMAN-EVENT-MIB): At line 0 in (none)Cannot find module (SNMP-VIEW-BASED-ACM-MIB): At line 0 in (none)Cannot find module (SNMP-COMMUNITY-MIB): At line 0 in (none)Cannot find module (SNMP-FRAMEWORK-MIB): At line 0 in (none)Cannot find module (SNMP-MPD-MIB): At line 0 in (none)Cannot find module (SNMP-USER-BASED-SM-MIB): At line 0 in (none)Cannot find module (SNMP-NOTIFICATION-MIB): At line 0 in (none)Cannot find module (SNMPv2-TM): At line 0 in (none)PHP 7.0.12 (cli) (built: Oct 13 2016 11:04:07) ( NTS )Copyright (c) 1997-2016 The PHP GroupZend Engine v3.0.0, Copyright (c) 1998-2016 Zend Technologies è§£å†³åŠæ³•ï¼š 123#å…³æ‰snmpæ‰©å±•#windowsæ³¨é‡Šæ‰ extension=php_snmp.dll","categories":[],"tags":[{"name":"linux","slug":"linux","permalink":"https://ydstudios.gitee.io/tags/linux/"},{"name":"php","slug":"php","permalink":"https://ydstudios.gitee.io/tags/php/"}]},{"title":"MySQLå‡ºç°1267çš„é”™è¯¯","slug":"MySQLå‡ºç°1267çš„é”™è¯¯","date":"2017-12-04T23:21:47.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/75a1fb40.html","link":"","permalink":"https://ydstudios.gitee.io/post/75a1fb40.html","excerpt":"æ‰§è¡ŒSQLçš„æ—¶å€™ï¼ŒMySQLå‡ºç°äº†ä¸‹é¢çš„1267çš„é”™è¯¯ï¼Œæç¤ºä¸å­—ç¬¦é›†æœ‰å…³ç³»ã€‚ 11267 - Illegal mix of collations (utf8_unicode_ci,IMPLICIT) and (utf8_general_ci,IMPLICIT) for operation '='","text":"æ‰§è¡ŒSQLçš„æ—¶å€™ï¼ŒMySQLå‡ºç°äº†ä¸‹é¢çš„1267çš„é”™è¯¯ï¼Œæç¤ºä¸å­—ç¬¦é›†æœ‰å…³ç³»ã€‚ 11267 - Illegal mix of collations (utf8_unicode_ci,IMPLICIT) and (utf8_general_ci,IMPLICIT) for operation '=' æŸ¥æ‰¾é—®é¢˜çš„æ—¶å€™ï¼Œå‘ç°æœ‰ä¸€å¼ è¡¨æ˜¯ä»å…¶ä»–åœ°æ–¹æ‹·è´è¿‡æ¥çš„ï¼Œè¿™ä¸ªè¡¨å’Œæˆ‘ä»¬ç›®å‰é¡¹ç›®ä¸­çš„è¡¨ï¼Œç¨å¾®æœ‰ç‚¹ä¸åŒã€‚æ•°æ®è¡¨ä¸­å­—ç¬¦ä¸²ç±»å‹çš„å­—æ®µï¼Œä¸ä»…æœ‰å­—ç¬¦é›†è¿™ä¸ªå±æ€§ï¼Œè¿˜æœ‰ä¸€ä¸ªæ’åºè§„åˆ™çš„å±æ€§ã€‚æ‹·è´è¿‡æ¥çš„è¡¨çš„å­—ç¬¦ä¸²ç±»å‹çš„å­—æ®µçš„æ’åºè§„åˆ™æ˜¯utf8_unicode_ciï¼Œè€Œæˆ‘ä»¬çš„é¡¹ç›®ä¸­çš„æ˜¯utf8_general_ciï¼Œä¿®æ”¹ä¹‹åå†æ¬¡æ‰§è¡Œä¸Šè¿°çš„SQLï¼Œå°±æ²¡æœ‰å‡ºç°ä¸Šé¢çš„é”™è¯¯ï¼ä¸‹é¢æ˜¯é—®é¢˜çš„ç®€å•æ€»ç»“ï¼š 1234ci(caseinsensitiveå¤§å°å†™ä¸æ•æ„Ÿ)utf8_unicode_ciå’Œutf8_general_ciå¯¹ä¸­ã€è‹±æ–‡æ¥è¯´æ²¡æœ‰å®è´¨çš„å·®åˆ«ã€‚utf8_general_ciæ ¡å¯¹é€Ÿåº¦å¿«ï¼Œä½†å‡†ç¡®åº¦ç¨å·®ã€‚utf8_unicode_ciå‡†ç¡®åº¦é«˜ï¼Œä½†æ ¡å¯¹é€Ÿåº¦ç¨æ…¢ã€‚ å¦‚æœä½ çš„åº”ç”¨æœ‰å¾·è¯­ã€æ³•è¯­æˆ–è€…ä¿„è¯­ï¼Œè¯·ä¸€å®šä½¿ç”¨utf8_unicode_ciã€‚ä¸€èˆ¬ç”¨utf8_general_ciå°±å¤Ÿäº†ï¼Œåˆ°ç°åœ¨ä¹Ÿæ²¡å‘ç°é—®é¢˜ã€‚ã€‚ã€‚ è¯¦ç»†æ€»ç»“ï¼š 1ã€å¯¹äºä¸€ç§è¯­è¨€ä»…å½“ä½¿ç”¨utf8_unicode_ciæ’åºåšçš„ä¸å¥½æ—¶ï¼Œæ‰æ‰§è¡Œä¸å…·ä½“è¯­è¨€ç›¸å…³çš„utf8å­—ç¬¦é›†æ ¡å¯¹è§„åˆ™ã€‚ä¾‹å¦‚ï¼Œå¯¹äºå¾·è¯­å’Œæ³•è¯­ï¼Œutf8_unicode_ciå·¥ä½œçš„å¾ˆå¥½ï¼Œå› æ­¤ä¸å†éœ€è¦ä¸ºè¿™ä¸¤ç§è¯­è¨€åˆ›å»ºç‰¹æ®Šçš„utf8æ ¡å¯¹è§„åˆ™ã€‚2ã€utf8_general_ciä¹Ÿé€‚ç”¨ä¸å¾·è¯­å’Œæ³•è¯­ï¼Œé™¤äº†â€˜?â€™ç­‰äºâ€˜sâ€™ï¼Œè€Œä¸æ˜¯â€˜ssâ€™ä¹‹å¤–ã€‚å¦‚æœä½ çš„åº”ç”¨èƒ½å¤Ÿæ¥å—è¿™äº›ï¼Œé‚£ä¹ˆåº”è¯¥ä½¿ç”¨ utf8_general_ciï¼Œå› ä¸ºå®ƒé€Ÿåº¦å¿«ã€‚å¦åˆ™ï¼Œä½¿ç”¨utf8_unicode_ciï¼Œå› ä¸ºå®ƒæ¯”è¾ƒå‡†ç¡®ã€‚ç”¨ä¸€å¥è¯æ¦‚å†µä¸Šé¢è¿™æ®µè¯ï¼šutf8_unicode_ciæ¯”è¾ƒå‡†ç¡®ï¼Œutf8_general_cié€Ÿåº¦æ¯”è¾ƒå¿«ã€‚é€šå¸¸æƒ…å†µä¸‹ utf8_general_ciçš„å‡†ç¡®æ€§å°±å¤Ÿæˆ‘ä»¬ç”¨çš„äº†ï¼Œåœ¨æˆ‘çœ‹è¿‡å¾ˆå¤šç¨‹åºæºç åï¼Œå‘ç°å®ƒä»¬å¤§å¤šæ•°ä¹Ÿç”¨çš„æ˜¯utf8_general_ciï¼Œæ‰€ä»¥æ–°å»ºæ•°æ® åº“æ—¶ä¸€èˆ¬é€‰ç”¨utf8_general_ciå°±å¯ä»¥äº†ã€‚ å¦‚ä½•åœ¨MySQL5.0ä¸­ä½¿ç”¨UTF8åœ¨ my.cnfä¸­å¢åŠ ä¸‹åˆ—å‚æ•°å¤åˆ¶ä»£ç ä»£ç å¦‚ä¸‹: 1234[mysqld]init_connect='SET NAMES utf8'default-character-set=utf8default-collation = utf8_general_ci æ‰§è¡ŒæŸ¥è¯¢ mysql&gt; show variables; ç›¸å…³å¦‚ä¸‹: 123456789character_set_client | utf8 character_set_connection | utf8 character_set_database | utf8 character_set_results | utf8 character_set_server | utf8 character_set_system | utf8collation_connection | utf8_general_ci collation_database | utf8_general_ci collation_server | utf8_general_ci ä¸ªäººè§è§£ï¼Œå¯¹äºæ•°æ®åº“çš„ä½¿ç”¨ï¼Œutf8_general å·²ç»è¶³å¤Ÿçš„å‡†ç¡®ï¼Œå¹¶ä¸”ç›¸è¾ƒä¸ utf8_unicodeé€Ÿåº¦ä¸Šæœ‰ä¼˜åŠ¿ï¼Œå›ºå¯æ”¾å¿ƒé‡‡ç”¨ä¹‹","categories":[],"tags":[{"name":"mysql","slug":"mysql","permalink":"https://ydstudios.gitee.io/tags/mysql/"}]},{"title":"ä¿®æ”¹sshçš„é»˜è®¤22ç«¯å£","slug":"ä¿®æ”¹sshçš„é»˜è®¤22ç«¯å£","date":"2017-12-04T23:20:41.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/68417c42.html","link":"","permalink":"https://ydstudios.gitee.io/post/68417c42.html","excerpt":"åœ¨å›½å¤–ä¹°çš„vpsé˜²æ­¢åˆ«äººæ‰«æç«¯å£ï¼Œäºæ˜¯æˆ‘æŠŠsshé»˜è®¤çš„22ç«¯å£ä¿®æ”¹ä¸€ä¸‹ã€‚1.ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š/etc/ssh/sshd_config ï¼Œæ‰¾åˆ°","text":"åœ¨å›½å¤–ä¹°çš„vpsé˜²æ­¢åˆ«äººæ‰«æç«¯å£ï¼Œäºæ˜¯æˆ‘æŠŠsshé»˜è®¤çš„22ç«¯å£ä¿®æ”¹ä¸€ä¸‹ã€‚1.ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š/etc/ssh/sshd_config ï¼Œæ‰¾åˆ° 1#port 22 2.å…ˆå°†Port 22 å‰é¢çš„ # å·å»æ‰ï¼Œå¹¶å¦èµ·ä¸€è¡Œã€‚å¦‚å®šä¹‰SSHç«¯å£å·ä¸º33322ï¼Œåˆ™è¾“å…¥ 1Port 33322 è‡ªå®šä¹‰ç«¯å£é€‰æ‹©å»ºè®®åœ¨ä¸‡ä½çš„ç«¯å£ï¼ˆå¦‚ï¼š10000-65535ä¹‹é—´ï¼‰ä¹Ÿè®¸æ‚¨ä¼šé—®ä¸ºä»€ä¹ˆè¦å…ˆæŠŠport 22å‰é¢çš„ # å»æ‰å‘¢ï¼Ÿå› ä¸ºåœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œ# æ˜¯Linuxçš„æ³¨é‡Šå­—ç¬¦ã€‚æ³¨é‡Šå­—ç¬¦åçš„ä»£ç ç¨‹åºæ˜¯ä¸ä¼šæ‰§è¡Œçš„ã€‚SSHé»˜è®¤çš„ï¼ˆå³éæ‰‹åŠ¨æŒ‡å®šï¼‰ç«¯å£ä¸º22ï¼Œæ‰€ä»¥é…ç½®æ–‡ä»¶åœ¨é»˜è®¤çš„æƒ…å†µä¸‹ä»¥æ³¨é‡Šå­—ç¬¦å‡ºç°ã€‚å½“éœ€è¦æŒ‡å®šå…¶å®ƒç«¯å£æˆ–å¤šç«¯å£åŒæ—¶è®¿é—®æ—¶ï¼Œå°±è¦åˆ æ‰æ³¨é‡Šç¬¦å·ï¼Œå‘ŠçŸ¥ç¨‹åºæŒ‰ç…§æ‚¨çš„æ„æ„¿æ¥æ‰§è¡Œå“åº”æ“ä½œã€‚ä»¥ä¸Šæ“ä½œï¼Œæ‰‹åŠ¨æŒ‡å®šSSHç«¯å£ä¸º22å’Œ33322ï¼ˆåŒç«¯å£å·ï¼‰ï¼Œä¿ç•™22æ˜¯ä¸ºäº†é˜²æ­¢ä¸ªåˆ«é˜²ç«å¢™å±è”½äº†å…¶å®ƒç«¯å£å¯¼è‡´æ— æ³•è¿æ¥VPSï¼ˆå¦‚æ²¡å•ç‹¬æŒ‡å®š22ï¼Œæ–°æŒ‡å®šçš„33322ç«¯å£é˜²ç«å¢™ä¹Ÿæ²¡æ”¾è¡Œï¼Œé‚£ä¹ˆå¯èƒ½æ— æ³•é€šè¿‡SSHè¿æ¥VPSæˆ–æœåŠ¡å™¨ï¼‰ã€‚ä¸ºäº†é˜²æ­¢ä¸å¿…è¦é—®é¢˜çš„äº§ç”Ÿï¼Œæ‰€ä»¥è¦ç»™è‡ªå·±ä¿ç•™æ¡â€œåè·¯â€ã€‚3ã€ä¿®æ”¹å®Œæ¯•åï¼Œé‡å¯SSHæœåŠ¡ï¼Œå¹¶é€€å‡ºå½“å‰è¿æ¥çš„SSHç«¯å£ã€‚ï¼ˆå¦‚å›¾ï¼‰ 1service sshd restart CentOSä¸‹SSHé»˜è®¤ç«¯å£22ä¿®æ”¹æˆå…¶ä»–ç«¯å£4.é‡å¯å®Œæ¯•ï¼Œå°è¯•ä½¿ç”¨æ–°ç«¯å£ç™»é™†è¿æ¥æˆåŠŸï¼Œéœ€è¦é‡æ–°æ·»åŠ SSH-RSAéªŒè¯ï¼Œç‚¹å‡»æ˜¯ï¼ˆæˆ–Yesï¼‰å³å¯ã€‚5.è‹¥èƒ½æ­£å¸¸è®¿é—®ï¼Œè¿”å›ç¬¬ä¸€æ­¥ï¼Œæ ¹æ®ç¬¬äºŒæ­¥çš„æ“ä½œå°†åŸport 22æ•´æ®µæ³¨é‡Šæˆ–åˆ æ‰ï¼Œå†æŒ‰ç¬¬ä¸‰æ­¥é‡å¯SSHå³å¯ã€‚ä»¥ä¸Šæ­¥éª¤é‡å¯åä½¿ç”¨é»˜è®¤22å·ç«¯å£æ— æ³•è¿›å…¥SSHï¼Œè¾¾åˆ°ç›®çš„ã€‚ã€è¯·æ³¨æ„ã€‘ï¼šå¦‚æœæ‚¨å¯ç”¨äº†é˜²ç«å¢™iptablesï¼Œé‚£ä¹ˆå¿…é¡»å…ˆæ·»åŠ æ–°å¼€çš„33322ç«¯å£è¡¥å……ï¼šiptableså¼€æ”¾ç«¯å£ç«¯ç¤ºä¾‹ä¸ºäº†æ–¹ä¾¿ä¸¾ä¾‹è¯´æ˜ï¼Œå°±ç›´æ¥æ‹¿æ¥ä¸€æ®µæˆ‘çš„ç°æœ‰æœåŠ¡å™¨ä¸Šè¿è¡Œçš„é˜²ç«å¢™iptableså†…å®¹ã€‚ è¯·æ³¨æ„ï¼šåé¢çš„æ³¨é‡Šè¯´æ˜æ–‡å­—ï¼š 1234567891011121314151617vim /etc/sysconfig/iptables# Firewall configuration written by system-config-firewall# Manual customization of this file is not recommended.*filter:INPUT ACCEPT [0:0]:FORWARD ACCEPT [0:0]:OUTPUT ACCEPT [0:0]-A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT-A INPUT -p icmp -j ACCEPT-A INPUT -i lo -j ACCEPT-A INPUT -m state --state NEW -m tcp -p tcp --dport 22 -j ACCEPT # ï¼ˆsshç«¯å£ï¼‰-A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT # ï¼ˆwebç«¯å£ï¼‰-A INPUT -m state --state NEW -m tcp -p tcp --dport 21 -j ACCEPT # ï¼ˆftpç«¯å£ï¼‰-A INPUT -j REJECT --reject-with icmp-host-prohibited-A FORWARD -j REJECT --reject-with icmp-host-prohibitedCOMMIT ä¿®æ”¹å®Œé˜²ç«å¢™iptablesåï¼Œéœ€è¦é‡æ–°å¯åŠ¨ï¼š 123/etc/init.d/iptables restart# æˆ–è€…service iptables restart æ³¨æ„ï¼šiptablesé…ç½®æ–‡ä»¶å­˜æ”¾ä½ç½®æ˜¯ï¼š/etc/sysconfig/iptablesä¿å­˜å‘½ä»¤ï¼šservice iptables saveä½¿ç”¨å‘½ä»¤ï¼šiptables -L -n å¯ä»¥æŸ¥çœ‹å½“å‰iptablesçš„å¼€æ”¾ç«¯å£æƒ…å†µã€‚","categories":[],"tags":[{"name":"linux","slug":"linux","permalink":"https://ydstudios.gitee.io/tags/linux/"}]},{"title":"è¿…æœ(xunsearch) å¤šå€¼å±æ€§çš„å¤„ç†","slug":"è¿…æœ-xunsearch-å¤šå€¼å±æ€§çš„å¤„ç†","date":"2017-12-04T23:18:36.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/10379547.html","link":"","permalink":"https://ydstudios.gitee.io/post/10379547.html","excerpt":"æˆ‘ä¹‹å‰ä½¿ç”¨Yii2æ¡†æ¶åšäº†ä¸€ä¸ªç”µå½±ç½‘ç«™dy360.net,ç½‘ç«™çš„æœç´¢æ˜¯é€šè¿‡MySQLçš„likeå®ç°ï¼Œæœç´¢çš„æ¡ä»¶å¾ˆå¤šï¼Œæ‹…å¿ƒä»¥åæ•°æ®è¶Šæ¥è¶Šå¤šï¼Œä¼šæ‹–å®ç½‘ç«™çš„é€Ÿåº¦ï¼Œäºæ˜¯æƒ³é€šè¿‡æœç´¢å¼•æ“æ¥è§£å†³ï¼ å¼€å§‹å‡†å¤‡ä½¿ç”¨sphinxï¼Œç ”ç©¶å‘ç°ä¸å¤ªå¥½ä½¿ã€‚åå‘ç°è¿…æœ(xunsearch)ï¼Œæ–‡æ¡£æ¯”è¾ƒæ¸…æ¥šï¼Œä¸Šæ‰‹æ¯”è¾ƒç®€å•ï¼Œå¹¶ä¸”æœ‰Yii2çš„composeråŒ…ï¼Œäºæ˜¯å†³å®šä½¿ç”¨è¿…æœã€‚","text":"æˆ‘ä¹‹å‰ä½¿ç”¨Yii2æ¡†æ¶åšäº†ä¸€ä¸ªç”µå½±ç½‘ç«™dy360.net,ç½‘ç«™çš„æœç´¢æ˜¯é€šè¿‡MySQLçš„likeå®ç°ï¼Œæœç´¢çš„æ¡ä»¶å¾ˆå¤šï¼Œæ‹…å¿ƒä»¥åæ•°æ®è¶Šæ¥è¶Šå¤šï¼Œä¼šæ‹–å®ç½‘ç«™çš„é€Ÿåº¦ï¼Œäºæ˜¯æƒ³é€šè¿‡æœç´¢å¼•æ“æ¥è§£å†³ï¼ å¼€å§‹å‡†å¤‡ä½¿ç”¨sphinxï¼Œç ”ç©¶å‘ç°ä¸å¤ªå¥½ä½¿ã€‚åå‘ç°è¿…æœ(xunsearch)ï¼Œæ–‡æ¡£æ¯”è¾ƒæ¸…æ¥šï¼Œä¸Šæ‰‹æ¯”è¾ƒç®€å•ï¼Œå¹¶ä¸”æœ‰Yii2çš„composeråŒ…ï¼Œäºæ˜¯å†³å®šä½¿ç”¨è¿…æœã€‚ ä½¿ç”¨çš„è¿‡ç¨‹ä¸­é‡åˆ°è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼šä¸€éƒ¨ç”µå½±æœ‰å¤šä¸ªæ¼”å‘˜ï¼Œå‡ºå“å›½å®¶æˆ–åœ°åŒºï¼Œå…¶å®å°±æ˜¯æ–‡æ¡£çš„å¤šå€¼å±æ€§çš„æ–°å»ºã€æœç´¢çš„é—®é¢˜ã€‚æˆ‘ç ”ç©¶äº†ä¸€ä¸‹ï¼Œæœ€ç»ˆç»“å±€æ–¹æ¡ˆå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536#é¡¹ç›®çš„é…ç½®æ–‡ä»¶project.name = yddyproject.default_charset = utf-8server.index = 8383server.search = 8384[id]type = idphrase = yes[summary]type = bodycutlen=900[year]type = numericphrase = yesindex = self [actors_text]type = stringindex = selftokenizer = split(/)[category_id]type = stringindex = selftokenizer = split(,)[country_id]type = stringindex = selftokenizer = split(,)phrase = yes å…¶å®å°±æ˜¯ä½¿ç”¨è¿…æœçš„tokenizeråˆ†è¯å™¨ï¼Œæ–‡æ¡£ä¸Šå…·ä½“çš„è¯­æ³•å¦‚ä¸‹ï¼š 1234567891011tokenizer åˆ†è¯å™¨é»˜è®¤ä¸º default é‡‡ç”¨å†…ç½®çš„åŠŸèƒ½å¼ºå¤§çš„ scws åˆ†è¯ï¼Œé€‚åˆç»å¤§å¤šæ•°å­—ç¬¦ä¸²å­—æ®µã€‚ä¹Ÿå¯ä»¥æŒ‡å®šè‡ªå®šä¹‰åˆ†è¯å™¨ï¼Œ æ ¼å¼ä¸º name æˆ– name(arg) ä¸¤ç§å½¢å¼ï¼Œå…¶ä¸­ name æ˜¯åˆ†è¯å™¨åç§°ï¼Œarg åˆ™æ˜¯ä¼ é€’ç»™åˆ†è¯å™¨æ„é€ å‡½æ•°çš„å‚æ•°ã€‚ è‡ªå®šä¹‰åˆ†è¯å™¨éœ€è¦åœ¨ lib/ ç›®å½•ä¸‹ç¼–å†™åä¸º XSTokenizerName çš„åˆ†è¯ç±»å¹¶å®ç°æ¥å£ XSTokenizerï¼Œ å†…ç½®æ”¯æŒçš„åˆ†è¯å™¨æœ‰ä»¥ä¸‹å‡ ç§ï¼šfull è¡¨ç¤ºæœ¬å­—æ®µçš„å€¼æ•´ä½“ä½œä¸ºä¸€ä¸ªæ£€ç´¢è¯ï¼Œåƒå„ç§ ID éƒ½é€‚åˆè¿™ç§æƒ…å†µnone è¡¨ç¤ºæœ¬å­—æ®µæ²¡æœ‰ä»»ä½•è¯æ±‡ç”¨äºç´¢å¼•split([ ]) è¡¨ç¤ºæ ¹æ®å‚æ•°åˆ†å‰²å†…å®¹ï¼Œé»˜è®¤å‚æ•°ä¸ºç©ºæ ¼ï¼Œè‹¥å‚æ•°ä»¥ / å¼€å¤´å¹¶ä»¥ / ç»“å°¾åˆ™ å†…éƒ¨è°ƒç”¨ preg_split(arg, ..) æ¥åˆ†å‰²å–è¯ï¼Œä»¥æ”¯æŒæ­£åˆ™æˆ–å…¶å®ƒç‰¹æ®Šå­—ç¬¦åˆ†å‰²xlen([2]) è¡¨ç¤ºæ ¹æ®æŒ‡å®šå‚æ•°é•¿åº¦åˆ†æ®µå–è¯ï¼Œå¦‚ ABCDEF =&gt; AB + CD + EFxstep([2]) è¡¨ç¤ºæ ¹æ®æŒ‡å®šå‚æ•°æ­¥é•¿é€æ®µå–è¯ï¼Œå¦‚ ABCDEF =&gt; AB + ABCD + ABCDEFscws([3]) è¡¨ç¤ºé‡‡ç”¨æŒ‡å®šå‚æ•°ä¸ºå¤åˆç­‰çº§çš„ scws åˆ†è¯ï¼Œï¼ˆè‹¥æ— ç‰¹æ®Šå¤åˆéœ€æ±‚ï¼Œæ— éœ€æŒ‡å®šï¼‰tokenizer = default ç„¶åï¼Œæ ¹æ®ä¸åŒæƒ…å†µä½¿ç”¨ä¸åŒçš„åˆ†å‰²å‚æ•°ï¼Œè­¬å¦‚ï¼Œæœ‰çš„ä½¿ç”¨â€™/â€˜ï¼Œæœ‰çš„ä½¿ç”¨â€™,â€™ã€‚æœ€åï¼Œæœç´¢ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637public static function search($params)&#123; $db = Yii::$app-&gt;xunsearch-&gt;getDatabase('yddy'); $xs = $db-&gt;xs; $search = $xs-&gt;getSearch(); $keywords = $params['word']; if(empty($keywords))&#123; $keywords =''; &#125; $search = $search-&gt;setQuery($keywords); if($category=$params['category'])&#123; $search-&gt;addQueryTerm('category_id',$category); &#125; if($country=$params['country'])&#123; $search-&gt;addQueryTerm('country_id',$country); &#125; if( (empty($params['other']) ) &amp;&amp; ($year = intval($params['year'])) &amp;&amp; is_numeric($params['year']))&#123; $search-&gt;addQueryTerm('year',$year); &#125;elseif(($params['other'] == 'ago') &amp;&amp; ($year = intval($params['year'])) )&#123; //$search-&gt;addRange('year',1900,1978); $search-&gt;addRange('year',1900,$year); &#125; if( $rating=intval($params['rating']))&#123; $search-&gt;addQueryTerm('rate', $rating); &#125; $search-&gt;addQueryTerm('subtype',$params['subtype']); //$search-&gt;addQueryTerm('status',1); //echo $search-&gt;getQuery(); return $search; &#125;","categories":[],"tags":[{"name":"linux","slug":"linux","permalink":"https://ydstudios.gitee.io/tags/linux/"},{"name":"xunsearch","slug":"xunsearch","permalink":"https://ydstudios.gitee.io/tags/xunsearch/"}]},{"title":"Centos6.9ä¸Šæ­å»ºlnmpç¯å¢ƒ","slug":"Centos6-9ä¸Šæ­å»ºlnmpç¯å¢ƒ","date":"2017-11-29T23:17:13.000Z","updated":"2020-12-06T14:01:31.000Z","comments":true,"path":"post/123335f3.html","link":"","permalink":"https://ydstudios.gitee.io/post/123335f3.html","excerpt":"æˆ‘å‡†å¤‡æŠŠä¹‹å‰åšçš„www.dy360.neté‡æ–°æèµ·æ¥ï¼Œå°±åœ¨vulträ¸Šä¹°äº†vpsï¼Œäºæ˜¯ä¹æœ‰äº†ä¸‹é¢è¿™ç¯‡æ–‡ç« ã€‚åœ¨vpsä¸Šç³»ç»Ÿæ˜¯Centos6.9ï¼Œè‡³äºä¸ºä»€ä¹ˆä½¿ç”¨Centosï¼Œé‚£æ˜¯å› ä¸ºæˆ‘ä¸ªäººæ¯”è¾ƒç†Ÿæ‚‰Centosï¼","text":"æˆ‘å‡†å¤‡æŠŠä¹‹å‰åšçš„www.dy360.neté‡æ–°æèµ·æ¥ï¼Œå°±åœ¨vulträ¸Šä¹°äº†vpsï¼Œäºæ˜¯ä¹æœ‰äº†ä¸‹é¢è¿™ç¯‡æ–‡ç« ã€‚åœ¨vpsä¸Šç³»ç»Ÿæ˜¯Centos6.9ï¼Œè‡³äºä¸ºä»€ä¹ˆä½¿ç”¨Centosï¼Œé‚£æ˜¯å› ä¸ºæˆ‘ä¸ªäººæ¯”è¾ƒç†Ÿæ‚‰Centosï¼ yumå®‰è£…Nginx1.æ‰§è¡Œä¸‹é¢çš„yumå‘½ä»¤å®‰è£…Nginx 1yum install nginx å¦‚æœä¸Šé¢å‘½ä»¤æ²¡æœ‰æ‰§è¡ŒæˆåŠŸï¼Œè¯´æ˜ç³»ç»Ÿä¸­yumæºä¸­æ²¡æœ‰Nginxçš„æºï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨æ·»åŠ Nginxçš„æºï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š 123456789101112vi /etc/yum.repos.d/nginx.repoè¾“å…¥ä¸€ä¸‹å†…å®¹ï¼š[nginx]name=nginx repobaseurl=http://nginx.org/packages/mainline/centos/6/$basearch/gpgcheck=0enabled=1ä¿å­˜ä¹‹åæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æ›´æ–°æºyum clean allyum update 2.å¯åŠ¨Nginx 1service nginx start ç°åœ¨Nginxå·²ç»å¯åŠ¨äº†ï¼Œç›´æ¥è®¿é—®æœåŠ¡å™¨å°±èƒ½çœ‹åˆ°Nginxæ¬¢è¿é¡µé¢äº†çš„ã€‚å¦‚æœè¿˜æ— æ³•è®¿é—®ï¼Œåˆ™éœ€é…ç½®ä¸€ä¸‹Linuxé˜²ç«å¢™ã€‚3.é…ç½®é˜²ç«å¢™,å¼€æ”¾80ç«¯å£ 12345678vim /etc/sysconfig/iptables-A INPUT -p tcp -m state --state NEW -m tcp --dport 22 -j ACCEPT#å¤åˆ¶ä¸Šé¢ä¸€è¡Œï¼Œå°†22æ”¹æˆ80,ä¿å­˜å³å¯-A INPUT -p tcp -m state --state NEW -m tcp --dport 80 -j ACCEPT#æœ€å¥½é‡å¯ä¸€ä¸‹é˜²ç«å¢™service iptables restart æ³¨æ„ï¼šå¦‚æœæ˜¯é˜¿é‡Œäº‘çš„ecs,ä½ å¯èƒ½éœ€è¦åœ¨é˜¿é‡Œäº‘çš„ä¸»æœºç®¡ç†åå°ï¼Œæ·»åŠ å®‰å…¨ç»„è§„åˆ™ï¼Œæ–¹å¯å¼€å¯80ç«¯å£ 4.è®¾ç½®å¼€æœºå¯åŠ¨ 12chkconfig --list | grep nginxchkconfig nginx on ENDï¼šNginxå®‰è£…é…ç½®å®Œæˆ yum å®‰è£…MySQL5.6å‚è€ƒ: https://www.cnblogs.com/007sx/p/7083143.html1.æ£€æŸ¥ç³»ç»Ÿæ˜¯å¦å®‰è£…å…¶ä»–ç‰ˆæœ¬çš„MYSQLæ•°æ® 12yum list installed | grep mysqlyum -y remove mysql-libs.x86_64 2.é…ç½®MySQLæº 123wget http://repo.mysql.com/mysql-community-release-el6-5.noarch.rpmrpm -ivh mysql-community-release-el6-5.noarch.rpmyum repolist all | grep mysql 3.å®‰è£…MYSQLæ•°æ®åº“ 1yum install mysql-community-server -y 4.è®¾ç½®ä¸ºå¼€æœºå¯åŠ¨(2ã€3ã€4éƒ½æ˜¯onä»£è¡¨å¼€æœºè‡ªåŠ¨å¯åŠ¨) 12chkconfig --list | grep mysqldchkconfig mysqld on5.å¯åŠ¨mysql 1234567891011121314151617181920212223242526272829303132333435363738 service mysqld start # æ˜¾ç¤ºå¦‚å›¾ï¼ˆéƒ¨åˆ†ï¼‰ PLEASE REMEMBER TO SET A PASSWORD FOR THE MySQL root USER !To do so, start the server, then issue the following commands: /usr/bin/mysqladmin -u root password 'new-password' /usr/bin/mysqladmin -u root -h vultr password 'new-password'Alternatively you can run: /usr/bin/mysql_secure_installationwhich will also give you the option of removing the testdatabases and anonymous user created by default. This isstrongly recommended for production servers.See the manual for more instructions.Please report any problems at http://bugs.mysql.com/The latest information about MySQL is available on the web at http://www.mysql.comSupport MySQL by buying support/licenses at http://shop.mysql.comNote: new default config file not created.Please make sure your config file is currentWARNING: Default config file /etc/my.cnf exists on the systemThis file will be read by default by the MySQL serverIf you do not want to use this, either remove it, or use the--defaults-file argument to mysqld_safe when starting the server [ OK ]Starting mysqld: [ OK ]6.è®¾ç½®mysqlå¯†ç  1/usr/bin/mysqladmin -u root password 'xxxxx' å®‰å…¨å¤„ç†,çœ‹ä¸æ‡‚è‹±æ–‡ç›´æ¥ä¸€è·¯yeså°±è¡Œ 1/usr/bin/mysql_secure_installation[æ³¨æ„]2017/12/24æ›´æ–°ï¼š 12345678910111213141516171819202122ä»Šæ—¥å®‰è£…MySQLæ‰§è¡Œä¸Šé¢çš„å‘½ä»¤çš„æ—¶å€™å‡ºç°ä¸‹é¢çš„è¯In order to log into MySQL to secure it, we'll need the currentpassword for the root user. If you've just installed MySQL, andyou haven't set the root password yet, the password will be blank,so you should just press enter here.Enter current password for root (enter for none): OK, successfully used password, moving on...Setting the root password ensures that nobody can log into the MySQLroot user without the proper authorisation.You already have a root password set, so you can safely answer 'n'.Change the root password? [Y/n] YNew password: Re-enter new password: Password updated successfully!Reloading privilege tables.. ... Success!æ„æ€æ˜¯rootç”¨æˆ·è®¾ç½®å¯†ç ï¼Œä¹‹å‰æˆ‘ä»¬å·²ç»è®¾ç½®è¿‡äº†ï¼Œè¿™ä¸ªåœ°æ–¹è¾“å…¥â€œnoâ€å³å¯ï¼Œä¸ç„¶ä½ è¿˜è¦é‡æ–°è®¾ç½®rootç”¨æˆ·å¯†ç ã€‚ 7.è®¾ç½®utf-8ç¼–ç  1234567891011121314æŸ¥çœ‹mysqlåŸæœ¬ç¼–ç ï¼šmysql&gt; show variables like 'character%';+--------------------------+----------------------------+| Variable_name | Value |+--------------------------+----------------------------+| character_set_client | utf8 || character_set_connection | utf8 || character_set_database | latin1 || character_set_filesystem | binary || character_set_results | utf8 || character_set_server | latin1 || character_set_system | utf8 || character_sets_dir | /usr/share/mysql/charsets/ |+--------------------------+----------------------------+ ç¼–è¾‘mysqlçš„é…ç½®æ–‡ä»¶/etc/my.cnf 123456789101112131415161718192021222324252627282930313233343536373839vi /etc/my.cnf[mysqld]character-set-server=utf8 collation-server=utf8_general_ci sql_mode='NO_ENGINE_SUBSTITUTION'[mysql]default-character-set = utf8[mysql.server]default-character-set = utf8[mysqld_safe]default-character-set = utf8[client]default-character-set = utf8#é‡å¯mysqlservice mysqld restart#å†æ¬¡æŸ¥çœ‹mysql&gt; show variables like 'character%';+--------------------------+----------------------------+| Variable_name | Value |+--------------------------+----------------------------+| character_set_client | utf8 || character_set_connection | utf8 || character_set_database | utf8 || character_set_filesystem | binary || character_set_results | utf8 || character_set_server | utf8 || character_set_system | utf8 || character_sets_dir | /usr/share/mysql/charsets/ |+--------------------------+----------------------------+ END:åˆ°æ­¤MySQLå®‰è£…é…ç½®æˆåŠŸ ç¼–è¯‘å®‰è£…PHP7.0.26å‚è€ƒï¼š https://segmentfault.com/a/1190000005005068 http://blog.csdn.net/tomspcc/article/details/71080991 1.å®‰è£…PHPæ”¯æŒåº“ 1yum install gcc gcc-c++ libmcrypt-devel mhash-devel libxslt-devel libjpeg libjpeg-devel libpng libpng-devel freetype freetype-devel libxml2 libxml2-devel zlib zlib-devel glibc glibc-devel glib2 glib2-devel bzip2 bzip2-devel ncurses ncurses-devel curl curl-devel e2fsprogs e2fsprogs-devel krb5 krb5-devel libidn libidn-devel openssl openssl-devel php-mcrypt ####2.ä¸‹è½½PHP7.0.26æºç åŒ… 1wget http://sg2.php.net/distributions/php-7.0.26.tar.gz 3.ç¼–è¯‘å®‰è£…PHP 12345678910111213141516171819202122232425262728293031323334353637383940414243444546./configure \\--prefix=/usr/local/php \\--exec-prefix=/usr/local/php \\--bindir=/usr/local/php/bin \\--with-fpm-user=www \\--with-fpm-group=www \\--sbindir=/usr/local/php/sbin \\--includedir=/usr/local/php/include \\--libdir=/usr/local/php/lib/php \\--mandir=/usr/local/php/php/man \\--with-config-file-path=/usr/local/php/etc \\--with-mcrypt=/usr/include \\--with-mhash \\--with-openssl \\--with-mysqli=shared,mysqlnd \\--with-pdo-mysql=shared,mysqlnd \\--with-gd \\--with-iconv \\--with-zlib \\--enable-zip \\--enable-inline-optimization \\--disable-debug \\--disable-rpath \\--enable-shared \\--enable-xml \\--enable-bcmath \\--enable-shmop \\--enable-sysvsem \\--enable-mbregex \\--enable-mbstring \\--enable-ftp \\--enable-gd-native-ttf \\--enable-pcntl \\--enable-sockets \\--with-xmlrpc \\--enable-soap \\--without-pear \\--with-gettext \\--enable-session \\--with-curl \\--with-jpeg-dir \\--with-freetype-dir \\--enable-opcache \\--enable-fpm \\--without-gdbm \\--disable-fileinfo ç¼–è¯‘æŠ¥ä¸‹é¢çš„é”™è¯¯ 123checking for stdarg.h... (cached) yeschecking for mcrypt support... yesconfigure: error: mcrypt.h not found. Please reinstall libmcrypt. æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å®‰è£…libmcrypet 1yum install libmcrypt-devel -y è‹¥ä¸Šé¢çš„æ–¹æ³•è§£å†³ä¸äº†ï¼Œå¯ä»¥ç¼–è¯‘å®‰è£…libmcrypet 1234567cd /usr/local/srcwget http://softlayer.dl.sourceforge.net/sourceforge/mcrypt/libmcrypt-2.5.8.tar.gztar -zxvf libmcrypt-2.5.8.tar.gzcd /usr/local/src/libmcrypt-2.5.8./configure --prefix=/usr/localmakemake install ä¸Šé¢çš„æ–¹æ³•è¦æ˜¯è¿˜æ˜¯ä¸è¡Œï¼Œé‚£ç”¨ä¸‹é¢çš„æ–¹æ³•ï¼š 12345å®‰è£…ç¬¬ä¸‰æ–¹yumæºwget http://www.atomicorp.com/installers/atomicsh ./atomicyum install libmcrypt-devel -y 4.æœ€åæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå®ŒæˆPHPçš„å®‰è£… 12make make install 5.é…ç½®PHP-FPM å¢åŠ ç”¨æˆ·&amp;ç”¨æˆ·ç»„ 12groupadd wwwuseradd -g www www æ‹·è´php-fpm.confæ–‡ä»¶ 1cp /usr/local/php/etc/php-fpm.conf.default /usr/local/php/etc/php-fpm.conf æ‹·è´php-fpm includeæ–‡ä»¶ 1cp usr/local/php/etc/php-fpm.d/www.conf.default www.conf ä»æºç åŒ…é‡Œæ‹·è´php.ini 1cp /usr/local/src/php-7.0.26/php.ini-production /usr/local/php/etc/php.ini 6.å°†PHPåŠ å…¥ç¯å¢ƒå˜é‡ 1234vi /etc/profileexport PATH=$PATH:/usr/local/php/binsource /etc/profile 7.php-fpmè‡ªå¯åŠ¨ ä»æºç åŒ…é‡Œæ‹·è´å¯åŠ¨è„šæœ¬1cp sapi/fpm/init.d.php-fpm /etc/init.d/php-fpm åŠ å…¥ç³»ç»Ÿå¯åŠ¨é¡¹1chkconfig php-fpm on 8.é‡å¯PHP 1service php-fpm restart END:PHPå®‰è£…é…ç½®å®Œæˆ ç¼–è¯‘å®‰è£…gitå‚è€ƒ:http://www.cnblogs.com/fazo/p/5578644.html 1.å®‰è£…ä¾èµ–çš„åŒ… 1yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel gcc perl-ExtUtils-MakeMaker 2.ä¸‹è½½æºç åŒ… 123wget https://github.com/git/git/archive/v2.9.0.zipunzip v2.9.0.zipcd git-2.9.0 3.ç¼–è¯‘å®‰è£… 12make prefix=/usr/local/git allmake prefix=/usr/local/git install 4.åŠ å…¥ç³»ç»Ÿå˜é‡ 12vi /etc/profile export PATH=/usr/local/git/bin:$PATH 5.é…ç½®git 123git config --global user.name 'vultr'git config --global user.email 'vultr@dy360.net' 'vultr@dy360.net'git config --global credential.helper store #ä¿å­˜å¯†ç  6.ç”Ÿæˆsshå¯†é’¥,æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œä¸€è·¯å›è½¦å³å¯ï¼Œå³å¯ç”¨å¯†é’¥å…‹éš†é¡¹ç›®ã€‚ 1ssh-keygen -t rsa -C 'vultr@dy360.net' END:gitå®‰è£…é…ç½®æˆåŠŸ æœ€åï¼Œç»ˆäºç¯å¢ƒæ­å»ºå¥½äº†ï¼è‡ªå·±æ­å»ºlnmpç¯å¢ƒå°‘è¯´ä¹Ÿæœ‰åå‡ æ¬¡äº†ï¼Œå¯æ˜¯æ¯æ¬¡éƒ½æœ‰æ–°æ„Ÿè§‰ï¼å› ä¸ºæ¯æ¬¡å‡ºç°çš„é—®é¢˜ï¼Œéƒ½ä¸å¤ªä¸€æ ·ï¼æœ€è¿‘ä¸¤æ¬¡éƒ½å‡ºç°äº†Nginxå®‰è£…åï¼Œé€šè¿‡ipä¸èƒ½è®¿é—®çš„é—®é¢˜ï¼Œç»“æœå‘ç°éƒ½æ˜¯é˜²ç«å¢™çš„é—®é¢˜ï¼Œæ²¡æœ‰å¼€å¯80ç«¯å£ã€‚å‘çš„è¦å‘½ï¼","categories":[],"tags":[{"name":"linux","slug":"linux","permalink":"https://ydstudios.gitee.io/tags/linux/"},{"name":"git","slug":"git","permalink":"https://ydstudios.gitee.io/tags/git/"},{"name":"php","slug":"php","permalink":"https://ydstudios.gitee.io/tags/php/"},{"name":"nginx","slug":"nginx","permalink":"https://ydstudios.gitee.io/tags/nginx/"},{"name":"mysql","slug":"mysql","permalink":"https://ydstudios.gitee.io/tags/mysql/"}]},{"title":"tar åˆ†å·å‹ç¼©å’Œè§£å‹","slug":"tar-åˆ†å·å‹ç¼©å’Œè§£å‹","date":"2017-11-27T23:16:14.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/4aac2ff2.html","link":"","permalink":"https://ydstudios.gitee.io/post/4aac2ff2.html","excerpt":"tar æœ¬èº«ä¸ºä¸€ä¸ªæ‰“åŒ…å·¥å…·ï¼Œå¯ä»¥æŠŠç›®å½•æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶ï¼Œå®ƒçš„å¥½å¤„æ˜¯å®ƒæŠŠæ‰€æœ‰æ–‡ä»¶æ•´åˆæˆä¸€ä¸ªå¤§æ–‡ä»¶æ•´ä½“ï¼Œæ–¹ä¾¿æ‹·è´æˆ–è€…ç§»åŠ¨ã€‚","text":"tar æœ¬èº«ä¸ºä¸€ä¸ªæ‰“åŒ…å·¥å…·ï¼Œå¯ä»¥æŠŠç›®å½•æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶ï¼Œå®ƒçš„å¥½å¤„æ˜¯å®ƒæŠŠæ‰€æœ‰æ–‡ä»¶æ•´åˆæˆä¸€ä¸ªå¤§æ–‡ä»¶æ•´ä½“ï¼Œæ–¹ä¾¿æ‹·è´æˆ–è€…ç§»åŠ¨ã€‚ 123456789101112131415161718192021è¯­æ³•ï¼štar [-zjxcvfpP] filename,tarå‘½ä»¤æœ‰å¤šä¸ªé€‰é¡¹ï¼Œå…¶ä¸­ä¸å¸¸ç”¨çš„åšäº†æ ‡æ³¨ã€‚â€œ-zâ€ : åŒæ—¶ç”¨gzipå‹ç¼©â€œ-jâ€ : åŒæ—¶ç”¨bzip2å‹ç¼©â€œ-xâ€ : è§£åŒ…æˆ–è€…è§£å‹ç¼©â€œ-tâ€ : æŸ¥çœ‹taråŒ…é‡Œé¢çš„æ–‡ä»¶â€œ-câ€ : å»ºç«‹ä¸€ä¸ªtaråŒ…æˆ–è€…å‹ç¼©æ–‡ä»¶åŒ…â€œ-vâ€ : å¯è§†åŒ–â€œ-fâ€ : åé¢è·Ÿæ–‡ä»¶åï¼Œå‹ç¼©æ—¶è·Ÿ â€œ-f æ–‡ä»¶åâ€ï¼Œæ„æ€æ˜¯å‹ç¼©åçš„æ–‡ä»¶åä¸ºfilename, è§£å‹æ—¶è·Ÿ â€œ-f æ–‡ä»¶åâ€ï¼Œæ„æ€æ˜¯è§£å‹filename. è¯·æ³¨æ„ï¼Œå¦‚æœæ˜¯å¤šä¸ªå‚æ•°ç»„åˆçš„æƒ…å†µä¸‹å¸¦æœ‰ â€œ-fâ€ï¼Œè¯·æŠŠ â€œ-fâ€ å†™åˆ°æœ€åé¢ã€‚â€œ-pâ€ : ä½¿ç”¨åŸæ–‡ä»¶çš„å±æ€§ï¼Œå‹ç¼©å‰ä»€ä¹ˆå±æ€§å‹ç¼©åè¿˜ä»€ä¹ˆå±æ€§ã€‚ï¼ˆä¸å¸¸ç”¨ï¼‰â€œ-Pâ€ : å¯ä»¥ä½¿ç”¨ç»å¯¹è·¯å¾„ã€‚ï¼ˆä¸å¸¸ç”¨ï¼‰--exclude filename : åœ¨æ‰“åŒ…æˆ–è€…å‹ç¼©æ—¶ï¼Œä¸è¦å°†filenameæ–‡ä»¶åŒ…æ‹¬åœ¨å†…ã€‚ï¼ˆä¸å¸¸ç”¨ï¼‰ é‚£å¦‚ä½•åˆ†å·è§£å‹ç¼©å‘¢ï¼Ÿ å‡å¦‚è¦å°†ç›®å½•logsæ‰“åŒ…å‹ç¼©å¹¶åˆ†å‰²æˆå¤šä¸ª1Mçš„æ–‡ä»¶ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼š 12345678910111213141516tar cjf - logs/ |split -b 1m - logs.tar.bz2å®Œæˆåä¼šäº§ç”Ÿä¸‹åˆ—æ–‡ä»¶ï¼šlogs.tar.bz2.aa, logs.tar.bz2.ab, logs.tar.bz2.acè¦è§£å‹çš„æ—¶å€™åªè¦æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å°±å¯ä»¥äº†ï¼šcat logs.tar.bz2.a* | tar xjå†ä¸¾ä¾‹ï¼šè¦å°†æ–‡ä»¶test.pdfåˆ†åŒ…å‹ç¼©æˆ500 bytesçš„æ–‡ä»¶ï¼štar czf - test.pdf | split -b 500 - test.tar.gzæœ€åè¦æé†’ä½†æ˜¯é‚£ä¸¤ä¸ª\"-\"ä¸è¦æ¼äº†ï¼Œé‚£æ˜¯tarçš„ouputå’Œsplitçš„inputçš„å‚æ•°ã€‚tar cjf - logs/ |split -b 1m - logs.tar.bz2.å®Œæˆåä¼šäº§ç”Ÿä¸‹åˆ—æ–‡ä»¶ï¼šlogs.tar.bz2.aa, logs.tar.bz2.ab, logs.tar.bz2.acè¦è§£å‹çš„æ—¶å€™åªè¦æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å°±å¯ä»¥äº†ï¼šcat logs.tar.bz2.a* | tar xj","categories":[],"tags":[{"name":"linux","slug":"linux","permalink":"https://ydstudios.gitee.io/tags/linux/"}]},{"title":"å¦‚ä½•å¼ºåˆ¶å…¨ç«™httpsè®¿é—®","slug":"å¦‚ä½•å¼ºåˆ¶å…¨ç«™httpsè®¿é—®","date":"2017-11-23T23:12:52.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/773d918c.html","link":"","permalink":"https://ydstudios.gitee.io/post/773d918c.html","excerpt":"ä»Šå¤©åœ¨é˜¿é‡Œäº‘ä¸Šæäº†ä¸€ä¸ªå…è´¹çš„httpsè¯ä¹¦ï¼Œäºæ˜¯å°±åœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸Šå®‰è£…äº†ä¸€ä¸‹ï¼Œé…ç½®å¥½è¯ä¹¦ä¹‹åï¼Œå¦‚ä½•å¼ºåˆ¶å…¨ç«™httpsè®¿é—®å‘¢ï¼Ÿå…¶å®æ–¹æ³•æœ‰å¾ˆå¤šï¼Œè¿™é‡Œåªç»™å‡ºä¸¤ä¸ªæ¯”è¾ƒç®€å•çš„æ–¹æ³•ï¼š","text":"ä»Šå¤©åœ¨é˜¿é‡Œäº‘ä¸Šæäº†ä¸€ä¸ªå…è´¹çš„httpsè¯ä¹¦ï¼Œäºæ˜¯å°±åœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸Šå®‰è£…äº†ä¸€ä¸‹ï¼Œé…ç½®å¥½è¯ä¹¦ä¹‹åï¼Œå¦‚ä½•å¼ºåˆ¶å…¨ç«™httpsè®¿é—®å‘¢ï¼Ÿå…¶å®æ–¹æ³•æœ‰å¾ˆå¤šï¼Œè¿™é‡Œåªç»™å‡ºä¸¤ä¸ªæ¯”è¾ƒç®€å•çš„æ–¹æ³•ï¼š 12345#åœ¨è‡ªå·±çš„è™šæ‹Ÿä¸»æœºé…ç½®serverèŠ‚ç‚¹ä¸­æ·»åŠ ä¸‹é¢çš„ä»£ç ï¼Œä½¿ç”¨å…¶ä¸€å³å¯ã€‚#æ–¹æ³•ä¸€rewrite ^ https://$server_name$request_uri? permanent;#æ–¹æ³•äºŒreturn 301 https://$server_name$request_uri; æˆ‘ç”¨çš„æ˜¯ç¬¬ä¸€ä¸ªæ–¹æ³•ï¼Œå¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½ï¼Œæ¥å†³å®šä½¿ç”¨å“ªä¸­æ–¹æ³•ã€‚ä¸‹é¢è´´å‡ºæˆ‘è‡ªå·±ç½‘ç«™çš„é…ç½®ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253server &#123; listen 443; listen 80; server_name www.ydstudio.net; set $my_server_name $scheme://$server_name; #é˜²æ­¢ipè®¿é—®ï¼Œå¦‚http://xxx.xxx.xxx.xxxæˆ–è€…https://xxx.xxx.xxx.xxx if ( $host ~* \"\\d+\\.\\d+\\.\\d+\\.\\d+\" ) &#123; rewrite ^ https://$server_name; &#125; if ( $my_server_name != https://$server_name ) &#123; rewrite ^ https://$server_name$request_uri? permanent; &#125; location / &#123; root /usr/share/nginx/html/typecho/; try_files $uri $uri/ /index.php$is_args$args; index index.php index.html index.htm; &#125; #error_page 404 /404.html; # redirect server error pages to the static page /50x.html error_page 500 502 503 504 /50x.html; location = /50x.html &#123; root /usr/share/nginx/html; &#125; # proxy the PHP scripts to Apache listening on 127.0.0.1:80 #location ~ \\.php$ &#123; # proxy_pass http://127.0.0.1; #&#125; # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000 location ~ \\.php$ &#123; #root html; fastcgi_pass 127.0.0.1:9000; fastcgi_index index.php; fastcgi_param SCRIPT_FILENAME /usr/share/nginx/html/typecho/$fastcgi_script_name; include fastcgi_params; &#125; # deny access to .htaccess files, if Apache's document root # concurs with nginx's one #location ~ /\\.ht &#123; # deny all; #&#125; ssl on; ssl_certificate /etc/nginx/cert/214353452860792.pem; ssl_certificate_key /etc/nginx/cert/214353452860792.key; ssl_session_timeout 5m; ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_prefer_server_ciphers on;&#125;","categories":[],"tags":[{"name":"linux","slug":"linux","permalink":"https://ydstudios.gitee.io/tags/linux/"},{"name":"nginx","slug":"nginx","permalink":"https://ydstudios.gitee.io/tags/nginx/"}]},{"title":"Linuxä¸‹chkconfigå‘½ä»¤è¯¦è§£","slug":"Linuxä¸‹chkconfigå‘½ä»¤è¯¦è§£","date":"2017-11-19T23:11:31.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/a5b69b88.html","link":"","permalink":"https://ydstudios.gitee.io/post/a5b69b88.html","excerpt":"ç®€ä»‹chkconfigå‘½ä»¤æ£€æŸ¥ã€è®¾ç½®ç³»ç»Ÿçš„å„ç§æœåŠ¡ã€‚è¿™æ˜¯Red Hatå…¬å¸éµå¾ªGPLè§„åˆ™æ‰€å¼€å‘çš„ç¨‹åºï¼Œå®ƒå¯æŸ¥è¯¢æ“ä½œç³»ç»Ÿåœ¨æ¯ä¸€ä¸ªæ‰§è¡Œç­‰çº§ä¸­ä¼šæ‰§è¡Œå“ªäº›ç³»ç»ŸæœåŠ¡ï¼Œå…¶ä¸­åŒ…æ‹¬å„ç±»å¸¸é©»æœåŠ¡ã€‚è°¨è®°chkconfigä¸æ˜¯ç«‹å³è‡ªåŠ¨ç¦æ­¢æˆ–æ¿€æ´»ä¸€ä¸ªæœåŠ¡ï¼Œå®ƒåªæ˜¯ç®€å•çš„æ”¹å˜äº†ç¬¦å·è¿æ¥ã€‚","text":"ç®€ä»‹chkconfigå‘½ä»¤æ£€æŸ¥ã€è®¾ç½®ç³»ç»Ÿçš„å„ç§æœåŠ¡ã€‚è¿™æ˜¯Red Hatå…¬å¸éµå¾ªGPLè§„åˆ™æ‰€å¼€å‘çš„ç¨‹åºï¼Œå®ƒå¯æŸ¥è¯¢æ“ä½œç³»ç»Ÿåœ¨æ¯ä¸€ä¸ªæ‰§è¡Œç­‰çº§ä¸­ä¼šæ‰§è¡Œå“ªäº›ç³»ç»ŸæœåŠ¡ï¼Œå…¶ä¸­åŒ…æ‹¬å„ç±»å¸¸é©»æœåŠ¡ã€‚è°¨è®°chkconfigä¸æ˜¯ç«‹å³è‡ªåŠ¨ç¦æ­¢æˆ–æ¿€æ´»ä¸€ä¸ªæœåŠ¡ï¼Œå®ƒåªæ˜¯ç®€å•çš„æ”¹å˜äº†ç¬¦å·è¿æ¥ã€‚ ä½¿ç”¨æ–¹æ³•1234567891011121314[root@iZwz99xkrnh5xy0cqp8aofZ ~]# chkconfig --helpchkconfig version 1.3.49.5 - Copyright (C) 1997-2000 Red Hat, Inc.This may be freely redistributed under the terms of the GNU Public License.usage: chkconfig [--list] [--type &lt;type&gt;] [name] chkconfig --add &lt;name&gt; chkconfig --del &lt;name&gt; chkconfig --override &lt;name&gt; chkconfig [--level &lt;levels&gt;] [--type &lt;type&gt;] &lt;name&gt; &lt;on|off|reset|resetpriorities&gt;[root@iZwz99xkrnh5xy0cqp8aofZ ~]# --addï¼šå¢åŠ æ‰€æŒ‡å®šçš„ç³»ç»ŸæœåŠ¡ï¼Œè®©chkconfigæŒ‡ä»¤å¾—ä»¥ç®¡ç†å®ƒï¼Œå¹¶åŒæ—¶åœ¨ç³»ç»Ÿå¯åŠ¨çš„å™è¿°æ–‡ä»¶å†…å¢åŠ ç›¸å…³æ•°æ®ï¼› --delï¼šåˆ é™¤æ‰€æŒ‡å®šçš„ç³»ç»ŸæœåŠ¡ï¼Œä¸å†ç”±chkconfigæŒ‡ä»¤ç®¡ç†ï¼Œå¹¶åŒæ—¶åœ¨ç³»ç»Ÿå¯åŠ¨çš„å™è¿°æ–‡ä»¶å†…åˆ é™¤ç›¸å…³æ•°æ®ï¼› --level&lt;ç­‰çº§ä»£å·&gt;ï¼šæŒ‡å®šè¯»ç³»ç»ŸæœåŠ¡è¦åœ¨å“ªä¸€ä¸ªæ‰§è¡Œç­‰çº§ä¸­å¼€å¯æˆ–å…³æ¯•ã€‚ levelç­‰çº§ä»£å·è§£é‡Šå¦‚ä¸‹ï¼š ç­‰çº§0è¡¨ç¤ºï¼šè¡¨ç¤ºå…³æœº ç­‰çº§1è¡¨ç¤ºï¼šå•ç”¨æˆ·æ¨¡å¼ ç­‰çº§2è¡¨ç¤ºï¼šæ— ç½‘ç»œè¿æ¥çš„å¤šç”¨æˆ·å‘½ä»¤è¡Œæ¨¡å¼ ç­‰çº§3è¡¨ç¤ºï¼šæœ‰ç½‘ç»œè¿æ¥çš„å¤šç”¨æˆ·å‘½ä»¤è¡Œæ¨¡å¼ ç­‰çº§4è¡¨ç¤ºï¼šä¸å¯ç”¨ ç­‰çº§5è¡¨ç¤ºï¼šå¸¦å›¾å½¢ç•Œé¢çš„å¤šç”¨æˆ·æ¨¡å¼ ç­‰çº§6è¡¨ç¤ºï¼šé‡æ–°å¯åŠ¨ éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œlevelé€‰é¡¹å¯ä»¥æŒ‡å®šè¦æŸ¥çœ‹çš„è¿è¡Œçº§è€Œä¸ä¸€å®šæ˜¯å½“å‰è¿è¡Œçº§ã€‚å¯¹äºæ¯ä¸ªè¿è¡Œçº§ï¼Œåªèƒ½æœ‰ä¸€ä¸ªå¯åŠ¨è„šæœ¬æˆ–è€…åœæ­¢è„šæœ¬ã€‚å½“åˆ‡æ¢è¿è¡Œçº§æ—¶ï¼Œinitä¸ä¼šé‡æ–°å¯åŠ¨å·²ç»å¯åŠ¨çš„æœåŠ¡ï¼Œä¹Ÿä¸ä¼šå†æ¬¡å»åœæ­¢å·²ç»åœæ­¢çš„æœåŠ¡ã€‚ è¿è¡Œçº§æ–‡ä»¶ï¼šæ¯ä¸ªè¢«chkconfigç®¡ç†çš„æœåŠ¡éœ€è¦åœ¨å¯¹åº”çš„init.dä¸‹çš„è„šæœ¬åŠ ä¸Šä¸¤è¡Œæˆ–è€…æ›´å¤šè¡Œçš„æ³¨é‡Šã€‚ç¬¬ä¸€è¡Œå‘Šè¯‰chkconfigç¼ºçœå¯åŠ¨çš„è¿è¡Œçº§ä»¥åŠå¯åŠ¨å’Œåœæ­¢çš„ä¼˜å…ˆçº§ã€‚å¦‚æœæŸæœåŠ¡ç¼ºçœä¸åœ¨ä»»ä½•è¿è¡Œçº§å¯åŠ¨ï¼Œé‚£ä¹ˆä½¿ç”¨-ä»£æ›¿è¿è¡Œçº§ã€‚ç¬¬äºŒè¡Œå¯¹æœåŠ¡è¿›è¡Œæè¿°ï¼Œå¯ä»¥ç”¨\\è·¨è¡Œæ³¨é‡Šã€‚å¦‚ä¸‹ï¼š 123# chkconfig: 2345 20 80# description: Saves and restores system entropy pool for \\# higher quality random number generation. å®ä¾‹ï¼š 12345678chkconfig --list #åˆ—å‡ºæ‰€æœ‰çš„ç³»ç»ŸæœåŠ¡ã€‚ chkconfig --add httpd #å¢åŠ httpdæœåŠ¡ã€‚ chkconfig --del httpd #åˆ é™¤httpdæœåŠ¡ã€‚ chkconfig --level httpd 2345 on #è®¾ç½®httpdåœ¨è¿è¡Œçº§åˆ«ä¸º2ã€3ã€4ã€5çš„æƒ…å†µä¸‹éƒ½æ˜¯onï¼ˆå¼€å¯ï¼‰çš„çŠ¶æ€ã€‚ chkconfig --list #åˆ—å‡ºç³»ç»Ÿæ‰€æœ‰çš„æœåŠ¡å¯åŠ¨æƒ…å†µã€‚ chkconfig --list mysqld #åˆ—å‡ºmysqldæœåŠ¡è®¾ç½®æƒ…å†µã€‚ chkconfig --level 35 mysqld on #è®¾å®šmysqldåœ¨ç­‰çº§3å’Œ5ä¸ºå¼€æœºè¿è¡ŒæœåŠ¡ï¼Œ--level 35è¡¨ç¤ºæ“ä½œåªåœ¨ç­‰çº§3å’Œ5æ‰§è¡Œï¼Œonè¡¨ç¤ºå¯åŠ¨ï¼Œoffè¡¨ç¤ºå…³é—­ã€‚ chkconfig mysqld on #è®¾å®šmysqldåœ¨å„ç­‰çº§ä¸ºonï¼Œâ€œå„ç­‰çº§â€åŒ…æ‹¬2ã€3ã€4ã€5ç­‰çº§ã€‚ å¦‚ä½•å¢åŠ ä¸€ä¸ªæœåŠ¡ï¼š 123æœåŠ¡è„šæœ¬å¿…é¡»å­˜æ”¾åœ¨/etc/ini.d/ç›®å½•ä¸‹ï¼›chkconfig --add servicenameåœ¨chkconfigå·¥å…·æœåŠ¡åˆ—è¡¨ä¸­å¢åŠ æ­¤æœåŠ¡ï¼Œæ­¤æ—¶æœåŠ¡ä¼šè¢«åœ¨/etc/rc.d/rcN.dä¸­èµ‹äºˆK/Så…¥å£äº†ï¼›chkconfig --level 35 mysqld onä¿®æ”¹æœåŠ¡çš„é»˜è®¤å¯åŠ¨ç­‰çº§ã€‚ æ³¨æ„ æ­¤å‘½ä»¤åªèƒ½åœ¨Centos7ä»¥ä¸‹ä½¿ç”¨ï¼Œå› ä¸ºCentos7ä¸­å·²ç”±systemctlæ›¿ä»£chkconfigå‘½ä»¤","categories":[],"tags":[{"name":"linux","slug":"linux","permalink":"https://ydstudios.gitee.io/tags/linux/"}]},{"title":"Mycat æ•°æ®åº“åˆ†åº“åˆ†è¡¨ä¸­çš„å®‰è£…ä¸ä½¿ç”¨","slug":"Mycat-æ•°æ®åº“åˆ†åº“åˆ†è¡¨ä¸­çš„å®‰è£…ä¸ä½¿ç”¨","date":"2017-11-19T23:02:47.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/56117af9.html","link":"","permalink":"https://ydstudios.gitee.io/post/56117af9.html","excerpt":"Mycatéœ€è¦jdkçš„æ”¯æŒï¼Œè€Œæˆ‘çš„Macä¸­çš„jdkå·²ç»å®‰è£…å¥½äº†ï¼Œæ‰€ä»¥æ­¤æ­¥éª¤çœç•¥ï¼Œéœ€è¦å®‰è£…jdkçš„ç«¥é‹è¯·è‡ªè¡Œå®‰è£…jdkã€‚","text":"Mycatéœ€è¦jdkçš„æ”¯æŒï¼Œè€Œæˆ‘çš„Macä¸­çš„jdkå·²ç»å®‰è£…å¥½äº†ï¼Œæ‰€ä»¥æ­¤æ­¥éª¤çœç•¥ï¼Œéœ€è¦å®‰è£…jdkçš„ç«¥é‹è¯·è‡ªè¡Œå®‰è£…jdkã€‚ å®‰è£…Mycat:ç›´æ¥ä¸‹è½½è§£å‹åˆ°/usr/local/mycatç›®å½•å³å¯ï¼Œæˆ‘ä¸‹è½½çš„æ˜¯æœ€æ–°ç‰ˆ1.6ã€‚ è¿è¡Œlinuxï¼š ./mycat start å¯åŠ¨ ./mycat stop åœæ­¢ ./mycat console å‰å°è¿è¡Œ ./mycat install æ·»åŠ åˆ°ç³»ç»Ÿè‡ªåŠ¨å¯åŠ¨ï¼ˆæš‚æœªå®ç°ï¼‰ ./mycat remove å–æ¶ˆéšç³»ç»Ÿè‡ªåŠ¨å¯åŠ¨ï¼ˆæš‚æœªå®ç°ï¼‰ ./mycat restart é‡å¯æœåŠ¡ ./mycat pause æš‚åœ ./mycat status æŸ¥çœ‹å¯åŠ¨çŠ¶æ€ winï¼š ç›´æ¥è¿è¡Œstartup_nowrap.batï¼Œå¦‚æœå‡ºç°é—ªé€€ï¼Œåœ¨cmd å‘½ä»¤è¡Œè¿è¡Œï¼ŒæŸ¥çœ‹å‡ºé”™åŸå›  å†…å­˜é…ç½®ï¼šå¯åŠ¨å‰ï¼Œä¸€èˆ¬éœ€è¦ä¿®æ”¹JVMé…ç½®å‚æ•°ï¼Œæ‰“å¼€conf/wrapper.confæ–‡ä»¶ï¼Œå¦‚ä¸‹è¡Œçš„å†…å®¹ä¸º2Gå’Œ2048ï¼Œå¯æ ¹æ®æœ¬æœºé…ç½®æƒ…å†µä¿®æ”¹ä¸º512Mæˆ–å…¶å®ƒå€¼ã€‚ ä»¥ä¸‹é…ç½®è·Ÿjvmå‚æ•°å®Œå…¨ä¸€è‡´ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„jvmå‚æ•°è°ƒæ•´ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041Java Additional Parameterswrapper.java.additional.1=wrapper.java.additional.1=-DMYCAT_HOME=.wrapper.java.additional.2=-serverwrapper.java.additional.3=-XX:MaxPermSize=64Mwrapper.java.additional.4=-XX:+AggressiveOptswrapper.java.additional.5=-XX:MaxDirectMemorySize=100mwrapper.java.additional.6=-Dcom.sun.management.jmxremotewrapper.java.additional.7=-Dcom.sun.management.jmxremote.port=1984wrapper.java.additional.8=-Dcom.sun.management.jmxremote.authenticate=falsewrapper.java.additional.9=-Dcom.sun.management.jmxremote.ssl=falsewrapper.java.additional.10=-Xmx100mwrapper.java.additional.11=-Xms100mwrapper.java.additional.12=-XX:+UseParNewGCwrapper.java.additional.13=-XX:+UseConcMarkSweepGCwrapper.java.additional.14=-XX:+UseCMSCompactAtFullCollectionwrapper.java.additional.15=-XX:CMSFullGCsBeforeCompaction=0wrapper.java.additional.16=-XX:CMSInitiatingOccupancyFraction=70ä»¥ä¸‹é…ç½®ä½œåºŸï¼šwrapper.java.initmemory=3wrapper.java.maxmemory=64 Mycatè¿æ¥æµ‹è¯•ï¼šæµ‹è¯•mycatä¸æµ‹è¯•mysqlå®Œå…¨ä¸€è‡´ï¼Œmysqlæ€ä¹ˆè¿æ¥ï¼Œmycatå°±æ€ä¹ˆè¿æ¥ã€‚ æ¨èå…ˆé‡‡ç”¨å‘½ä»¤è¡Œæµ‹è¯•ï¼š 123456789101112131415sammac:local Sam$ mysql -uroot -p -P8066 Enter password: Welcome to the MySQL monitor. Commands end with ; or \\g.Your MySQL connection id is 339Server version: 5.5.48-log MySQL Community Server (GPL)Copyright (c) 2000, 2016, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.mysql&gt; å¦‚æœé‡‡ç”¨å·¥å…·è¿æ¥ï¼Œ1.4,1.3ç›®å‰éƒ¨åˆ†å·¥å…·æ— æ³•è¿æ¥ï¼Œä¼šæç¤ºdatabase not selectedï¼Œå»ºè®®é‡‡ç”¨é«˜ç‰ˆæœ¬ï¼Œnavicatæµ‹è¯•ã€‚1.5å·²ç»ä¿®å¤äº†éƒ¨åˆ†å·¥å…·è¿æ¥ æ³¨ æ–‡ç« éƒ¨åˆ†å†…å®¹è½¬è‡ªMycatå®˜ç½‘","categories":[],"tags":[{"name":"mycat","slug":"mycat","permalink":"https://ydstudios.gitee.io/tags/mycat/"},{"name":"database","slug":"database","permalink":"https://ydstudios.gitee.io/tags/database/"}]},{"title":"å®ç°MySQLä¸»ä»å¤åˆ¶","slug":"å®ç°MySQLä¸»ä»å¤åˆ¶","date":"2017-11-17T22:28:06.000Z","updated":"2020-03-15T06:10:35.000Z","comments":true,"path":"post/34c3deb2.html","link":"","permalink":"https://ydstudios.gitee.io/post/34c3deb2.html","excerpt":"å®éªŒå‡†å¤‡ï¼šåœ¨Pcä¸Šå®‰è£…ä¸¤ä¸ªMySQLï¼Œåˆ†åˆ«ç›‘å¬3307å’Œ3308ç«¯å£ï¼Œåœ¨centos7ä¸Šä¹Ÿå®‰è£…ä¸€ä¸ªMySQLï¼Œè¿™æ ·æˆ‘ä»¬å°±æœ‰ä¸‰ä¸ªslaveï¼é¦–å…ˆæˆ‘ä»¬è¦ä¿è¯4ä¸ªMySQLä¸Šçš„æ•°æ®ä¸€è‡´ï¼Œå¹¶ä¸”é…ç½®å¥½å„ä¸ªçš„æ—¥å¿—ï¼Œè¿™æ ·å³ä½¿å‡ºé”™äº†ï¼Œä¹Ÿå®¹æ˜“æ‰¾å‡ºé”™è¯¯ã€‚","text":"å®éªŒå‡†å¤‡ï¼šåœ¨Pcä¸Šå®‰è£…ä¸¤ä¸ªMySQLï¼Œåˆ†åˆ«ç›‘å¬3307å’Œ3308ç«¯å£ï¼Œåœ¨centos7ä¸Šä¹Ÿå®‰è£…ä¸€ä¸ªMySQLï¼Œè¿™æ ·æˆ‘ä»¬å°±æœ‰ä¸‰ä¸ªslaveï¼é¦–å…ˆæˆ‘ä»¬è¦ä¿è¯4ä¸ªMySQLä¸Šçš„æ•°æ®ä¸€è‡´ï¼Œå¹¶ä¸”é…ç½®å¥½å„ä¸ªçš„æ—¥å¿—ï¼Œè¿™æ ·å³ä½¿å‡ºé”™äº†ï¼Œä¹Ÿå®¹æ˜“æ‰¾å‡ºé”™è¯¯ã€‚ Slave1ï¼šMySQL3307 Slave2ï¼šMySQL3308 Slave3ï¼šCentos7ä¸Šçš„MySQL Master: è¿è¡Œåœ¨3306ç«¯å£çš„MySQL ä¿®æ”¹Masterçš„é…ç½®1234567891011[mysqld]server-id=1 //[å¿…é¡»]æœåŠ¡å™¨å”¯ä¸€IDï¼Œé»˜è®¤æ˜¯1ï¼Œå¯ä»¥éšä¾¿é…ç½®ï¼Œåªè¦ä¸é‡å¤å³å¯binlog-do-db = xxx // åŒæ­¥çš„æ•°æ®åº“åï¼Œå¦‚æœ‰å¤šä¸ªå†™å¤šè¡Œbinlog-ignore-db =mysql // ä¸éœ€è¦å¤‡ä»½çš„æ•°æ®åº“ï¼Œå¦‚æœ‰å¤šä¸ªå†™å¤šè¡Œread-only =0 // ä¸»æœºï¼Œè¯»å†™éƒ½å¯ä»¥log-bin=mysql-bin //[å¿…é¡»]å¯ç”¨äºŒè¿›åˆ¶æ—¥å¿— binlog-format =mixed // binçš„æ ¼å¼relay-log=mysql-relay // ä¸­ç»§æ—¥å¿—æ–‡ä»¶åexpire-logs-days=20 // æ—¥å¿—æœ€é•¿ä¿å­˜æ—¶é—´max_binlog_size = 100M // æ—¥å¿—æœ€å¤§å®¹é‡slave-skip-errors=all // è·³è¿‡æ‰€æœ‰é”™è¯¯ ä¿®æ”¹Slaveçš„é…ç½®1234567891011121314151617181920#MySQL3307 [mysqld] log-bin=mysql-bin //[ä¸æ˜¯å¿…é¡»]å¯ç”¨äºŒè¿›åˆ¶æ—¥å¿— server-id=3307 //[å¿…é¡»]æœåŠ¡å™¨å”¯ä¸€IDï¼Œé»˜è®¤æ˜¯1ï¼Œå¯ä»¥éšä¾¿é…ç½®ï¼Œåªè¦ä¸é‡å¤å³å¯ replicate-do-db =test // å¤åˆ¶æŸä¸ªåº“,å¦‚æœ‰å¤šä¸ªå†™å¤šè¡Œ replicate-ignore-db=mysql // ä¸å¤åˆ¶æŸä¸ªåº“,å¦‚æœ‰å¤šä¸ªå†™å¤šè¡Œ#MySQL3308[mysqld] log-bin=mysql-bin //[ä¸æ˜¯å¿…é¡»]å¯ç”¨äºŒè¿›åˆ¶æ—¥å¿— server-id=3308 //[å¿…é¡»]æœåŠ¡å™¨å”¯ä¸€IDï¼Œé»˜è®¤æ˜¯1ï¼Œå¯ä»¥éšä¾¿é…ç½®ï¼Œåªè¦ä¸é‡å¤å³å¯ replicate-do-db =test // å¤åˆ¶æŸä¸ªåº“,å¦‚æœ‰å¤šä¸ªå†™å¤šè¡Œ replicate-ignore-db=mysql // ä¸å¤åˆ¶æŸä¸ªåº“,å¦‚æœ‰å¤šä¸ªå†™å¤šè¡Œ#Centos7[mysqld] log-bin=mysql-bin //[ä¸æ˜¯å¿…é¡»]å¯ç”¨äºŒè¿›åˆ¶æ—¥å¿— server-id=3 //[å¿…é¡»]æœåŠ¡å™¨å”¯ä¸€IDï¼Œé»˜è®¤æ˜¯1ï¼Œå¯ä»¥éšä¾¿é…ç½®ï¼Œåªè¦ä¸é‡å¤å³å¯ replicate-do-db =test // å¤åˆ¶æŸä¸ªåº“,å¦‚æœ‰å¤šä¸ªå†™å¤šè¡Œ replicate-ignore-db=mysql // ä¸å¤åˆ¶æŸä¸ªåº“,å¦‚æœ‰å¤šä¸ªå†™å¤šè¡Œ ä¿å­˜ä¿®æ”¹åé‡å¯4ä¸ªMySQLæœåŠ¡åœ¨Masteråˆ›å»º3ä¸ªMySQLç”¨æˆ·1234567grant replication client,replication slave on *.* to slave3307@'%' identified by 'slave3307';grant replication client,replication slave on *.* to slave3308@'%' identified by 'slave3308';grant replication client,replication slave on *.* to centos7@'%' identified by 'centos7'; flush privileges; ç™»å½•Masteræ‰§è¡Œå‘½ä»¤æŸ¥çœ‹log_poså’Œlog_file123456show master status; +------------------+----------+--------------+------------------+ | File | Position | Binlog_Do_DB | Binlog_Ignore_DB | +------------------+----------+--------------+------------------+ | mysql-bin.000062 | 8233| | | +------------------+----------+--------------+------------------+ æ³¨æ„ æ‰§è¡Œå®Œæ­¤æ­¥éª¤åä¸è¦å†æ“ä½œä¸»æœåŠ¡å™¨MYSQLï¼Œé˜²æ­¢ä¸»æœåŠ¡å™¨çŠ¶æ€å€¼å˜åŒ– é…ç½®ä»æœåŠ¡å™¨Slaveï¼Œä¸‹é¢çš„å‘½ä»¤åˆ†åˆ«åœ¨3ä¸ªMySQLä¸Šæ‰§è¡Œï¼š1234567891011121314change master to master_host=&apos;192.168.19.254&apos;,master_port=3306,master_user=&apos;slave3307&apos;,master_password=&apos;slave3307&apos;,master_log_file=&apos;mysql-bin.000062&apos;,master_log_pos=8233;start slave #å¯åŠ¨ä»æœåŠ¡å™¨å¤åˆ¶åŠŸèƒ½change master to master_host=&apos;192.168.19.254&apos;,master_port=3306,master_user=&apos;slave3308&apos;,master_password=&apos;slave3308&apos;,master_log_file=&apos;mysql-bin.000062&apos;,master_log_pos=8233;start slave #å¯åŠ¨ä»æœåŠ¡å™¨å¤åˆ¶åŠŸèƒ½change master to master_host=&apos;192.168.19.254&apos;,master_port=3306,master_user=&apos;centos7&apos;,master_password=&apos;centos7&apos;,master_log_file=&apos;mysql-bin.000087&apos;,master_log_pos=8233;start slave #å¯åŠ¨ä»æœåŠ¡å™¨å¤åˆ¶åŠŸèƒ½ æ£€æŸ¥Slaveå¤åˆ¶åŠŸèƒ½çš„çŠ¶æ€1show slave status\\G æ³¨æ„ Slave_IOåŠSlave_SQLè¿›ç¨‹å¿…é¡»æ­£å¸¸è¿è¡Œï¼Œå³YESçŠ¶æ€ï¼Œå¦åˆ™éƒ½æ˜¯é”™è¯¯çš„çŠ¶æ€(å¦‚ï¼šå…¶ä¸­ä¸€ä¸ªNOæˆ–è€…å‡ºç°Connection)ã€‚æœ‰æ—¶å€™æ˜¯server-idé…ç½®é”™è¯¯ã€é˜²ç«å¢™æ‹¦æˆªæˆ–è´¦æˆ·æ²¡æœ‰æƒé™ï¼Œä»”ç»†æ£€æŸ¥å„ä¸ªçš„é”™è¯¯æ—¥å¿—ï¼Œå°±èƒ½å¾ˆå¿«æ‰¾åˆ°é—®é¢˜æ‰€åœ¨ã€‚ END ä»¥ä¸Šæ“ä½œè¿‡ç¨‹ï¼Œä¸»ä»æœåŠ¡å™¨é…ç½®å®Œæˆé™„1234#åœ¨Windowsä¸Šæ³¨å†ŒMySQLæ·»åŠ æœåŠ¡C:\\phpStudy\\MySQL3307\\bin\\mysqld install mysql3307 --defaults-file=\"C:\\phpStudy\\MySQL3307\\my.ini\"C:\\phpStudy\\MySQL3308\\bin\\mysqld install mysql3308 --defaults-file=\"C:\\phpStudy\\MySQL3308\\my.ini\" MySQLä¸»ä»å¤åˆ¶è·³è¿‡é”™è¯¯ä¸¤ç§æ–¹å¼ï¼š 12345678910111.è·³è¿‡æŒ‡å®šæ•°é‡çš„äº‹åŠ¡ï¼šmysql&gt;stop slave ;mysql&gt;SET GLOBAL SQL_SLAVE_SKIP_COUNTER = 1; #è·³è¿‡ä¸€ä¸ªäº‹åŠ¡mysql&gt;start slave;2.ä¿®æ”¹mysqlçš„é…ç½®æ–‡ä»¶ï¼Œé€šè¿‡slave_skip_errorså‚æ•°æ¥è·³æ‰€æœ‰é”™è¯¯æˆ–æŒ‡å®šç±»å‹çš„é”™è¯¯vi /etc/my.cnf[mysqld]slave-skip-errors=1062,1053,1146 #è·³è¿‡æŒ‡å®šerror noç±»å‹çš„é”™è¯¯slave-skip-errors=all #è·³è¿‡æ‰€æœ‰é”™è¯¯ 2018å¹´10æœˆ3å·æ›´æ–°ï¼šæ³¨æ„ï¼šå¦‚æœä½ æ˜¯ç›´æ¥å¤åˆ¶MySQLçš„å®‰è£…ç›®å½•ï¼Œè€Œä½ çš„MySQLçš„ç‰ˆæœ¬åˆæ˜¯5.6åŠä»¥åçš„ç‰ˆæœ¬ï¼Œé‚£ä½ æœ‰å¯èƒ½å‡ºç°ä¸‹é¢çš„é—®é¢˜ï¼š 1Fatal error: The slave I/O thread stops because master and slave have equal MySQL server UUIDs; these UUIDs must be different for replication to work. mysql 5.6çš„å¤åˆ¶å¼•å…¥äº†uuidçš„æ¦‚å¿µï¼Œå„ä¸ªå¤åˆ¶ç»“æ„ä¸­çš„server_uuidå¾—ä¿è¯ä¸ä¸€æ ·ï¼Œä½†æ˜¯æŸ¥çœ‹åˆ°ç›´æ¥å¤åˆ¶dataæ–‡ä»¶å¤¹åserver_uuidæ˜¯ç›¸åŒçš„ 1show variables like &apos;%server_uuid%&apos;; è§£å†³æ–¹æ³•ï¼šæ‰¾åˆ°dataæ–‡ä»¶å¤¹ä¸‹çš„auto.cnfæ–‡ä»¶ï¼Œä¿®æ”¹é‡Œé¢çš„uuidå€¼ï¼Œä¿è¯å„ä¸ªdbçš„uuidä¸ä¸€æ ·ï¼Œé‡å¯dbå³å¯ é™„ä¸€ä¸ªæ­£ç¡®slave statusçš„ä¿¡æ¯ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758mysql&gt; show slave status\\G*************************** 1. row *************************** Slave_IO_State: Waiting for master to send event Master_Host: 127.0.0.1 Master_User: slave3307 Master_Port: 3306 Connect_Retry: 60 Master_Log_File: mysql-bin.000007 Read_Master_Log_Pos: 602 Relay_Log_File: mysql-relay.000005 Relay_Log_Pos: 765 Relay_Master_Log_File: mysql-bin.000007 Slave_IO_Running: Yes Slave_SQL_Running: Yes Replicate_Do_DB: Replicate_Ignore_DB: Replicate_Do_Table: Replicate_Ignore_Table: Replicate_Wild_Do_Table: Replicate_Wild_Ignore_Table: Last_Errno: 0 Last_Error: Skip_Counter: 0 Exec_Master_Log_Pos: 602 Relay_Log_Space: 1384 Until_Condition: None Until_Log_File: Until_Log_Pos: 0 Master_SSL_Allowed: No Master_SSL_CA_File: Master_SSL_CA_Path: Master_SSL_Cert: Master_SSL_Cipher: Master_SSL_Key: Seconds_Behind_Master: 0Master_SSL_Verify_Server_Cert: No Last_IO_Errno: 0 Last_IO_Error: Last_SQL_Errno: 0 Last_SQL_Error: Replicate_Ignore_Server_Ids: Master_Server_Id: 1 Master_UUID: fe1b230d-6ee9-11e8-b0c6-9c5c8e103115 Master_Info_File: C:\\phpStudy\\MySQL3307\\data\\master.info SQL_Delay: 0 SQL_Remaining_Delay: NULL Slave_SQL_Running_State: Slave has read all relay log; waiting for the slave I/O thread to update it Master_Retry_Count: 86400 Master_Bind: Last_IO_Error_Timestamp: Last_SQL_Error_Timestamp: Master_SSL_Crl: Master_SSL_Crlpath: Retrieved_Gtid_Set: Executed_Gtid_Set: Auto_Position: 01 row in set (0.00 sec) 2020å¹´03æœˆ15å·æ›´æ–°: binlog_do_dbæ˜¯æŒ‡å®šbinlogæ—¥å¿—è®°å½•é‚£äº›åº“çš„äºŒè¿›åˆ¶æ—¥å¿—ã€‚replicate_do_dbåˆ™åœ¨slaveåº“ä¸­æŒ‡å®šåŒæ­¥é‚£äº›åº“çš„binlogæ—¥å¿—ã€‚åœ¨ä¸»ä»äº’å¤‡ç¯å¢ƒä¸­ï¼Œæœ‰æ²¡æœ‰å¿…è¦æ¯ä¸ªæœåŠ¡å™¨éƒ½åŒæ—¶é…ç½®binlog_do_dbå’Œreplicate_do_db?ç†ç”±æ˜¯ä»€ä¹ˆï¼Ÿ binlog-do-dbï¼šæŒ‡å®šmysqlçš„binlogæ—¥å¿—è®°å½•å“ªä¸ªdbreplicate_do_dbï¼šå‚æ•°æ˜¯åœ¨slaveä¸Šé…ç½®ï¼ŒæŒ‡å®šslaveè¦å¤åˆ¶å“ªä¸ªåº“ åœ¨masterä¸Šè®¾ç½®binlog_do_å¼Šç«¯ï¼š1ã€è¿‡æ»¤æ“ä½œå¸¦æ¥çš„è´Ÿè½½éƒ½åœ¨masterä¸Š2ã€æ— æ³•åšåŸºäºæ—¶é—´ç‚¹çš„å¤åˆ¶ï¼ˆåˆ©ç”¨binlogï¼‰ å¦‚ä½•åˆ é™¤æ—¥å¿—?åˆ©ç”¨ RESET MASTER æˆ–è€… purge reset master ï¼šåˆ é™¤æ‰€æœ‰çš„binglogæ—¥å¿—æ–‡ä»¶ï¼Œå¹¶å°†æ—¥å¿—ç´¢å¼•æ–‡ä»¶æ¸…ç©ºï¼Œé‡æ–°å¼€å§‹æ‰€æœ‰æ–°çš„æ—¥å¿—æ–‡ä»¶ã€‚ç”¨äºç¬¬ä¸€æ¬¡è¿›è¡Œæ­å»ºä¸»ä»åº“æ—¶ï¼Œè¿›è¡Œä¸»åº“binlogåˆå§‹åŒ–å·¥ä½œ æ³¨æ„reset master ä¸åŒäº purge binary logçš„ä¸¤å¤„åœ°æ–¹ reset master å°†åˆ é™¤æ—¥å¿—ç´¢å¼•æ–‡ä»¶ä¸­è®°å½•çš„æ‰€æœ‰binlogæ–‡ä»¶ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„æ—¥å¿—æ–‡ä»¶èµ·å§‹å€¼ä»000001 å¼€å§‹ï¼Œç„¶è€Œpurge binary log å‘½ä»¤å¹¶ä¸ä¼šä¿®æ”¹è®°å½•binlogçš„é¡ºåºçš„æ•°å€¼ reset master ä¸èƒ½ç”¨äºæœ‰ä»»ä½•slave æ­£åœ¨è¿è¡Œçš„ä¸»ä»å…³ç³»çš„ä¸»åº“ã€‚å› ä¸ºåœ¨slave è¿è¡Œæ—¶åˆ» reset master å‘½ä»¤ä¸è¢«æ”¯æŒï¼Œreset master å°†master çš„binlogä»000001 å¼€å§‹è®°å½•,slave è®°å½•çš„master log åˆ™æ˜¯reset master æ—¶ä¸»åº“çš„æœ€æ–°çš„binlog,ä»åº“ä¼šæŠ¥é”™æ— æ³•æ‰¾çš„æŒ‡å®šçš„binlogæ–‡ä»¶ purgeä½¿ç”¨äº‹ä¾‹ 123456# æ¸…é™¤mysql-bin.010æ—¥å¿—purge master logs to 'mysql-bin.010â€™; # æ¸…é™¤2016-02-28 13:00:00å‰çš„æ—¥å¿—purge master logs before '2016-02-28 13:00:00'; # æ¸…é™¤3å¤©å‰çš„binæ—¥å¿—purge master logs before date_sub(now(), interval 3 day);","categories":[],"tags":[{"name":"linux","slug":"linux","permalink":"https://ydstudios.gitee.io/tags/linux/"},{"name":"mysql","slug":"mysql","permalink":"https://ydstudios.gitee.io/tags/mysql/"}]},{"title":"Linux Crontab å®‰è£…ä½¿ç”¨è¯¦ç»†è¯´æ˜","slug":"Linux-Crontab-å®‰è£…ä½¿ç”¨è¯¦ç»†è¯´æ˜","date":"2017-11-15T23:28:38.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/6933ee4e.html","link":"","permalink":"https://ydstudios.gitee.io/post/6933ee4e.html","excerpt":"crontabå‘½ä»¤å¸¸è§äºUnixå’ŒLinuxçš„æ“ä½œç³»ç»Ÿä¹‹ä¸­ï¼Œç”¨äºè®¾ç½®å‘¨æœŸæ€§è¢«æ‰§è¡Œçš„æŒ‡ä»¤ã€‚è¯¥å‘½ä»¤ä»æ ‡å‡†è¾“å…¥è®¾å¤‡è¯»å–æŒ‡ä»¤ï¼Œå¹¶å°†å…¶å­˜æ”¾äºâ€œcrontabâ€æ–‡ä»¶ä¸­ï¼Œä»¥ä¾›ä¹‹åè¯»å–å’Œæ‰§è¡Œã€‚é€šå¸¸ï¼Œcrontabå‚¨å­˜çš„æŒ‡ä»¤è¢«å®ˆæŠ¤è¿›ç¨‹æ¿€æ´»ã€‚crond å¸¸å¸¸åœ¨åå°è¿è¡Œï¼Œæ¯ä¸€åˆ†é’Ÿæ£€æŸ¥æ˜¯å¦æœ‰é¢„å®šçš„ä½œä¸šéœ€è¦æ‰§è¡Œã€‚è¿™ç±»ä½œä¸šä¸€èˆ¬ç§°ä¸ºcron jobsã€‚","text":"crontabå‘½ä»¤å¸¸è§äºUnixå’ŒLinuxçš„æ“ä½œç³»ç»Ÿä¹‹ä¸­ï¼Œç”¨äºè®¾ç½®å‘¨æœŸæ€§è¢«æ‰§è¡Œçš„æŒ‡ä»¤ã€‚è¯¥å‘½ä»¤ä»æ ‡å‡†è¾“å…¥è®¾å¤‡è¯»å–æŒ‡ä»¤ï¼Œå¹¶å°†å…¶å­˜æ”¾äºâ€œcrontabâ€æ–‡ä»¶ä¸­ï¼Œä»¥ä¾›ä¹‹åè¯»å–å’Œæ‰§è¡Œã€‚é€šå¸¸ï¼Œcrontabå‚¨å­˜çš„æŒ‡ä»¤è¢«å®ˆæŠ¤è¿›ç¨‹æ¿€æ´»ã€‚crond å¸¸å¸¸åœ¨åå°è¿è¡Œï¼Œæ¯ä¸€åˆ†é’Ÿæ£€æŸ¥æ˜¯å¦æœ‰é¢„å®šçš„ä½œä¸šéœ€è¦æ‰§è¡Œã€‚è¿™ç±»ä½œä¸šä¸€èˆ¬ç§°ä¸ºcron jobsã€‚ å®‰è£…12yum -y install vixie-cronyum -y install crontabs è¯´æ˜ï¼švixie-cron è½¯ä»¶åŒ…æ˜¯ cron çš„ä¸»ç¨‹åºï¼›crontabs è½¯ä»¶åŒ…æ˜¯ç”¨æ¥å®‰è£…ã€å¸è£…ã€æˆ–åˆ—ä¸¾ç”¨æ¥é©±åŠ¨ cron å®ˆæŠ¤è¿›ç¨‹çš„è¡¨æ ¼çš„ç¨‹åºã€‚ é…ç½®cronæ˜¯linuxçš„å†…ç½®æœåŠ¡ï¼Œä½†å®ƒä¸è‡ªåŠ¨èµ·æ¥ï¼Œå¯ä»¥ç”¨ä»¥ä¸‹çš„æ–¹æ³•å¯åŠ¨ã€å…³é—­è¿™ä¸ªæœåŠ¡ï¼š12345service crond start //å¯åŠ¨æœåŠ¡service crond stop //å…³é—­æœåŠ¡service crond restart //é‡å¯æœåŠ¡service crond reload //é‡æ–°è½½å…¥é…ç½®service crond status //æŸ¥çœ‹crontabæœåŠ¡çŠ¶æ€ åœ¨CentOSç³»ç»Ÿä¸­åŠ å…¥å¼€æœºè‡ªåŠ¨å¯åŠ¨:1chkconfig --level 345 crond on crontab å‘½ä»¤ åŠŸèƒ½ï¼šè®¾ç½®è®¡æ—¶å™¨ã€‚ è¯­æ³•ï¼šcrontab[-u &lt;ç”¨æˆ·åç§°&gt;][é…ç½®æ–‡ä»¶] æˆ– crontab [-u &lt;ç”¨æˆ·åç§°&gt;][-elr]è§£é‡Šï¼šcron æ˜¯ä¸€ä¸ªå¸¸é©»æœåŠ¡ï¼Œå®ƒæä¾›è®¡æ—¶å™¨çš„åŠŸèƒ½ï¼Œè®©ç”¨æˆ·åœ¨ç‰¹å®šçš„æ—¶é—´å¾—ä»¥æ‰§è¡Œé¢„è®¾çš„æŒ‡ä»¤æˆ–ç¨‹åºã€‚åªè¦ç”¨æˆ·ä¼šç¼–è¾‘è®¡æ—¶å™¨çš„é…ç½®æ–‡ä»¶ï¼Œå°±å¯ä»¥ä½¿ ç”¨è®¡æ—¶å™¨çš„åŠŸèƒ½ã€‚å…¶é…ç½®æ–‡ä»¶æ ¼å¼å¦‚ä¸‹ï¼šMinute Hour Day Month DayOFWeek Command å‚æ•°ï¼š-e ç¼–è¾‘è¯¥ç”¨æˆ·çš„è®¡æ—¶å™¨è®¾ç½®ã€‚-l åˆ—å‡ºè¯¥ç”¨æˆ·çš„è®¡æ—¶å™¨è®¾ç½®ã€‚-r åˆ é™¤è¯¥ç”¨æˆ·çš„è®¡æ—¶å™¨è®¾ç½®ã€‚-u&lt;ç”¨æˆ·åç§°&gt; æŒ‡å®šè¦è®¾å®šè®¡æ—¶å™¨çš„ç”¨æˆ·åç§°ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849æ ¼å¼:* * * * * commandåˆ† æ—¶ æ—¥ æœˆ å‘¨ å‘½ä»¤ç¬¬1åˆ—è¡¨ç¤ºåˆ†é’Ÿ1ï½59 æ¯åˆ†é’Ÿç”¨*æˆ–è€… */1è¡¨ç¤ºç¬¬2åˆ—è¡¨ç¤ºå°æ—¶1ï½23ï¼ˆ0è¡¨ç¤º0ç‚¹ï¼‰ç¬¬3åˆ—è¡¨ç¤ºæ—¥æœŸ1ï½31ç¬¬4åˆ—è¡¨ç¤ºæœˆä»½1ï½12ç¬¬5åˆ—æ ‡è¯†å·æ˜ŸæœŸ0ï½6ï¼ˆ0è¡¨ç¤ºæ˜ŸæœŸå¤©ï¼‰ç¬¬6åˆ—è¦è¿è¡Œçš„å‘½ä»¤``` ä¾‹å­ï¼š```bash*/5 * * * * root ab -n 2000 http://60.217.229.252/250k.jpgä¸Šé¢ä¾‹å­è¡¨ç¤ºæ¯5åˆ†é’Ÿæ¨¡æ‹Ÿç”¨æˆ·è®¿é—®http://60.217.229.252/250k.jpg 2000æ¬¡ 30 21 * * * /usr/local/etc/rc.d/lighttpd restartä¸Šé¢çš„ä¾‹å­è¡¨ç¤ºæ¯æ™šçš„21:30é‡å¯apacheã€‚45 4 1,10,22 * * /usr/local/etc/rc.d/lighttpd restartä¸Šé¢çš„ä¾‹å­è¡¨ç¤ºæ¯æœˆ1ã€10ã€22æ—¥çš„4 : 45é‡å¯apacheã€‚10 1 * * 6,0 /usr/local/etc/rc.d/lighttpd restartä¸Šé¢çš„ä¾‹å­è¡¨ç¤ºæ¯å‘¨å…­ã€å‘¨æ—¥çš„1 : 10é‡å¯apacheã€‚0,30 18-23 * * * /usr/local/etc/rc.d/lighttpd restartä¸Šé¢çš„ä¾‹å­è¡¨ç¤ºåœ¨æ¯å¤©18 : 00è‡³23 : 00ä¹‹é—´æ¯éš”30åˆ†é’Ÿé‡å¯apacheã€‚0 23 * * 6 /usr/local/etc/rc.d/lighttpd restartä¸Šé¢çš„ä¾‹å­è¡¨ç¤ºæ¯æ˜ŸæœŸå…­çš„11 : 00 pmé‡å¯apacheã€‚* */1 * * * /usr/local/etc/rc.d/lighttpd restartæ¯ä¸€å°æ—¶é‡å¯apache* 23-7/1 * * * /usr/local/etc/rc.d/lighttpd restartæ™šä¸Š11ç‚¹åˆ°æ—©ä¸Š7ç‚¹ä¹‹é—´ï¼Œæ¯éš”ä¸€å°æ—¶é‡å¯apache0 11 4 * mon-wed /usr/local/etc/rc.d/lighttpd restartæ¯æœˆçš„4å·ä¸æ¯å‘¨ä¸€åˆ°å‘¨ä¸‰çš„11ç‚¹é‡å¯apache0 4 1 jan * /usr/local/etc/rc.d/lighttpd restartä¸€æœˆä¸€å·çš„4ç‚¹é‡å¯apache*/30 * * * * /usr/sbin/ntpdate 210.72.145.44æ¯åŠå°æ—¶åŒæ­¥ä¸€ä¸‹æ—¶é—´","categories":[],"tags":[{"name":"linux","slug":"linux","permalink":"https://ydstudios.gitee.io/tags/linux/"},{"name":"crontab","slug":"crontab","permalink":"https://ydstudios.gitee.io/tags/crontab/"}]},{"title":"PHPç›®å‰æ¯”è¾ƒå¸¸è§çš„äº”å¤§è¿è¡Œæ¨¡å¼","slug":"PHPç›®å‰æ¯”è¾ƒå¸¸è§çš„äº”å¤§è¿è¡Œæ¨¡å¼","date":"2017-11-15T23:10:03.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/fa0692b8.html","link":"","permalink":"https://ydstudios.gitee.io/post/fa0692b8.html","excerpt":"å…³äºPHPç›®å‰æ¯”è¾ƒå¸¸è§çš„äº”å¤§è¿è¡Œæ¨¡å¼ï¼š CGIï¼ˆé€šç”¨ç½‘å…³æ¥å£ / Common Gateway Interfaceï¼‰ FastCGIï¼ˆå¸¸é©»å‹CGI / Long-Live CGIï¼‰ CLIï¼ˆå‘½ä»¤è¡Œè¿è¡Œ / Command Line Interfaceï¼‰ Webæ¨¡å—æ¨¡å¼ï¼ˆApacheç­‰WebæœåŠ¡å™¨è¿è¡Œçš„æ¨¡å¼ï¼‰ ISAPIï¼ˆInternet Server Application Program Interfaceï¼‰","text":"å…³äºPHPç›®å‰æ¯”è¾ƒå¸¸è§çš„äº”å¤§è¿è¡Œæ¨¡å¼ï¼š CGIï¼ˆé€šç”¨ç½‘å…³æ¥å£ / Common Gateway Interfaceï¼‰ FastCGIï¼ˆå¸¸é©»å‹CGI / Long-Live CGIï¼‰ CLIï¼ˆå‘½ä»¤è¡Œè¿è¡Œ / Command Line Interfaceï¼‰ Webæ¨¡å—æ¨¡å¼ï¼ˆApacheç­‰WebæœåŠ¡å™¨è¿è¡Œçš„æ¨¡å¼ï¼‰ ISAPIï¼ˆInternet Server Application Program Interfaceï¼‰ å¤‡æ³¨ï¼šåœ¨PHP5.3ä»¥åï¼ŒPHPä¸å†æœ‰ISAPIæ¨¡å¼ï¼Œå®‰è£…åä¹Ÿä¸å†æœ‰php5isapi.dllè¿™ä¸ªæ–‡ä»¶ã€‚è¦åœ¨IIS6ä¸Šä½¿ç”¨é«˜ç‰ˆæœ¬PHPï¼Œå¿…é¡»å®‰è£…FastCGI æ‰©å±•ï¼Œç„¶åä½¿IIS6æ”¯æŒFastCGIã€‚ CGIæ¨¡å¼ CGIå³é€šç”¨ç½‘å…³æ¥å£ï¼ˆCommon Gateway Interfaceï¼‰ï¼Œå®ƒæ˜¯ä¸€æ®µç¨‹åºï¼Œé€šä¿—çš„è®²CGIå°±è±¡æ˜¯ä¸€åº§æ¡¥ï¼ŒæŠŠç½‘é¡µå’ŒWebæœåŠ¡å™¨ä¸­çš„æ‰§è¡Œç¨‹åºè¿æ¥èµ·æ¥ï¼Œå®ƒæŠŠHTMLæ¥æ”¶çš„æŒ‡ä»¤ä¼ é€’ç»™æœåŠ¡å™¨çš„æ‰§è¡Œç¨‹åºï¼Œå†æŠŠæœåŠ¡å™¨æ‰§è¡Œç¨‹åºçš„ç»“æœè¿”è¿˜ç»™HTMLé¡µã€‚CGI çš„è·¨å¹³å°æ€§èƒ½æä½³ï¼Œå‡ ä¹å¯ä»¥åœ¨ä»»ä½•æ“ä½œç³»ç»Ÿä¸Šå®ç°ã€‚ CGIå·²ç»æ˜¯æ¯”è¾ƒè€çš„æ¨¡å¼äº†ï¼Œè¿™å‡ å¹´éƒ½å¾ˆå°‘ç”¨äº†ã€‚ æ¯æœ‰ä¸€ä¸ªç”¨æˆ·è¯·æ±‚ï¼Œéƒ½ä¼šå…ˆè¦åˆ›å»ºCGIçš„å­è¿›ç¨‹ï¼Œç„¶åå¤„ç†è¯·æ±‚ï¼Œå¤„ç†å®Œåç»“æŸè¿™ä¸ªå­è¿›ç¨‹ï¼Œè¿™å°±æ˜¯Fork-And-Executeæ¨¡å¼ã€‚ å½“ç”¨æˆ·è¯·æ±‚æ•°é‡éå¸¸å¤šæ—¶ï¼Œä¼šå¤§é‡æŒ¤å ç³»ç»Ÿçš„èµ„æºå¦‚å†…å­˜ï¼ŒCPUæ—¶é—´ç­‰ï¼Œé€ æˆæ•ˆèƒ½ä½ä¸‹ã€‚æ‰€ä»¥ç”¨CGIæ–¹å¼çš„æœåŠ¡å™¨æœ‰å¤šå°‘è¿æ¥è¯·æ±‚å°±ä¼šæœ‰å¤šå°‘CGIå­è¿›ç¨‹ï¼Œå­è¿›ç¨‹åå¤åŠ è½½æ˜¯CGIæ€§èƒ½ä½ä¸‹çš„ä¸»è¦åŸå› ã€‚ å¦‚æœä¸æƒ³æŠŠ PHP åµŒå…¥åˆ°æœåŠ¡å™¨ç«¯è½¯ä»¶ï¼ˆå¦‚ Apacheï¼‰ä½œä¸ºä¸€ä¸ªæ¨¡å—å®‰è£…çš„è¯ï¼Œå¯ä»¥é€‰æ‹©ä»¥ CGI çš„æ¨¡å¼å®‰è£…ã€‚æˆ–è€…æŠŠ PHP ç”¨äºä¸åŒçš„ CGI å°è£…ä»¥ä¾¿ä¸ºä»£ç åˆ›å»ºå®‰å…¨çš„ chroot å’Œ setuid ç¯å¢ƒã€‚è¿™æ ·æ¯ä¸ªå®¢æˆ·æœºè¯·æ±‚ä¸€ä¸ªPHPæ–‡ä»¶ï¼ŒWebæœåŠ¡å™¨å°±è°ƒç”¨php.exeï¼ˆwinä¸‹æ˜¯php.exe,linuxæ˜¯phpï¼‰å»è§£é‡Šè¿™ä¸ªæ–‡ä»¶ï¼Œç„¶åå†æŠŠè§£é‡Šçš„ç»“æœä»¥ç½‘é¡µçš„å½¢å¼è¿”å›ç»™å®¢æˆ·æœºã€‚ è¿™ç§å®‰è£…æ–¹å¼é€šå¸¸ä¼šæŠŠ PHP çš„å¯æ‰§è¡Œæ–‡ä»¶å®‰è£…åˆ° web æœåŠ¡å™¨çš„ cgi-bin ç›®å½•ã€‚CERT å»ºè®®ä¹¦ CA-96.11 å»ºè®®ä¸è¦æŠŠä»»ä½•çš„è§£é‡Šå™¨æ”¾åˆ° cgi-bin ç›®å½•ã€‚ è¿™ç§æ–¹å¼çš„å¥½å¤„æ˜¯æŠŠWeb Serverå’Œå…·ä½“çš„ç¨‹åºå¤„ç†ç‹¬ç«‹å¼€æ¥ï¼Œç»“æ„æ¸…æ™°ï¼Œå¯æ§æ€§å¼ºï¼ŒåŒæ—¶ç¼ºç‚¹å°±æ˜¯å¦‚æœåœ¨é«˜è®¿é—®éœ€æ±‚çš„æƒ…å†µä¸‹ï¼ŒCGIçš„è¿›ç¨‹Forkå°±ä¼šæˆä¸ºå¾ˆå¤§çš„æœåŠ¡å™¨è´Ÿæ‹…ï¼Œæƒ³ è±¡ä¸€ä¸‹æ•°ç™¾ä¸ªå¹¶å‘è¯·æ±‚å¯¼è‡´æœåŠ¡å™¨Forkå‡ºæ•°ç™¾ä¸ªè¿›ç¨‹å°±æ˜ç™½äº†ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆCGIä¸€ç›´èƒŒè´Ÿæ€§èƒ½ä½ä¸‹ï¼Œé«˜èµ„æºæ¶ˆè€—çš„æ¶åçš„åŸå› ã€‚ FastCGIæ¨¡å¼ FastCGIæ˜¯CGIçš„å‡çº§ç‰ˆæœ¬ï¼ŒFastCGIåƒæ˜¯ä¸€ä¸ªå¸¸é©» (long-live)å‹çš„ CGIï¼Œå®ƒå¯ä»¥ä¸€ç›´æ‰§è¡Œç€ï¼Œåªè¦æ¿€æ´»åï¼Œä¸ä¼šæ¯æ¬¡éƒ½è¦èŠ±è´¹æ—¶é—´å» Fork ä¸€æ¬¡ ï¼ˆè¿™æ˜¯ CGI æœ€ä¸ºäººè¯Ÿç—…çš„ fork-and-execute æ¨¡å¼ï¼‰ã€‚ FastCGIæ˜¯ä¸€ä¸ªå¯ä¼¸ç¼©åœ°ã€é«˜é€Ÿåœ°åœ¨HTTP serverå’ŒåŠ¨æ€è„šæœ¬è¯­è¨€é—´é€šä¿¡çš„æ¥å£ã€‚å¤šæ•°æµè¡Œçš„HTTP serveréƒ½æ”¯æŒFastCGIï¼ŒåŒ…æ‹¬Apacheã€Nginxå’Œlighttpdç­‰ï¼ŒåŒæ—¶ï¼ŒFastCGIä¹Ÿè¢«è®¸å¤šè„šæœ¬è¯­è¨€æ‰€æ”¯æŒï¼Œå…¶ä¸­å°±æœ‰PHPã€‚ FastCGIæ¥å£æ–¹å¼é‡‡ç”¨C/Sç»“æ„ï¼Œå¯ä»¥å°†HTTPæœåŠ¡å™¨å’Œè„šæœ¬è§£ææœåŠ¡å™¨åˆ†å¼€ï¼ŒåŒæ—¶åœ¨è„šæœ¬è§£ææœåŠ¡å™¨ä¸Šå¯åŠ¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªè„šæœ¬è§£æå®ˆæŠ¤è¿›ç¨‹ã€‚å½“HTTPæœåŠ¡å™¨æ¯æ¬¡é‡åˆ°åŠ¨æ€ç¨‹åºæ—¶ï¼Œå¯ä»¥å°†å…¶ç›´æ¥äº¤ä»˜ç»™FastCGIè¿›ç¨‹æ¥æ‰§è¡Œï¼Œç„¶åå°†å¾—åˆ°çš„ç»“æœè¿”å›ç»™æµè§ˆå™¨ã€‚è¿™ç§æ–¹å¼å¯ä»¥è®©HTTPæœåŠ¡å™¨ä¸“ä¸€åœ°å¤„ç†é™æ€è¯·æ±‚æˆ–è€…å°†åŠ¨æ€è„šæœ¬æœåŠ¡å™¨çš„ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œè¿™åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šæé«˜äº†æ•´ä¸ªåº”ç”¨ç³»ç»Ÿçš„æ€§èƒ½ã€‚ åŸç† Web Serverå¯åŠ¨æ—¶è½½å…¥FastCGIè¿›ç¨‹ç®¡ç†å™¨ï¼ˆIIS ISAPIæˆ–Apache Module)ï¼› FastCGIè¿›ç¨‹ç®¡ç†å™¨è‡ªèº«åˆå§‹åŒ–ï¼Œå¯åŠ¨å¤šä¸ªCGIè§£é‡Šå™¨è¿›ç¨‹ (å¯è§å¤šä¸ªphp-cgi.exeæˆ–php-cig)å¹¶ç­‰å¾…æ¥è‡ªWeb Serverçš„è¿æ¥ï¼› å½“å®¢æˆ·ç«¯è¯·æ±‚åˆ°è¾¾Web Serveræ—¶ï¼ŒFastCGIè¿›ç¨‹ç®¡ç†å™¨é€‰æ‹©å¹¶è¿æ¥åˆ°ä¸€ä¸ªCGIè§£é‡Šå™¨ã€‚Web serverå°†CGIç¯å¢ƒå˜é‡å’Œæ ‡å‡†è¾“å…¥å‘é€åˆ°FastCGIå­è¿›ç¨‹php-cgiï¼› FastCGIå­è¿›ç¨‹å®Œæˆå¤„ç†åå°†æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯ä¿¡æ¯ä»åŒä¸€è¿æ¥è¿”å›WebServerã€‚å½“FastCGIå­è¿›ç¨‹å…³é—­è¿æ¥æ—¶ï¼Œè¯·æ±‚ä¾¿å‘Šå¤„ç†å®Œæˆã€‚FastCGIå­è¿›ç¨‹æ¥ç€ç­‰å¾…å¹¶å¤„ç†æ¥è‡ªFastCGIè¿›ç¨‹ç®¡ç†å™¨ï¼ˆè¿è¡Œåœ¨WebServerä¸­ï¼‰çš„ä¸‹ä¸€ä¸ªè¿æ¥ã€‚åœ¨æ­£å¸¸çš„CGIæ¨¡å¼ä¸­ï¼Œphp-cgi.exeåœ¨æ­¤ä¾¿é€€å‡ºäº†ã€‚åœ¨CGIæ¨¡å¼ä¸­ï¼Œä½ å¯ä»¥æƒ³è±¡CGIé€šå¸¸æœ‰å¤šæ…¢ã€‚æ¯ä¸€ä¸ªWebè¯·æ±‚PHPéƒ½å¿…é¡»é‡æ–°è§£æphp.iniã€é‡æ–°è½½å…¥å…¨éƒ¨dllæ‰©å±•å¹¶é‡åˆå§‹åŒ–å…¨éƒ¨æ•°æ®ç»“æ„ã€‚ä½¿ç”¨FastCGIï¼Œæ‰€æœ‰è¿™äº›éƒ½åªåœ¨è¿›ç¨‹å¯åŠ¨æ—¶å‘ç”Ÿä¸€æ¬¡ã€‚ä¸€ä¸ªé¢å¤–çš„å¥½å¤„æ˜¯ï¼ŒæŒç»­æ•°æ®åº“è¿æ¥ï¼ˆPersistent database connectionï¼‰å¯ä»¥å·¥ä½œã€‚ å¤‡æ³¨ï¼šPHPçš„FastCGIè¿›ç¨‹ç®¡ç†å™¨æ˜¯PHP-FPMï¼ˆPHP-FastCGI Process Managerï¼‰ ä¼˜ç‚¹ ä»ç¨³å®šæ€§ä¸Šçœ‹ï¼ŒFastCGIæ˜¯ä»¥ç‹¬ç«‹çš„è¿›ç¨‹æ± æ¥è¿è¡ŒCGIï¼Œå•ç‹¬ä¸€ä¸ªè¿›ç¨‹æ­»æ‰ï¼Œç³»ç»Ÿå¯ä»¥å¾ˆè½»æ˜“çš„ä¸¢å¼ƒï¼Œç„¶åé‡æ–°åˆ†é…æ–°çš„è¿›ç¨‹æ¥è¿è¡Œé€»è¾‘ï¼› ä»å®‰å…¨æ€§ä¸Šçœ‹ï¼ŒFastCGIæ”¯æŒåˆ†å¸ƒå¼è¿ç®—ã€‚FastCGIå’Œå®¿ä¸»çš„Serverå®Œå…¨ç‹¬ç«‹ï¼ŒFastCGIæ€ä¹ˆdownä¹Ÿä¸ä¼šæŠŠServeræå®ï¼› ä»æ€§èƒ½ä¸Šçœ‹ï¼ŒFastCGIæŠŠåŠ¨æ€é€»è¾‘çš„å¤„ç†ä»Serverä¸­åˆ†ç¦»å‡ºæ¥ï¼Œå¤§è´Ÿè·çš„IOå¤„ç†è¿˜æ˜¯ç•™ç»™å®¿ä¸»Serverï¼Œè¿™æ ·å®¿ä¸»Serverå¯ä»¥ä¸€å¿ƒä¸€æ„ä½œIOï¼Œå¯¹äºä¸€ä¸ªæ™®é€šçš„åŠ¨æ€ç½‘é¡µæ¥è¯´, é€»è¾‘å¤„ç†å¯èƒ½åªæœ‰ä¸€å°éƒ¨åˆ†ï¼Œå¤§é‡çš„æ˜¯å›¾ç‰‡ç­‰é™æ€ã€‚ ç¼ºç‚¹ è¯´å®Œäº†å¥½å¤„ï¼Œä¹Ÿæ¥è¯´è¯´ç¼ºç‚¹ã€‚ä»æˆ‘çš„å®é™…ä½¿ç”¨æ¥çœ‹ï¼Œç”¨FastCGIæ¨¡å¼æ›´é€‚åˆç”Ÿäº§ç¯å¢ƒçš„æœåŠ¡å™¨ã€‚ä½†å¯¹äºå¼€å‘ç”¨æœºå™¨æ¥è¯´å°±ä¸å¤ªåˆé€‚ã€‚å› ä¸ºå½“ä½¿ç”¨ZendStudioè°ƒè¯•ç¨‹åºæ—¶ï¼Œç”±äºFastCGIä¼šè®¤ä¸ºPHPè¿›ç¨‹è¶…æ—¶ï¼Œä»è€Œåœ¨é¡µé¢è¿”å›500é”™è¯¯ã€‚è¿™ä¸€ç‚¹è®©äººéå¸¸æ¼ç«ï¼Œæ‰€ä»¥æˆ‘åœ¨å¼€å‘æœºå™¨ä¸Šè¿˜æ˜¯æ¢å›äº†ISAPIæ¨¡å¼ã€‚å¯¹æŸäº›æœåŠ¡å™¨çš„æ–°ç‰ˆæœ¬æ”¯æŒä¸å¥½ï¼Œå¯¹åˆ†å¸ƒå¼è´Ÿè½½å‡è¡¡æ²¡è¦æ±‚çš„æ¨¡å—åŒ–å®‰è£…æ˜¯å¦æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚ç›®å‰çš„FastCGIå’ŒServeræ²Ÿé€šè¿˜ä¸å¤Ÿæ™ºèƒ½ï¼Œä¸€ä¸ªFastCGIè¿›ç¨‹å¦‚æœæ‰§è¡Œæ—¶é—´è¿‡é•¿ä¼šè¢«å½“æˆæ˜¯æ­»è¿›ç¨‹æ€æ‰é‡èµ·ï¼Œè¿™æ ·åœ¨å¤„ç†é•¿æ—¶é—´ä»»åŠ¡çš„æ—¶å€™å¾ˆéº»çƒ¦ï¼Œè¿™æ ·åšä¹Ÿä½¿å¾—FastCGIæ— æ³•å…è®¸è”æœºè°ƒè¯•ã€‚å› ä¸ºæ˜¯å¤šè¿›ç¨‹ï¼Œæ‰€ä»¥æ¯”CGIå¤šçº¿ç¨‹æ¶ˆè€—æ›´å¤šçš„æœåŠ¡å™¨å†…å­˜ï¼ŒPHP-CGIè§£é‡Šå™¨æ¯è¿›ç¨‹æ¶ˆè€—7è‡³25å…†å†…å­˜ï¼Œå°†è¿™ä¸ªæ•°å­—ä¹˜ä»¥50æˆ–100å°±æ˜¯å¾ˆå¤§çš„å†…å­˜æ•°ã€‚ CLIæ¨¡å¼ PHP-CLIæ˜¯PHP Command Line Interfaceçš„ç®€ç§°ï¼Œå¦‚åŒå®ƒåå­—çš„æ„æ€ï¼Œå°±æ˜¯PHPåœ¨å‘½ä»¤è¡Œè¿è¡Œçš„æ¥å£ï¼ŒåŒºåˆ«äºåœ¨WebæœåŠ¡å™¨ä¸Šè¿è¡Œçš„PHPç¯å¢ƒï¼ˆPHP-CGIï¼ŒISAPIç­‰ï¼‰ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼ŒPHPä¸å•å¯ä»¥å†™å‰å°ç½‘é¡µï¼Œå®ƒè¿˜å¯ä»¥ç”¨æ¥å†™åå°çš„ç¨‹åºã€‚PHPçš„CLIShellè„šæœ¬é€‚ç”¨äºæ‰€æœ‰çš„PHPä¼˜åŠ¿ï¼Œä½¿åˆ›å»ºè¦ä¹ˆæ”¯æŒè„šæœ¬æˆ–ç³»ç»Ÿç”šè‡³ä¸GUIåº”ç”¨ç¨‹åºçš„æœåŠ¡ç«¯ï¼Œåœ¨Windowså’ŒLinuxä¸‹éƒ½æ˜¯æ”¯æŒPHP-CLIæ¨¡å¼çš„ã€‚ ä¼˜ç‚¹ ä½¿ç”¨å¤šè¿›ç¨‹ï¼Œå­è¿›ç¨‹ç»“æŸä»¥åï¼Œå†…æ ¸ä¼šè´Ÿè´£å›æ”¶èµ„æºï¼› ä½¿ç”¨å¤šè¿›ç¨‹ï¼Œå­è¿›ç¨‹å¼‚å¸¸é€€å‡ºä¸ä¼šå¯¼è‡´æ•´ä¸ªè¿›ç¨‹Threadé€€å‡ºï¼Œçˆ¶è¿›ç¨‹è¿˜æœ‰æœºä¼šé‡å»ºæµç¨‹ï¼› ä¸€ä¸ªå¸¸é©»ä¸»è¿›ç¨‹ï¼Œåªè´Ÿè´£ä»»åŠ¡åˆ†å‘ï¼Œé€»è¾‘æ›´æ¸…æ¥šã€‚æˆ‘ä»¬åœ¨Linuxä¸‹ç»å¸¸ä½¿ç”¨â€phpâ€“mâ€æŸ¥æ‰¾PHPå®‰è£…äº†é‚£äº›æ‰©å±•å°±æ˜¯PHPå‘½ä»¤è¡Œè¿è¡Œæ¨¡å¼ï¼›æœ‰å…´è¶£çš„åŒå­¦å¯ä»¥è¾“å…¥â€php â€“hâ€å»æ·±å…¥ç ”ç©¶è¯¥è¿è¡Œæ¨¡å¼ã€‚ æ¨¡å—æ¨¡å¼ æ¨¡å—æ¨¡å¼æ˜¯ä»¥mod_php5æ¨¡å—çš„å½¢å¼é›†æˆï¼Œæ­¤æ—¶mod_php5æ¨¡å—çš„ä½œç”¨æ˜¯æ¥æ”¶Apacheä¼ é€’è¿‡æ¥çš„PHPæ–‡ä»¶è¯·æ±‚ï¼Œå¹¶å¤„ç†è¿™äº›è¯·æ±‚ï¼Œç„¶åå°†å¤„ç†åçš„ç»“æœè¿”å›ç»™Apacheã€‚å¦‚æœæˆ‘ä»¬åœ¨Apacheå¯åŠ¨å‰åœ¨å…¶é…ç½®æ–‡ä»¶ä¸­é…ç½®å¥½äº†PHPæ¨¡å—ï¼ˆmod_php5ï¼‰ï¼Œ PHPæ¨¡å—é€šè¿‡æ³¨å†Œapache2çš„ap_hook_post_configæŒ‚é’©ï¼Œåœ¨Apacheå¯åŠ¨çš„æ—¶å€™å¯åŠ¨æ­¤æ¨¡å—ä»¥æ¥å—PHPæ–‡ä»¶çš„è¯·æ±‚ã€‚ é™¤äº†è¿™ç§å¯åŠ¨æ—¶çš„åŠ è½½æ–¹å¼ï¼ŒApacheçš„æ¨¡å—å¯ä»¥åœ¨è¿è¡Œçš„æ—¶å€™åŠ¨æ€è£…è½½ï¼Œè¿™æ„å‘³ç€å¯¹æœåŠ¡å™¨å¯ä»¥è¿›è¡ŒåŠŸèƒ½æ‰©å±•è€Œä¸éœ€è¦é‡æ–°å¯¹æºä»£ç è¿›è¡Œç¼–è¯‘ï¼Œç”šè‡³æ ¹æœ¬ä¸éœ€è¦åœæ­¢æœåŠ¡å™¨ã€‚æˆ‘ä»¬æ‰€éœ€è¦åšçš„ä»…ä»…æ˜¯ç»™æœåŠ¡å™¨å‘é€ä¿¡å·HUPæˆ–è€…AP_SIG_GRACEFULé€šçŸ¥æœåŠ¡å™¨é‡æ–°è½½å…¥æ¨¡å—ã€‚ä½†æ˜¯åœ¨åŠ¨æ€åŠ è½½ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å°†æ¨¡å—ç¼–è¯‘æˆä¸ºåŠ¨æ€é“¾æ¥åº“ã€‚æ­¤æ—¶çš„åŠ¨æ€åŠ è½½å°±æ˜¯åŠ è½½åŠ¨æ€é“¾æ¥åº“ã€‚ Apacheä¸­å¯¹åŠ¨æ€é“¾æ¥åº“çš„å¤„ç†æ˜¯é€šè¿‡æ¨¡å—mod_soæ¥å®Œæˆçš„ï¼Œå› æ­¤mod_soæ¨¡å—ä¸èƒ½è¢«åŠ¨æ€åŠ è½½ï¼Œå®ƒåªèƒ½è¢«é™æ€ç¼–è¯‘è¿›Apacheçš„æ ¸å¿ƒã€‚è¿™æ„å‘³ç€å®ƒæ˜¯éšç€Apacheä¸€èµ·å¯åŠ¨çš„ã€‚ Apacheæ˜¯å¦‚ä½•åŠ è½½æ¨¡å—çš„å‘¢ï¼Ÿæˆ‘ä»¬ä»¥å‰é¢æåˆ°çš„mod_php5æ¨¡å—ä¸ºä¾‹ã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦åœ¨Apacheçš„é…ç½®æ–‡ä»¶httpd.confä¸­æ·»åŠ ä¸€è¡Œï¼šLoadModule php5_module modules/mod_php5.so è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†LoadModuleå‘½ä»¤ï¼Œè¯¥å‘½ä»¤çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ¨¡å—çš„åç§°ï¼Œåç§°å¯ä»¥åœ¨æ¨¡å—å®ç°çš„æºç ä¸­æ‰¾åˆ°ã€‚ç¬¬äºŒä¸ªé€‰é¡¹æ˜¯è¯¥æ¨¡å—æ‰€å¤„çš„è·¯å¾„ã€‚å¦‚æœéœ€è¦åœ¨æœåŠ¡å™¨è¿è¡Œæ—¶åŠ è½½æ¨¡å—ï¼Œå¯ä»¥é€šè¿‡å‘é€ä¿¡å·HUPæˆ–è€…AP_SIG_GRACEFULç»™æœåŠ¡å™¨ï¼Œä¸€æ—¦æ¥å—åˆ°è¯¥ä¿¡å·ï¼ŒApacheå°†é‡æ–°è£…è½½æ¨¡å—ï¼Œè€Œä¸éœ€è¦é‡æ–°å¯åŠ¨æœåŠ¡å™¨ã€‚ è¯¥è¿è¡Œæ¨¡å¼æ˜¯æˆ‘ä»¬ä»¥å‰åœ¨windowsç¯å¢ƒä¸‹ä½¿ç”¨apacheæœåŠ¡å™¨ç»å¸¸ä½¿ç”¨çš„ï¼Œè€Œåœ¨æ¨¡å—åŒ–ï¼ˆDLLï¼‰ä¸­ï¼ŒPHPæ˜¯ä¸WebæœåŠ¡å™¨ä¸€èµ·å¯åŠ¨å¹¶è¿è¡Œçš„ã€‚ï¼ˆå®ƒæ˜¯apacheåœ¨CGIçš„åŸºç¡€ä¸Šè¿›è¡Œçš„ä¸€ç§æ‰©å±•ï¼ŒåŠ å¿«PHPçš„è¿è¡Œæ•ˆç‡ï¼‰ã€‚ ISAPIæ¨¡å¼ ISAPIï¼ˆInternet Server Application Program Interfaceï¼‰æ˜¯å¾®è½¯æä¾›çš„ä¸€å¥—é¢å‘InternetæœåŠ¡çš„APIæ¥å£ï¼Œä¸€ä¸ªISAPIçš„DLLï¼Œå¯ä»¥åœ¨è¢«ç”¨æˆ·è¯·æ±‚æ¿€æ´»åé•¿é©»å†…å­˜ï¼Œç­‰å¾…ç”¨æˆ·çš„å¦ä¸€ä¸ªè¯·æ±‚ï¼Œè¿˜å¯ä»¥åœ¨ä¸€ä¸ªDLLé‡Œè®¾ç½®å¤šä¸ªç”¨æˆ·è¯·æ±‚å¤„ç†å‡½æ•°ï¼Œæ­¤å¤–ï¼ŒISAPIçš„DLLåº”ç”¨ç¨‹åºå’ŒWWWæœåŠ¡å™¨å¤„äºåŒä¸€ä¸ªè¿›ç¨‹ä¸­ï¼Œæ•ˆç‡è¦æ˜¾è‘—é«˜äºCGIã€‚ï¼ˆç”±äºå¾®è½¯çš„æ’ä»–æ€§ï¼Œåªèƒ½è¿è¡Œäºwindowsç¯å¢ƒï¼‰PHPä½œä¸ºApacheæ¨¡å—ï¼ŒApacheæœåŠ¡å™¨åœ¨ç³»ç»Ÿå¯åŠ¨åï¼Œé¢„å…ˆç”Ÿæˆå¤šä¸ªè¿›ç¨‹å‰¯æœ¬é©»ç•™åœ¨å†…å­˜ä¸­ï¼Œä¸€æ—¦æœ‰è¯·æ±‚å‡ºç°ï¼Œå°±ç«‹å³ä½¿ç”¨è¿™äº›ç©ºä½™çš„å­è¿›ç¨‹è¿›è¡Œå¤„ç†ï¼Œè¿™æ ·å°±ä¸å­˜åœ¨ç”Ÿæˆå­è¿›ç¨‹é€ æˆçš„å»¶è¿Ÿäº†ã€‚è¿™äº›æœåŠ¡å™¨å‰¯æœ¬åœ¨å¤„ç†å®Œä¸€æ¬¡HTTPè¯·æ±‚ä¹‹åå¹¶ä¸ç«‹å³é€€å‡ºï¼Œè€Œæ˜¯åœç•™åœ¨è®¡ç®—æœºä¸­ç­‰å¾…ä¸‹æ¬¡è¯·æ±‚ã€‚å¯¹äºå®¢æˆ·æµè§ˆå™¨çš„è¯·æ±‚ååº”æ›´å¿«ï¼Œæ€§èƒ½è¾ƒé«˜ã€‚","categories":[],"tags":[{"name":"php","slug":"php","permalink":"https://ydstudios.gitee.io/tags/php/"}]},{"title":"è§£å†³gité»˜è®¤ä¸åŒºåˆ†æ–‡ä»¶åå¤§å°å†™çš„é—®é¢˜","slug":"è§£å†³gité»˜è®¤ä¸åŒºåˆ†æ–‡ä»¶åå¤§å°å†™çš„é—®é¢˜","date":"2017-11-13T22:46:50.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/8598d574.html","link":"","permalink":"https://ydstudios.gitee.io/post/8598d574.html","excerpt":"å½“ä½ åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å,å« readme.md å†™å…¥å†…å®¹å æäº¤åˆ°çº¿ä¸Šä»£ç ä»“åº“.ç„¶åä½ åœ¨æœ¬åœ°ä¿®æ”¹æ–‡ä»¶åä¸º Readme.md æ¥ç€ä½ å»æäº¤,å‘ç°ä»£ç æ²¡æœ‰å˜åŒ–.","text":"å½“ä½ åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å,å« readme.md å†™å…¥å†…å®¹å æäº¤åˆ°çº¿ä¸Šä»£ç ä»“åº“.ç„¶åä½ åœ¨æœ¬åœ°ä¿®æ”¹æ–‡ä»¶åä¸º Readme.md æ¥ç€ä½ å»æäº¤,å‘ç°ä»£ç æ²¡æœ‰å˜åŒ–. 1git status ä½ ä¼šæ— ä»»ä½•æç¤ºä¿¡æ¯,å…¶å® git é»˜è®¤å¯¹äºæ–‡ä»¶åå¤§å°å†™æ˜¯ä¸æ•æ„Ÿçš„,æ‰€ä»¥ä¸Šé¢ä½ ä¿®æ”¹äº†é¦–å­—æ¯å¤§å†™,ä½†æ˜¯git å¹¶æ²¡æœ‰å‘ç°ä»£ç ä»»ä½•æ”¹åŠ¨.é‚£ä¹ˆå¦‚ä½•æ‰èƒ½è®© git è¯†åˆ«æ–‡ä»¶åå¤§å°å†™å˜åŒ–. ä¸€ é…ç½®git ä½¿å…¶å¯¹æ–‡ä»¶åå¤§å°å†™æ•æ„Ÿ 1git config core.ignorecase false äºŒ ä»git æœ¬åœ°ä»“åº“åˆ é™¤æ­¤æ–‡ä»¶,ç„¶åæ·»åŠ å†æäº¤(1) åˆ é™¤ 1git rm readme.md (2) é‡æ–°æ·»åŠ  1git add Readme.md (3)æäº¤ 1git commit -m 'Readme.md' è¿™æ ·gitä¸åŒºåˆ†æ–‡ä»¶åå¤§å°å†™çš„é—®é¢˜å°±è§£å†³äº†ï¼","categories":[],"tags":[]},{"title":"éšè—Nginxæˆ–Apacheä»¥åŠPHPçš„ç‰ˆæœ¬å·","slug":"éšè—Nginxæˆ–Apacheä»¥åŠPHPçš„ç‰ˆæœ¬å·","date":"2017-11-13T22:40:48.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/adb014f8.html","link":"","permalink":"https://ydstudios.gitee.io/post/adb014f8.html","excerpt":"å½“ä½ é…ç½®å®Œä¸€å°æœåŠ¡å™¨åï¼Œå¹¶ä¸æ˜¯å°±å¯ä»¥é«˜æ•æ— å¿§äº†ï¼Œç”±äºè½¯ä»¶éš¾å…ä¼šæœ‰æ¼æ´ï¼Œé˜²æ­¢å› ä¸ºæ¼æ´å¯¼è‡´ä¸€äº›æŸå¤±ï¼Œæ‰€ä»¥è¯´ç»å¸¸å…³æ³¨å®‰å…¨å…¬å‘Šå¹¶åŠæ—¶å‡çº§æœåŠ¡å™¨ä¹Ÿæ˜¯å¿…è¦çš„ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œé»‘å®¢æ”»å‡»æœåŠ¡å™¨çš„é¦–è¦æ­¥éª¤å°±æ˜¯æ”¶é›†ä¿¡æ¯ï¼Œæ¯”å¦‚è¯´ä½ çš„è½¯ä»¶ç‰ˆæœ¬ï¼Œè¿™äº›å°†æˆä¸ºä¸‹ä¸€æ­¥æœ‰é’ˆå¯¹æ€§æ”»å‡»çš„ä¾æ®ã€‚æ‰€ä»¥è¯´ä¸€å®šç¨‹åº¦çš„éšè—è¿™äº›ä¿¡æ¯å°±æ˜¾å¾—éå¸¸æœ‰å¿…è¦äº†ï¼Œæœ¬æ–‡å°†ç®€å•ä»‹ç»å¦‚ä½•åœ¨ç½‘ç»œä¸Šéšè—Nginxç‰ˆæœ¬å·ä»¥åŠPHPçš„ç‰ˆæœ¬å·ã€‚","text":"å½“ä½ é…ç½®å®Œä¸€å°æœåŠ¡å™¨åï¼Œå¹¶ä¸æ˜¯å°±å¯ä»¥é«˜æ•æ— å¿§äº†ï¼Œç”±äºè½¯ä»¶éš¾å…ä¼šæœ‰æ¼æ´ï¼Œé˜²æ­¢å› ä¸ºæ¼æ´å¯¼è‡´ä¸€äº›æŸå¤±ï¼Œæ‰€ä»¥è¯´ç»å¸¸å…³æ³¨å®‰å…¨å…¬å‘Šå¹¶åŠæ—¶å‡çº§æœåŠ¡å™¨ä¹Ÿæ˜¯å¿…è¦çš„ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œé»‘å®¢æ”»å‡»æœåŠ¡å™¨çš„é¦–è¦æ­¥éª¤å°±æ˜¯æ”¶é›†ä¿¡æ¯ï¼Œæ¯”å¦‚è¯´ä½ çš„è½¯ä»¶ç‰ˆæœ¬ï¼Œè¿™äº›å°†æˆä¸ºä¸‹ä¸€æ­¥æœ‰é’ˆå¯¹æ€§æ”»å‡»çš„ä¾æ®ã€‚æ‰€ä»¥è¯´ä¸€å®šç¨‹åº¦çš„éšè—è¿™äº›ä¿¡æ¯å°±æ˜¾å¾—éå¸¸æœ‰å¿…è¦äº†ï¼Œæœ¬æ–‡å°†ç®€å•ä»‹ç»å¦‚ä½•åœ¨ç½‘ç»œä¸Šéšè—Nginxç‰ˆæœ¬å·ä»¥åŠPHPçš„ç‰ˆæœ¬å·ã€‚ æˆ‘ä»¬ç”¨å‘½ä»¤æµ‹è¯•ä¸€ä¸‹ï¼Œæ˜¾ç¤ºæœåŠ¡å™¨ä¸Šç‰ˆæœ¬ä¿¡æ¯ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š 1curl -I http://127.0.0.1/phpinfo.php ç»“æœæ˜¾ç¤ºäº†å¦‚ä¸‹å†…å®¹ï¼š 1234567HTTP/1.1 200 OKServer: nginx/1.5.0Date: Thu, 18 Jun 2015 02:39:32 GMTContent-Type: text/htmlConnection: keep-aliveVary: Accept-EncodingX-Powered-By: PHP/5.3.1 å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„æœåŠ¡å™¨nginxå’Œphpç‰ˆæœ¬éƒ½æš´éœ²äº†ã€‚é‚£è¯¥å¦‚ä½•éšè—ç‰ˆæœ¬å·å‘¢ï¼Ÿ 1.å…ˆè¯´éšè—Nginxç‰ˆæœ¬å·ï¼ŒNginxçš„ç‰ˆæœ¬å·ä¸»è¦åœ¨ä¸¤ä¸ªåœ°æ–¹ä¼šæœ‰ï¼Œä¸€ä¸ªæ˜¯HTTP headerï¼Œæœ‰ä¸ªServer:nginx/1.x.xç±»ä¼¼ä¼šæš´éœ²WebæœåŠ¡å™¨æ‰€ç”¨è½¯ä»¶åç§°ä»¥åŠç‰ˆæœ¬å·ï¼Œè¿™ä¸ªä¹Ÿæ˜¯å¤§å¤šæ•°WebæœåŠ¡å™¨æœ€å®¹æ˜“æš´éœ²ç‰ˆæœ¬å·çš„åœ°æ–¹ï¼Œç¬¬äºŒä¸ªåœ°æ–¹æ˜¯Nginxå‡ºé”™é¡µé¢ï¼Œæ¯”å¦‚404é¡µé¢æ²¡æœ‰æ‰¾åˆ°ç­‰ï¼Œè¿™æ˜¯å¦‚æœç”¨æˆ·æ²¡æœ‰æŒ‡å®šé¡µé¢çš„è¯ï¼Œé‚£ä¹ˆNginxè‡ªå·±çš„é¡µé¢ä¼šæœ‰ç‰ˆæœ¬æˆ³è®°ã€‚ åœ¨nginxé…ç½®æ–‡ä»¶ä¸­httpèŠ‚çš„é…ç½®,åŠ å…¥ä»¥ä¸‹ä»£ç ï¼š 1234http &#123; # ...çœç•¥ä¸€äº›é…ç½® server_tokens off; &#125; æœ€ååˆ«å¿˜äº†ä½¿ç”¨å‘½ä»¤nginx -s reloadåˆ·æ–°å½“å‰é…ç½®ã€‚å®Œæˆåä½ å¯ä»¥æŸ¥çœ‹æ‰€æœ‰é¡µé¢çš„å“åº”å¤´æˆ–è€…é”™è¯¯é¡µï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯åªçœ‹åˆ°nginxå­—æ ·è€Œçœ‹ä¸åˆ°ç‰ˆæœ¬å·ï¼Ÿä»€ä¹ˆï¼Ÿä½ æƒ³è¿nginxä¹Ÿæ”¹æ‰ï¼Ÿå‘µå‘µï¼Œè¿™ä¸ªææ€•å°±éº»çƒ¦äº†ï¼Œéœ€è¦æ”¹åŠ¨Nginxæºä»£ç ç„¶åé‡æ–°ç¼–è¯‘ï¼Œæ„Ÿå…´è¶£çš„ç«¥é‹å¯ä»¥ç ”ç©¶ä¸‹ï¼åœ¨apacheé…ç½®æ–‡ä»¶httpd.confä¸­,åŠ å…¥ä»¥ä¸‹ä»£ç ï¼š 12ServerTokens ProdServerSignature Off è®°å¾—ä¿å­˜åé‡å¯ä¸€ä¸‹apache! 2.éšè—PHPçš„ç‰ˆæœ¬å·ï¼ŒPHPå®¹æ˜“æš´éœ²çš„ç‰ˆæœ¬å·åœ¨ä»€ä¹ˆåœ°æ–¹å‘¢ï¼Ÿå…¶å®ä¹Ÿæ˜¯åœ¨HTTPå¤´ï¼Œä»¥ç±»ä¼¼X-Powered-By: PHP/5.2.11è¿™ç§å½¢å¼å­˜åœ¨ã€‚ å…¶å®è¿™ä¸ªæ˜¯åœ¨PHPçš„é…ç½®æ–‡ä»¶php.inié‡Œæ”¹åŠ¨ï¼Œæ‰“å¼€php.iniï¼Œæ‰¾åˆ°ä¸‹é¢å™è¿°ï¼š 123456; Decides whether PHP may expose the fact that it is installed on the server; (e.g. by adding its signature to the Web server header). It is no security; threat in any way, but it makes it possible to determine whether you use PHP; on your server or not.; http://php.net/expose-phpexpose_php = On expose_php = Onæ”¹ä¸ºexpose_php = Offå°±æå®šäº†ï¼Œå½“ç„¶ï¼Œå¯¹äºapacheæœåŠ¡å™¨è¿˜æœ‰å¦å¤–ä¸€ä¸ªæ–¹æ³•å¯ä»¥ç›´æ¥å°è¯•åœ¨.htaccessæ–‡ä»¶ä¸­Header unset X-Powered-Byï¼Œåˆ é™¤X-Powered-ByèŠ‚ï¼Œä¸è¿‡æˆ‘è¿˜æ˜¯å»ºè®®æ”¹åŠ¨php.iniçš„expose_phpã€‚","categories":[],"tags":[]},{"title":"å¦‚ä½•æ­£ç¡®çš„ä¿®æ”¹Pythonçš„pipè‡ªå¸¦çš„æº","slug":"å¦‚ä½•æ­£ç¡®çš„ä¿®æ”¹Pythonçš„pipè‡ªå¸¦çš„æº","date":"2017-11-13T22:06:56.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/cf179e51.html","link":"","permalink":"https://ydstudios.gitee.io/post/cf179e51.html","excerpt":"Pythonä¸­çš„pipå®‰è£…ä¾èµ–åŒ…æ—¶é»˜è®¤è®¿é—®https://pypi.python.org/simple/ï¼Œä½†æ˜¯ç»å¸¸å‡ºç°ä¸ç¨³å®šä»¥åŠè®¿é—®é€Ÿåº¦éå¸¸æ…¢çš„æƒ…å†µï¼Œå›½å†…å‚å•†æä¾›çš„pipyé•œåƒç›®å‰å¯ç”¨çš„æœ‰ï¼š 1.http://pypi.douban.com/ è±†ç“£2.http://pypi.mirrors.ustc.edu.cn/simple/ ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦","text":"Pythonä¸­çš„pipå®‰è£…ä¾èµ–åŒ…æ—¶é»˜è®¤è®¿é—®https://pypi.python.org/simple/ï¼Œä½†æ˜¯ç»å¸¸å‡ºç°ä¸ç¨³å®šä»¥åŠè®¿é—®é€Ÿåº¦éå¸¸æ…¢çš„æƒ…å†µï¼Œå›½å†…å‚å•†æä¾›çš„pipyé•œåƒç›®å‰å¯ç”¨çš„æœ‰ï¼š 1.http://pypi.douban.com/ è±†ç“£2.http://pypi.mirrors.ustc.edu.cn/simple/ ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦ æœ‰ä¸¤ç§æ–¹å¼ä½¿ç”¨æˆ‘ä»¬è‡ªå·±æŒ‡å®šçš„é•œåƒæºï¼Œç¬¬ä¸€ç§æ˜¯æ‰‹åŠ¨æŒ‡å®šï¼š 1pip -i http://pypi.douban.com/simple install Flask -- trusted-host pypi.douban.com ä¸è¿‡è¿™ç§æ–¹å¼åœ¨æ¯æ¬¡å®‰è£…æ—¶éƒ½è¦æ‰‹åŠ¨æŒ‡å®šï¼Œæ‰€ä»¥ç¬¬äºŒç§æ–¹æ³•æ›´åŠ æ–¹ä¾¿ï¼Œåœ¨å½“å‰ç”¨æˆ·ç›®å½•ä¸‹åˆ›å»º.pipæ–‡ä»¶å¤¹ä¸­ï¼Œä»£ç å¦‚ä¸‹ï¼š 1234567891011121314import osini=\"\"\"[global]index-url = https://pypi.doubanio.com/simple/[install]trusted-host=pypi.doubanio.com\"\"\"pippath=os.environ[\"USERPROFILE\"]+\"\\\\pip\\\\\"if not os.path.exists(pippath): os.mkdir(pippath)with open(pippath+\"pip.ini\",\"w+\") as f: f.write(ini) ä¸ªäººè§‰å¾—ç¬¬äºŒç§æ–¹æ³•æœ€ä½³ï¼Œä¸€æ¬¡æ‰§è¡Œç»ˆèº«æ— å¿§ï¼","categories":[],"tags":[]},{"title":"Linuxæ–‡ä»¶æ—¶é—´è¯¦è§£ ctimeã€mtimeå’Œatime","slug":"Linuxæ–‡ä»¶æ—¶é—´è¯¦è§£-ctimeã€mtimeå’Œatime","date":"2017-11-10T23:01:09.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/6652f017.html","link":"","permalink":"https://ydstudios.gitee.io/post/6652f017.html","excerpt":"Linuxç³»ç»Ÿæ–‡ä»¶æœ‰ä¸‰ä¸ªä¸»è¦çš„æ—¶é—´å±æ€§ï¼Œåˆ†åˆ«æ˜¯ ctime(change time), atime(access time), mtime(modify time)ã€‚è¿™ä¸‰ä¸ªæ—¶é—´å¾ˆå®¹æ˜“æ··æ·†ï¼Œå‡†å¤‡æ·±å…¥äº†è§£Linuxçš„ç«¥é‹è¯·åŒºåˆ†è¿™ä¸‰è€…çš„åŒºåˆ«ã€‚","text":"Linuxç³»ç»Ÿæ–‡ä»¶æœ‰ä¸‰ä¸ªä¸»è¦çš„æ—¶é—´å±æ€§ï¼Œåˆ†åˆ«æ˜¯ ctime(change time), atime(access time), mtime(modify time)ã€‚è¿™ä¸‰ä¸ªæ—¶é—´å¾ˆå®¹æ˜“æ··æ·†ï¼Œå‡†å¤‡æ·±å…¥äº†è§£Linuxçš„ç«¥é‹è¯·åŒºåˆ†è¿™ä¸‰è€…çš„åŒºåˆ«ã€‚ atimeï¼šAccess timeï¼Œæ˜¯åœ¨è¯»å–æ–‡ä»¶æˆ–è€…æ‰§è¡Œæ–‡ä»¶æ—¶æ›´æ”¹ï¼Œå³æ–‡ä»¶æœ€åä¸€æ¬¡è¢«è¯»å–çš„æ—¶é—´ã€‚è¯´æ˜ï¼š st_atime 12Time when file data was last accessed. Changed by the following functions: creat(), mknod(), pipe(), utime(2), and read(2). mtimeï¼šModified timeï¼Œæ˜¯åœ¨å†™å…¥æ–‡ä»¶æ—¶éšæ–‡ä»¶å†…å®¹çš„æ›´æ”¹è€Œæ›´æ”¹ï¼Œæ˜¯æŒ‡æ–‡ä»¶å†…å®¹æœ€åä¸€æ¬¡è¢«ä¿®æ”¹çš„æ—¶é—´ã€‚è¯´æ˜ï¼š st_mtime 12Time when data was last modified. Changed by the following functions: creat(), mknod(), pipe(), utime(), and write(2). ctimeï¼šChange timeï¼Œæ˜¯åœ¨å†™å…¥æ–‡ä»¶ã€æ›´æ”¹æ‰€æœ‰è€…ã€æƒé™æˆ–é“¾æ¥è®¾ç½®æ—¶éš Inode çš„å†…å®¹æ›´æ”¹è€Œæ›´æ”¹ï¼Œå³æ–‡ä»¶çŠ¶æ€æœ€åä¸€æ¬¡è¢«æ”¹å˜çš„æ—¶é—´ã€‚è¯´æ˜ï¼š st_ctime 12Time when file status was last changed. Changed by the following functions: chmod(), chown(), creat(), link(2), mknod(), pipe(), unlink(2), utime(), and write(). å¾ˆå¤šäººæŠŠå®ƒç†è§£æˆcreate timeï¼ŒåŒ…æ‹¬å¾ˆå¤šè¯¯å¯¼äººçš„ä¹¦ç±ä¹Ÿæ˜¯è¿™ä¹ˆå†™ã€‚å®é™…ä¸Šctimeæ˜¯æŒ‡change timeã€‚æ³¨æ„ï¼š1ã€ä¿®æ”¹æ˜¯æ–‡æœ¬æœ¬èº«çš„å†…å®¹å‘ç”Ÿäº†å˜åŒ–ï¼ˆmtimeï¼‰æ”¹å˜æ˜¯æ–‡ä»¶çš„ç´¢å¼•èŠ‚ç‚¹å‘ç”Ÿäº†æ”¹å˜ï¼ˆctimeï¼‰2ã€å¦‚æœä¿®æ”¹äº†æ–‡ä»¶å†…å®¹ï¼Œåˆ™åŒæ—¶æ›´æ–°ctimeå’Œmtime3ã€å¦‚æœåªæ”¹å˜äº†æ–‡ä»¶ç´¢å¼•èŠ‚ç‚¹ï¼Œæ¯”å¦‚ä¿®æ”¹æƒé™ï¼Œåˆ™åªæ˜¯æ”¹å˜äº†ctime4ã€å¦‚æœä½¿ç”¨ext3æ–‡ä»¶ç³»ç»Ÿçš„æ—¶å€™ï¼Œåœ¨mountçš„æ—¶å€™ä½¿ç”¨äº†noatimeå‚æ•°åˆ™ä¸ä¼šæ›´æ–°atimeçš„ä¿¡æ¯ï¼Œå³è®¿é—®æ–‡ä»¶ä¹‹åatimeä¸ä¼šè¢«ä¿®æ”¹ï¼Œè€Œè¿™ä¸ªä¸ä»£è¡¨çœŸå®æƒ…å†µå°çŸ¥è¯†ï¼šè¿™ä¸‰ä¸ª time stamp éƒ½æ”¾åœ¨ inode ä¸­ã€‚è‹¥mtime,atimeä¿®æ”¹, inode å°±ä¸€å®šä¼šæ”¹,ç›¸åº”çš„inodeæ”¹äº†,é‚£ctime ä¹Ÿå°±è·Ÿç€è¦æ”¹äº†ï¼Œä¹‹æ‰€ä»¥åœ¨mount optionä¸­ä½¿ç”¨ noatime, å°±æ˜¯ä¸æƒ³ file system åšå¤ªå¤šçš„ä¿®æ”¹, ä»è€Œæ”¹å–„è¯»å–æ€§èƒ½.æŸ¥çœ‹æ–‡ä»¶çš„ atimeã€ctime å’Œ mtimeã€‚ 12345678910# ls -lc filename åˆ—å‡ºæ–‡ä»¶çš„ ctime# ls -lu filename åˆ—å‡ºæ–‡ä»¶çš„ atime# ls -l filename åˆ—å‡ºæ–‡ä»¶çš„ mtime#ä¾‹å­1ï¼š # echo \"Hello World\" &gt;&gt; myfile atimeä¸å˜,åŒæ—¶æ”¹å˜äº†ctimeå’Œmtime2ï¼š # cat myfile ctimeå’Œmtimeä¸å˜ï¼Œåªæ”¹å˜atime# ls myfilectimeå’Œmtimeä»¥åŠatimeéƒ½ä¸æ”¹å˜3ï¼š # chmod u+x myfile mtimeå’Œatimeä¸å˜ï¼Œåªæ”¹å˜ctime4ï¼š # mv myfile ../ mtimeå’Œatimeä¸å˜ï¼Œåªæ”¹å˜ctime å…¶ä»–æ‰©å±•ï¼šrelatimeå±æ€§ä»kernel2.6.29å¼€å§‹ï¼Œé»˜è®¤é›†æˆäº†ä¸€ä¸ª relatimeçš„å±æ€§ã€‚ä½¿ç”¨è¿™ä¸ªç‰¹æ€§æ¥æŒ‚è£…æ–‡ä»¶ç³»ç»Ÿåï¼Œåªæœ‰å½“mtimeæ¯”atimeæ›´æ–°çš„æ—¶å€™ï¼Œæ‰ä¼šæ›´æ–°atimeã€‚ä½¿ç”¨åœºæ™¯ï¼šåœ¨æ–‡ä»¶è¯»æ“ä½œå¾ˆé¢‘ç¹çš„ç³»ç»Ÿä¸­ï¼Œatimeæ›´æ–°æ‰€å¸¦æ¥çš„å¼€é”€å¾ˆå¤§ï¼Œæ‰€ä»¥åœ¨æŒ‚è£…æ–‡ä»¶ç³»ç»Ÿçš„æ—¶å€™ä½¿ç”¨noatimeå±æ€§æ¥åœæ­¢æ›´æ–°atimeã€‚ä½†æ˜¯æœ‰äº›ç¨‹åºéœ€è¦æ ¹æ®atimeè¿›è¡Œä¸€äº›åˆ¤æ–­å’Œæ“ä½œï¼Œè¿™ä¸ªæ—¶å€™relatimeç‰¹æ€§å°±æ´¾ä¸Šç”¨åœºäº†ã€‚å…¶å®åœ¨äº‹å®ä¸Šï¼Œè¿™ä¸ªæ—¶å€™atimeå’Œmtimeå·²ç»æ˜¯åŒä¸€ä¸ªtimeï¼Œæ‰€ä»¥å¯ä»¥ç†è§£è¿™ä¸ªé€‰é¡¹å°±æ˜¯ä¸ºäº†å®ç°å¯¹atimeçš„å…¼å®¹æ‰æ¨å‡ºçš„ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªæ–°çš„æ—¶é—´å±æ€§ã€‚ä½¿ç”¨æ–¹æ³•ï¼š 1# mount -o relatime /dir##æŒ‚è½½ç›®å½•çš„æ—¶å€™åŠ relatimeå‚æ•°","categories":[],"tags":[{"name":"linux","slug":"linux","permalink":"https://ydstudios.gitee.io/tags/linux/"}]},{"title":"apacheå‡ºç°no input file specified.çš„å®Œç¾è§£å†³æ–¹æ¡ˆ","slug":"apacheå‡ºç°no-input-file-specified-çš„å®Œç¾è§£å†³æ–¹æ¡ˆ","date":"2017-11-10T22:53:58.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/ff626742.html","link":"","permalink":"https://ydstudios.gitee.io/post/ff626742.html","excerpt":"å¯ç”¨rewriteçš„ä¼ªé™æ€åŠŸèƒ½çš„æ—¶å€™ï¼Œé¦–é¡µå¯ä»¥è®¿é—®ï¼Œè€Œè®¿é—®å†…é¡µçš„æ—¶å€™ï¼Œå°±æç¤ºï¼šâ€œNo input file specified.â€åŸå› åœ¨äºä½¿ç”¨çš„PHPæ˜¯fast_cgiæ¨¡å¼ï¼Œè€Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¸èƒ½æ­£ç¡®è¯†åˆ«path_infoæ‰€é€ æˆçš„é”™è¯¯ï¼ŒWordpressçš„ä¼ªé™æ€ä¹Ÿæœ‰ä¸€æ ·çš„é—®é¢˜ã€‚","text":"å¯ç”¨rewriteçš„ä¼ªé™æ€åŠŸèƒ½çš„æ—¶å€™ï¼Œé¦–é¡µå¯ä»¥è®¿é—®ï¼Œè€Œè®¿é—®å†…é¡µçš„æ—¶å€™ï¼Œå°±æç¤ºï¼šâ€œNo input file specified.â€åŸå› åœ¨äºä½¿ç”¨çš„PHPæ˜¯fast_cgiæ¨¡å¼ï¼Œè€Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¸èƒ½æ­£ç¡®è¯†åˆ«path_infoæ‰€é€ æˆçš„é”™è¯¯ï¼ŒWordpressçš„ä¼ªé™æ€ä¹Ÿæœ‰ä¸€æ ·çš„é—®é¢˜ã€‚ Wordpressç¨‹åºé»˜è®¤çš„.htaccessé‡Œé¢çš„è§„åˆ™ï¼š 12345RewriteEngine OnRewriteBase /RewriteCond %&#123;REQUEST_FILENAME&#125; !-fRewriteCond %&#123;REQUEST_FILENAME&#125; !-dRewriteRule ^(.*)$ /index.php/$1 [L] å…¶å®â€œNo input file specified.â€ï¼Œæ˜¯æ²¡æœ‰å¾—åˆ°æœ‰æ•ˆçš„æ–‡ä»¶è·¯å¾„é€ æˆçš„ã€‚ä¿®æ”¹ä¼ªé™æ€è§„åˆ™ï¼Œå¦‚ä¸‹ï¼š 12345RewriteEngine OnRewriteBase /RewriteCond %&#123;REQUEST_FILENAME&#125; !-fRewriteCond %&#123;REQUEST_FILENAME&#125; !-dRewriteRule ^(.*)$ /index.php?/$1 [L] æœ‰æ²¡æœ‰å‘ç°ä¸åŒï¼Ÿå…¶å®å°±æ˜¯åœ¨æ­£åˆ™ç»“æœâ€œ/$1â€å‰é¢å¤šåŠ äº†ä¸€ä¸ªâ€œ?â€å·ï¼Œé—®é¢˜ä¹Ÿå°±éšä¹‹è§£å†³äº†ã€‚","categories":[],"tags":[{"name":"nginx","slug":"nginx","permalink":"https://ydstudios.gitee.io/tags/nginx/"}]},{"title":"git pullæ“ä½œå¤±è´¥çš„é—®é¢˜","slug":"git-pullæ“ä½œå¤±è´¥çš„é—®é¢˜","date":"2017-11-10T22:53:13.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/a774f745.html","link":"","permalink":"https://ydstudios.gitee.io/post/a774f745.html","excerpt":"ä½¿ç”¨gitç‰ˆæœ¬æ§åˆ¶ï¼Œæäº¤ä»£ç åˆ°æµ‹è¯•ç¯å¢ƒï¼Œå‘ç°ä»£ç æ²¡æœ‰æ›´æ–°ï¼Œç›´æ¥åœ¨æœåŠ¡å™¨ä¸Šç”¨å‘½ä»¤è¡Œæ“ä½œçš„æ—¶å€™å‡ºç°ä¸‹é¢çš„é”™è¯¯ï¼š","text":"ä½¿ç”¨gitç‰ˆæœ¬æ§åˆ¶ï¼Œæäº¤ä»£ç åˆ°æµ‹è¯•ç¯å¢ƒï¼Œå‘ç°ä»£ç æ²¡æœ‰æ›´æ–°ï¼Œç›´æ¥åœ¨æœåŠ¡å™¨ä¸Šç”¨å‘½ä»¤è¡Œæ“ä½œçš„æ—¶å€™å‡ºç°ä¸‹é¢çš„é”™è¯¯ï¼š 123456789101112www@iZ23oqentptZ:~/develop.dameiweb.com/webroot$ git pullerror: Cannot update the ref 'refs/remotes/origin/develop': unable to append to .git/logs/refs/remotes/origin/develop: Permission deniedFrom git.dameiweb.com:dm/www.dameiweb.com ! 3fa3fb3..297aa33 develop -&gt; origin/develop (unable to update local ref)error: Cannot update the ref 'refs/remotes/origin/master': unable to append to .git/logs/refs/remotes/origin/master: Permission denied ! 0eadc3f..d8ad757 master -&gt; origin/master (unable to update local ref) é€šè¿‡æŸ¥çœ‹æ–‡ä»¶çš„æƒé™ï¼Œå‘ç°.gitæ–‡ä»¶å¤¹ä¸‹æ–‡ä»¶çš„æƒé™ä¸å¯¹ï¼Œæœ‰çš„æ–‡ä»¶ä¸å±äºgitè´¦å·ï¼ˆgitçš„ç”¨æˆ·æ˜¯wwwï¼‰ï¼Œå‡ºç°è¿™ä¸ªæƒ…å†µå¯èƒ½æ˜¯ç”¨ä¸åŒçš„è´¦å·å»æ‰§è¡Œgitå‘½ä»¤ï¼Œè­¬å¦‚æˆ‘ä»¬è¿™å°±æ˜¯ä½¿ç”¨rootè´¦å·æ“ä½œè¿‡ã€‚ è§£å†³åŠæ³•å°±æ˜¯ç”¨rootè´¦æˆ·ä¿®æ”¹.gitæ–‡ä»¶çš„æƒé™,.gitæ–‡ä»¶çš„æ‰€æœ‰è€…å’Œæ‰€å±ç»„éƒ½æ˜¯www,äºæ˜¯æ‰§è¡Œå‘½ä»¤ï¼š 12#æ–‡ä»¶çš„æ‰€æœ‰è€…å’Œæ‰€å±ç»„ä¿®æ”¹æˆwwwchown -R www:www .git æ‰§è¡Œå®Œå‘½ä»¤ä¹‹åï¼ŒæŸ¥çœ‹æ–‡ä»¶çš„æƒé™ä¿®æ”¹æˆåŠŸåï¼Œå†åˆ‡æ¢æˆwwwç”¨æˆ·ï¼Œæ‰§è¡Œgit pullï¼Œæ›´æ–°æˆåŠŸï¼ å¤§å®¶åˆ‡è®°ï¼Œlinuxä¸‹æƒé™å¾ˆé‡è¦ï¼Œä¸ç”¨ä¹±ç”¨ä¸ç”¨çš„ç”¨æˆ·ï¼Œè¿™æ ·ä¼šå¯¼è‡´æ–‡ä»¶çš„æ‰€æœ‰è€…å’Œæ‰€å±ç»„å‘ç”Ÿæ”¹å˜ï¼","categories":[],"tags":[]},{"title":"gitçš„.gitignoreè§„åˆ™ä¸ç”Ÿæ•ˆçš„è§£å†³åŠæ³•","slug":"gitçš„-gitignoreè§„åˆ™ä¸ç”Ÿæ•ˆçš„è§£å†³åŠæ³•","date":"2017-11-10T22:51:42.000Z","updated":"2019-12-09T15:03:26.000Z","comments":true,"path":"post/8b084705.html","link":"","permalink":"https://ydstudios.gitee.io/post/8b084705.html","excerpt":"åœ¨gitä¸­å¦‚æœæƒ³å¿½ç•¥æ‰æŸä¸ªæ–‡ä»¶ï¼Œä¸è®©è¿™ä¸ªæ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬åº“ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä¿®æ”¹æ ¹ç›®å½•ä¸­ .gitignore æ–‡ä»¶çš„æ–¹æ³•ï¼ˆå¦‚æ— ï¼Œåˆ™éœ€è‡ªå·±æ‰‹å·¥å»ºç«‹æ­¤æ–‡ä»¶ï¼‰ã€‚è¿™ä¸ªæ–‡ä»¶æ¯ä¸€è¡Œä¿å­˜äº†ä¸€ä¸ªåŒ¹é…çš„è§„åˆ™ä¾‹å¦‚ï¼š","text":"åœ¨gitä¸­å¦‚æœæƒ³å¿½ç•¥æ‰æŸä¸ªæ–‡ä»¶ï¼Œä¸è®©è¿™ä¸ªæ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬åº“ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä¿®æ”¹æ ¹ç›®å½•ä¸­ .gitignore æ–‡ä»¶çš„æ–¹æ³•ï¼ˆå¦‚æ— ï¼Œåˆ™éœ€è‡ªå·±æ‰‹å·¥å»ºç«‹æ­¤æ–‡ä»¶ï¼‰ã€‚è¿™ä¸ªæ–‡ä»¶æ¯ä¸€è¡Œä¿å­˜äº†ä¸€ä¸ªåŒ¹é…çš„è§„åˆ™ä¾‹å¦‚ï¼š 123456# æ­¤ä¸ºæ³¨é‡Š â€“ å°†è¢« Git å¿½ç•¥*.a # å¿½ç•¥æ‰€æœ‰ .a ç»“å°¾çš„æ–‡ä»¶!lib.a # ä½† lib.a é™¤å¤–/TODO # ä»…ä»…å¿½ç•¥é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ TODO æ–‡ä»¶ï¼Œä¸åŒ…æ‹¬ subdir/TODObuild/ # å¿½ç•¥ build/ ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶doc/*.txt # ä¼šå¿½ç•¥ doc/notes.txt ä½†ä¸åŒ…æ‹¬ doc/server/arch.txt è§„åˆ™å¾ˆç®€å•ï¼Œä¸åšè¿‡å¤šè§£é‡Šï¼Œä½†æ˜¯æœ‰æ—¶å€™åœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œçªç„¶å¿ƒè¡€æ¥æ½®æƒ³æŠŠæŸäº›ç›®å½•æˆ–æ–‡ä»¶åŠ å…¥å¿½ç•¥è§„åˆ™ï¼ŒæŒ‰ç…§ä¸Šè¿°æ–¹æ³•å®šä¹‰åå‘ç°å¹¶æœªç”Ÿæ•ˆï¼ŒåŸå› æ˜¯.gitignoreåªèƒ½å¿½ç•¥é‚£äº›åŸæ¥æ²¡æœ‰è¢«trackçš„æ–‡ä»¶ï¼Œå¦‚æœæŸäº›æ–‡ä»¶å·²ç»è¢«çº³å…¥äº†ç‰ˆæœ¬ç®¡ç†ä¸­ï¼Œåˆ™ä¿®æ”¹.gitignoreæ˜¯æ— æ•ˆçš„ã€‚é‚£ä¹ˆè§£å†³æ–¹æ³•å°±æ˜¯å…ˆæŠŠæœ¬åœ°ç¼“å­˜åˆ é™¤ï¼ˆæ”¹å˜æˆæœªtrackçŠ¶æ€ï¼‰ï¼Œç„¶åå†æäº¤ï¼š 123git rm -r --cached .git add .git commit -m 'update .gitignore' è¿™æ ·gitçš„å¿½ç•¥è§„åˆ™ä¸ç”Ÿæ•ˆçš„é—®é¢˜å°±è§£å†³äº†ï¼","categories":[],"tags":[]}]}